(self.webpackChunktpclinica_online=self.webpackChunktpclinica_online||[]).push([[179],{8255:ut=>{function Ne(U){return Promise.resolve().then(()=>{var T=new Error("Cannot find module '"+U+"'");throw T.code="MODULE_NOT_FOUND",T})}Ne.keys=()=>[],Ne.resolve=Ne,Ne.id=8255,ut.exports=Ne},8583:(ut,Ne,U)=>{"use strict";U.d(Ne,{mr:()=>Ae,ez:()=>tl,K0:()=>ve,Do:()=>je,V_:()=>W,Ye:()=>Be,S$:()=>ue,mk:()=>Js,sg:()=>Br,O5:()=>hn,b0:()=>Te,lw:()=>ae,EM:()=>tr,JF:()=>Eo,PM:()=>cs,w_:()=>oe,bD:()=>Os,q:()=>G,Mx:()=>bt,HT:()=>re});var T=U(3018);let f=null;function G(){return f}function re(R){f||(f=R)}class oe{}const ve=new T.OlP("DocumentToken");let ae=(()=>{class R{historyGo(N){throw new Error("Not implemented")}}return R.\u0275fac=function(N){return new(N||R)},R.\u0275prov=(0,T.Yz7)({factory:J,token:R,providedIn:"platform"}),R})();function J(){return(0,T.LFG)(Z)}const W=new T.OlP("Location Initialized");let Z=(()=>{class R extends ae{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(N){const j=G().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",N,!1),()=>j.removeEventListener("popstate",N)}onHashChange(N){const j=G().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",N,!1),()=>j.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,j,te){de()?this._history.pushState(N,j,te):this.location.hash=te}replaceState(N,j,te){de()?this._history.replaceState(N,j,te):this.location.hash=te}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return R.\u0275fac=function(N){return new(N||R)(T.LFG(ve))},R.\u0275prov=(0,T.Yz7)({factory:le,token:R,providedIn:"platform"}),R})();function de(){return!!window.history.pushState}function le(){return new Z((0,T.LFG)(ve))}function Ee(R,L){if(0==R.length)return L;if(0==L.length)return R;let N=0;return R.endsWith("/")&&N++,L.startsWith("/")&&N++,2==N?R+L.substring(1):1==N?R+L:R+"/"+L}function Ve(R){const L=R.match(/#|\?|$/),N=L&&L.index||R.length;return R.slice(0,N-("/"===R[N-1]?1:0))+R.slice(N)}function Me(R){return R&&"?"!==R[0]?"?"+R:R}let ue=(()=>{class R{historyGo(N){throw new Error("Not implemented")}}return R.\u0275fac=function(N){return new(N||R)},R.\u0275prov=(0,T.Yz7)({factory:Oe,token:R,providedIn:"root"}),R})();function Oe(R){const L=(0,T.LFG)(ve).location;return new Te((0,T.LFG)(ae),L&&L.origin||"")}const Ae=new T.OlP("appBaseHref");let Te=(()=>{class R extends ue{constructor(N,j){if(super(),this._platformLocation=N,this._removeListenerFns=[],null==j&&(j=this._platformLocation.getBaseHrefFromDOM()),null==j)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=j}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return Ee(this._baseHref,N)}path(N=!1){const j=this._platformLocation.pathname+Me(this._platformLocation.search),te=this._platformLocation.hash;return te&&N?`${j}${te}`:j}pushState(N,j,te,we){const We=this.prepareExternalUrl(te+Me(we));this._platformLocation.pushState(N,j,We)}replaceState(N,j,te,we){const We=this.prepareExternalUrl(te+Me(we));this._platformLocation.replaceState(N,j,We)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var j,te;null===(te=(j=this._platformLocation).historyGo)||void 0===te||te.call(j,N)}}return R.\u0275fac=function(N){return new(N||R)(T.LFG(ae),T.LFG(Ae,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac}),R})(),je=(()=>{class R extends ue{constructor(N,j){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(N){const j=Ee(this._baseHref,N);return j.length>0?"#"+j:j}pushState(N,j,te,we){let We=this.prepareExternalUrl(te+Me(we));0==We.length&&(We=this._platformLocation.pathname),this._platformLocation.pushState(N,j,We)}replaceState(N,j,te,we){let We=this.prepareExternalUrl(te+Me(we));0==We.length&&(We=this._platformLocation.pathname),this._platformLocation.replaceState(N,j,We)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var j,te;null===(te=(j=this._platformLocation).historyGo)||void 0===te||te.call(j,N)}}return R.\u0275fac=function(N){return new(N||R)(T.LFG(ae),T.LFG(Ae,8))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac}),R})(),Be=(()=>{class R{constructor(N,j){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=N;const te=this._platformStrategy.getBaseHref();this._platformLocation=j,this._baseHref=Ve(Pt(te)),this._platformStrategy.onPopState(we=>{this._subject.emit({url:this.path(!0),pop:!0,state:we.state,type:we.type})})}path(N=!1){return this.normalize(this._platformStrategy.path(N))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(N,j=""){return this.path()==this.normalize(N+Me(j))}normalize(N){return R.stripTrailingSlash(function(R,L){return R&&L.startsWith(R)?L.substring(R.length):L}(this._baseHref,Pt(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._platformStrategy.prepareExternalUrl(N)}go(N,j="",te=null){this._platformStrategy.pushState(te,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Me(j)),te)}replaceState(N,j="",te=null){this._platformStrategy.replaceState(te,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Me(j)),te)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(N=0){var j,te;null===(te=(j=this._platformStrategy).historyGo)||void 0===te||te.call(j,N)}onUrlChange(N){this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}))}_notifyUrlChangeListeners(N="",j){this._urlChangeListeners.forEach(te=>te(N,j))}subscribe(N,j,te){return this._subject.subscribe({next:N,error:j,complete:te})}}return R.\u0275fac=function(N){return new(N||R)(T.LFG(ue),T.LFG(ae))},R.normalizeQueryParams=Me,R.joinWithSlash=Ee,R.stripTrailingSlash=Ve,R.\u0275prov=(0,T.Yz7)({factory:Xe,token:R,providedIn:"root"}),R})();function Xe(){return new Be((0,T.LFG)(ue),(0,T.LFG)(ae))}function Pt(R){return R.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Zero=0]="Zero",Ie[Ie.One=1]="One",Ie[Ie.Two=2]="Two",Ie[Ie.Few=3]="Few",Ie[Ie.Many=4]="Many",Ie[Ie.Other=5]="Other",Ie))();const pn=T.kL8;class hr{}let mn=(()=>{class R extends hr{constructor(N){super(),this.locale=N}getPluralCategory(N,j){switch(pn(j||this.locale)(N)){case Ie.Zero:return"zero";case Ie.One:return"one";case Ie.Two:return"two";case Ie.Few:return"few";case Ie.Many:return"many";default:return"other"}}}return R.\u0275fac=function(N){return new(N||R)(T.LFG(T.soG))},R.\u0275prov=T.Yz7({token:R,factory:R.\u0275fac}),R})();function bt(R,L){L=encodeURIComponent(L);for(const N of R.split(";")){const j=N.indexOf("="),[te,we]=-1==j?[N,""]:[N.slice(0,j),N.slice(j+1)];if(te.trim()===L)return decodeURIComponent(we)}return null}let Js=(()=>{class R{constructor(N,j,te,we){this._iterableDiffers=N,this._keyValueDiffers=j,this._ngEl=te,this._renderer=we,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(N){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof N?N.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(N){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof N?N.split(/\s+/):N,this._rawClass&&((0,T.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const N=this._iterableDiffer.diff(this._rawClass);N&&this._applyIterableChanges(N)}else if(this._keyValueDiffer){const N=this._keyValueDiffer.diff(this._rawClass);N&&this._applyKeyValueChanges(N)}}_applyKeyValueChanges(N){N.forEachAddedItem(j=>this._toggleClass(j.key,j.currentValue)),N.forEachChangedItem(j=>this._toggleClass(j.key,j.currentValue)),N.forEachRemovedItem(j=>{j.previousValue&&this._toggleClass(j.key,!1)})}_applyIterableChanges(N){N.forEachAddedItem(j=>{if("string"!=typeof j.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,T.AaK)(j.item)}`);this._toggleClass(j.item,!0)}),N.forEachRemovedItem(j=>this._toggleClass(j.item,!1))}_applyClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(j=>this._toggleClass(j,!0)):Object.keys(N).forEach(j=>this._toggleClass(j,!!N[j])))}_removeClasses(N){N&&(Array.isArray(N)||N instanceof Set?N.forEach(j=>this._toggleClass(j,!1)):Object.keys(N).forEach(j=>this._toggleClass(j,!1)))}_toggleClass(N,j){(N=N.trim())&&N.split(/\s+/g).forEach(te=>{j?this._renderer.addClass(this._ngEl.nativeElement,te):this._renderer.removeClass(this._ngEl.nativeElement,te)})}}return R.\u0275fac=function(N){return new(N||R)(T.Y36(T.ZZ4),T.Y36(T.aQg),T.Y36(T.SBq),T.Y36(T.Qsj))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),R})();class Ba{constructor(L,N,j,te){this.$implicit=L,this.ngForOf=N,this.index=j,this.count=te}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Br=(()=>{class R{constructor(N,j,te){this._viewContainer=N,this._template=j,this._differs=te,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;if(!this._differ&&N)try{this._differ=this._differs.find(N).create(this.ngForTrackBy)}catch(j){throw new Error(`Cannot find a differ supporting object '${N}' of type '${function(R){return R.name||typeof R}(N)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const j=[];N.forEachOperation((te,we,We)=>{if(null==te.previousIndex){const st=this._viewContainer.createEmbeddedView(this._template,new Ba(null,this._ngForOf,-1,-1),null===We?void 0:We),Vt=new fr(te,st);j.push(Vt)}else if(null==We)this._viewContainer.remove(null===we?void 0:we);else if(null!==we){const st=this._viewContainer.get(we);this._viewContainer.move(st,We);const Vt=new fr(te,st);j.push(Vt)}});for(let te=0;te<j.length;te++)this._perViewChange(j[te].view,j[te].record);for(let te=0,we=this._viewContainer.length;te<we;te++){const We=this._viewContainer.get(te);We.context.index=te,We.context.count=we,We.context.ngForOf=this._ngForOf}N.forEachIdentityChange(te=>{this._viewContainer.get(te.currentIndex).context.$implicit=te.item})}_perViewChange(N,j){N.context.$implicit=j.item}static ngTemplateContextGuard(N,j){return!0}}return R.\u0275fac=function(N){return new(N||R)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),R})();class fr{constructor(L,N){this.record=L,this.view=N}}let hn=(()=>{class R{constructor(N,j){this._viewContainer=N,this._context=new qn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Nt("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Nt("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,j){return!0}}return R.\u0275fac=function(N){return new(N||R)(T.Y36(T.s_b),T.Y36(T.Rgc))},R.\u0275dir=T.lG2({type:R,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),R})();class qn{constructor(){this.$implicit=null,this.ngIf=null}}function Nt(R,L){if(L&&!L.createEmbeddedView)throw new Error(`${R} must be a TemplateRef, but received '${(0,T.AaK)(L)}'.`)}let tl=(()=>{class R{}return R.\u0275fac=function(N){return new(N||R)},R.\u0275mod=T.oAB({type:R}),R.\u0275inj=T.cJS({providers:[{provide:hr,useClass:mn}]}),R})();const Os="browser";function cs(R){return"server"===R}let tr=(()=>{class R{}return R.\u0275prov=(0,T.Yz7)({token:R,providedIn:"root",factory:()=>new Ho((0,T.LFG)(ve),window)}),R})();class Ho{constructor(L,N){this.document=L,this.window=N,this.offset=()=>[0,0]}setOffset(L){this.offset=Array.isArray(L)?()=>L:L}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(L){this.supportsScrolling()&&this.window.scrollTo(L[0],L[1])}scrollToAnchor(L){if(!this.supportsScrolling())return;const N=function(R,L){const N=R.getElementById(L)||R.getElementsByName(L)[0];if(N)return N;if("function"==typeof R.createTreeWalker&&R.body&&(R.body.createShadowRoot||R.body.attachShadow)){const j=R.createTreeWalker(R.body,NodeFilter.SHOW_ELEMENT);let te=j.currentNode;for(;te;){const we=te.shadowRoot;if(we){const We=we.getElementById(L)||we.querySelector(`[name="${L}"]`);if(We)return We}te=j.nextNode()}}return null}(this.document,L);N&&(this.scrollToElement(N),this.attemptFocus(N))}setHistoryScrollRestoration(L){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=L)}}scrollToElement(L){const N=L.getBoundingClientRect(),j=N.left+this.window.pageXOffset,te=N.top+this.window.pageYOffset,we=this.offset();this.window.scrollTo(j-we[0],te-we[1])}attemptFocus(L){return L.focus(),this.document.activeElement===L}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const L=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!L||!L.writable&&!L.set)}catch(L){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(L){return!1}}}function Ei(R){return Object.getOwnPropertyDescriptor(R,"scrollRestoration")}class Eo{}},3018:(ut,Ne,U)=>{"use strict";U.d(Ne,{deG:()=>al,tb:()=>aI,AFp:()=>Oy,ip1:()=>r0,CZH:()=>pu,hGG:()=>ES,z2F:()=>zf,sBO:()=>uE,Sil:()=>Oi,_Vd:()=>Df,EJc:()=>uI,SBq:()=>Is,qLn:()=>Le,vpe:()=>Lo,gxx:()=>Id,tBr:()=>pl,XFs:()=>ze,OlP:()=>Qn,zs3:()=>ur,ZZ4:()=>Xd,aQg:()=>iy,soG:()=>Py,YKP:()=>oy,v3s:()=>YA,h0i:()=>jc,PXZ:()=>DI,R0b:()=>Pi,FiY:()=>ra,Lbi:()=>oI,g9A:()=>sI,Qsj:()=>tE,FYo:()=>_g,JOm:()=>Cc,Tiy:()=>ey,q3G:()=>ir,tp0:()=>Ta,EAV:()=>nS,Rgc:()=>Rf,dDg:()=>pI,DyG:()=>cl,q4F:()=>ny,GfV:()=>ty,s_b:()=>bg,ifc:()=>$n,eFA:()=>Uy,G48:()=>l0,Gpc:()=>Me,X6Q:()=>Vy,_c5:()=>fS,VLi:()=>HA,c2e:()=>RA,zSh:()=>Tc,wAp:()=>Mt,vHH:()=>Te,EiD:()=>dp,mCW:()=>Fu,qzn:()=>pc,JVY:()=>c_,pB0:()=>Aa,eBb:()=>Sh,L6k:()=>Ah,LAX:()=>gc,cg1:()=>Gm,Tjo:()=>lS,kL8:()=>vw,yhl:()=>Th,dqk:()=>ee,sIi:()=>Yh,CqO:()=>ng,QGY:()=>Mm,F4k:()=>Om,RDi:()=>N,AaK:()=>le,z3N:()=>fs,qOj:()=>Nd,TTD:()=>$a,_Bn:()=>Yd,xp6:()=>D_,uIk:()=>zp,ekj:()=>No,Suo:()=>BC,Xpm:()=>mo,lG2:()=>pa,Yz7:()=>vn,cJS:()=>wr,oAB:()=>Vo,Yjl:()=>oi,Y36:()=>Oa,_UZ:()=>eg,qZA:()=>kc,TgZ:()=>$d,EpF:()=>Hd,n5z:()=>sn,Ikx:()=>zd,LFG:()=>Fr,$8M:()=>Nn,NdJ:()=>ef,CRH:()=>jC,oxw:()=>nf,Q6J:()=>Pl,WLB:()=>$E,iGM:()=>_i,CHM:()=>nl,LSH:()=>Lu,kYT:()=>Cr,YNc:()=>bv,_uU:()=>df,Oqu:()=>kv,hij:()=>Bm});var T=U(9765),f=U(5319),G=U(7574),pe=U(6682),re=U(2441);var ae=U(1307);function J(){return new T.xQ}function Z(r){for(let i in r)if(r[i]===Z)return i;throw Error("Could not find renamed property on target object.")}function de(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function Ee(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const Ve=Z({__forward_ref__:Z});function Me(r){return r.__forward_ref__=Me,r.toString=function(){return le(this())},r}function ue(r){return Oe(r)?r():r}function Oe(r){return"function"==typeof r&&r.hasOwnProperty(Ve)&&r.__forward_ref__===Me}class Te extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Xe(r){return"string"==typeof r?r:null==r?"":String(r)}function Ut(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Xe(r)}function Ie(r,i){const o=i?` in ${i}`:"";throw new Te("201",`No provider for ${Ut(r)} found${o}`)}function Vn(r,i){null==r&&function(r,i,o,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${o} ${a} ${i} <=Actual]`))}(i,r,null,"!=")}function vn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function wr(r){return{providers:r.providers||[],imports:r.imports||[]}}function pn(r){return On(r,Sn)||On(r,As)}function On(r,i){return r.hasOwnProperty(i)?r[i]:null}function Xn(r){return r&&(r.hasOwnProperty(er)||r.hasOwnProperty(Tt))?r[er]:null}const Sn=Z({\u0275prov:Z}),er=Z({\u0275inj:Z}),As=Z({ngInjectableDef:Z}),Tt=Z({ngInjectorDef:Z});var ze=(()=>((ze=ze||{})[ze.Default=0]="Default",ze[ze.Host=1]="Host",ze[ze.Self=2]="Self",ze[ze.SkipSelf=4]="SkipSelf",ze[ze.Optional=8]="Optional",ze))();let gn;function jn(r){const i=gn;return gn=r,i}function an(r,i,o){const a=pn(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&ze.Optional?null:void 0!==i?i:void Ie(le(r),"Injector")}function gt(r){return{toString:r}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),$n=(()=>(($n=$n||{})[$n.Emulated=0]="Emulated",$n[$n.None=2]="None",$n[$n.ShadowDom=3]="ShadowDom",$n))();const Ur="undefined"!=typeof globalThis&&globalThis,Lt="undefined"!=typeof window&&window,ie="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ee=Ur||"undefined"!=typeof global&&global||Lt||ie,lt={},ot=[],qt=Z({\u0275cmp:Z}),In=Z({\u0275dir:Z}),En=Z({\u0275pipe:Z}),Qr=Z({\u0275mod:Z}),tn=Z({\u0275loc:Z}),$t=Z({\u0275fac:Z}),Rn=Z({__NG_ELEMENT_ID__:Z});let fa=0;function mo(r){return gt(()=>{const o={},a={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||ot,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||$n.Emulated,id:"c",styles:r.styles||ot,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,l=r.features,g=r.pipes;return a.id+=fa++,a.inputs=si(r.inputs,o),a.outputs=si(r.outputs),l&&l.forEach(y=>y(a)),a.directiveDefs=c?()=>("function"==typeof c?c():c).map(yo):null,a.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ua):null,a})}function yo(r){return wt(r)||function(r){return r[In]||null}(r)}function Ua(r){return function(r){return r[En]||null}(r)}const xs={};function Vo(r){return gt(()=>{const i={type:r.type,bootstrap:r.bootstrap||ot,declarations:r.declarations||ot,imports:r.imports||ot,exports:r.exports||ot,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(xs[r.id]=r.type),i})}function Cr(r,i){return gt(()=>{const o=Hn(r,!0);o.declarations=i.declarations||ot,o.imports=i.imports||ot,o.exports=i.exports||ot})}function si(r,i){if(null==r)return lt;const o={};for(const a in r)if(r.hasOwnProperty(a)){let c=r[a],l=c;Array.isArray(c)&&(l=c[1],c=c[0]),o[c]=a,i&&(i[c]=l)}return o}const pa=mo;function oi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function wt(r){return r[qt]||null}function Hn(r,i){const o=r[Qr]||null;if(!o&&!0===i)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return o}function $r(r){return Array.isArray(r)&&"object"==typeof r[1]}function At(r){return Array.isArray(r)&&!0===r[1]}function ji(r){return 0!=(8&r.flags)}function eo(r){return 2==(2&r.flags)}function Nr(r){return 1==(1&r.flags)}function ui(r){return null!==r.template}function Uo(r){return 0!=(512&r[2])}function Mr(r,i){return r.hasOwnProperty($t)?r[$t]:null}class li{constructor(i,o,a){this.previousValue=i,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function $a(){return cs}function cs(r){return r.type.prototype.ngOnChanges&&(r.setInput=ya),Xr}function Xr(){const r=tr(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===lt)r.previous=i;else for(let a in i)o[a]=i[a];r.current=null,this.ngOnChanges(i)}}function ya(r,i,o,a){const c=tr(r)||function(r,i){return r[$o]=i}(r,{previous:lt,current:null}),l=c.current||(c.current={}),g=c.previous,y=this.declaredInputs[o],w=g[y];l[y]=new li(w&&w.currentValue,i,g===lt),r[a]=i}$a.ngInherit=!0;const $o="__ngSimpleChanges__";function tr(r){return r[$o]||null}let L;function N(r){L=r}function we(r){return!!r.listen}const st={createRenderer:(r,i)=>void 0!==L?L:"undefined"!=typeof document?document:void 0};function ht(r){for(;Array.isArray(r);)r=r[0];return r}function Pn(r,i){return ht(i[r])}function Zt(r,i){return ht(i[r.index])}function bi(r,i){return r.data[i]}function on(r,i){const o=i[r];return $r(o)?o:o[0]}function Or(r){return 4==(4&r[2])}function Ps(r){return 128==(128&r[2])}function wi(r,i){return null==i?null:r[i]}function to(r){r[18]=0}function yr(r,i){r[5]+=i;let o=r,a=r[3];for(;null!==a&&(1===i&&1===o[5]||-1===i&&0===o[5]);)a[5]+=i,o=a,a=a[3]}const Dt={lFrame:Ya(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ga(){return Dt.bindingsEnabled}function qe(){return Dt.lFrame.lView}function rn(){return Dt.lFrame.tView}function nl(r){return Dt.lFrame.contextLView=r,r[8]}function zn(){let r=ks();for(;null!==r&&64===r.type;)r=r.parent;return r}function ks(){return Dt.lFrame.currentTNode}function ei(r,i){const o=Dt.lFrame;o.currentTNode=r,o.isParent=i}function za(){return Dt.lFrame.isParent}function Wa(){return Dt.isInCheckNoChangesMode}function wo(r){Dt.isInCheckNoChangesMode=r}function Fs(){return Dt.lFrame.bindingIndex++}function nc(r,i){const o=Dt.lFrame;o.bindingIndex=o.bindingRootIndex=r,va(i)}function va(r){Dt.lFrame.currentDirectiveIndex=r}function Co(){return Dt.lFrame.currentQueryIndex}function rc(r){Dt.lFrame.currentQueryIndex=r}function Gr(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Ea(r,i,o){if(o&ze.SkipSelf){let c=i,l=r;for(;!(c=c.parent,null!==c||o&ze.Host||(c=Gr(l),null===c||(l=l[15],10&c.type))););if(null===c)return!1;i=c,r=l}const a=Dt.lFrame=Io();return a.currentTNode=i,a.lView=r,!0}function zo(r){const i=Io(),o=r[1];Dt.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Io(){const r=Dt.lFrame,i=null===r?null:r.child;return null===i?Ya(r):i}function Ya(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Wo(){const r=Dt.lFrame;return Dt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const ed=Wo;function rl(){const r=Wo();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function hi(){return Dt.lFrame.selectedIndex}function qi(r){Dt.lFrame.selectedIndex=r}function Bn(){const r=Dt.lFrame;return bi(r.tView,r.selectedIndex)}function Do(r,i){for(let o=i.directiveStart,a=i.directiveEnd;o<a;o++){const l=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:A,ngOnDestroy:P}=l;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),A&&((r.viewHooks||(r.viewHooks=[])).push(o,A),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,A)),null!=P&&(r.destroyHooks||(r.destroyHooks=[])).push(o,P)}}function ba(r,i,o){sc(r,i,3,o)}function Ko(r,i,o,a){(3&r[2])===o&&sc(r,i,o,a)}function io(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function sc(r,i,o,a){const l=null!=a?a:-1,g=i.length-1;let y=0;for(let w=void 0!==a?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(y=i[w],null!=a&&y>=a)break}else i[w]<0&&(r[18]+=65536),(y<l||-1==l)&&(Pr(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function Pr(r,i,o,a){const c=o[a]<0,l=o[a+1],y=r[c?-o[a]:o[a]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{l.call(y)}finally{}}}else try{l.call(y)}finally{}}class To{constructor(i,o,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function nr(r,i,o){const a=we(r);let c=0;for(;c<o.length;){const l=o[c];if("number"==typeof l){if(0!==l)break;c++;const g=o[c++],y=o[c++],w=o[c++];a?r.setAttribute(i,y,w,g):i.setAttributeNS(g,y,w)}else{const g=l,y=o[++c];wa(g)?a&&r.setProperty(i,g,y):a?r.setAttribute(i,g,y):i.setAttribute(g,y),c++}}return c}function Qa(r){return 3===r||4===r||6===r}function wa(r){return 64===r.charCodeAt(0)}function Ao(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let a=0;a<i.length;a++){const c=i[a];"number"==typeof c?o=c:0===o||Su(r,o,c,null,-1===o||2===o?i[++a]:null)}}return r}function Su(r,i,o,a,c){let l=0,g=r.length;if(-1===i)g=-1;else for(;l<r.length;){const y=r[l++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=l-1;break}}}for(;l<r.length;){const y=r[l];if("number"==typeof y)break;if(y===o){if(null===a)return void(null!==c&&(r[l+1]=c));if(a===r[l+1])return void(r[l+2]=c)}l++,null!==a&&l++,null!==c&&l++}-1!==g&&(r.splice(g,0,i),l=g+1),r.splice(l++,0,o),null!==a&&r.splice(l++,0,a),null!==c&&r.splice(l++,0,c)}function Vs(r){return-1!==r}function Qo(r){return 32767&r}function Ca(r,i){let o=function(r){return r>>16}(r),a=i;for(;o>0;)a=a[15],o--;return a}let Ja=!0;function Jo(r){const i=Ja;return Ja=r,i}let Ci=0;function qr(r,i){const o=oo(r,i);if(-1!==o)return o;const a=i[1];a.firstCreatePass&&(r.injectorIndex=i.length,ea(a.data,r),ea(i,null),ea(a.blueprint,null));const c=Ia(r,i),l=r.injectorIndex;if(Vs(c)){const g=Qo(c),y=Ca(c,i),w=y[1].data;for(let A=0;A<8;A++)i[l+A]=y[g+A]|w[g+A]}return i[l+8]=c,l}function ea(r,i){r.push(0,0,0,0,0,0,0,0,i)}function oo(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function Ia(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,a=null,c=i;for(;null!==c;){const l=c[1],g=l.type;if(a=2===g?l.declTNode:1===g?c[6]:null,null===a)return-1;if(o++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function So(r,i,o){!function(r,i,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Rn)&&(a=o[Rn]),null==a&&(a=o[Rn]=Ci++);const c=255&a;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function yh(r,i,o){if(o&ze.Optional)return r;Ie(i,"NodeInjector")}function eu(r,i,o,a){if(o&ze.Optional&&void 0===a&&(a=null),0==(o&(ze.Self|ze.Host))){const c=r[9],l=jn(void 0);try{return c?c.get(i,a,o&ze.Optional):an(i,a,o&ze.Optional)}finally{jn(l)}}return yh(a,i,o)}function I(r,i,o,a=ze.Default,c){if(null!==r){const l=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Rn)?r[Rn]:void 0;return"number"==typeof i?i>=0?255&i:v:i}(o);if("function"==typeof l){if(!Ea(i,r,a))return a&ze.Host?yh(c,o,a):eu(i,o,a,c);try{const g=l(a);if(null!=g||a&ze.Optional)return g;Ie(o)}finally{ed()}}else if("number"==typeof l){let g=null,y=oo(r,i),w=-1,A=a&ze.Host?i[16][6]:null;for((-1===y||a&ze.SkipSelf)&&(w=-1===y?Ia(r,i):i[y+8],-1!==w&&Ue(a,!1)?(g=i[1],y=Qo(w),i=Ca(w,i)):y=-1);-1!==y;){const P=i[1];if(ne(l,y,P.data)){const $=S(y,i,o,g,a,A);if($!==E)return $}w=i[y+8],-1!==w&&Ue(a,i[1].data[y+8]===A)&&ne(l,y,i)?(g=P,y=Qo(w),i=Ca(w,i)):y=-1}}}return eu(i,o,a,c)}const E={};function v(){return new rt(zn(),qe())}function S(r,i,o,a,c,l){const g=i[1],y=g.data[r+8],P=O(y,g,o,null==a?eo(y)&&Ja:a!=g&&0!=(3&y.type),c&ze.Host&&l===y);return null!==P?V(i,g,P,y):E}function O(r,i,o,a,c){const l=r.providerIndexes,g=i.data,y=1048575&l,w=r.directiveStart,P=l>>20,z=c?y+P:r.directiveEnd;for(let X=a?y:y+P;X<z;X++){const ce=g[X];if(X<w&&o===ce||X>=w&&ce.type===o)return X}if(c){const X=g[w];if(X&&ui(X)&&X.type===o)return w}return null}function V(r,i,o,a){let c=r[o];const l=i.data;if(function(r){return r instanceof To}(c)){const g=c;g.resolving&&function(r,i){throw new Te("200",`Circular dependency in DI detected for ${r}`)}(Ut(l[o]));const y=Jo(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?jn(g.injectImpl):null;Ea(r,a,ze.Default);try{c=r[o]=g.factory(void 0,l,r,a),i.firstCreatePass&&o>=a.directiveStart&&function(r,i,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:l}=i.type.prototype;if(a){const g=cs(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),l&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,l),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,l))}(o,l[o],i)}finally{null!==w&&jn(w),Jo(y),g.resolving=!1,ed()}}return c}function ne(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Ue(r,i){return!(r&ze.Self||r&ze.Host&&i)}class rt{constructor(i,o){this._tNode=i,this._lView=o}get(i,o){return I(this._tNode,this._lView,i,void 0,o)}}function sn(r){return gt(()=>{const i=r.prototype.constructor,o=i[$t]||St(i),a=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==a;){const l=c[$t]||St(c);if(l&&l!==o)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function St(r){return Oe(r)?()=>{const i=St(ue(r));return i&&i()}:Mr(r)}function Nn(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const l=o[c];if(Qa(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(l===i)return o[c+1];c+=2}}}return null}(zn(),r)}const fi="__parameters__";function or(r,i,o){return gt(()=>{const a=function(r){return function(...o){if(r){const a=r(...o);for(const c in a)this[c]=a[c]}}}(i);function c(...l){if(this instanceof c)return a.apply(this,l),this;const g=new c(...l);return y.annotation=g,y;function y(w,A,P){const $=w.hasOwnProperty(fi)?w[fi]:Object.defineProperty(w,fi,{value:[]})[fi];for(;$.length<=P;)$.push(null);return($[P]=$[P]||[]).push(g),w}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Qn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=vn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const al=new Qn("AnalyzeForEntryComponents"),cl=Function;function hs(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let a=r[o];Array.isArray(a)?(i===r&&(i=r.slice(0,o)),hs(a,i)):i!==r&&i.push(a)}return i}function Ii(r,i){r.forEach(o=>Array.isArray(o)?Ii(o,i):i(o))}function uo(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function ta(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function D(r,i,o){let a=B(r,i);return a>=0?r[1|a]=o:(a=~a,function(r,i,o,a){let c=r.length;if(c==i)r.push(o,a);else if(1===c)r.push(a,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=a}}(r,a,i,o)),a}function M(r,i){const o=B(r,i);if(o>=0)return r[1|o]}function B(r,i){return function(r,i,o){let a=0,c=r.length>>o;for(;c!==a;){const l=a+(c-a>>1),g=r[l<<o];if(i===g)return l<<o;g>i?c=l:a=l+1}return~(c<<o)}(r,i,1)}const Bs={},ku="__NG_DI_FLAG__",Qi="ngTempTokenPath",na=/\n/gm,ad="__source",bh=Z({provide:String,useValue:Z});let hl;function lc(r){const i=hl;return hl=r,i}function t_(r,i=ze.Default){if(void 0===hl)throw new Error("inject() must be called from an injection context");return null===hl?an(r,void 0,i):hl.get(r,i&ze.Optional?null:void 0,i)}function Fr(r,i=ze.Default){return(gn||t_)(ue(r),i)}function su(r){const i=[];for(let o=0;o<r.length;o++){const a=ue(r[o]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let c,l=ze.Default;for(let g=0;g<a.length;g++){const y=a[g],w=Xf(y);"number"==typeof w?-1===w?c=y.token:l|=w:c=y}i.push(Fr(c,l))}else i.push(Fr(a))}return i}function fl(r,i){return r[ku]=i,r.prototype[ku]=i,r}function Xf(r){return r[ku]}function ep(r,i,o,a){const c=r[Qi];throw i[ad]&&c.unshift(i[ad]),r.message=function(r,i,o,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=le(i);if(Array.isArray(i))c=i.map(le).join(" -> ");else if("object"==typeof i){let l=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];l.push(g+":"+("string"==typeof y?JSON.stringify(y):le(y)))}c=`{${l.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${r.replace(na,"\n  ")}`}("\n"+r.message,c,o,a),r.ngTokenPath=c,r[Qi]=null,r}const pl=fl(or("Inject",r=>({token:r})),-1),ra=fl(or("Optional"),8),Ta=fl(or("SkipSelf"),4);let cd;function hc(r){var i;return(null===(i=function(){if(void 0===cd&&(cd=null,ee.trustedTypes))try{cd=ee.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return cd}())||void 0===i?void 0:i.createHTML(r))||r}class fc{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class s_ extends fc{getTypeName(){return"HTML"}}class o_ extends fc{getTypeName(){return"Style"}}class _l extends fc{getTypeName(){return"Script"}}class a_ extends fc{getTypeName(){return"URL"}}class u_ extends fc{getTypeName(){return"ResourceURL"}}function fs(r){return r instanceof fc?r.changingThisBreaksApplicationSecurity:r}function pc(r,i){const o=Th(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function Th(r){return r instanceof fc&&r.getTypeName()||null}function c_(r){return new s_(r)}function Ah(r){return new o_(r)}function Sh(r){return new _l(r)}function gc(r){return new a_(r)}function Aa(r){return new u_(r)}class op{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(hc(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class l_{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=hc(i),o;const a=this.inertDocument.createElement("body");return a.innerHTML=hc(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let a=i.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const h_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ou=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fu(r){return(r=String(r)).match(h_)||r.match(ou)?r:"unsafe:"+r}function Ai(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function mc(...r){const i={};for(const o of r)for(const a in o)o.hasOwnProperty(a)&&(i[a]=!0);return i}const Tn=Ai("area,br,col,hr,img,wbr"),ap=Ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),up=Ai("rp,rt"),Mh=mc(Tn,mc(ap,Ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mc(up,Ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),mc(up,ap)),ld=Ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Oh=Ai("srcset"),cp=mc(ld,Oh,Ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dd=Ai("script,style,template");class jg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Mh.hasOwnProperty(o))return this.sanitizedSomething=!0,!dd.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=i.attributes;for(let c=0;c<a.length;c++){const l=a.item(c),g=l.name,y=g.toLowerCase();if(!cp.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=l.value;ld[y]&&(w=Fu(w)),Oh[y]&&(r=w,w=(r=String(r)).split(",").map(i=>Fu(i.trim())).join(", ")),this.buf.push(" ",g,'="',lp(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Mh.hasOwnProperty(o)&&!Tn.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(lp(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const $g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hg=/([^\#-~ |!])/g;function lp(r){return r.replace(/&/g,"&amp;").replace($g,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Hg,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vl;function dp(r,i){let o=null;try{vl=vl||function(r){const i=new l_(r);return function(){try{return!!(new window.DOMParser).parseFromString(hc(""),"text/html")}catch(r){return!1}}()?new op(i):i}(r);let a=i?String(i):"";o=vl.getInertBodyElement(a);let c=5,l=a;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,a=l,l=o.innerHTML,o=vl.getInertBodyElement(a)}while(a!==l);return hc((new jg).sanitizeChildren(El(o)||o))}finally{if(o){const a=El(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function El(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function Lu(r){const i=function(){const r=qe();return r&&r[12]}();return i?i.sanitize(ir.URL,r)||"":pc(r,"URL")?fs(r):Fu(Xe(r))}const Gg="__ngContext__";function pi(r,i){r[Gg]=i}function ms(r){const i=function(r){return r[Gg]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function k(r){return r.ngOriginalError}function he(r,...i){r.error(...i)}class Le{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),a=this._findContext(i),c=(r=i)&&r.ngErrorLogger||he;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),a&&c(this._console,"ERROR CONTEXT",a)}_findContext(i){return i?i.ngDebugContext||this._findContext(k(i)):null}_findOriginalError(i){let o=i&&k(i);for(;o&&k(o);)o=k(o);return o||null}}const gd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ee))();function $s(r){return r instanceof Function?r():r}var Cc=(()=>((Cc=Cc||{})[Cc.Important=1]="Important",Cc[Cc.DashCase=2]="DashCase",Cc))();function _p(r,i){return undefined(r,i)}function Qg(r){const i=r[3];return At(i)?i[3]:i}function y_(r){return L0(r[13])}function Jg(r){return L0(r[4])}function L0(r){for(;null!==r&&!At(r);)r=r[4];return r}function _d(r,i,o,a,c){if(null!=a){let l,g=!1;At(a)?l=a:$r(a)&&(g=!0,a=a[0]);const y=ht(a);0===r&&null!==o?null==c?nm(i,o,y):vd(i,o,y,c||null,!0):1===r&&null!==o?vd(i,o,y,c||null,!0):2===r?function(r,i,o){const a=Ed(r,i);a&&function(r,i,o,a){we(r)?r.removeChild(i,o,a):i.removeChild(o)}(r,a,i,o)}(i,y,g):3===r&&i.destroyNode(y),null!=l&&function(r,i,o,a,c){const l=o[7];l!==ht(o)&&_d(i,r,a,l,c);for(let y=10;y<o.length;y++){const w=o[y];Vh(w[1],w,r,i,a,l)}}(i,r,l,o,c)}}function Ep(r,i,o){return we(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function __(r,i){const o=r[9],a=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,yr(c,-1)),o.splice(a,1)}function bp(r,i){if(r.length<=10)return;const o=10+i,a=r[o];if(a){const c=a[17];null!==c&&c!==r&&__(c,a),i>0&&(r[o-1][4]=a[4]);const l=ta(r,10+i);!function(r,i){Vh(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const g=l[19];null!==g&&g.detachView(l[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function B0(r,i){if(!(256&i[2])){const o=i[11];we(o)&&o.destroyNode&&Vh(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return em(r[1],r);for(;i;){let o=null;if($r(i))o=i[13];else{const a=i[10];a&&(o=a)}if(!o){for(;i&&!i[4]&&i!==r;)$r(i)&&em(i[1],i),i=i[3];null===i&&(i=r),$r(i)&&em(i[1],i),o=i&&i[4]}i=o}}(i)}}function em(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let a=0;a<o.length;a+=2){const c=i[o[a]];if(!(c instanceof To)){const l=o[a+1];if(Array.isArray(l))for(let g=0;g<l.length;g+=2){const y=c[l[g]],w=l[g+1];try{w.call(y)}finally{}}else try{l.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,a=i[7];let c=-1;if(null!==o)for(let l=0;l<o.length-1;l+=2)if("string"==typeof o[l]){const g=o[l+1],y="function"==typeof g?g(i):ht(i[g]),w=a[c=o[l+2]],A=o[l+3];"boolean"==typeof A?y.removeEventListener(o[l],w,A):A>=0?a[c=A]():a[c=-A].unsubscribe(),l+=2}else{const g=a[c=o[l+1]];o[l].call(g)}if(null!==a){for(let l=c+1;l<a.length;l++)a[l]();i[7]=null}}(r,i),1===i[1].type&&we(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&At(i[3])){o!==i[3]&&__(o,i);const a=i[19];null!==a&&a.detachView(r)}}}function j0(r,i,o){return function(r,i,o){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return o[0];if(2&a.flags){const c=r.data[a.directiveStart].encapsulation;if(c===$n.None||c===$n.Emulated)return null}return Zt(a,o)}(r,i.parent,o)}function vd(r,i,o,a,c){we(r)?r.insertBefore(i,o,a,c):i.insertBefore(o,a,c)}function nm(r,i,o){we(r)?r.appendChild(i,o):i.appendChild(o)}function v_(r,i,o,a,c){null!==a?vd(r,i,o,a,c):nm(r,i,o)}function Ed(r,i){return we(r)?r.parentNode(i):i.parentNode}let Cp=function(r,i,o){return 40&r.type?Zt(r,o):null};function Ip(r,i,o,a){const c=j0(r,a,i),l=i[11],y=function(r,i,o){return Cp(r,i,o)}(a.parent||i[6],a,i);if(null!=c)if(Array.isArray(o))for(let w=0;w<o.length;w++)v_(l,c,o[w],y,!1);else v_(l,c,o,y,!1)}function im(r,i){if(null!==i){const o=i.type;if(3&o)return Zt(i,r);if(4&o)return Dp(-1,r[i.index]);if(8&o){const a=i.child;if(null!==a)return im(r,a);{const c=r[i.index];return At(c)?Dp(-1,c):ht(c)}}if(32&o)return _p(i,r)()||ht(r[i.index]);{const a=eD(r,i);return null!==a?Array.isArray(a)?a[0]:im(Qg(r[16]),a):im(r,i.next)}}return null}function eD(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Dp(r,i){const o=10+r+1;if(o<i.length){const a=i[o],c=a[1].firstChild;if(null!==c)return im(a,c)}return i[7]}function sm(r,i,o,a,c,l,g){for(;null!=o;){const y=a[o.index],w=o.type;if(g&&0===i&&(y&&pi(ht(y),a),o.flags|=4),64!=(64&o.flags))if(8&w)sm(r,i,o.child,a,c,l,!1),_d(i,r,c,y,l);else if(32&w){const A=_p(o,a);let P;for(;P=A();)_d(i,r,c,P,l);_d(i,r,c,y,l)}else 16&w?om(r,i,a,o,c,l):_d(i,r,c,y,l);o=g?o.projectionNext:o.next}}function Vh(r,i,o,a,c,l){sm(o,a,r.firstChild,i,c,l,!1)}function om(r,i,o,a,c,l){const g=o[16],w=g[6].projection[a.projection];if(Array.isArray(w))for(let A=0;A<w.length;A++)_d(i,r,c,w[A],l);else sm(r,i,w,g[3],c,l,!0)}function G0(r,i,o){we(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function C_(r,i,o){we(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function Tp(r,i,o){let a=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const l=i.length;if(c+l===a||r.charCodeAt(c+l)<=32)return c}o=c+1}}const q0="ng-template";function z0(r,i,o){let a=0;for(;a<r.length;){let c=r[a++];if(o&&"class"===c){if(c=r[a],-1!==Tp(c.toLowerCase(),i,0))return!0}else if(1===c){for(;a<r.length&&"string"==typeof(c=r[a++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function W0(r){return 4===r.type&&r.value!==q0}function Z0(r,i,o){return i===(4!==r.type||o?r.value:q0)}function iD(r,i,o){let a=4;const c=r.attrs||[],l=function(r){for(let i=0;i<r.length;i++)if(Qa(r[i]))return i;return r.length}(c);let g=!1;for(let y=0;y<i.length;y++){const w=i[y];if("number"!=typeof w){if(!g)if(4&a){if(a=2|1&a,""!==w&&!Z0(r,w,o)||""===w&&1===i.length){if(xa(a))return!1;g=!0}}else{const A=8&a?w:i[++y];if(8&a&&null!==r.attrs){if(!z0(r.attrs,A,o)){if(xa(a))return!1;g=!0}continue}const $=sD(8&a?"class":w,c,W0(r),o);if(-1===$){if(xa(a))return!1;g=!0;continue}if(""!==A){let z;z=$>l?"":c[$+1].toLowerCase();const X=8&a?z:null;if(X&&-1!==Tp(X,A,0)||2&a&&A!==z){if(xa(a))return!1;g=!0}}}}else{if(!g&&!xa(a)&&!xa(w))return!1;if(g&&xa(w))continue;g=!1,a=w|1&a}}return xa(a)||g}function xa(r){return 0==(1&r)}function sD(r,i,o,a){if(null===i)return-1;let c=0;if(a||!o){let l=!1;for(;c<i.length;){const g=i[c];if(g===r)return c;if(3===g||6===g)l=!0;else{if(1===g||2===g){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=l?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const a=r[o];if("number"==typeof a)return-1;if(a===i)return o;o++}return-1}(i,r)}function I_(r,i,o=!1){for(let a=0;a<i.length;a++)if(iD(r,i[a],o))return!0;return!1}function Y0(r,i){return r?":not("+i.trim()+")":i}function Q0(r){let i=r[0],o=1,a=2,c="",l=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&a){const y=r[++o];c+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&a?c+="."+g:4&a&&(c+=" "+g);else""!==c&&!xa(g)&&(i+=Y0(l,c),c=""),a=g,l=l||!xa(a);o++}return""!==c&&(i+=Y0(l,c)),i}const en={};function D_(r){J0(rn(),qe(),hi()+r,Wa())}function J0(r,i,o,a){if(!a)if(3==(3&i[2])){const l=r.preOrderCheckHooks;null!==l&&ba(i,l,o)}else{const l=r.preOrderHooks;null!==l&&Ko(i,l,0,o)}qi(o)}function bd(r,i){return r<<17|i<<2}function ia(r){return r>>17&32767}function T_(r){return 2|r}function au(r){return(131068&r)>>2}function A_(r,i){return-131069&r|i<<2}function S_(r){return 1|r}function hm(r,i){const o=r.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const c=o[a],l=o[a+1];if(-1!==l){const g=r.data[l];rc(c),g.contentQueries(2,i[l],l)}}}function $h(r,i,o,a,c,l,g,y,w,A){const P=i.blueprint.slice();return P[0]=c,P[2]=140|a,to(P),P[3]=P[15]=r,P[8]=o,P[10]=g||r&&r[10],P[11]=y||r&&r[11],P[12]=w||r&&r[12]||null,P[9]=A||r&&r[9]||null,P[6]=l,P[16]=2==i.type?r[16]:P,P}function Dc(r,i,o,a,c){let l=r.data[i];if(null===l)l=function(r,i,o,a,c){const l=ks(),g=za(),w=r.data[i]=function(r,i,o,a,c,l){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?l:l&&l.parent,o,i,a,c);return null===r.firstChild&&(r.firstChild=w),null!==l&&(g?null==l.child&&null!==w.parent&&(l.child=w):null===l.next&&(l.next=w)),w}(r,i,o,a,c),Dt.lFrame.inI18n&&(l.flags|=64);else if(64&l.type){l.type=o,l.value=a,l.attrs=c;const g=function(){const r=Dt.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();l.injectorIndex=null===g?-1:g.injectorIndex}return ei(l,!0),l}function Al(r,i,o,a){if(0===o)return-1;const c=i.length;for(let l=0;l<o;l++)i.push(a),r.blueprint.push(a),r.data.push(null);return c}function Cd(r,i,o){zo(i);try{const a=r.viewQuery;null!==a&&K_(1,a,o);const c=r.template;null!==c&&fm(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&hm(r,i),r.staticViewQueries&&K_(2,r.viewQuery,o);const l=r.components;null!==l&&function(r,i){for(let o=0;o<i.length;o++)ID(r,i[o])}(i,l)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{i[2]&=-5,rl()}}function Hh(r,i,o,a){const c=i[2];if(256==(256&c))return;zo(i);const l=Wa();try{to(i),function(r){Dt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&fm(r,i,o,2,a);const g=3==(3&c);if(!l)if(g){const A=r.preOrderCheckHooks;null!==A&&ba(i,A,null)}else{const A=r.preOrderHooks;null!==A&&Ko(i,A,0,null),io(i,0)}if(function(r){for(let i=y_(r);null!==i;i=Jg(i)){if(!i[2])continue;const o=i[9];for(let a=0;a<o.length;a++){const c=o[a],l=c[3];0==(1024&c[2])&&yr(l,1),c[2]|=1024}}}(i),function(r){for(let i=y_(r);null!==i;i=Jg(i))for(let o=10;o<i.length;o++){const a=i[o],c=a[1];Ps(a)&&Hh(c,a,c.template,a[8])}}(i),null!==r.contentQueries&&hm(r,i),!l)if(g){const A=r.contentCheckHooks;null!==A&&ba(i,A)}else{const A=r.contentHooks;null!==A&&Ko(i,A,1),io(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const c=o[a];if(c<0)qi(~c);else{const l=c,g=o[++a],y=o[++a];nc(g,l),y(2,i[l])}}}finally{qi(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)W_(r,i[o])}(i,y);const w=r.viewQuery;if(null!==w&&K_(2,w,a),!l)if(g){const A=r.viewCheckHooks;null!==A&&ba(i,A)}else{const A=r.viewHooks;null!==A&&Ko(i,A,2),io(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),l||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,yr(i[3],-1))}finally{rl()}}function mD(r,i,o,a){const c=i[10],l=!Wa(),g=Or(i);try{l&&!g&&c.begin&&c.begin(),g&&Cd(r,i,a),Hh(r,i,o,a)}finally{l&&!g&&c.end&&c.end()}}function fm(r,i,o,a,c){const l=hi(),g=2&a;try{qi(-1),g&&i.length>20&&J0(r,i,20,Wa()),o(a,c)}finally{qi(l)}}function F_(r,i,o){!Ga()||(function(r,i,o,a){const c=o.directiveStart,l=o.directiveEnd;r.firstCreatePass||qr(o,i),pi(a,i);const g=o.initialInputs;for(let y=c;y<l;y++){const w=r.data[y],A=ui(w);A&&bD(i,o,w);const P=V(i,r,y,o);pi(P,i),null!==g&&wD(0,y-c,P,w,0,g),A&&(on(o.index,i)[8]=P)}}(r,i,o,Zt(o,i)),128==(128&o.flags)&&function(r,i,o){const a=o.directiveStart,c=o.directiveEnd,g=o.index,y=Dt.lFrame.currentDirectiveIndex;try{qi(g);for(let w=a;w<c;w++){const A=r.data[w],P=i[w];va(w),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Xi(A,P)}}finally{qi(-1),va(y)}}(r,i,o))}function L_(r,i,o=Zt){const a=i.localNames;if(null!==a){let c=i.index+1;for(let l=0;l<a.length;l+=2){const g=a[l+1],y=-1===g?o(i,r):r[g];r[c++]=y}}}function vs(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Sl(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Sl(r,i,o,a,c,l,g,y,w,A){const P=20+a,$=P+c,z=function(r,i){const o=[];for(let a=0;a<i;a++)o.push(a<r?null:en);return o}(P,$),X="function"==typeof A?A():A;return z[1]={type:r,blueprint:z,template:o,queries:null,viewQuery:y,declTNode:i,data:z.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:X,incompleteFirstPass:!1}}function xp(r,i,o,a){const c=Op(i);null===o?c.push(a):(c.push(o),r.firstCreatePass&&Y_(r).push(a,c.length-1))}function gm(r,i,o){for(let a in r)if(r.hasOwnProperty(a)){const c=r[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(i,c):o[a]=[i,c]}return o}function lo(r,i,o,a,c,l,g,y){const w=Zt(i,o);let P,A=i.inputs;!y&&null!=A&&(P=A[a])?(Gs(r,o,P,a,c),eo(i)&&function(r,i){const o=on(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(a=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(a),c=null!=g?g(c,i.value||"",a):c,we(l)?l.setProperty(w,a,c):wa(a)||(w.setProperty?w.setProperty(a,c):w[a]=c))}function j_(r,i,o,a){let c=!1;if(Ga()){const l=function(r,i,o){const a=r.directiveRegistry;let c=null;if(a)for(let l=0;l<a.length;l++){const g=a[l];I_(o,g.selectors,!1)&&(c||(c=[]),So(qr(o,i),r,g.type),ui(g)?(_m(r,o),c.unshift(g)):c.push(g))}return c}(r,i,o),g=null===a?null:{"":-1};if(null!==l){c=!0,G_(o,r.data.length,l.length);for(let P=0;P<l.length;P++){const $=l[P];$.providersResolver&&$.providersResolver($)}let y=!1,w=!1,A=Al(r,i,l.length,null);for(let P=0;P<l.length;P++){const $=l[P];o.mergedAttrs=Ao(o.mergedAttrs,$.hostAttrs),db(r,o,i,A,$),ED(A,$,g),null!==$.contentQueries&&(o.flags|=8),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(o.flags|=128);const z=$.type.prototype;!y&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!w&&(z.ngOnChanges||z.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),A++}!function(r,i){const a=i.directiveEnd,c=r.data,l=i.attrs,g=[];let y=null,w=null;for(let A=i.directiveStart;A<a;A++){const P=c[A],$=P.inputs,z=null===l||W0(i)?null:q_($,l);g.push(z),y=gm($,A,y),w=gm(P.outputs,A,w)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const a=r.localNames=[];for(let c=0;c<i.length;c+=2){const l=o[i[c+1]];if(null==l)throw new Te("301",`Export of name '${i[c+1]}' not found!`);a.push(i[c],l)}}}(o,a,g)}return o.mergedAttrs=Ao(o.mergedAttrs,o.attrs),c}function mm(r,i,o,a,c,l){const g=l.hostBindings;if(g){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=w&&y.push(w),y.push(a,c,g)}}function Xi(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function _m(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function ED(r,i,o){if(o){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)o[i.exportAs[a]]=r;ui(i)&&(o[""]=r)}}function G_(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function db(r,i,o,a,c){r.data[a]=c;const l=c.factory||(c.factory=Mr(c.type)),g=new To(l,ui(c),null);r.blueprint[a]=g,o[a]=g,mm(r,i,0,a,Al(r,o,c.hostVars,en),c)}function bD(r,i,o){const a=Zt(i,r),c=vs(o),l=r[10],g=Mp(r,$h(r,c,null,o.onPush?64:16,a,i,l,l.createRenderer(a,o),null,null));r[i.index]=g}function Ra(r,i,o,a,c,l){const g=Zt(r,i);!function(r,i,o,a,c,l,g){if(null==l)we(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==g?Xe(l):g(l,a||"",c);we(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],g,l,r.value,o,a,c)}function wD(r,i,o,a,c,l){const g=l[i];if(null!==g){const y=a.setInput;for(let w=0;w<g.length;){const A=g[w++],P=g[w++],$=g[w++];null!==y?a.setInput(o,$,A,P):o[P]=$}}}function q_(r,i){let o=null,a=0;for(;a<i.length;){const c=i[a];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[a+1])),a+=2}else a+=2;else a+=4}return o}function hb(r,i,o,a){return new Array(r,!0,!1,i,null,0,a,o,null,null)}function W_(r,i){const o=on(i,r);if(Ps(o)){const a=o[1];80&o[2]?Hh(a,o,a.template,o[8]):o[5]>0&&Em(o)}}function Em(r){for(let a=y_(r);null!==a;a=Jg(a))for(let c=10;c<a.length;c++){const l=a[c];if(1024&l[2]){const g=l[1];Hh(g,l,g.template,l[8])}else l[5]>0&&Em(l)}const o=r[1].components;if(null!==o)for(let a=0;a<o.length;a++){const c=on(o[a],r);Ps(c)&&c[5]>0&&Em(c)}}function ID(r,i){const o=on(i,r),a=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(a,o),Cd(a,o,o[8])}function Mp(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function bm(r){for(;r;){r[2]|=64;const i=Qg(r);if(Uo(r)&&!i)return r;r=i}return null}function Z_(r,i,o){const a=i[10];a.begin&&a.begin();try{Hh(r,i,r.template,o)}catch(c){throw Q_(i,c),c}finally{a.end&&a.end()}}function pb(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],a=ms(o),c=a[1];mD(c,a,c.template,o)}}(r[8])}function K_(r,i,o){rc(0),i(r,o)}const gb=(()=>Promise.resolve(null))();function Op(r){return r[7]||(r[7]=[])}function Y_(r){return r.cleanup||(r.cleanup=[])}function Q_(r,i){const o=r[9],a=o?o.get(Le,null):null;a&&a.handleError(i)}function Gs(r,i,o,a,c){for(let l=0;l<o.length;){const g=o[l++],y=o[l++],w=i[g],A=r.data[g];null!==A.setInput?A.setInput(w,c,a,y):w[y]=c}}function ju(r,i,o){const a=Pn(i,r);!function(r,i,o){we(r)?r.setValue(i,o):i.textContent=o}(r[11],a,o)}function xl(r,i,o){let a=o?r.styles:null,c=o?r.classes:null,l=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?l=y:1==l?c=Ee(c,y):2==l&&(a=Ee(a,y+": "+i[++g]+";"))}o?r.styles=a:r.stylesWithoutHost=a,o?r.classes=c:r.classesWithoutHost=c}const Id=new Qn("INJECTOR",-1);class J_{get(i,o=Bs){if(o===Bs){const a=new Error(`NullInjectorError: No provider for ${le(i)}!`);throw a.name="NullInjectorError",a}return o}}const Tc=new Qn("Set Injector scope."),Dd={},X_={};let Pp;function kp(){return void 0===Pp&&(Pp=new J_),Pp}function ev(r,i=null,o=null,a){return new TD(r,o,i||kp(),a)}class TD{constructor(i,o,a,c=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const l=[];o&&Ii(o,y=>this.processProvider(y,i,o)),Ii([i],y=>this.processInjectorType(y,[],l)),this.records.set(Id,Td(void 0,this));const g=this.records.get(Tc);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof i?null:le(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Bs,a=ze.Default){this.assertNotDestroyed();const c=lc(this),l=jn(void 0);try{if(!(a&ze.SkipSelf)){let y=this.records.get(i);if(void 0===y){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof Qn)&&pn(i);y=w&&this.injectableDefInScope(w)?Td(Lp(i),Dd):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(a&ze.Self?kp():this.parent).get(i,o=a&ze.Optional&&o===Bs?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[Qi]=g[Qi]||[]).unshift(le(i)),c)throw g;return ep(g,i,"R3InjectorError",this.source)}throw g}finally{jn(l),lc(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((a,c)=>i.push(le(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,a){if(!(i=ue(i)))return!1;let c=Xn(i);const l=null==c&&i.ngModule||void 0,g=void 0===l?i:l,y=-1!==a.indexOf(g);if(void 0!==l&&(c=Xn(l)),null==c)return!1;if(null!=c.imports&&!y){let P;a.push(g);try{Ii(c.imports,$=>{this.processInjectorType($,o,a)&&(void 0===P&&(P=[]),P.push($))})}finally{}if(void 0!==P)for(let $=0;$<P.length;$++){const{ngModule:z,providers:X}=P[$];Ii(X,ce=>this.processProvider(ce,z,X||ot))}}this.injectorDefTypes.add(g);const w=Mr(g)||(()=>new g);this.records.set(g,Td(w,Dd));const A=c.providers;if(null!=A&&!y){const P=i;Ii(A,$=>this.processProvider($,P,A))}return void 0!==l&&void 0!==i.providers}processProvider(i,o,a){let c=Ad(i=ue(i))?i:ue(i&&i.provide);const l=rv(r=i)?Td(void 0,r.useValue):Td(nv(r),Dd);var r;if(Ad(i)||!0!==i.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=Td(void 0,Dd,!0),g.factory=()=>su(g.multi),this.records.set(c,g)),c=i,g.multi.push(i)}this.records.set(c,l)}hydrate(i,o){return o.value===Dd&&(o.value=X_,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=ue(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Lp(r){const i=pn(r),o=null!==i?i.factory:Mr(r);if(null!==o)return o;if(r instanceof Qn)throw new Error(`Token ${le(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const a=function(r,i){const o=[];for(let a=0;a<r;a++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${le(r)}: (${a.join(", ")}).`)}const o=function(r){const i=r&&(r[Sn]||r[As]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function nv(r,i,o){let a;if(Ad(r)){const c=ue(r);return Mr(c)||Lp(c)}if(rv(r))a=()=>ue(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...su(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))a=()=>Fr(ue(r.useExisting));else{const c=ue(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Mr(c)||Lp(c);a=()=>new c(...su(r.deps))}return a}function Td(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function rv(r){return null!==r&&"object"==typeof r&&bh in r}function Ad(r){return"function"==typeof r}const xd=function(r,i,o){return function(r,i=null,o=null,a){const c=ev(r,i,o,a);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let ur=(()=>{class r{static create(o,a){return Array.isArray(o)?xd(o,a,""):xd(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=Bs,r.NULL=new J_,r.\u0275prov=vn({token:r,providedIn:"any",factory:()=>Fr(Id)}),r.__NG_ELEMENT_ID__=-1,r})();function Rm(r,i){Do(ms(r)[1],zn())}function Nd(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const a=[r];for(;i;){let c;if(ui(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(o){a.push(c);const g=r;g.inputs=hv(r.inputs),g.declaredInputs=hv(r.declaredInputs),g.outputs=hv(r.outputs);const y=c.hostBindings;y&&FD(r,y);const w=c.viewQuery,A=c.contentQueries;if(w&&gi(r,w),A&&Ab(r,A),de(r.inputs,c.inputs),de(r.declaredInputs,c.declaredInputs),de(r.outputs,c.outputs),ui(c)&&c.data.animation){const P=r.data;P.animation=(P.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let g=0;g<l.length;g++){const y=l[g];y&&y.ngInherit&&y(r),y===Nd&&(o=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,o=null;for(let a=r.length-1;a>=0;a--){const c=r[a];c.hostVars=i+=c.hostVars,c.hostAttrs=Ao(c.hostAttrs,o=Ao(o,c.hostAttrs))}}(a)}function hv(r){return r===lt?{}:r===ot?[]:r}function gi(r,i){const o=r.viewQuery;r.viewQuery=o?(a,c)=>{i(a,c),o(a,c)}:i}function Ab(r,i){const o=r.contentQueries;r.contentQueries=o?(a,c,l)=>{i(a,c,l),o(a,c,l)}:i}function FD(r,i){const o=r.hostBindings;r.hostBindings=o?(a,c)=>{i(a,c),o(a,c)}:i}let qp=null;function Md(){if(!qp){const r=ee.Symbol;if(r&&r.iterator)qp=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const a=i[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(qp=a)}}}return qp}function Yh(r){return!!pv(r)&&(Array.isArray(r)||!(r instanceof Map)&&Md()in r)}function pv(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Es(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function zp(r,i,o,a){const c=qe();return Es(c,Fs(),i)&&(rn(),Ra(Bn(),c,r,i,o,a)),zp}function bv(r,i,o,a,c,l,g,y){const w=qe(),A=rn(),P=r+20,$=A.firstCreatePass?function(r,i,o,a,c,l,g,y,w){const A=i.consts,P=Dc(i,r,4,g||null,wi(A,y));j_(i,o,P,wi(A,w)),Do(i,P);const $=P.tViews=Sl(2,P,a,c,l,i.directiveRegistry,i.pipeRegistry,null,i.schemas,A);return null!==i.queries&&(i.queries.template(i,P),$.queries=i.queries.embeddedTView(P)),P}(P,A,w,i,o,a,c,l,g):A.data[P];ei($,!1);const z=w[11].createComment("");Ip(A,w,z,$),pi(z,w),Mp(w,w[P]=hb(z,w,z,$)),Nr($)&&F_(A,w,$),null!=g&&L_(w,$,y)}function Oa(r,i=ze.Default){const o=qe();return null===o?Fr(r,i):I(zn(),o,ue(r),i)}function Pl(r,i,o){const a=qe();return Es(a,Fs(),i)&&lo(rn(),Bn(),a,r,i,a[11],o,!1),Pl}function Xp(r,i,o,a,c){const g=c?"class":"style";Gs(r,o,i.inputs[g],g,a)}function $d(r,i,o,a){const c=qe(),l=rn(),g=20+r,y=c[11],w=c[g]=Ep(y,i,Dt.lFrame.currentNamespace),A=l.firstCreatePass?function(r,i,o,a,c,l,g){const y=i.consts,A=Dc(i,r,2,c,wi(y,l));return j_(i,o,A,wi(y,g)),null!==A.attrs&&xl(A,A.attrs,!1),null!==A.mergedAttrs&&xl(A,A.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,A),A}(g,l,c,0,i,o,a):l.data[g];ei(A,!0);const P=A.mergedAttrs;null!==P&&nr(y,w,P);const $=A.classes;null!==$&&C_(y,w,$);const z=A.styles;null!==z&&G0(y,w,z),64!=(64&A.flags)&&Ip(l,c,w,A),0===Dt.lFrame.elementDepthCount&&pi(w,c),Dt.lFrame.elementDepthCount++,Nr(A)&&(F_(l,c,A),function(r,i,o){if(ji(i)){const c=i.directiveEnd;for(let l=i.directiveStart;l<c;l++){const g=r.data[l];g.contentQueries&&g.contentQueries(1,o[l],l)}}}(l,A,c)),null!==a&&L_(c,A)}function kc(){let r=zn();za()?Dt.lFrame.isParent=!1:(r=r.parent,ei(r,!1));const i=r;Dt.lFrame.elementDepthCount--;const o=rn();o.firstCreatePass&&(Do(o,r),ji(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Xp(o,i,qe(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Xp(o,i,qe(),i.stylesWithoutHost,!1)}function eg(r,i,o,a){$d(r,i,o,a),kc()}function Hd(){return qe()}function Mm(r){return!!r&&"function"==typeof r.then}function Om(r){return!!r&&"function"==typeof r.subscribe}const ng=Om;function ef(r,i,o,a){const c=qe(),l=rn(),g=zn();return function(r,i,o,a,c,l,g,y){const w=Nr(a),P=r.firstCreatePass&&Y_(r),$=i[8],z=Op(i);let X=!0;if(3&a.type||y){const _e=Zt(a,i),Je=y?y(_e):_e,Ge=z.length,Rt=y?Qt=>y(ht(Qt[a.index])):a.index;if(we(o)){let Qt=null;if(!y&&w&&(Qt=function(r,i,o,a){const c=r.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const g=c[l];if(g===o&&c[l+1]===a){const y=i[7],w=c[l+2];return y.length>w?y[w]:null}"string"==typeof g&&(l+=2)}return null}(r,i,c,a.index)),null!==Qt)(Qt.__ngLastListenerFn__||Qt).__ngNextListenerFn__=l,Qt.__ngLastListenerFn__=l,X=!1;else{l=tf(a,i,$,l,!1);const Cn=o.listen(Je,c,l);z.push(l,Cn),P&&P.push(c,Rt,Ge,Ge+1)}}else l=tf(a,i,$,l,!0),Je.addEventListener(c,l,g),z.push(l),P&&P.push(c,Rt,Ge,g)}else l=tf(a,i,$,l,!1);const ce=a.outputs;let Pe;if(X&&null!==ce&&(Pe=ce[c])){const _e=Pe.length;if(_e)for(let Je=0;Je<_e;Je+=2){const Ts=i[Pe[Je]][Pe[Je+1]].subscribe(l),Ju=z.length;z.push(l,Ts),P&&P.push(c,a.index,Ju,-(Ju+1))}}}(l,c,c[11],g,r,i,!!o,a),ef}function Sv(r,i,o,a){try{return!1!==o(a)}catch(c){return Q_(r,c),!1}}function tf(r,i,o,a,c){return function l(g){if(g===Function)return a;const y=2&r.flags?on(r.index,i):i;0==(32&i[2])&&bm(y);let w=Sv(i,0,a,g),A=l.__ngNextListenerFn__;for(;A;)w=Sv(i,0,A,g)&&w,A=A.__ngNextListenerFn__;return c&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function nf(r=1){return function(r){return(Dt.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,Dt.lFrame.contextLView))[8]}(r)}function Kb(r,i,o,a,c){const l=r[o+1],g=null===i;let y=a?ia(l):au(l),w=!1;for(;0!==y&&(!1===w||g);){const P=r[y+1];KD(r[y],i)&&(w=!0,r[y+1]=a?S_(P):T_(P)),y=a?ia(P):au(P)}w&&(r[o+1]=a?T_(l):S_(l))}function KD(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&B(r,i)>=0}function No(r,i){return function(r,i,o,a){const c=qe(),l=rn(),g=function(r){const i=Dt.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}(2);l.firstUpdatePass&&function(r,i,o,a){const c=r.data;if(null===c[o+1]){const l=c[hi()],g=function(r,i){return i>=r.expandoStartIndex}(r,o);(function(r,i){return 0!=(r.flags&(i?16:32))})(l,a)&&null===i&&!g&&(i=!1),i=function(r,i,o,a){const c=function(r){const i=Dt.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let l=a?i.residualClasses:i.residualStyles;if(null===c)0===(a?i.classBindings:i.styleBindings)&&(o=cf(o=Mv(null,r,i,o,a),i.attrs,a),l=null);else{const g=i.directiveStylingLast;if(-1===g||r[g]!==c)if(o=Mv(c,r,i,o,a),null===l){let w=function(r,i,o){const a=o?i.classBindings:i.styleBindings;if(0!==au(a))return r[ia(a)]}(r,i,a);void 0!==w&&Array.isArray(w)&&(w=Mv(null,r,i,w[1],a),w=cf(w,i.attrs,a),function(r,i,o,a){r[ia(o?i.classBindings:i.styleBindings)]=a}(r,i,a,w))}else l=function(r,i,o){let a;const c=i.directiveEnd;for(let l=1+i.directiveStylingLast;l<c;l++)a=cf(a,r[l].hostAttrs,o);return cf(a,i.attrs,o)}(r,i,a)}return void 0!==l&&(a?i.residualClasses=l:i.residualStyles=l),o}(c,l,i,a),function(r,i,o,a,c,l){let g=l?i.classBindings:i.styleBindings,y=ia(g),w=au(g);r[a]=o;let P,A=!1;if(Array.isArray(o)){const $=o;P=$[1],(null===P||B($,P)>0)&&(A=!0)}else P=o;if(c)if(0!==w){const z=ia(r[y+1]);r[a+1]=bd(z,y),0!==z&&(r[z+1]=A_(r[z+1],a)),r[y+1]=function(r,i){return 131071&r|i<<17}(r[y+1],a)}else r[a+1]=bd(y,0),0!==y&&(r[y+1]=A_(r[y+1],a)),y=a;else r[a+1]=bd(w,0),0===y?y=a:r[w+1]=A_(r[w+1],a),w=a;A&&(r[a+1]=T_(r[a+1])),Kb(r,P,a,!0),Kb(r,P,a,!1),function(r,i,o,a,c){const l=c?r.residualClasses:r.residualStyles;null!=l&&"string"==typeof i&&B(l,i)>=0&&(o[a+1]=S_(o[a+1]))}(i,P,r,a,l),g=bd(y,w),l?i.classBindings=g:i.styleBindings=g}(c,l,i,o,g,a)}}(l,r,g,a),i!==en&&Es(c,g,i)&&function(r,i,o,a,c,l,g,y){if(!(3&i.type))return;const w=r.data,A=w[y+1];Fc(function(r){return 1==(1&r)}(A)?Ov(w,i,o,c,au(A),g):void 0)||(Fc(l)||function(r){return 2==(2&r)}(A)&&(l=Ov(w,null,o,c,y,g)),function(r,i,o,a,c){const l=we(r);if(i)c?l?r.addClass(o,a):o.classList.add(a):l?r.removeClass(o,a):o.classList.remove(a);else{let g=-1===a.indexOf("-")?void 0:Cc.DashCase;if(null==c)l?r.removeStyle(o,a,g):o.style.removeProperty(a);else{const y="string"==typeof c&&c.endsWith("!important");y&&(c=c.slice(0,-10),g|=Cc.Important),l?r.setStyle(o,a,c,g):o.style.setProperty(a,c,y?"important":"")}}}(a,g,Pn(hi(),o),c,l))}(l,l.data[hi()],c,c[11],r,c[g+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=le(fs(r)))),r}(i,o),a,g)}(r,i,null,!0),No}function Mv(r,i,o,a,c){let l=null;const g=o.directiveEnd;let y=o.directiveStylingLast;for(-1===y?y=o.directiveStart:y++;y<g&&(l=i[y],a=cf(a,l.hostAttrs,c),l!==r);)y++;return null!==r&&(o.directiveStylingLast=y),a}function cf(r,i,o){const a=o?1:2;let c=-1;if(null!==i)for(let l=0;l<i.length;l++){const g=i[l];"number"==typeof g?c=g:c===a&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),D(r,g,!!o||i[++l]))}return void 0===r?null:r}function Ov(r,i,o,a,c,l){const g=null===i;let y;for(;c>0;){const w=r[c],A=Array.isArray(w),P=A?w[1]:w,$=null===P;let z=o[c+1];z===en&&(z=$?ot:void 0);let X=$?M(z,a):P===a?z:void 0;if(A&&!Fc(X)&&(X=M(w,a)),Fc(X)&&(y=X,g))return y;const ce=r[c+1];c=g?ia(ce):au(ce)}if(null!==i){let w=l?i.residualClasses:i.residualStyles;null!=w&&(y=M(w,a))}return y}function Fc(r){return void 0!==r}function df(r,i=""){const o=qe(),a=rn(),c=r+20,l=a.firstCreatePass?Dc(a,c,1,i,null):a.data[c],g=o[c]=function(r,i){return we(r)?r.createText(i):r.createTextNode(i)}(o[11],i);Ip(a,o,g,l),ei(l,!1)}function kv(r){return Bm("",r,""),kv}function Bm(r,i,o){const a=qe(),c=function(r,i,o,a){return Es(r,Fs(),o)?i+Xe(o)+a:en}(a,r,i,o);return c!==en&&ju(a,hi(),c),Bm}function zd(r,i,o){const a=qe();return Es(a,Fs(),i)&&lo(rn(),Bn(),a,r,i,a[11],o,!0),zd}const Gu=void 0;var _w=["en",[["a","p"],["AM","PM"],Gu],[["AM","PM"],Gu,Gu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gu,"{1} 'at' {0}",Gu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Wd={};function Gm(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=Ew(i);if(o)return o;const a=i.split("-")[0];if(o=Ew(a),o)return o;if("en"===a)return _w;throw new Error(`Missing locale data for the locale "${r}".`)}function vw(r){return Gm(r)[Mt.PluralCase]}function Ew(r){return r in Wd||(Wd[r]=ee.ng&&ee.ng.common&&ee.ng.common.locales&&ee.ng.common.locales[r]),Wd[r]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const ff="en-US";let pf=ff;function qm(r){Vn(r,"Expected localeId to be defined"),"string"==typeof r&&(pf=r.toLowerCase().replace(/_/g,"-"))}function Cf(r,i,o,a,c){if(r=ue(r),Array.isArray(r))for(let l=0;l<r.length;l++)Cf(r[l],i,o,a,c);else{const l=rn(),g=qe();let y=Ad(r)?r:ue(r.provide),w=nv(r);const A=zn(),P=1048575&A.providerIndexes,$=A.directiveStart,z=A.providerIndexes>>20;if(Ad(r)||!r.multi){const X=new To(w,c,Oa),ce=zu(y,i,c?P:P+z,$);-1===ce?(So(qr(A,g),l,y),mg(l,r,i.length),i.push(y),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),o.push(X),g.push(X)):(o[ce]=X,g[ce]=X)}else{const X=zu(y,i,P+z,$),ce=zu(y,i,P,P+z),Pe=X>=0&&o[X],_e=ce>=0&&o[ce];if(c&&!_e||!c&&!Pe){So(qr(A,g),l,y);const Je=function(r,i,o,a,c){const l=new To(r,o,Oa);return l.multi=[],l.index=i,l.componentProviders=0,Xv(l,c,a&&!o),l}(c?Hw:If,o.length,c,a,w);!c&&_e&&(o[ce].providerFactory=Je),mg(l,r,i.length,0),i.push(y),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),o.push(Je),g.push(Je)}else mg(l,r,X>-1?X:ce,Xv(o[c?ce:X],w,!c&&a));!c&&a&&_e&&o[ce].componentProviders++}}}function mg(r,i,o,a){const c=Ad(i);if(c||function(r){return!!r.useClass}(i)){const g=(i.useClass||i).prototype.ngOnDestroy;if(g){const y=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const w=y.indexOf(o);-1===w?y.push(o,[a,g]):y[w+1].push(a,g)}else y.push(o,g)}}}function Xv(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function zu(r,i,o,a){for(let c=o;c<a;c++)if(i[c]===r)return c;return-1}function If(r,i,o,a){return Uc(this.multi,[])}function Hw(r,i,o,a){const c=this.multi;let l;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=V(o,o[1],this.providerFactory.index,a);l=y.slice(0,g),Uc(c,l);for(let w=g;w<y.length;w++)l.push(y[w])}else l=[],Uc(c,l);return l}function Uc(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function Yd(r,i=[]){return o=>{o.providersResolver=(a,c)=>function(r,i,o){const a=rn();if(a.firstCreatePass){const c=ui(r);Cf(o,a.data,a.blueprint,c,!0),Cf(i,a.data,a.blueprint,c,!1)}}(a,c?c(r):r,i)}}class Bc{}const Qm="ngComponent";class hT{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${le(r)}. Did you add it to @NgModule.entryComponents?`);return i[Qm]=r,i}(i)}}let Df=(()=>{class r{}return r.NULL=new hT,r})();function Qd(...r){}function Jd(r,i){return new Is(Zt(r,i))}const qw=function(){return Jd(zn(),qe())};let Is=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=qw,r})();function yg(r){return r instanceof Is?r.nativeElement:r}class _g{}let tE=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>Xm(),r})();const Xm=function(){const r=qe(),o=on(zn().index,r);return function(r){return r[11]}($r(o)?o:r)};let ey=(()=>{class r{}return r.\u0275prov=vn({token:r,providedIn:"root",factory:()=>null}),r})();class ty{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const ny=new ty("12.2.10");class zw{constructor(){}supports(i){return Yh(i)}create(i){return new iE(i)}}const Ww=(r,i)=>i;class iE{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||Ww}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,a=this._removalsHead,c=0,l=null;for(;o||a;){const g=!a||o&&o.currentIndex<sE(a,c,l)?o:a,y=sE(g,c,l),w=g.currentIndex;if(g===a)c--,a=a._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{l||(l=[]);const A=y-c,P=w-c;if(A!=P){for(let z=0;z<A;z++){const X=z<l.length?l[z]:l[z]=0,ce=X+z;P<=ce&&ce<A&&(l[z]=X+1)}l[g.previousIndex]=P-A}}y!==w&&i(g,y,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Yh(i))throw new Error(`Error trying to diff '${le(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,l,g,o=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)l=i[y],g=this._trackByFn(y,l),null!==o&&Object.is(o.trackById,g)?(a&&(o=this._verifyReinsertion(o,l,g,y)),Object.is(o.item,l)||this._addIdentityChange(o,l)):(o=this._mismatch(o,l,g,y),a=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[Md()]();let a;for(;!(a=o.next()).done;)i(a.value)}}(i,y=>{g=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,g)?(a&&(o=this._verifyReinsertion(o,y,g,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,a,c){let l;return null===i?l=this._itTail:(l=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,l,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,l,c)):i=this._addAfter(new mT(o,a),l,c),i}_verifyReinsertion(i,o,a,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==l?i=this._reinsertAfter(l,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,l=i._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(i,o,a),this._addToMoves(i,a),i}_moveAfter(i,o,a){return this._unlink(i),this._insertAfter(i,o,a),this._addToMoves(i,a),i}_addAfter(i,o,a){return this._insertAfter(i,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,a){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Kw),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,a=i._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kw),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class mT{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zw{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const o=i._prevDup,a=i._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class Kw{constructor(){this.map=new Map}put(i){const o=i.trackById;let a=this.map.get(o);a||(a=new Zw,this.map.set(o,a)),a.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sE(r,i,o){const a=r.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+i+c}class Yw{constructor(){}supports(i){return i instanceof Map||pv(i)}create(){return new Af}}class Af{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||pv(i)))throw new Error(`Error trying to diff '${le(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const l=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,l)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const a=i._prev;return o._next=i,o._prev=a,i._prev=o,a&&(a._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const l=c._prev,g=c._next;return l&&(l._next=g),g&&(g._prev=l),c._next=null,c._prev=null,c}const a=new Sf(i);return this._records.set(i,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(a=>o(i[a],a))}}class Sf{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ry(){return new Xd([new zw])}let Xd=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||ry()),deps:[[r,new Ta,new ra]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=vn({token:r,providedIn:"root",factory:ry}),r})();function oE(){return new iy([new Yw])}let iy=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||oE()),deps:[[r,new Ta,new ra]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=vn({token:r,providedIn:"root",factory:oE}),r})();function xf(r,i,o,a,c=!1){for(;null!==o;){const l=i[o.index];if(null!==l&&a.push(ht(l)),At(l))for(let y=10;y<l.length;y++){const w=l[y],A=w[1].firstChild;null!==A&&xf(w[1],w,A,a)}const g=o.type;if(8&g)xf(r,i,o.child,a);else if(32&g){const y=_p(o,i);let w;for(;w=y();)a.push(w)}else if(16&g){const y=eD(i,o);if(Array.isArray(y))a.push(...y);else{const w=Qg(i[16]);xf(w[1],w,y,a,!0)}}o=c?o.projectionNext:o.next}return a}class vg{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return xf(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(At(i)){const o=i[8],a=o?o.indexOf(this):-1;a>-1&&(bp(i,a),ta(o,a))}this._attachedToViewContainer=!1}B0(this._lView[1],this._lView)}onDestroy(i){xp(this._lView[1],this._lView,null,i)}markForCheck(){bm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Z_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){wo(!0);try{Z_(r,i,o)}finally{wo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Vh(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class aE extends vg{constructor(i){super(i),this._view=i}detectChanges(){pb(this._view)}checkNoChanges(){!function(r){wo(!0);try{pb(r)}finally{wo(!1)}}(this._view)}get context(){return null}}const _T=function(r){return function(r,i,o){if(eo(r)&&!o){const a=on(r.index,i);return new vg(a,a)}return 47&r.type?new vg(i[16],i):null}(zn(),qe(),16==(16&r))};let uE=(()=>{class r{}return r.__NG_ELEMENT_ID__=_T,r})();const ET=[new Yw],wT=new Xd([new zw]),CT=new iy(ET),eC=function(){return eh(zn(),qe())};let Rf=(()=>{class r{}return r.__NG_ELEMENT_ID__=eC,r})();const cE=Rf,sy=class extends cE{constructor(i,o,a){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(i){const o=this._declarationTContainer.tViews,a=$h(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const l=this._declarationLView[19];return null!==l&&(a[19]=l.createEmbeddedView(o)),Cd(o,a,i),new vg(a)}};function eh(r,i){return 4&r.type?new sy(i,r,Jd(r,i)):null}class jc{}class oy{}const TT=function(){return Mf(zn(),qe())};let bg=(()=>{class r{}return r.__NG_ELEMENT_ID__=TT,r})();const ST=bg,tC=class extends ST{constructor(i,o,a){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=a}get element(){return Jd(this._hostTNode,this._hostLView)}get injector(){return new rt(this._hostTNode,this._hostLView)}get parentInjector(){const i=Ia(this._hostTNode,this._hostLView);if(Vs(i)){const o=Ca(i,this._hostLView),a=Qo(i);return new rt(o[1].data[a+8],o)}return new rt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=dE(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,a){const c=i.createEmbeddedView(o||{});return this.insert(c,a),c}createComponent(i,o,a,c,l){const g=a||this.parentInjector;if(!l&&null==i.ngModule&&g){const w=g.get(jc,null);w&&(l=w)}const y=i.create(g,c,void 0,l);return this.insert(y.hostView,o),y}insert(i,o){const a=i._lView,c=a[1];if(At(a[3])){const P=this.indexOf(i);if(-1!==P)this.detach(P);else{const $=a[3],z=new tC($,$[6],$[3]);z.detach(z.indexOf(i))}}const l=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,a){const c=10+a,l=o.length;a>0&&(o[c-1][4]=i),a<l-10?(i[4]=o[c],uo(o,10+a,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,a,g,l);const y=Dp(l,g),w=a[11],A=Ed(w,g[7]);return null!==A&&function(r,i,o,a,c,l){a[0]=c,a[6]=i,Vh(r,a,o,1,c,l)}(c,g[6],w,a,A,y),i.attachToViewContainerRef(),uo(Nf(g),l,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=dE(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),a=bp(this._lContainer,o);a&&(ta(Nf(this._lContainer),o),B0(a[1],a))}detach(i){const o=this._adjustIndex(i,-1),a=bp(this._lContainer,o);return a&&null!=ta(Nf(this._lContainer),o)?new vg(a):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function dE(r){return r[8]}function Nf(r){return r[8]||(r[8]=[])}function Mf(r,i){let o;const a=i[r.index];if(At(a))o=a;else{let c;if(8&r.type)c=ht(a);else{const l=i[11];c=l.createComment("");const g=Zt(r,i);vd(l,Ed(l,g),c,function(r,i){return we(r)?r.nextSibling(i):i.nextSibling}(l,g),!1)}i[r.index]=o=hb(a,i,c,r),Mp(i,o)}return new tC(o,r,i)}const Pf={};class FE extends Df{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=wt(i);return new Dg(o,this.ngModule)}}function LE(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const VE=new Qn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gd});class Dg extends Bc{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(Q0).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return LE(this.componentDef.inputs)}get outputs(){return LE(this.componentDef.outputs)}create(i,o,a,c){const l=(c=c||this.ngModule)?function(r,i){return{get:(o,a,c)=>{const l=r.get(o,Pf,c);return l!==Pf||a===Pf?l:i.get(o,a,c)}}}(i,c.injector):i,g=l.get(_g,st),y=l.get(ey,null),w=g.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",P=a?function(r,i,o){if(we(r))return r.selectRootElement(i,o===$n.ShadowDom);let a="string"==typeof i?r.querySelector(i):i;return a.textContent="",a}(w,a,this.componentDef.encapsulation):Ep(g.createRenderer(null,this.componentDef),A,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(A)),$=this.componentDef.onPush?576:528,z=function(r,i){return{components:[],scheduler:r||gd,clean:gb,playerHandler:i||null,flags:0}}(),X=Sl(0,null,null,1,0,null,null,null,null,null),ce=$h(null,X,z,$,null,null,g,w,y,l);let Pe,_e;zo(ce);try{const Je=function(r,i,o,a,c,l){const g=o[1];o[20]=r;const w=Dc(g,20,2,"#host",null),A=w.mergedAttrs=i.hostAttrs;null!==A&&(xl(w,A,!0),null!==r&&(nr(c,r,A),null!==w.classes&&C_(c,r,w.classes),null!==w.styles&&G0(c,r,w.styles)));const P=a.createRenderer(r,i),$=$h(o,vs(i),null,i.onPush?64:16,o[20],w,a,P,l||null,null);return g.firstCreatePass&&(So(qr(w,o),g,i.type),_m(g,w),G_(w,o.length,1)),Mp(o,$),o[20]=$}(P,this.componentDef,ce,g,w);if(P)if(a)nr(w,P,["ng-version",ny.full]);else{const{attrs:Ge,classes:Rt}=function(r){const i=[],o=[];let a=1,c=2;for(;a<r.length;){let l=r[a];if("string"==typeof l)2===c?""!==l&&i.push(l,r[++a]):8===c&&o.push(l);else{if(!xa(c))break;c=l}a++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Ge&&nr(w,P,Ge),Rt&&Rt.length>0&&C_(w,P,Rt.join(" "))}if(_e=bi(X,20),void 0!==o){const Ge=_e.projection=[];for(let Rt=0;Rt<this.ngContentSelectors.length;Rt++){const Qt=o[Rt];Ge.push(null!=Qt?Array.from(Qt):null)}}Pe=function(r,i,o,a,c){const l=o[1],g=function(r,i,o){const a=zn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),db(r,a,i,Al(r,i,1,null),o));const c=V(i,r,a.directiveStart,a);pi(c,i);const l=Zt(a,i);return l&&pi(l,i),c}(l,o,i);if(a.components.push(g),r[8]=g,c&&c.forEach(w=>w(g,i)),i.contentQueries){const w=zn();i.contentQueries(1,g,w.directiveStart)}const y=zn();return!l.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(qi(y.index),mm(o[1],y,0,y.directiveStart,y.directiveEnd,i),Xi(i,g)),g}(Je,this.componentDef,ce,z,[Rm]),Cd(X,ce,null)}finally{rl()}return new XT(this.componentType,Pe,Jd(_e,ce),ce,_e)}}class XT extends class{}{constructor(i,o,a,c,l){super(),this.location=a,this._rootLView=c,this._tNode=l,this.instance=o,this.hostView=this.changeDetectorRef=new aE(c),this.componentType=i}get injector(){return new rt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const ch=new Map;class Ey extends jc{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new FE(this);const a=Hn(i),c=i[tn]||null;c&&qm(c),this._bootstrapComponents=$s(a.bootstrap),this._r3Injector=ev(i,o,[{provide:jc,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],le(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=ur.THROW_IF_NOT_FOUND,a=ze.Default){return i===ur||i===jc||i===Id?this:this._r3Injector.get(i,o,a)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Tg extends oy{constructor(i){super(),this.moduleType=i,null!==Hn(i)&&function(r){const i=new Set;!function o(a){const c=Hn(a,!0),l=c.id;null!==l&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${le(i)} vs ${le(i.name)}`)}(l,ch.get(l),a),ch.set(l,a));const g=$s(c.imports);for(const y of g)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new Ey(this.moduleType,i)}}function $E(r,i,o,a,c){return function(r,i,o,a,c,l,g){const y=i+o;return function(r,i,o,a){const c=Es(r,i,o);return Es(r,i+1,a)||c}(r,y,c,l)?function(r,i,o){return r[i]=o}(r,y+2,g?a.call(g,c,l):a(c,l)):function(r,i){const o=r[i];return o===en?void 0:o}(r,y+2)}(qe(),function(){const r=Dt.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}(),r,i,o,a,c)}function by(r){return i=>{setTimeout(r,void 0,i)}}const Lo=class extends T.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,a){var c,l,g;let y=i,w=o||(()=>null),A=a;if(i&&"object"==typeof i){const $=i;y=null===(c=$.next)||void 0===c?void 0:c.bind($),w=null===(l=$.error)||void 0===l?void 0:l.bind($),A=null===(g=$.complete)||void 0===g?void 0:g.bind($)}this.__isAsync&&(w=by(w),y&&(y=by(y)),A&&(A=by(A)));const P=super.subscribe({next:y,error:w,complete:A});return i instanceof f.w&&i.add(P),P}};function sA(){return this._results[Md()]()}class rr{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Md(),a=rr.prototype;a[o]||(a[o]=sA)}get changes(){return this._changes||(this._changes=new Lo)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const a=this;a.dirty=!1;const c=hs(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let c=r[a],l=i[a];if(o&&(c=o(c),l=o(l)),l!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class WE{constructor(i){this.queryList=i,this.matches=null}clone(){return new WE(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lf{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const a=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let l=0;l<a;l++){const g=o.getByIndex(l);c.push(this.queries[g.indexInDeclarationView].clone())}return new Lf(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==qC(i,o).matches&&this.queries[o].setDirty()}}class ZE{constructor(i,o,a=null){this.predicate=i,this.flags=o,this.read=a}}class wy{constructor(i=[]){this.queries=i}elementStart(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,l=this.getByIndex(a).embeddedTView(i,c);l&&(l.indexInDeclarationView=a,null!==o?o.push(l):o=[l])}return null!==o?new wy(o):null}template(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class KE{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new KE(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const l=a[c];this.matchTNodeWithReadOption(i,o,YE(o,l)),this.matchTNodeWithReadOption(i,o,O(o,i,l,!1,!1))}else a===Rf?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,O(o,i,a,!1,!1))}matchTNodeWithReadOption(i,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Is||c===bg||c===Rf&&4&o.type)this.addMatch(o.index,-2);else{const l=O(o,i,c,!1,!1);null!==l&&this.addMatch(o.index,l)}else this.addMatch(o.index,a)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function YE(r,i){const o=r.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===i)return o[a+1];return null}function uA(r,i,o,a){return-1===o?function(r,i){return 11&r.type?Jd(r,i):4&r.type?eh(r,i):null}(i,r):-2===o?function(r,i,o){return o===Is?Jd(i,r):o===Rf?eh(i,r):o===bg?Mf(i,r):void 0}(r,i,a):V(r,r[1],o,i)}function cA(r,i,o,a){const c=i[19].queries[a];if(null===c.matches){const l=r.data,g=o.matches,y=[];for(let w=0;w<g.length;w+=2){const A=g[w];y.push(A<0?null:uA(i,l[A],g[w+1],o.metadata.read))}c.matches=y}return c.matches}function VC(r,i,o,a){const c=r.queries.getByIndex(o),l=c.matches;if(null!==l){const g=cA(r,i,c,o);for(let y=0;y<l.length;y+=2){const w=l[y];if(w>0)a.push(g[y/2]);else{const A=l[y+1],P=i[-w];for(let $=10;$<P.length;$++){const z=P[$];z[17]===z[3]&&VC(z[1],z,A,a)}if(null!==P[9]){const $=P[9];for(let z=0;z<$.length;z++){const X=$[z];VC(X[1],X,A,a)}}}}}return a}function _i(r){const i=qe(),o=rn(),a=Co();rc(a+1);const c=qC(o,a);if(r.dirty&&Or(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const l=c.crossesNgTemplate?VC(o,i,a,[]):cA(o,i,c,a);r.reset(l,yg),r.notifyOnChanges()}return!0}return!1}function BC(r,i,o,a){const c=rn();if(c.firstCreatePass){const l=zn();(function(r,i,o){null===r.queries&&(r.queries=new wy),r.queries.track(new KE(i,o))})(c,new ZE(i,o,a),l.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const a=new rr(4==(4&o));xp(r,i,a,a.destroy),null===i[19]&&(i[19]=new Lf),i[19].queries.push(new WE(a))}(c,qe(),o)}function jC(){return r=qe(),i=Co(),r[19].queries[i].queryList;var r,i}function qC(r,i){return r.queries.getByIndex(i)}const r0=new Qn("Application Initializer");let pu=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Qd,this.reject=Qd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const l=this.appInits[c]();if(Mm(l))o.push(l);else if(ng(l)){const g=new Promise((y,w)=>{l.subscribe({complete:y,error:w})});o.push(g)}}Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Fr(r0,8))},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();const Oy=new Qn("AppId"),xA={provide:Oy,useFactory:function(){return`${s0()}${s0()}${s0()}`},deps:[]};function s0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sI=new Qn("Platform Initializer"),oI=new Qn("Platform ID"),aI=new Qn("appBootstrapListener");let RA=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();const Py=new Qn("LocaleId"),uI=new Qn("DefaultCurrencyCode");class MA{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const Hf=function(r){return new Tg(r)},PA=Hf,hh=function(r){return Promise.resolve(Hf(r))},Ys=function(r){const i=Hf(r),a=$s(Hn(r).declarations).reduce((c,l)=>{const g=wt(l);return g&&c.push(new Dg(g)),c},[]);return new MA(i,a)},dI=Ys,Rg=function(r){return Promise.resolve(Ys(r))};let Oi=(()=>{class r{constructor(){this.compileModuleSync=PA,this.compileModuleAsync=hh,this.compileModuleAndAllComponentsSync=dI,this.compileModuleAndAllComponentsAsync=Rg}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();const Gf=(()=>Promise.resolve(0))();function Jc(r){"undefined"==typeof Zone?Gf.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Pi{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lo(!1),this.onMicrotaskEmpty=new Lo(!1),this.onStable=new Lo(!1),this.onError=new Lo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=ee.requestAnimationFrame,i=ee.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ee,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,c0(r),r.isCheckStableRunning=!0,u0(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),c0(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,l,g,y)=>{try{return qf(r),o.invokeTask(c,l,g,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||r.shouldCoalesceRunChangeDetection)&&i(),fI(r)}},onInvoke:(o,a,c,l,g,y,w)=>{try{return qf(r),o.invoke(c,l,g,y,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),fI(r)}},onHasTask:(o,a,c,l)=>{o.hasTask(c,l),a===c&&("microTask"==l.change?(r._hasPendingMicrotasks=l.microTask,c0(r),u0(r)):"macroTask"==l.change&&(r.hasPendingMacrotasks=l.macroTask))},onHandleError:(o,a,c,l)=>(o.handleError(c,l),r.runOutsideAngular(()=>r.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Pi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,a){return this._inner.run(i,o,a)}runTask(i,o,a,c){const l=this._inner,g=l.scheduleEventTask("NgZoneEvent: "+c,i,UA,Qd,Qd);try{return l.runTask(g,o,a)}finally{l.cancelTask(g)}}runGuarded(i,o,a){return this._inner.runGuarded(i,o,a)}runOutsideAngular(i){return this._outer.run(i)}}const UA={};function u0(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function c0(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function qf(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function fI(r){r._nesting--,u0(r)}class jA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lo,this.onMicrotaskEmpty=new Lo,this.onStable=new Lo,this.onError=new Lo}run(i,o,a){return i.apply(o,a)}runGuarded(i,o,a){return i.apply(o,a)}runOutsideAngular(i){return i()}runTask(i,o,a,c){return i.apply(o,a)}}let pI=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pi.assertNotInAngularZone(),Jc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jc(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let l=-1;a&&a>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==l),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:l,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Fr(Pi))},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})(),gI=(()=>{class r{constructor(){this._applications=new Map,Ly.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Ly.findTestabilityInTree(this,o,a)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();class $A{addToWindow(i){}findTestabilityInTree(i,o,a){return null}}function HA(r){Ly=r}let Ly=new $A,mI=!0,yI=!1;function Vy(){return yI=!0,mI}function l0(){if(yI)throw new Error("Cannot enable prod mode after platform setup.");mI=!1}let mu;const II=new Qn("AllowMultipleToken");class DI{constructor(i,o){this.name=i,this.token=o}}function Uy(r,i,o=[]){const a=`Platform: ${i}`,c=new Qn(a);return(l=[])=>{let g=TI();if(!g||g.injector.get(II,!1))if(r)r(o.concat(l).concat({provide:c,useValue:!0}));else{const y=o.concat(l).concat({provide:c,useValue:!0},{provide:Tc,useValue:"platform"});!function(r){if(mu&&!mu.destroyed&&!mu.injector.get(II,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");mu=r.get(jy);const i=r.get(sI,null);i&&i.forEach(o=>o())}(ur.create({providers:y,name:a}))}return function(r){const i=TI();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function TI(){return mu&&!mu.destroyed?mu:null}let jy=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const y=function(r,i){let o;return o="noop"===r?new jA:("zone.js"===r?void 0:r)||new Pi({enableLongStackTrace:Vy(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),w=[{provide:Pi,useValue:y}];return y.run(()=>{const A=ur.create({providers:w,parent:this.injector,name:o.moduleType.name}),P=o.create(A),$=P.injector.get(Le,null);if(!$)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const z=y.onError.subscribe({next:X=>{$.handleError(X)}});P.onDestroy(()=>{h0(this._modules,P),z.unsubscribe()})}),function(r,i,o){try{const a=o();return Mm(a)?a.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):a}catch(a){throw i.runOutsideAngular(()=>r.handleError(a)),a}}($,y,()=>{const z=P.injector.get(pu);return z.runInitializers(),z.donePromise.then(()=>(qm(P.injector.get(Py,ff)||ff),this._moduleDoBootstrap(P),P))})})}bootstrapModule(o,a=[]){const c=d0({},a);return function(r,i,o){const a=new Tg(o);return Promise.resolve(a)}(0,0,o).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(o){const a=o.injector.get(zf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${le(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Fr(ur))},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();function d0(r,i){return Array.isArray(i)?i.reduce(d0,r):Object.assign(Object.assign({},r),i)}let zf=(()=>{class r{constructor(o,a,c,l,g){this._zone=o,this._injector=a,this._exceptionHandler=c,this._componentFactoryResolver=l,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new G.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),w=new G.y(A=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{Pi.assertNotInAngularZone(),Jc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const $=this._zone.onUnstable.subscribe(()=>{Pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{P.unsubscribe(),$.unsubscribe()}});this.isStable=(0,pe.T)(y,w.pipe(r=>(0,ae.x)()(function(r,i){return function(a){let c;c="function"==typeof r?r:function(){return r};const l=Object.create(a,re.N);return l.source=a,l.subjectFactory=c,l}}(J)(r))))}bootstrap(o,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof Bc?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const l=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(jc),y=c.create(ur.NULL,[],a||c.selector,l),w=y.location.nativeElement,A=y.injector.get(pI,null),P=A&&y.injector.get(gI);return A&&P&&P.registerApplication(w,A),y.onDestroy(()=>{this.detachView(y.hostView),h0(this.components,y),P&&P.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;h0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(aI,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Fr(Pi),Fr(ur),Fr(Le),Fr(Df),Fr(pu))},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();function h0(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class YA{}class eS{}const tS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let nS=(()=>{class r{constructor(o,a){this._compiler=o,this._config=a||tS}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[a,c]=o.split("#");return void 0===c&&(c="default"),U(8255)(a).then(l=>l[c]).then(l=>RI(l,a,c)).then(l=>this._compiler.compileModuleAsync(l))}loadFactory(o){let[a,c]=o.split("#"),l="NgFactory";return void 0===c&&(c="default",l=""),U(8255)(this._config.factoryPathPrefix+a+this._config.factoryPathSuffix).then(g=>g[c+l]).then(g=>RI(g,a,c))}}return r.\u0275fac=function(o){return new(o||r)(Fr(Oi),Fr(eS,8))},r.\u0275prov=vn({token:r,factory:r.\u0275fac}),r})();function RI(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const lS=function(r){return null},fS=Uy(null,"core",[{provide:oI,useValue:"unknown"},{provide:jy,deps:[ur]},{provide:gI,deps:[]},{provide:RA,deps:[]}]),_S=[{provide:zf,useClass:zf,deps:[Pi,ur,Le,Df,pu]},{provide:VE,deps:[Pi],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:pu,useClass:pu,deps:[[new ra,r0]]},{provide:Oi,useClass:Oi,deps:[]},xA,{provide:Xd,useFactory:function(){return wT},deps:[]},{provide:iy,useFactory:function(){return CT},deps:[]},{provide:Py,useFactory:function(r){return qm(r=r||"undefined"!=typeof $localize&&$localize.locale||ff),r},deps:[[new pl(Py),new ra,new Ta]]},{provide:uI,useValue:"USD"}];let ES=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Fr(zf))},r.\u0275mod=Vo({type:r}),r.\u0275inj=wr({providers:_S}),r})()},8939:(ut,Ne,U)=>{"use strict";U.d(Ne,{hO:()=>le,xv:()=>J,Dh:()=>ae,GT:()=>oe,cc:()=>Ee,on:()=>W,pX:()=>re});var T=U(3018),f=U(7841),G=U(6643);ut=U.hmd(ut);const pe=["ngOnDestroy"],re=(Oe,Ae,Te,je={})=>new Proxy(Oe,{get:(Be,Xe)=>Te.runOutsideAngular(()=>{var Ut;if(Oe[Xe])return(null===(Ut=null==je?void 0:je.spy)||void 0===Ut?void 0:Ut.get)&&je.spy.get(Xe,Oe[Xe]),Oe[Xe];if(pe.indexOf(Xe)>-1)return()=>{};const Pt=Ae.toPromise().then($e=>{const ye=$e&&$e[Xe];return"function"==typeof ye?ye.bind($e):ye&&ye.then?ye.then(Ie=>Te.run(()=>Ie)):Te.run(()=>ye)});return new Proxy(()=>{},{get:($e,ye)=>Pt[ye],apply:($e,ye,Ie)=>Pt.then(xe=>{var Ce;const Ye=xe&&xe(...Ie);return(null===(Ce=null==je?void 0:je.spy)||void 0===Ce?void 0:Ce.apply)&&je.spy.apply(Xe,Ie,Ye),Ye})})})}),oe=(Oe,Ae)=>{Ae.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(je=>{Object.defineProperty(Oe.prototype,je,Object.getOwnPropertyDescriptor(Te.prototype||Te,je))})})};class ve{constructor(Ae){return Ae}}const ae=new T.OlP("angularfire2.app.options"),J=new T.OlP("angularfire2.app.name");function W(Oe,Ae,Te){const Be="object"==typeof Te&&Te||{};Be.name=Be.name||"string"==typeof Te&&Te||"[DEFAULT]";const Ut=f.Z.apps.filter(Pt=>Pt&&Pt.name===Be.name)[0]||Ae.runOutsideAngular(()=>f.Z.initializeApp(Oe,Be));try{JSON.stringify(Oe)!==JSON.stringify(Ut.options)&&Z("error",`${Ut.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Pt){}return new ve(Ut)}const Z=(Oe,...Ae)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[Oe](...Ae)},de={provide:ve,useFactory:W,deps:[ae,T.R0b,[new T.FiY,J]]};let le=(()=>{class Oe{constructor(Te){f.Z.registerVersion("angularfire",G.q4.full,"core"),f.Z.registerVersion("angularfire",G.q4.full,"app-compat"),f.Z.registerVersion("angular",T.q4F.full,Te.toString())}static initializeApp(Te,je){return{ngModule:Oe,providers:[{provide:ae,useValue:Te},{provide:J,useValue:je}]}}}return Oe.\u0275fac=function(Te){return new(Te||Oe)(T.LFG(T.Lbi))},Oe.\u0275mod=T.oAB({type:Oe}),Oe.\u0275inj=T.cJS({providers:[de]}),Oe})();function Ee(Oe,Ae,Te,je,Be){const[,Xe,Ut]=globalThis.\u0275AngularfireInstanceCache.find(Pt=>Pt[0]===Oe)||[];if(Xe)return function(Oe,Ae){try{return Oe.toString()===Ae.toString()}catch(Te){return Oe===Ae}}(Be,Ut)||(ue("error",`${Ae} was already initialized on the ${Te} Firebase App with different settings.${Me?" You may need to reload as Firebase is not HMR aware.":""}`),ue("warn",{is:Be,was:Ut})),Xe;{const Pt=je();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Pt,Be]),Pt}}const Me=!!ut.hot,ue=(Oe,...Ae)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[Oe](...Ae)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(ut,Ne,U)=>{"use strict";U.d(Ne,{q4:()=>Yf,iC:()=>sd,fc:()=>ll,HU:()=>Ii,vb:()=>Mu,JM:()=>cl});var T=U(3018),f=U(2329),G=U(8239),pe=U(5452),re=U(3854),oe=U(6034),ve=U(5601),ae=U(6676);const J="@firebase/installations",W="0.5.2",de=`w:${W}`,le="FIS_v2",Ae=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function je({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Be(D){return{token:D.token,requestStatus:2,expiresIn:xe(D.expiresIn),creationTime:Date.now()}}function Xe(D,M){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,G.Z)(function*(D,M){const K=(yield M.json()).error;return Ae.create("request-failed",{requestName:D,serverCode:K.code,serverMessage:K.message,serverStatus:K.status})})).apply(this,arguments)}function Pt({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function $e(D,{refreshToken:M}){const B=Pt(D);return B.append("Authorization",function(D){return`${le} ${D}`}(M)),B}function ye(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,G.Z)(function*(D){const M=yield D();return M.status>=500&&M.status<600?D():M})).apply(this,arguments)}function xe(D){return Number(D.replace("s","000"))}function Ye(D,M){return Re.apply(this,arguments)}function Re(){return(Re=(0,G.Z)(function*(D,{fid:M}){const B=je(D),ke={method:"POST",headers:Pt(D),body:JSON.stringify({fid:M,authVersion:le,appId:D.appId,sdkVersion:de})},Ze=yield ye(()=>fetch(B,ke));if(Ze.ok){const mt=yield Ze.json();return{fid:mt.fid||M,registrationStatus:2,refreshToken:mt.refreshToken,authToken:Be(mt.authToken)}}throw yield Xe("Create Installation",Ze)})).apply(this,arguments)}function _t(D){return new Promise(M=>{setTimeout(M,D)})}const Zn=/^[cdef][\w-]{21}$/;function dn(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const B=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Zn.test(B)?B:""}catch(D){return""}}function _n(D){return`${D.appName}!${D.appId}`}const lr=new Map;function Yr(D,M){const B=_n(D);Ht(B,M),function(D,M){const B=(!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=D=>{Ht(D.data.key,D.data.fid)}),dr);B&&B.postMessage({key:D,fid:M}),0===lr.size&&dr&&(dr.close(),dr=null)}(B,M)}function Ht(D,M){const B=lr.get(D);if(B)for(const K of B)K(M)}let dr=null;const On="firebase-installations-store";let Fi=null;function vi(){return Fi||(Fi=(0,ae.openDb)("firebase-installations-database",1,D=>{switch(D.oldVersion){case 0:D.createObjectStore(On)}})),Fi}function Xn(D,M){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,G.Z)(function*(D,M){const B=_n(D),fe=(yield vi()).transaction(On,"readwrite"),ke=fe.objectStore(On),Ze=yield ke.get(B);return yield ke.put(M,B),yield fe.complete,(!Ze||Ze.fid!==M.fid)&&Yr(D,M.fid),M})).apply(this,arguments)}function er(D){return As.apply(this,arguments)}function As(){return(As=(0,G.Z)(function*(D){const M=_n(D),K=(yield vi()).transaction(On,"readwrite");yield K.objectStore(On).delete(M),yield K.complete})).apply(this,arguments)}function Tt(D,M){return ze.apply(this,arguments)}function ze(){return(ze=(0,G.Z)(function*(D,M){const B=_n(D),fe=(yield vi()).transaction(On,"readwrite"),ke=fe.objectStore(On),Ze=yield ke.get(B),mt=M(Ze);return void 0===mt?yield ke.delete(B):yield ke.put(mt,B),yield fe.complete,mt&&(!Ze||Ze.fid!==mt.fid)&&Yr(D,mt.fid),mt})).apply(this,arguments)}function gn(D){return xn.apply(this,arguments)}function xn(){return(xn=(0,G.Z)(function*(D){let M;const B=yield Tt(D,K=>{const fe=jn(K),ke=an(D,fe);return M=ke.registrationPromise,ke.installationEntry});return""===B.fid?{installationEntry:yield M}:{installationEntry:B,registrationPromise:M}})).apply(this,arguments)}function jn(D){return $n(D||{fid:dn(),registrationStatus:0})}function an(D,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(Ae.create("app-offline"))};const B={fid:M.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:B,registrationPromise:function(D,M){return gt.apply(this,arguments)}(D,B)}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Un(D)}:{installationEntry:M}}function gt(){return(gt=(0,G.Z)(function*(D,M){try{return Xn(D,yield Ye(D,M))}catch(B){throw Te(B)&&409===B.customData.serverCode?yield er(D):yield Xn(D,{fid:M.fid,registrationStatus:0}),B}})).apply(this,arguments)}function Un(D){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,G.Z)(function*(D){let M=yield Li(D);for(;1===M.registrationStatus;)yield _t(100),M=yield Li(D);if(0===M.registrationStatus){const{installationEntry:B,registrationPromise:K}=yield gn(D);return K||B}return M})).apply(this,arguments)}function Li(D){return Tt(D,M=>{if(!M)throw Ae.create("installation-not-found");return $n(M)})}function $n(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Lt(D,M){return ie.apply(this,arguments)}function ie(){return(ie=(0,G.Z)(function*({appConfig:D,platformLoggerProvider:M},B){const K=se(D,B),fe=$e(D,B),ke=M.getImmediate({optional:!0});ke&&fe.append("x-firebase-client",ke.getPlatformInfoString());const mt={method:"POST",headers:fe,body:JSON.stringify({installation:{sdkVersion:de}})},dt=yield ye(()=>fetch(K,mt));if(dt.ok)return Be(yield dt.json());throw yield Xe("Generate Auth Token",dt)})).apply(this,arguments)}function se(D,{fid:M}){return`${je(D)}/${M}/authTokens:generate`}function ee(D){return He.apply(this,arguments)}function He(){return(He=(0,G.Z)(function*(D,M=!1){let B;const K=yield Tt(D.appConfig,ke=>{if(!En(ke))throw Ae.create("not-registered");const Ze=ke.authToken;if(!M&&Qr(Ze))return ke;if(1===Ze.requestStatus)return B=be(D,M),ke;{if(!navigator.onLine)throw Ae.create("app-offline");const mt=$t(ke);return B=qt(D,mt),mt}});return B?yield B:K.authToken})).apply(this,arguments)}function be(D,M){return lt.apply(this,arguments)}function lt(){return(lt=(0,G.Z)(function*(D,M){let B=yield ot(D.appConfig);for(;1===B.authToken.requestStatus;)yield _t(100),B=yield ot(D.appConfig);const K=B.authToken;return 0===K.requestStatus?ee(D,M):K})).apply(this,arguments)}function ot(D){return Tt(D,M=>{if(!En(M))throw Ae.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function qt(D,M){return In.apply(this,arguments)}function In(){return(In=(0,G.Z)(function*(D,M){try{const B=yield Lt(D,M),K=Object.assign(Object.assign({},M),{authToken:B});return yield Xn(D.appConfig,K),B}catch(B){if(!Te(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const K=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Xn(D.appConfig,K)}else yield er(D.appConfig);throw B}})).apply(this,arguments)}function En(D){return void 0!==D&&2===D.registrationStatus}function Qr(D){return 2===D.requestStatus&&!function(D){const M=Date.now();return M<D.creationTime||D.creationTime+D.expiresIn<M+36e5}(D)}function $t(D){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:M})}function mo(){return(mo=(0,G.Z)(function*(D){const M=D,{installationEntry:B,registrationPromise:K}=yield gn(M.appConfig);return K?K.catch(console.error):ee(M).catch(console.error),B.fid})).apply(this,arguments)}function yo(){return(yo=(0,G.Z)(function*(D,M=!1){const B=D;return yield Ua(B.appConfig),(yield ee(B,M)).token})).apply(this,arguments)}function Ua(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,G.Z)(function*(D){const{registrationPromise:M}=yield gn(D);M&&(yield M)})).apply(this,arguments)}function Hn(D){return Ae.create("missing-app-config-values",{valueName:D})}const vu="installations";(0,pe._registerComponent)(new oe.wA(vu,D=>{const M=D.getProvider("app").getImmediate();return{app:M,appConfig:function(D){if(!D||!D.options)throw Hn("App Configuration");if(!D.name)throw Hn("App Name");const M=["projectId","apiKey","appId"];for(const B of M)if(!D.options[B])throw Hn(B);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(M),platformLoggerProvider:(0,pe._getProvider)(M,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,pe._registerComponent)(new oe.wA("installations-internal",D=>{const M=D.getProvider("app").getImmediate(),B=(0,pe._getProvider)(M,vu).getImmediate();return{getId:()=>function(D){return mo.apply(this,arguments)}(B),getToken:fe=>function(D){return yo.apply(this,arguments)}(B,fe)}},"PRIVATE")),(0,pe.registerVersion)(J,W),(0,pe.registerVersion)(J,W,"esm2017");const sr="@firebase/remote-config",mn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rs{constructor(M,B,K,fe){this.client=M,this.storage=B,this.storageCache=K,this.logger=fe}isCachedDataFresh(M,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const K=Date.now()-B,fe=K<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${K}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${fe}.`),fe}fetch(M){var B=this;return(0,G.Z)(function*(){const[K,fe]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(fe&&B.isCachedDataFresh(M.cacheMaxAgeMillis,K))return fe;M.eTag=fe&&fe.eTag;const ke=yield B.client.fetch(M),Ze=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&Ze.push(B.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(Ze),ke})()}}function $r(D=navigator){return D.languages&&D.languages[0]||D.language}class At{constructor(M,B,K,fe,ke,Ze){this.firebaseInstallations=M,this.sdkVersion=B,this.namespace=K,this.projectId=fe,this.apiKey=ke,this.appId=Ze}fetch(M){var B=this;return(0,G.Z)(function*(){const[K,fe]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),Ze=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,mt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},dt={sdk_version:B.sdkVersion,app_instance_id:K,app_instance_id_token:fe,app_id:B.appId,language_code:$r()},ln={method:"POST",headers:mt,body:JSON.stringify(dt)},Dn=fetch(Ze,ln),ni=new Promise((xo,na)=>{M.signal.addEventListener(()=>{const iu=new Error("The operation was aborted.");iu.name="AbortError",na(iu)})});let Di;try{yield Promise.race([Dn,ni]),Di=yield Dn}catch(xo){let na="fetch-client-network";throw"AbortError"===xo.name&&(na="fetch-timeout"),mn.create(na,{originalErrorMessage:xo.message})}let kr=Di.status;const Bs=Di.headers.get("ETag")||void 0;let ku,Qi;if(200===Di.status){let xo;try{xo=yield Di.json()}catch(na){throw mn.create("fetch-client-parse",{originalErrorMessage:na.message})}ku=xo.entries,Qi=xo.state}if("INSTANCE_STATE_UNSPECIFIED"===Qi?kr=500:"NO_CHANGE"===Qi?kr=304:("NO_TEMPLATE"===Qi||"EMPTY_CONFIG"===Qi)&&(ku={}),304!==kr&&200!==kr)throw mn.create("fetch-status",{httpStatus:kr});return{status:kr,eTag:Bs,config:ku}})()}}class Nr{constructor(M,B){this.client=M,this.storage=B}fetch(M){var B=this;return(0,G.Z)(function*(){const K=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(M,K)})()}attemptFetch(M,{throttleEndTimeMillis:B,backoffCount:K}){var fe=this;return(0,G.Z)(function*(){yield function(D,M){return new Promise((B,K)=>{const fe=Math.max(M-Date.now(),0),ke=setTimeout(B,fe);D.addEventListener(()=>{clearTimeout(ke),K(mn.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,B);try{const ke=yield fe.client.fetch(M);return yield fe.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function(D){if(!(D instanceof re.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}(ke))throw ke;const Ze={throttleEndTimeMillis:Date.now()+(0,re.$s)(K),backoffCount:K+1};return yield fe.storage.setThrottleMetadata(Ze),fe.attemptFetch(M,Ze)}})()}}class Eu{constructor(M,B,K,fe,ke){this.app=M,this._client=B,this._storageCache=K,this._storage=fe,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vo(D,M){const B=D.target.error||void 0;return mn.create(M,{originalErrorMessage:B&&B.message})}const $i="app_namespace_store";class bu{constructor(M,B,K,fe=function(){return new Promise((D,M)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=K=>{M(vo(K,"storage-open"))},B.onsuccess=K=>{D(K.target.result)},B.onupgradeneeded=K=>{const fe=K.target.result;switch(K.oldVersion){case 0:fe.createObjectStore($i,{keyPath:"compositeKey"})}}}catch(B){M(mn.create("storage-open",{originalErrorMessage:B}))}})}()){this.appId=M,this.appName=B,this.namespace=K,this.openDbPromise=fe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var B=this;return(0,G.Z)(function*(){const K=yield B.openDbPromise;return new Promise((fe,ke)=>{const mt=K.transaction([$i],"readonly").objectStore($i),dt=B.createCompositeKey(M);try{const ln=mt.get(dt);ln.onerror=Dn=>{ke(vo(Dn,"storage-get"))},ln.onsuccess=Dn=>{const ni=Dn.target.result;fe(ni?ni.value:void 0)}}catch(ln){ke(mn.create("storage-get",{originalErrorMessage:ln&&ln.message}))}})})()}set(M,B){var K=this;return(0,G.Z)(function*(){const fe=yield K.openDbPromise;return new Promise((ke,Ze)=>{const dt=fe.transaction([$i],"readwrite").objectStore($i),ln=K.createCompositeKey(M);try{const Dn=dt.put({compositeKey:ln,value:B});Dn.onerror=ni=>{Ze(vo(ni,"storage-set"))},Dn.onsuccess=()=>{ke()}}catch(Dn){Ze(mn.create("storage-set",{originalErrorMessage:Dn&&Dn.message}))}})})()}delete(M){var B=this;return(0,G.Z)(function*(){const K=yield B.openDbPromise;return new Promise((fe,ke)=>{const mt=K.transaction([$i],"readwrite").objectStore($i),dt=B.createCompositeKey(M);try{const ln=mt.delete(dt);ln.onerror=Dn=>{ke(vo(Dn,"storage-delete"))},ln.onsuccess=()=>{fe()}}catch(ln){ke(mn.create("storage-delete",{originalErrorMessage:ln&&ln.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Hi{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,G.Z)(function*(){const B=M.storage.getLastFetchStatus(),K=M.storage.getLastSuccessfulFetchTimestampMillis(),fe=M.storage.getActiveConfig(),ke=yield B;ke&&(M.lastFetchStatus=ke);const Ze=yield K;Ze&&(M.lastSuccessfulFetchTimestampMillis=Ze);const mt=yield fe;mt&&(M.activeConfig=mt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function wu(){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,G.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,pe._registerComponent)(new oe.wA("remote-config",function(M,{instanceIdentifier:B}){const K=M.getProvider("app").getImmediate(),fe=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw mn.create("registration-window");if(!(0,re.hl)())throw mn.create("indexed-db-unavailable");const{projectId:ke,apiKey:Ze,appId:mt}=K.options;if(!ke)throw mn.create("registration-project-id");if(!Ze)throw mn.create("registration-api-key");if(!mt)throw mn.create("registration-app-id");const dt=new bu(mt,K.name,B=B||"firebase"),ln=new Hi(dt),Dn=new ve.Yd(sr);Dn.logLevel=ve.in.ERROR;const ni=new At(fe,pe.SDK_VERSION,B,ke,Ze,mt),Di=new Nr(ni,dt),kr=new Rs(Di,dt,ln,Dn),Bs=new Eu(K,kr,ln,dt,Dn);return function(D){const M=(0,re.m9)(D);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Bs),Bs},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(sr,"0.3.1"),(0,pe.registerVersion)(sr,"0.3.1","esm2017");const Jr="/firebase-messaging-sw.js",Ns="/firebase-cloud-messaging-push-scope",Ms="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jo="google.c.a.c_id",Kn="google.c.a.c_l",tl="google.c.a.ts",Os="google.c.a.e";var Mr=(()=>{return(D=Mr||(Mr={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Mr;var D})();function li(D){const M=new Uint8Array(D);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $a(D){const B=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),K=atob(B),fe=new Uint8Array(K.length);for(let ke=0;ke<K.length;++ke)fe[ke]=K.charCodeAt(ke);return fe}const cs="fcm_token_details_db",ya="fcm_token_object_Store";function $o(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,G.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(cs))return null;let M=null;return(yield(0,ae.openDb)(cs,5,function(){var K=(0,G.Z)(function*(fe){var ke;if(fe.oldVersion<2||!fe.objectStoreNames.contains(ya))return;const Ze=fe.transaction.objectStore(ya),mt=yield Ze.index("fcmSenderId").get(D);if(yield Ze.clear(),mt)if(2===fe.oldVersion){const dt=mt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;M={token:dt.fcmToken,createTime:null!==(ke=dt.createTime)&&void 0!==ke?ke:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:li(dt.vapidKey)}}}else if(3===fe.oldVersion){const dt=mt;M={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:li(dt.auth),p256dh:li(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:li(dt.vapidKey)}}}else if(4===fe.oldVersion){const dt=mt;M={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:li(dt.auth),p256dh:li(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:li(dt.vapidKey)}}}});return function(fe){return K.apply(this,arguments)}}())).close(),yield(0,ae.deleteDb)(cs),yield(0,ae.deleteDb)("fcm_vapid_details_db"),yield(0,ae.deleteDb)("undefined"),Ho(M)?M:null})).apply(this,arguments)}function Ho(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:M}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const mr="firebase-messaging-store";let Eo=null;function R(){return Eo||(Eo=(0,ae.openDb)("firebase-messaging-database",1,D=>{switch(D.oldVersion){case 0:D.createObjectStore(mr)}})),Eo}function L(D){return N.apply(this,arguments)}function N(){return(N=(0,G.Z)(function*(D){const M=st(D),K=yield(yield R()).transaction(mr).objectStore(mr).get(M);if(K)return K;{const fe=yield $o(D.appConfig.senderId);if(fe)return yield j(D,fe),fe}})).apply(this,arguments)}function j(D,M){return te.apply(this,arguments)}function te(){return(te=(0,G.Z)(function*(D,M){const B=st(D),fe=(yield R()).transaction(mr,"readwrite");return yield fe.objectStore(mr).put(M,B),yield fe.complete,M})).apply(this,arguments)}function we(D){return We.apply(this,arguments)}function We(){return(We=(0,G.Z)(function*(D){const M=st(D),K=(yield R()).transaction(mr,"readwrite");yield K.objectStore(mr).delete(M),yield K.complete})).apply(this,arguments)}function st({appConfig:D}){return D.appId}const ht=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function wn(D,M){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,G.Z)(function*(D,M){const B=yield on(D),K=Ps(M),fe={method:"POST",headers:B,body:JSON.stringify(K)};let ke;try{ke=yield(yield fetch(Hr(D.appConfig),fe)).json()}catch(Ze){throw ht.create("token-subscribe-failed",{errorInfo:Ze})}if(ke.error)throw ht.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw ht.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function Pn(D,M){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,G.Z)(function*(D,M){const B=yield on(D),K=Ps(M.subscriptionOptions),fe={method:"PATCH",headers:B,body:JSON.stringify(K)};let ke;try{ke=yield(yield fetch(`${Hr(D.appConfig)}/${M.token}`,fe)).json()}catch(Ze){throw ht.create("token-update-failed",{errorInfo:Ze})}if(ke.error)throw ht.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw ht.create("token-update-no-token");return ke.token})).apply(this,arguments)}function Dr(D,M){return bi.apply(this,arguments)}function bi(){return(bi=(0,G.Z)(function*(D,M){const K={method:"DELETE",headers:yield on(D)};try{const ke=yield(yield fetch(`${Hr(D.appConfig)}/${M}`,K)).json();if(ke.error)throw ht.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(fe){throw ht.create("token-unsubscribe-failed",{errorInfo:fe})}})).apply(this,arguments)}function Hr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function on(D){return Or.apply(this,arguments)}function Or(){return(Or=(0,G.Z)(function*({appConfig:D,installations:M}){const B=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function Ps({p256dh:D,auth:M,endpoint:B,vapidKey:K}){const fe={web:{endpoint:B,auth:M,p256dh:D}};return K!==Ms&&(fe.web.applicationPubKey=K),fe}const Gi=6048e5;function wi(D){return to.apply(this,arguments)}function to(){return(to=(0,G.Z)(function*(D){const M=yield Ga(D.swRegistration,D.vapidKey),B={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:M.endpoint,auth:li(M.getKey("auth")),p256dh:li(M.getKey("p256dh"))},K=yield L(D.firebaseDependencies);if(K){if(Cu(K.subscriptionOptions,B))return Date.now()>=K.createTime+Gi?gh(D,{token:K.token,createTime:Date.now(),subscriptionOptions:B}):K.token;try{yield Dr(D.firebaseDependencies,K.token)}catch(fe){console.warn(fe)}return ec(D.firebaseDependencies,B)}return ec(D.firebaseDependencies,B)})).apply(this,arguments)}function yr(D){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,G.Z)(function*(D){const M=yield L(D.firebaseDependencies);M&&(yield Dr(D.firebaseDependencies,M.token),yield we(D.firebaseDependencies));const B=yield D.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()})).apply(this,arguments)}function gh(D,M){return no.apply(this,arguments)}function no(){return(no=(0,G.Z)(function*(D,M){try{const B=yield Pn(D.firebaseDependencies,M),K=Object.assign(Object.assign({},M),{token:B,createTime:Date.now()});return yield j(D.firebaseDependencies,K),B}catch(B){throw yield yr(D),B}})).apply(this,arguments)}function ec(D,M){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,G.Z)(function*(D,M){const K={token:yield wn(D,M),createTime:Date.now(),subscriptionOptions:M};return yield j(D,K),K.token})).apply(this,arguments)}function Ga(D,M){return qa.apply(this,arguments)}function qa(){return(qa=(0,G.Z)(function*(D,M){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:$a(M)})})).apply(this,arguments)}function Cu(D,M){return M.vapidKey===D.vapidKey&&M.endpoint===D.endpoint&&M.auth===D.auth&&M.p256dh===D.p256dh}function qe(D){const M={from:D.from,collapseKey:D.collapse_key,messageId:D.fcm_message_id};return function(D,M){if(!M.notification)return;D.notification={};const B=M.notification.title;B&&(D.notification.title=B);const K=M.notification.body;K&&(D.notification.body=K);const fe=M.notification.image;fe&&(D.notification.image=fe)}(M,D),function(D,M){!M.data||(D.data=M.data)}(M,D),function(D,M){if(!M.fcmOptions)return;D.fcmOptions={};const B=M.fcmOptions.link;B&&(D.fcmOptions.link=B);const K=M.fcmOptions.analytics_label;K&&(D.fcmOptions.analyticsLabel=K)}(M,D),M}function ks(D){return"object"==typeof D&&!!D&&jo in D}function _r(D,M){const B=[];for(let K=0;K<D.length;K++)B.push(D.charAt(K)),K<M.length&&B.push(M.charAt(K));return B.join("")}function za(D){return ht.create("missing-app-config-values",{valueName:D})}_r("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_r("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ro{constructor(M,B,K){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const fe=function(D){if(!D||!D.options)throw za("App Configuration Object");if(!D.name)throw za("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:B}=D;for(const K of M)if(!B[K])throw za(K);return{appName:D.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:fe,installations:B,analyticsProvider:K}}_delete(){return Promise.resolve()}}function _a(D){return bo.apply(this,arguments)}function bo(){return(bo=(0,G.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Jr,{scope:Ns}),D.swRegistration.update().catch(()=>{})}catch(M){throw ht.create("failed-service-worker-registration",{browserErrorMessage:M.message})}})).apply(this,arguments)}function Wa(D,M){return wo.apply(this,arguments)}function wo(){return(wo=(0,G.Z)(function*(D,M){if(!M&&!D.swRegistration&&(yield _a(D)),M||!D.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw ht.create("invalid-sw-registration");D.swRegistration=M}})).apply(this,arguments)}function ti(D,M){return di.apply(this,arguments)}function di(){return(di=(0,G.Z)(function*(D,M){M?D.vapidKey=M:D.vapidKey||(D.vapidKey=Ms)})).apply(this,arguments)}function Fs(){return(Fs=(0,G.Z)(function*(D,M){if(!navigator)throw ht.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ht.create("permission-blocked");return yield ti(D,null==M?void 0:M.vapidKey),yield Wa(D,null==M?void 0:M.serviceWorkerRegistration),wi(D)})).apply(this,arguments)}function Ls(D,M,B){return qo.apply(this,arguments)}function qo(){return(qo=(0,G.Z)(function*(D,M,B){const K=Za(M);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(K,{message_id:B[jo],message_name:B[Kn],message_time:B[tl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Za(D){switch(D){case Mr.NOTIFICATION_CLICKED:return"notification_open";case Mr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Iu(){return(Iu=(0,G.Z)(function*(D,M){const B=M.data;if(!B.isFirebaseMessaging)return;D.onMessageHandler&&B.messageType===Mr.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(qe(B)):D.onMessageHandler.next(qe(B)));const K=B.data;ks(K)&&"1"===K[Os]&&(yield Ls(D,B.messageType,K))})).apply(this,arguments)}const va="@firebase/messaging";function Ea(){return zo.apply(this,arguments)}function zo(){return(zo=(0,G.Z)(function*(){return"undefined"!=typeof window&&(0,re.hl)()&&(yield(0,re.eu)())&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,pe._registerComponent)(new oe.wA("messaging",D=>{const M=new ro(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function(D,M){return Iu.apply(this,arguments)}(M,B)),M},"PUBLIC")),(0,pe._registerComponent)(new oe.wA("messaging-internal",D=>{const M=D.getProvider("messaging").getImmediate();return{getToken:K=>function(D,M){return Fs.apply(this,arguments)}(M,K)}},"PRIVATE")),(0,pe.registerVersion)(va,"0.9.2"),(0,pe.registerVersion)(va,"0.9.2","esm2017");const qi="analytics",Bn="firebase_id",ic="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zo="https://www.googletagmanager.com/gtag/js",vr=new ve.Yd("@firebase/analytics");function sl(D){return Promise.all(D.map(M=>M.catch(B=>B)))}function Do(D,M){const B=document.createElement("script");B.src=`${Zo}?l=${D}&id=${M}`,B.async=!0,document.head.appendChild(B)}function Ko(D,M,B,K,fe,ke){return io.apply(this,arguments)}function io(){return(io=(0,G.Z)(function*(D,M,B,K,fe,ke){const Ze=K[fe];try{if(Ze)yield M[Ze];else{const dt=(yield sl(B)).find(ln=>ln.measurementId===fe);dt&&(yield M[dt.appId])}}catch(mt){vr.error(mt)}D("config",fe,ke)})).apply(this,arguments)}function sc(D,M,B,K,fe){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,G.Z)(function*(D,M,B,K,fe){try{let ke=[];if(fe&&fe.send_to){let Ze=fe.send_to;Array.isArray(Ze)||(Ze=[Ze]);const mt=yield sl(B);for(const dt of Ze){const ln=mt.find(ni=>ni.measurementId===dt),Dn=ln&&M[ln.appId];if(!Dn){ke=[];break}ke.push(Dn)}}0===ke.length&&(ke=Object.values(M)),yield Promise.all(ke),D("event",K,fe||{})}catch(ke){vr.error(ke)}})).apply(this,arguments)}function oc(){const D=window.document.getElementsByTagName("script");for(const M of Object.values(D))if(M.src&&M.src.includes(Zo))return M;return null}const Yn=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Au=new class{constructor(M={},B=1e3){this.throttleMetadata=M,this.intervalMillis=B}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,B){this.throttleMetadata[M]=B}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function mh(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function nr(D){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,G.Z)(function*(D){var M;const{appId:B,apiKey:K}=D,fe={method:"GET",headers:mh(K)},ke=ic.replace("{app-id}",B),Ze=yield fetch(ke,fe);if(200!==Ze.status&&304!==Ze.status){let mt="";try{const dt=yield Ze.json();(null===(M=dt.error)||void 0===M?void 0:M.message)&&(mt=dt.error.message)}catch(dt){}throw Yn.create("config-fetch-failed",{httpStatus:Ze.status,responseMessage:mt})}return Ze.json()})).apply(this,arguments)}function wa(D){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,G.Z)(function*(D,M=Au,B){const{appId:K,apiKey:fe,measurementId:ke}=D.options;if(!K)throw Yn.create("no-app-id");if(!fe){if(ke)return{measurementId:ke,appId:K};throw Yn.create("no-api-key")}const Ze=M.getThrottleMetadata(K)||{backoffCount:0,throttleEndTimeMillis:Date.now()},mt=new Ca;return setTimeout((0,G.Z)(function*(){mt.abort()}),void 0!==B?B:6e4),Su({appId:K,apiKey:fe,measurementId:ke},Ze,mt,M)})).apply(this,arguments)}function Su(D,M,B){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,G.Z)(function*(D,{throttleEndTimeMillis:M,backoffCount:B},K,fe=Au){const{appId:ke,measurementId:Ze}=D;try{yield Qo(K,M)}catch(mt){if(Ze)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${mt.message}]`),{appId:ke,measurementId:Ze};throw mt}try{const mt=yield nr(D);return fe.deleteThrottleMetadata(ke),mt}catch(mt){if(!ac(mt)){if(fe.deleteThrottleMetadata(ke),Ze)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${mt.message}]`),{appId:ke,measurementId:Ze};throw mt}const dt=503===Number(mt.customData.httpStatus)?(0,re.$s)(B,fe.intervalMillis,30):(0,re.$s)(B,fe.intervalMillis),ln={throttleEndTimeMillis:Date.now()+dt,backoffCount:B+1};return fe.setThrottleMetadata(ke,ln),vr.debug(`Calling attemptFetch again in ${dt} millis`),Su(D,ln,K,fe)}})).apply(this,arguments)}function Qo(D,M){return new Promise((B,K)=>{const fe=Math.max(M-Date.now(),0),ke=setTimeout(B,fe);D.addEventListener(()=>{clearTimeout(ke),K(Yn.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function ac(D){if(!(D instanceof re.ZR&&D.customData))return!1;const M=Number(D.customData.httpStatus);return 429===M||500===M||503===M||504===M}class Ca{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Ja(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,G.Z)(function*(){if(!(0,re.hl)())return vr.warn(Yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return vr.warn(Yn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Xo(){return(Xo=(0,G.Z)(function*(D,M,B,K,fe,ke,Ze){var mt;const dt=wa(D);dt.then(kr=>{B[kr.measurementId]=kr.appId,D.options.measurementId&&kr.measurementId!==D.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kr=>vr.error(kr)),M.push(dt);const ln=Ja().then(kr=>{if(kr)return K.getId()}),[Dn,ni]=yield Promise.all([dt,ln]);oc()||Do(ke,Dn.measurementId),fe("js",new Date);const Di=null!==(mt=null==Ze?void 0:Ze.config)&&void 0!==mt?mt:{};return Di.origin="firebase",Di.update=!0,null!=ni&&(Di[Bn]=ni),fe("config",Dn.measurementId,Di),Dn.measurementId})).apply(this,arguments)}class Xa{constructor(M){this.app=M}_delete(){return delete Ci[this.app.options.appId],Promise.resolve()}}let Ci={},Ru=[];const qr={};let Ia,So,ea="dataLayer",Nu=!1;function I(D,M,B){!function(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const M=D.map((K,fe)=>`(${fe+1}) ${K}`).join(" "),B=Yn.create("invalid-analytics-context",{errorInfo:M});vr.warn(B.message)}}();const K=D.options.appId;if(!K)throw Yn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Yn.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ci[K])throw Yn.create("already-exists",{id:K});if(!Nu){!function(D){let M=[];Array.isArray(window[D])?M=window[D]:window[D]=M}(ea);const{wrappedGtag:ke,gtagCore:Ze}=function(D,M,B,K,fe){let ke=function(...Ze){window[K].push(arguments)};return window[fe]&&"function"==typeof window[fe]&&(ke=window[fe]),window[fe]=function(D,M,B,K){function ke(){return(ke=(0,G.Z)(function*(Ze,mt,dt){try{"event"===Ze?yield sc(D,M,B,mt,dt):"config"===Ze?yield Ko(D,M,B,K,mt,dt):D("set",mt)}catch(ln){vr.error(ln)}})).apply(this,arguments)}return function(Ze,mt,dt){return ke.apply(this,arguments)}}(ke,D,M,B),{gtagCore:ke,wrappedGtag:window[fe]}}(Ci,Ru,qr,ea,"gtag");So=ke,Ia=Ze,Nu=!0}return Ci[K]=function(D,M,B,K,fe,ke,Ze){return Xo.apply(this,arguments)}(D,Ru,qr,M,Ia,ea,B),new Xa(D)}function v(){return(v=(0,G.Z)(function*(D,M,B,K,fe){if(fe&&fe.global)D("event",B,K);else{const ke=yield M;D("event",B,Object.assign(Object.assign({},K),{send_to:ke}))}})).apply(this,arguments)}function Xt(){return fi.apply(this,arguments)}function fi(){return(fi=(0,G.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const uc="@firebase/analytics";(0,pe._registerComponent)(new oe.wA(qi,(M,{options:B})=>I(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,pe._registerComponent)(new oe.wA("analytics-internal",function(M){try{const B=M.getProvider(qi).getImmediate();return{logEvent:(K,fe,ke)=>function(D,M,B,K){D=(0,re.m9)(D),function(D,M,B,K,fe){return v.apply(this,arguments)}(So,Ci[D.app.options.appId],M,B,K).catch(fe=>vr.error(fe))}(B,K,fe,ke)}}catch(B){throw Yn.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,pe.registerVersion)(uc,"0.7.2"),(0,pe.registerVersion)(uc,"0.7.2","esm2017");var Us=U(7771),Qn=U(3637),al=U(3342),nd=U(309),vh=U(3101);const Yf=new T.GfV("7.1.0"),cc="__angularfire_symbol__analyticsIsSupported",Ki="__angularfire_symbol__remoteConfigIsSupported",nu="__angularfire_symbol__messagingIsSupported";function cl(D,M,B){if(M){if(1===M.length)return M[0];const ke=M.filter(Ze=>Ze.app===B);if(1===ke.length)return ke[0]}return B.container.getProvider(D).getImmediate({optional:!0})}globalThis[cc]||(globalThis[cc]=Xt().then(D=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=D)),globalThis[nu]||(globalThis[nu]=Ea().then(D=>globalThis.__angularfire_symbol__messagingIsSupportedValue=D)),globalThis[Ki]||(globalThis[Ki]=wu().then(D=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=D));const Mu=(D,M)=>{const B=M?[M]:(0,f.C6)(),K=[];return B.forEach(fe=>{fe.container.getProvider(D).instances.forEach(Ze=>{K.includes(Ze)||K.push(Ze)})}),K};function Ou(){}class Pu{constructor(M,B=Us.N){this.zone=M,this.delegate=B}now(){return this.delegate.now()}schedule(M,B,K){const fe=this.zone;return this.delegate.schedule(function(Ze){fe.runGuarded(()=>{M.apply(this,[Ze])})},B,K)}}class hs{constructor(M){this.zone=M,this.task=null}call(M,B){const K=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ou,{},Ou,Ou)),B.pipe((0,al.b)({next:K,complete:K,error:K})).subscribe(M).add(K)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ii=(()=>{class D{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new Pu(Zone.current)),this.insideAngular=B.run(()=>new Pu(Zone.current,Qn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(B){return new(B||D)(T.LFG(T.R0b))},D.\u0275prov=T.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function uo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ll(D){return D.pipe((0,nd.QV)(uo().outsideAngular))}function sd(D){return uo(),function(D){return function(B){return(B=B.lift(new hs(D.ngZone))).pipe((0,vh.R)(D.outsideAngular),(0,nd.QV)(D.insideAngular))}}(uo())(D)}},4363:(ut,Ne,U)=>{"use strict";U.d(Ne,{F0:()=>Pr,yS:()=>Yo,Bz:()=>Jo,lC:()=>Tu});var T=U(8583),f=U(3018),G=U(9765),pe=U(7971);class re extends G.xQ{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const v=super._subscribe(E);return v&&!v.closed&&E.next(this._value),v}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new pe.N;return this._value}next(E){super.next(this._value=E)}}var oe=U(4869),ve=U(9796),ae=U(7393);class J extends ae.L{notifyNext(E,v,S,O,V){this.destination.next(v)}notifyError(E,v){this.destination.error(E)}notifyComplete(E){this.destination.complete()}}class W extends ae.L{constructor(E,v,S){super(),this.parent=E,this.outerValue=v,this.outerIndex=S,this.index=0}_next(E){this.parent.notifyNext(this.outerValue,E,this.outerIndex,this.index++,this)}_error(E){this.parent.notifyError(E,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=U(7444),de=U(7574);function le(I,E,v,S,O=new W(I,v,S)){if(!O.closed)return E instanceof de.y?E.subscribe(O):(0,Z.s)(E)(O)}var Ee=U(6693);const Ve={};class ue{constructor(E){this.resultSelector=E}call(E,v){return v.subscribe(new Oe(E,this.resultSelector))}}class Oe extends J{constructor(E,v){super(E),this.resultSelector=v,this.active=0,this.values=[],this.observables=[]}_next(E){this.values.push(Ve),this.observables.push(E)}_complete(){const E=this.observables,v=E.length;if(0===v)this.destination.complete();else{this.active=v,this.toRespond=v;for(let S=0;S<v;S++)this.add(le(this,E[S],void 0,S))}}notifyComplete(E){0==(this.active-=1)&&this.destination.complete()}notifyNext(E,v,S){const O=this.values,Y=this.toRespond?O[S]===Ve?--this.toRespond:this.toRespond:0;O[S]=v,0===Y&&(this.resultSelector?this._tryResultSelector(O):this.destination.next(O.slice()))}_tryResultSelector(E){let v;try{v=this.resultSelector.apply(this,E)}catch(S){return void this.destination.error(S)}this.destination.next(v)}}var Ae=U(4402),Te=U(9193);function je(I){return new de.y(E=>{let v;try{v=I()}catch(O){return void E.error(O)}return(v?(0,Ae.D)(v):(0,Te.c)()).subscribe(E)})}var Be=U(5917),Xe=U(3410),Ut=U(8071),Pt=U(2441),$e=U(5345);function ye(I){return function(v){const S=new Ie(I),O=v.lift(S);return S.caught=O}}class Ie{constructor(E){this.selector=E}call(E,v){return v.subscribe(new xe(E,this.selector,this.caught))}}class xe extends $e.Ds{constructor(E,v,S){super(E),this.selector=v,this.caught=S}error(E){if(!this.isStopped){let v;try{v=this.selector(E,this.caught)}catch(V){return void super.error(V)}this._unsubscribeAndRecycle();const S=new $e.IY(this);this.add(S);const O=(0,$e.ft)(v,S);O!==S&&this.add(O)}}}var Ce=U(5435),Ye=U(7108);function Re(I){return function(v){return 0===I?(0,Te.c)():v.lift(new _t(I))}}class _t{constructor(E){if(this.total=E,this.total<0)throw new Ye.W}call(E,v){return v.subscribe(new un(E,this.total))}}class un extends ae.L{constructor(E,v){super(E),this.total=v,this.ring=new Array,this.count=0}_next(E){const v=this.ring,S=this.total,O=this.count++;v.length<S?v.push(E):v[O%S]=E}_complete(){const E=this.destination;let v=this.count;if(v>0){const S=this.count>=this.total?this.total:this.count,O=this.ring;for(let V=0;V<S;V++){const Y=v++%S;E.next(O[Y])}}E.complete()}}var Zn=U(4635),Ft=U(5242),dn=U(4487),_n=U(5319);class Yr{constructor(E){this.callback=E}call(E,v){return v.subscribe(new Vn(E,this.callback))}}class Vn extends ae.L{constructor(E,v){super(E),this.add(new _n.w(v))}}var it=U(8002),Ht=U(3190),Qs=U(5257),dr=U(9761),vn=U(2145),xr=U(4612),wr=U(8049),pn=U(9773),On=U(3342),Fi=U(1307),vi=U(3282);class Xn{constructor(E,v){this.id=E,this.url=v}}class Sn extends Xn{constructor(E,v,S="imperative",O=null){super(E,v),this.navigationTrigger=S,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class er extends Xn{constructor(E,v,S){super(E,v),this.urlAfterRedirects=S}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class As extends Xn{constructor(E,v,S){super(E,v),this.reason=S}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tt extends Xn{constructor(E,v,S){super(E,v),this.error=S}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ze extends Xn{constructor(E,v,S,O){super(E,v),this.urlAfterRedirects=S,this.state=O}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gn extends Xn{constructor(E,v,S,O){super(E,v),this.urlAfterRedirects=S,this.state=O}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends Xn{constructor(E,v,S,O,V){super(E,v),this.urlAfterRedirects=S,this.state=O,this.shouldActivate=V}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jn extends Xn{constructor(E,v,S,O){super(E,v),this.urlAfterRedirects=S,this.state=O}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class an extends Xn{constructor(E,v,S,O){super(E,v),this.urlAfterRedirects=S,this.state=O}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pt{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gt{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Un{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ss{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Li{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ur{constructor(E,v,S){this.routerEvent=E,this.position=v,this.anchor=S}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class ie{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const v=this.params[E];return Array.isArray(v)?v[0]:v}return null}getAll(E){if(this.has(E)){const v=this.params[E];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function se(I){return new ie(I)}const ee="ngNavigationCancelingError";function He(I){const E=Error("NavigationCancelingError: "+I);return E[ee]=!0,E}function lt(I,E,v){const S=v.path.split("/");if(S.length>I.length||"full"===v.pathMatch&&(E.hasChildren()||S.length<I.length))return null;const O={};for(let V=0;V<S.length;V++){const Y=S[V],ne=I[V];if(Y.startsWith(":"))O[Y.substring(1)]=ne;else if(Y!==ne.path)return null}return{consumed:I.slice(0,S.length),posParams:O}}function qt(I,E){const v=I?Object.keys(I):void 0,S=E?Object.keys(E):void 0;if(!v||!S||v.length!=S.length)return!1;let O;for(let V=0;V<v.length;V++)if(O=v[V],!In(I[O],E[O]))return!1;return!0}function In(I,E){if(Array.isArray(I)&&Array.isArray(E)){if(I.length!==E.length)return!1;const v=[...I].sort(),S=[...E].sort();return v.every((O,V)=>S[V]===O)}return I===E}function En(I){return Array.prototype.concat.apply([],I)}function Qr(I){return I.length>0?I[I.length-1]:null}function $t(I,E){for(const v in I)I.hasOwnProperty(v)&&E(I[v],v)}function Rn(I){return(0,f.CqO)(I)?I:(0,f.QGY)(I)?(0,Ae.D)(Promise.resolve(I)):(0,Be.of)(I)}const mo={exact:function xs(I,E,v){if(!Hn(I.segments,E.segments)||!pa(I.segments,E.segments,v)||I.numberOfChildren!==E.numberOfChildren)return!1;for(const S in E.children)if(!I.children[S]||!xs(I.children[S],E.children[S],v))return!1;return!0},subset:Cr},Va={exact:function(I,E){return qt(I,E)},subset:function(I,E){return Object.keys(E).length<=Object.keys(I).length&&Object.keys(E).every(v=>In(I[v],E[v]))},ignored:()=>!0};function yo(I,E,v){return mo[v.paths](I.root,E.root,v.matrixParams)&&Va[v.queryParams](I.queryParams,E.queryParams)&&!("exact"===v.fragment&&I.fragment!==E.fragment)}function Cr(I,E,v){return si(I,E,E.segments,v)}function si(I,E,v,S){if(I.segments.length>v.length){const O=I.segments.slice(0,v.length);return!(!Hn(O,v)||E.hasChildren()||!pa(O,v,S))}if(I.segments.length===v.length){if(!Hn(I.segments,v)||!pa(I.segments,v,S))return!1;for(const O in E.children)if(!I.children[O]||!Cr(I.children[O],E.children[O],S))return!1;return!0}{const O=v.slice(0,I.segments.length),V=v.slice(I.segments.length);return!!(Hn(I.segments,O)&&pa(I.segments,O,S)&&I.children[Lt])&&si(I.children[Lt],E,V,S)}}function pa(I,E,v){return E.every((S,O)=>Va[v](I[O].parameters,S.parameters))}class oi{constructor(E,v,S){this.root=E,this.queryParams=v,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=se(this.queryParams)),this._queryParamMap}toString(){return zt.serialize(this)}}class wt{constructor(E,v){this.segments=E,this.children=v,this.parent=null,$t(v,(S,O)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bn(this)}}class ai{constructor(E,v){this.path=E,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=se(this.parameters)),this._parameterMap}toString(){return bt(this)}}function Hn(I,E){return I.length===E.length&&I.every((v,S)=>v.path===E[S].path)}class cn{}class nt{parse(E){const v=new Nt(E);return new oi(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(E){var I;return`${`/${sr(E.root,!0)}`}${function(I){const E=Object.keys(I).map(v=>{const S=I[v];return Array.isArray(S)?S.map(O=>`${Gn(v)}=${Gn(O)}`).join("&"):`${Gn(v)}=${Gn(S)}`}).filter(v=>!!v);return E.length?`?${E.join("&")}`:""}(E.queryParams)}${"string"==typeof E.fragment?`#${I=E.fragment,encodeURI(I)}`:""}`}}const zt=new nt;function bn(I){return I.segments.map(E=>bt(E)).join("/")}function sr(I,E){if(!I.hasChildren())return bn(I);if(E){const v=I.children[Lt]?sr(I.children[Lt],!1):"",S=[];return $t(I.children,(O,V)=>{V!==Lt&&S.push(`${V}:${sr(O,!1)}`)}),S.length>0?`${v}(${S.join("//")})`:v}{const v=function(I,E){let v=[];return $t(I.children,(S,O)=>{O===Lt&&(v=v.concat(E(S,O)))}),$t(I.children,(S,O)=>{O!==Lt&&(v=v.concat(E(S,O)))}),v}(I,(S,O)=>O===Lt?[sr(I.children[Lt],!1)]:[`${O}:${sr(S,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Lt]?`${bn(I)}/${v[0]}`:`${bn(I)}/(${v.join("//")})`}}function Vi(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gn(I){return Vi(I).replace(/%3B/gi,";")}function Wt(I){return Vi(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mn(I){return decodeURIComponent(I)}function Rr(I){return mn(I.replace(/\+/g,"%20"))}function bt(I){return`${Wt(I.path)}${function(I){return Object.keys(I).map(E=>`;${Wt(E)}=${Wt(I[E])}`).join("")}(I.parameters)}`}const Ba=/^[^\/()?;=#]+/;function Br(I){const E=I.match(Ba);return E?E[0]:""}const fr=/^[^=?&#]+/,hn=/^[^?&#]+/;class Nt{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new wt([],{}):new wt([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(E.length>0||Object.keys(v).length>0)&&(S[Lt]=new wt(E,v)),S}parseSegment(){const E=Br(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new ai(mn(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const v=Br(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const O=Br(this.remaining);O&&(S=O,this.capture(S))}E[mn(v)]=mn(S)}parseQueryParam(E){const v=function(I){const E=I.match(fr);return E?E[0]:""}(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const Y=function(I){const E=I.match(hn);return E?E[0]:""}(this.remaining);Y&&(S=Y,this.capture(S))}const O=Rr(v),V=Rr(S);if(E.hasOwnProperty(O)){let Y=E[O];Array.isArray(Y)||(Y=[Y],E[O]=Y),Y.push(V)}else E[O]=V}parseParens(E){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=Br(this.remaining),O=this.remaining[S.length];if("/"!==O&&")"!==O&&";"!==O)throw new Error(`Cannot parse url '${this.url}'`);let V;S.indexOf(":")>-1?(V=S.substr(0,S.indexOf(":")),this.capture(V),this.capture(":")):E&&(V=Lt);const Y=this.parseChildren();v[V]=1===Object.keys(Y).length?Y[Lt]:new wt([],Y),this.consumeOptional("//")}return v}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class us{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const v=this.pathFromRoot(E);return v.length>1?v[v.length-2]:null}children(E){const v=Se(E,this._root);return v?v.children.map(S=>S.value):[]}firstChild(E){const v=Se(E,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(E){const v=pr(E,this._root);return v.length<2?[]:v[v.length-2].children.map(O=>O.value).filter(O=>O!==E)}pathFromRoot(E){return pr(E,this._root).map(v=>v.value)}}function Se(I,E){if(I===E.value)return E;for(const v of E.children){const S=Se(I,v);if(S)return S}return null}function pr(I,E){if(I===E.value)return[E];for(const v of E.children){const S=pr(I,v);if(S.length)return S.unshift(E),S}return[]}class Et{constructor(E,v){this.value=E,this.children=v}toString(){return`TreeNode(${this.value})`}}function jr(I){const E={};return I&&I.children.forEach(v=>E[v.value.outlet]=v),E}class Ir extends us{constructor(E,v){super(E),this.snapshot=v,Nr(this,E)}toString(){return this.snapshot.toString()}}function Bi(I,E){const v=function(I,E){const Y=new ji([],{},{},"",{},Lt,E,null,I.root,-1,{});return new eo("",new Et(Y,[]))}(I,E),S=new re([new ai("",{})]),O=new re({}),V=new re({}),Y=new re({}),ne=new re(""),Ue=new Rs(S,O,Y,ne,V,Lt,E,v.root);return Ue.snapshot=v.root,new Ir(new Et(Ue,[]),v)}class Rs{constructor(E,v,S,O,V,Y,ne,Ue){this.url=E,this.params=v,this.queryParams=S,this.fragment=O,this.data=V,this.outlet=Y,this.component=ne,this._futureSnapshot=Ue}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(E=>se(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(E=>se(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $r(I,E="emptyOnly"){const v=I.pathFromRoot;let S=0;if("always"!==E)for(S=v.length-1;S>=1;){const O=v[S],V=v[S-1];if(O.routeConfig&&""===O.routeConfig.path)S--;else{if(V.component)break;S--}}return function(I){return I.reduce((E,v)=>({params:Object.assign(Object.assign({},E.params),v.params),data:Object.assign(Object.assign({},E.data),v.data),resolve:Object.assign(Object.assign({},E.resolve),v._resolvedData)}),{params:{},data:{},resolve:{}})}(v.slice(S))}class ji{constructor(E,v,S,O,V,Y,ne,Ue,rt,sn,St){this.url=E,this.params=v,this.queryParams=S,this.fragment=O,this.data=V,this.outlet=Y,this.component=ne,this.routeConfig=Ue,this._urlSegment=rt,this._lastPathIndex=sn,this._resolve=St}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=se(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=se(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eo extends us{constructor(E,v){super(v),this.url=E,Nr(this,v)}toString(){return ui(this._root)}}function Nr(I,E){E.value._routerState=I,E.children.forEach(v=>Nr(I,v))}function ui(I){const E=I.children.length>0?` { ${I.children.map(ui).join(", ")} } `:"";return`${I.value}${E}`}function Uo(I){if(I.snapshot){const E=I.snapshot,v=I._futureSnapshot;I.snapshot=v,qt(E.queryParams,v.queryParams)||I.queryParams.next(v.queryParams),E.fragment!==v.fragment&&I.fragment.next(v.fragment),qt(E.params,v.params)||I.params.next(v.params),function(I,E){if(I.length!==E.length)return!1;for(let v=0;v<I.length;++v)if(!qt(I[v],E[v]))return!1;return!0}(E.url,v.url)||I.url.next(v.url),qt(E.data,v.data)||I.data.next(v.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function Eu(I,E){return qt(I.params,E.params)&&function(I,E){return Hn(I,E)&&I.every((v,S)=>qt(v.parameters,E[S].parameters))}(I.url,E.url)&&!(!I.parent!=!E.parent)&&(!I.parent||Eu(I.parent,E.parent))}function $i(I,E,v){if(v&&I.shouldReuseRoute(E.value,v.value.snapshot)){const S=v.value;S._futureSnapshot=E.value;const O=function(I,E,v){return E.children.map(S=>{for(const O of v.children)if(I.shouldReuseRoute(S.value,O.value.snapshot))return $i(I,S,O);return $i(I,S)})}(I,E,v);return new Et(S,O)}{if(I.shouldAttach(E.value)){const V=I.retrieve(E.value);if(null!==V){const Y=V.route;return ga(E,Y),Y}}const S=function(I){return new Rs(new re(I.url),new re(I.params),new re(I.queryParams),new re(I.fragment),new re(I.data),I.outlet,I.component,I)}(E.value),O=E.children.map(V=>$i(I,V));return new Et(S,O)}}function ga(I,E){if(I.value.routeConfig!==E.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(I.children.length!==E.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");E.value._futureSnapshot=I.value;for(let v=0;v<I.children.length;++v)ga(I.children[v],E.children[v])}function Hi(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function ma(I){return"object"==typeof I&&null!=I&&I.outlets}function Xu(I,E,v,S,O){let V={};return S&&$t(S,(Y,ne)=>{V[ne]=Array.isArray(Y)?Y.map(Ue=>`${Ue}`):`${Y}`}),new oi(v.root===I?E:ci(v.root,I,E),V,O)}function ci(I,E,v){const S={};return $t(I.children,(O,V)=>{S[V]=O===E?v:ci(O,E,v)}),new wt(I.segments,S)}class wu{constructor(E,v,S){if(this.isAbsolute=E,this.numberOfDoubleDots=v,this.commands=S,E&&S.length>0&&Hi(S[0]))throw new Error("Root segment cannot have matrix parameters");const O=S.find(ma);if(O&&O!==Qr(S))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jr{constructor(E,v,S){this.segmentGroup=E,this.processChildren=v,this.index=S}}function jo(I,E,v){if(I||(I=new wt([],{})),0===I.segments.length&&I.hasChildren())return Kn(I,E,v);const S=function(I,E,v){let S=0,O=E;const V={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(S>=v.length)return V;const Y=I.segments[O],ne=v[S];if(ma(ne))break;const Ue=`${ne}`,rt=S<v.length-1?v[S+1]:null;if(O>0&&void 0===Ue)break;if(Ue&&rt&&"object"==typeof rt&&void 0===rt.outlets){if(!li(Ue,rt,Y))return V;S+=2}else{if(!li(Ue,{},Y))return V;S++}O++}return{match:!0,pathIndex:O,commandIndex:S}}(I,E,v),O=v.slice(S.commandIndex);if(S.match&&S.pathIndex<I.segments.length){const V=new wt(I.segments.slice(0,S.pathIndex),{});return V.children[Lt]=new wt(I.segments.slice(S.pathIndex),I.children),Kn(V,0,O)}return S.match&&0===O.length?new wt(I.segments,{}):S.match&&!I.hasChildren()?Os(I,E,v):S.match?Kn(I,0,O):Os(I,E,v)}function Kn(I,E,v){if(0===v.length)return new wt(I.segments,{});{const S=function(I){return ma(I[0])?I[0].outlets:{[Lt]:I}}(v),O={};return $t(S,(V,Y)=>{"string"==typeof V&&(V=[V]),null!==V&&(O[Y]=jo(I.children[Y],E,V))}),$t(I.children,(V,Y)=>{void 0===S[Y]&&(O[Y]=V)}),new wt(I.segments,O)}}function Os(I,E,v){const S=I.segments.slice(0,E);let O=0;for(;O<v.length;){const V=v[O];if(ma(V)){const Ue=Xl(V.outlets);return new wt(S,Ue)}if(0===O&&Hi(v[0])){S.push(new ai(I.segments[E].path,Mr(v[0]))),O++;continue}const Y=ma(V)?V.outlets[Lt]:`${V}`,ne=O<v.length-1?v[O+1]:null;Y&&ne&&Hi(ne)?(S.push(new ai(Y,Mr(ne))),O+=2):(S.push(new ai(Y,{})),O++)}return new wt(S,{})}function Xl(I){const E={};return $t(I,(v,S)=>{"string"==typeof v&&(v=[v]),null!==v&&(E[S]=Os(new wt([],{}),0,v))}),E}function Mr(I){const E={};return $t(I,(v,S)=>E[S]=`${v}`),E}function li(I,E,v){return I==v.path&&qt(E,v.parameters)}class cs{constructor(E,v,S,O){this.routeReuseStrategy=E,this.futureState=v,this.currState=S,this.forwardEvent=O}activate(E){const v=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,S,E),Uo(this.futureState.root),this.activateChildRoutes(v,S,E)}deactivateChildRoutes(E,v,S){const O=jr(v);E.children.forEach(V=>{const Y=V.value.outlet;this.deactivateRoutes(V,O[Y],S),delete O[Y]}),$t(O,(V,Y)=>{this.deactivateRouteAndItsChildren(V,S)})}deactivateRoutes(E,v,S){const O=E.value,V=v?v.value:null;if(O===V)if(O.component){const Y=S.getContext(O.outlet);Y&&this.deactivateChildRoutes(E,v,Y.children)}else this.deactivateChildRoutes(E,v,S);else V&&this.deactivateRouteAndItsChildren(v,S)}deactivateRouteAndItsChildren(E,v){this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,v):this.deactivateRouteAndOutlet(E,v)}detachAndStoreRouteSubtree(E,v){const S=v.getContext(E.value.outlet);if(S&&S.outlet){const O=S.outlet.detach(),V=S.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:O,route:E,contexts:V})}}deactivateRouteAndOutlet(E,v){const S=v.getContext(E.value.outlet),O=S&&E.value.component?S.children:v,V=jr(E);for(const Y of Object.keys(V))this.deactivateRouteAndItsChildren(V[Y],O);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(E,v,S){const O=jr(v);E.children.forEach(V=>{this.activateRoutes(V,O[V.value.outlet],S),this.forwardEvent(new $n(V.value.snapshot))}),E.children.length&&this.forwardEvent(new Ss(E.value.snapshot))}activateRoutes(E,v,S){const O=E.value,V=v?v.value:null;if(Uo(O),O===V)if(O.component){const Y=S.getOrCreateContext(O.outlet);this.activateChildRoutes(E,v,Y.children)}else this.activateChildRoutes(E,v,S);else if(O.component){const Y=S.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const ne=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),Y.children.onOutletReAttached(ne.contexts),Y.attachRef=ne.componentRef,Y.route=ne.route.value,Y.outlet&&Y.outlet.attach(ne.componentRef,ne.route.value),Xr(ne.route)}else{const ne=function(I){for(let E=I.parent;E;E=E.parent){const v=E.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig;if(v&&v.component)return null}return null}(O.snapshot),Ue=ne?ne.module.componentFactoryResolver:null;Y.attachRef=null,Y.route=O,Y.resolver=Ue,Y.outlet&&Y.outlet.activateWith(O,Ue),this.activateChildRoutes(E,null,Y.children)}}else this.activateChildRoutes(E,null,S)}}function Xr(I){Uo(I.value),I.children.forEach(Xr)}class $o{constructor(E,v){this.routes=E,this.module=v}}function tr(I){return"function"==typeof I}function Ei(I){return I instanceof oi}const L=Symbol("INITIAL_VALUE");function N(){return(0,Ht.w)(I=>function(...I){let E,v;return(0,oe.K)(I[I.length-1])&&(v=I.pop()),"function"==typeof I[I.length-1]&&(E=I.pop()),1===I.length&&(0,ve.k)(I[0])&&(I=I[0]),(0,Ee.n)(I,v).lift(new ue(E))}(I.map(E=>E.pipe((0,Qs.q)(1),(0,dr.O)(L)))).pipe((0,vn.R)((E,v)=>{let S=!1;return v.reduce((O,V,Y)=>O!==L?O:(V===L&&(S=!0),S||!1!==V&&Y!==v.length-1&&!Ei(V)?O:V),E)},L),(0,Ce.h)(E=>E!==L),(0,it.U)(E=>Ei(E)?E:!0===E),(0,Qs.q)(1)))}let j=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=f.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(v,S){1&v&&f._UZ(0,"router-outlet")},directives:function(){return[Tu]},encapsulation:2}),I})();function te(I,E=""){for(let v=0;v<I.length;v++){const S=I[v];we(S,We(E,S))}}function we(I,E){I.children&&te(I.children,E)}function We(I,E){return E?I||E.path?I&&!E.path?`${I}/`:!I&&E.path?E.path:`${I}/${E.path}`:"":I}function st(I){const E=I.children&&I.children.map(st),v=E?Object.assign(Object.assign({},I),{children:E}):Object.assign({},I);return!v.component&&(E||v.loadChildren)&&v.outlet&&v.outlet!==Lt&&(v.component=j),v}function Vt(I){return I.outlet||Lt}function ht(I,E){const v=I.filter(S=>Vt(S)===E);return v.push(...I.filter(S=>Vt(S)!==E)),v}const wn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Jt(I,E,v){var S;if(""===E.path)return"full"===E.pathMatch&&(I.hasChildren()||v.length>0)?Object.assign({},wn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const V=(E.matcher||lt)(v,I,E);if(!V)return Object.assign({},wn);const Y={};$t(V.posParams,(Ue,rt)=>{Y[rt]=Ue.path});const ne=V.consumed.length>0?Object.assign(Object.assign({},Y),V.consumed[V.consumed.length-1].parameters):Y;return{matched:!0,consumedSegments:V.consumed,lastChild:V.consumed.length,parameters:ne,positionalParamSegments:null!==(S=V.posParams)&&void 0!==S?S:{}}}function Pn(I,E,v,S,O="corrected"){if(v.length>0&&function(I,E,v){return v.some(S=>on(I,E,S)&&Vt(S)!==Lt)}(I,v,S)){const Y=new wt(E,function(I,E,v,S){const O={};O[Lt]=S,S._sourceSegment=I,S._segmentIndexShift=E.length;for(const V of v)if(""===V.path&&Vt(V)!==Lt){const Y=new wt([],{});Y._sourceSegment=I,Y._segmentIndexShift=E.length,O[Vt(V)]=Y}return O}(I,E,S,new wt(v,I.children)));return Y._sourceSegment=I,Y._segmentIndexShift=E.length,{segmentGroup:Y,slicedSegments:[]}}if(0===v.length&&function(I,E,v){return v.some(S=>on(I,E,S))}(I,v,S)){const Y=new wt(I.segments,function(I,E,v,S,O,V){const Y={};for(const ne of S)if(on(I,v,ne)&&!O[Vt(ne)]){const Ue=new wt([],{});Ue._sourceSegment=I,Ue._segmentIndexShift="legacy"===V?I.segments.length:E.length,Y[Vt(ne)]=Ue}return Object.assign(Object.assign({},O),Y)}(I,E,v,S,I.children,O));return Y._sourceSegment=I,Y._segmentIndexShift=E.length,{segmentGroup:Y,slicedSegments:v}}const V=new wt(I.segments,I.children);return V._sourceSegment=I,V._segmentIndexShift=E.length,{segmentGroup:V,slicedSegments:v}}function on(I,E,v){return(!(I.hasChildren()||E.length>0)||"full"!==v.pathMatch)&&""===v.path}function Or(I,E,v,S){return!!(Vt(I)===S||S!==Lt&&on(E,v,I))&&("**"===I.path||Jt(E,I,v).matched)}function Ps(I,E,v){return 0===E.length&&!I.children[v]}class Gi{constructor(E){this.segmentGroup=E||null}}class wi{constructor(E){this.urlTree=E}}function to(I){return new de.y(E=>E.error(new Gi(I)))}function yr(I){return new de.y(E=>E.error(new wi(I)))}function Dt(I){return new de.y(E=>E.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${I}'`)))}class ec{constructor(E,v,S,O,V){this.configLoader=v,this.urlSerializer=S,this.urlTree=O,this.config=V,this.allowRedirects=!0,this.ngModule=E.get(f.h0i)}apply(){const E=Pn(this.urlTree.root,[],[],this.config).segmentGroup,v=new wt(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,v,Lt).pipe((0,it.U)(V=>this.createUrlTree(Ga(V),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ye(V=>{if(V instanceof wi)return this.allowRedirects=!1,this.match(V.urlTree);throw V instanceof Gi?this.noMatchError(V):V}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,Lt).pipe((0,it.U)(O=>this.createUrlTree(Ga(O),E.queryParams,E.fragment))).pipe(ye(O=>{throw O instanceof Gi?this.noMatchError(O):O}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,v,S){const O=E.segments.length>0?new wt([],{[Lt]:E}):E;return new oi(O,v,S)}expandSegmentGroup(E,v,S,O){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(E,v,S).pipe((0,it.U)(V=>new wt([],V))):this.expandSegment(E,S,v,S.segments,O,!0)}expandChildren(E,v,S){const O=[];for(const V of Object.keys(S.children))"primary"===V?O.unshift(V):O.push(V);return(0,Ae.D)(O).pipe((0,xr.b)(V=>{const Y=S.children[V],ne=ht(v,V);return this.expandSegmentGroup(E,ne,Y,V).pipe((0,it.U)(Ue=>({segment:Ue,outlet:V})))}),(0,vn.R)((V,Y)=>(V[Y.outlet]=Y.segment,V),{}),function(I,E){const v=arguments.length>=2;return S=>S.pipe(I?(0,Ce.h)((O,V)=>I(O,V,S)):dn.y,Re(1),v?(0,Ft.d)(E):(0,Zn.T)(()=>new Xe.K))}())}expandSegment(E,v,S,O,V,Y){return(0,Ae.D)(S).pipe((0,xr.b)(ne=>this.expandSegmentAgainstRoute(E,v,S,ne,O,V,Y).pipe(ye(rt=>{if(rt instanceof Gi)return(0,Be.of)(null);throw rt}))),(0,wr.P)(ne=>!!ne),ye((ne,Ue)=>{if(ne instanceof Xe.K||"EmptyError"===ne.name){if(Ps(v,O,V))return(0,Be.of)(new wt([],{}));throw new Gi(v)}throw ne}))}expandSegmentAgainstRoute(E,v,S,O,V,Y,ne){return Or(O,v,V,Y)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(E,v,O,V,Y):ne&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,v,S,O,V,Y):to(v):to(v)}expandSegmentAgainstRouteUsingRedirect(E,v,S,O,V,Y){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,S,O,Y):this.expandRegularSegmentAgainstRouteUsingRedirect(E,v,S,O,V,Y)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,v,S,O){const V=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?yr(V):this.lineralizeSegments(S,V).pipe((0,pn.zg)(Y=>{const ne=new wt(Y,{});return this.expandSegment(E,ne,v,Y,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,v,S,O,V,Y){const{matched:ne,consumedSegments:Ue,lastChild:rt,positionalParamSegments:sn}=Jt(v,O,V);if(!ne)return to(v);const St=this.applyRedirectCommands(Ue,O.redirectTo,sn);return O.redirectTo.startsWith("/")?yr(St):this.lineralizeSegments(O,St).pipe((0,pn.zg)(Nn=>this.expandSegment(E,v,S,Nn.concat(V.slice(rt)),Y,!1)))}matchSegmentAgainstRoute(E,v,S,O,V){if("**"===S.path)return S.loadChildren?(S._loadedConfig?(0,Be.of)(S._loadedConfig):this.configLoader.load(E.injector,S)).pipe((0,it.U)(Nn=>(S._loadedConfig=Nn,new wt(O,{})))):(0,Be.of)(new wt(O,{}));const{matched:Y,consumedSegments:ne,lastChild:Ue}=Jt(v,S,O);if(!Y)return to(v);const rt=O.slice(Ue);return this.getChildConfig(E,S,O).pipe((0,pn.zg)(St=>{const Nn=St.module,Xt=St.routes,{segmentGroup:fi,slicedSegments:zi}=Pn(v,ne,rt,Xt),Wi=new wt(fi.segments,fi.children);if(0===zi.length&&Wi.hasChildren())return this.expandChildren(Nn,Xt,Wi).pipe((0,it.U)(uc=>new wt(ne,uc)));if(0===Xt.length&&0===zi.length)return(0,Be.of)(new wt(ne,{}));const tu=Vt(S)===V;return this.expandSegment(Nn,Wi,Xt,zi,tu?Lt:V,!0).pipe((0,it.U)(ao=>new wt(ne.concat(ao.segments),ao.children)))}))}getChildConfig(E,v,S){return v.children?(0,Be.of)(new $o(v.children,E)):v.loadChildren?void 0!==v._loadedConfig?(0,Be.of)(v._loadedConfig):this.runCanLoadGuards(E.injector,v,S).pipe((0,pn.zg)(O=>{return O?this.configLoader.load(E.injector,v).pipe((0,it.U)(V=>(v._loadedConfig=V,V))):(I=v,new de.y(E=>E.error(He(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))));var I})):(0,Be.of)(new $o([],E))}runCanLoadGuards(E,v,S){const O=v.canLoad;if(!O||0===O.length)return(0,Be.of)(!0);const V=O.map(Y=>{const ne=E.get(Y);let Ue;if((I=ne)&&tr(I.canLoad))Ue=ne.canLoad(v,S);else{if(!tr(ne))throw new Error("Invalid CanLoad guard");Ue=ne(v,S)}var I;return Rn(Ue)});return(0,Be.of)(V).pipe(N(),(0,On.b)(Y=>{if(!Ei(Y))return;const ne=He(`Redirecting to "${this.urlSerializer.serialize(Y)}"`);throw ne.url=Y,ne}),(0,it.U)(Y=>!0===Y))}lineralizeSegments(E,v){let S=[],O=v.root;for(;;){if(S=S.concat(O.segments),0===O.numberOfChildren)return(0,Be.of)(S);if(O.numberOfChildren>1||!O.children[Lt])return Dt(E.redirectTo);O=O.children[Lt]}}applyRedirectCommands(E,v,S){return this.applyRedirectCreatreUrlTree(v,this.urlSerializer.parse(v),E,S)}applyRedirectCreatreUrlTree(E,v,S,O){const V=this.createSegmentGroup(E,v.root,S,O);return new oi(V,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(E,v){const S={};return $t(E,(O,V)=>{if("string"==typeof O&&O.startsWith(":")){const ne=O.substring(1);S[V]=v[ne]}else S[V]=O}),S}createSegmentGroup(E,v,S,O){const V=this.createSegments(E,v.segments,S,O);let Y={};return $t(v.children,(ne,Ue)=>{Y[Ue]=this.createSegmentGroup(E,ne,S,O)}),new wt(V,Y)}createSegments(E,v,S,O){return v.map(V=>V.path.startsWith(":")?this.findPosParam(E,V,O):this.findOrReturn(V,S))}findPosParam(E,v,S){const O=S[v.path.substring(1)];if(!O)throw new Error(`Cannot redirect to '${E}'. Cannot find '${v.path}'.`);return O}findOrReturn(E,v){let S=0;for(const O of v){if(O.path===E.path)return v.splice(S),O;S++}return E}}function Ga(I){const E={};for(const S of Object.keys(I.children)){const V=Ga(I.children[S]);(V.segments.length>0||V.hasChildren())&&(E[S]=V)}return function(I){if(1===I.numberOfChildren&&I.children[Lt]){const E=I.children[Lt];return new wt(I.segments.concat(E.segments),E.children)}return I}(new wt(I.segments,E))}class Cu{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class qe{constructor(E,v){this.component=E,this.route=v}}function rn(I,E,v){const S=I._root;return _r(S,E?E._root:null,v,[S.value])}function zn(I,E,v){const S=function(I){if(!I)return null;for(let E=I.parent;E;E=E.parent){const v=E.routeConfig;if(v&&v._loadedConfig)return v._loadedConfig}return null}(E);return(S?S.module.injector:v).get(I)}function _r(I,E,v,S,O={canDeactivateChecks:[],canActivateChecks:[]}){const V=jr(E);return I.children.forEach(Y=>{(function(I,E,v,S,O={canDeactivateChecks:[],canActivateChecks:[]}){const V=I.value,Y=E?E.value:null,ne=v?v.getContext(I.value.outlet):null;if(Y&&V.routeConfig===Y.routeConfig){const Ue=function(I,E,v){if("function"==typeof v)return v(I,E);switch(v){case"pathParamsChange":return!Hn(I.url,E.url);case"pathParamsOrQueryParamsChange":return!Hn(I.url,E.url)||!qt(I.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eu(I,E)||!qt(I.queryParams,E.queryParams);case"paramsChange":default:return!Eu(I,E)}}(Y,V,V.routeConfig.runGuardsAndResolvers);Ue?O.canActivateChecks.push(new Cu(S)):(V.data=Y.data,V._resolvedData=Y._resolvedData),_r(I,E,V.component?ne?ne.children:null:v,S,O),Ue&&ne&&ne.outlet&&ne.outlet.isActivated&&O.canDeactivateChecks.push(new qe(ne.outlet.component,Y))}else Y&&ro(E,ne,O),O.canActivateChecks.push(new Cu(S)),_r(I,null,V.component?ne?ne.children:null:v,S,O)})(Y,V[Y.value.outlet],v,S.concat([Y.value]),O),delete V[Y.value.outlet]}),$t(V,(Y,ne)=>ro(Y,v.getContext(ne),O)),O}function ro(I,E,v){const S=jr(I),O=I.value;$t(S,(V,Y)=>{ro(V,O.component?E?E.children.getContext(Y):null:E,v)}),v.canDeactivateChecks.push(new qe(O.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,O))}class Ls{}function qo(I){return new de.y(E=>E.error(I))}class nc{constructor(E,v,S,O,V,Y){this.rootComponentType=E,this.config=v,this.urlTree=S,this.url=O,this.paramsInheritanceStrategy=V,this.relativeLinkResolution=Y}recognize(){const E=Pn(this.urlTree.root,[],[],this.config.filter(Y=>void 0===Y.redirectTo),this.relativeLinkResolution).segmentGroup,v=this.processSegmentGroup(this.config,E,Lt);if(null===v)return null;const S=new ji([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),O=new Et(S,v),V=new eo(this.url,O);return this.inheritParamsAndData(V._root),V}inheritParamsAndData(E){const v=E.value,S=$r(v,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data),E.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(E,v,S){return 0===v.segments.length&&v.hasChildren()?this.processChildren(E,v):this.processSegment(E,v,v.segments,S)}processChildren(E,v){const S=[];for(const V of Object.keys(v.children)){const Y=v.children[V],ne=ht(E,V),Ue=this.processSegmentGroup(ne,Y,V);if(null===Ue)return null;S.push(...Ue)}const O=Co(S);return O.sort((E,v)=>E.value.outlet===Lt?-1:v.value.outlet===Lt?1:E.value.outlet.localeCompare(v.value.outlet)),O}processSegment(E,v,S,O){for(const V of E){const Y=this.processSegmentAgainstRoute(V,v,S,O);if(null!==Y)return Y}return Ps(v,S,O)?[]:null}processSegmentAgainstRoute(E,v,S,O){if(E.redirectTo||!Or(E,v,S,O))return null;let V,Y=[],ne=[];if("**"===E.path){const Xt=S.length>0?Qr(S).parameters:{};V=new ji(S,Xt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zo(E),Vt(E),E.component,E,Gr(v),Ea(v)+S.length,Io(E))}else{const Xt=Jt(v,E,S);if(!Xt.matched)return null;Y=Xt.consumedSegments,ne=S.slice(Xt.lastChild),V=new ji(Y,Xt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zo(E),Vt(E),E.component,E,Gr(v),Ea(v)+Y.length,Io(E))}const Ue=(I=E).children?I.children:I.loadChildren?I._loadedConfig.routes:[],{segmentGroup:rt,slicedSegments:sn}=Pn(v,Y,ne,Ue.filter(Xt=>void 0===Xt.redirectTo),this.relativeLinkResolution);var I;if(0===sn.length&&rt.hasChildren()){const Xt=this.processChildren(Ue,rt);return null===Xt?null:[new Et(V,Xt)]}if(0===Ue.length&&0===sn.length)return[new Et(V,[])];const St=Vt(E)===O,Nn=this.processSegment(Ue,rt,sn,St?Lt:O);return null===Nn?null:[new Et(V,Nn)]}}function Ka(I){const E=I.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Co(I){const E=[],v=new Set;for(const S of I){if(!Ka(S)){E.push(S);continue}const O=E.find(V=>S.value.routeConfig===V.value.routeConfig);void 0!==O?(O.children.push(...S.children),v.add(O)):E.push(S)}for(const S of v){const O=Co(S.children);E.push(new Et(S.value,O))}return E.filter(S=>!v.has(S))}function Gr(I){let E=I;for(;E._sourceSegment;)E=E._sourceSegment;return E}function Ea(I){let E=I,v=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,v+=E._segmentIndexShift?E._segmentIndexShift:0;return v-1}function zo(I){return I.data||{}}function Io(I){return I.resolve||{}}function td(I){return(0,Ht.w)(E=>{const v=I(E);return v?(0,Ae.D)(v).pipe((0,it.U)(()=>E)):(0,Be.of)(E)})}class Bn extends class{shouldDetach(E){return!1}store(E,v){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,v){return E.routeConfig===v.routeConfig}}{}const ls=new f.OlP("ROUTES");class Du{constructor(E,v,S,O){this.loader=E,this.compiler=v,this.onLoadStartListener=S,this.onLoadEndListener=O}load(E,v){if(v._loader$)return v._loader$;this.onLoadStartListener&&this.onLoadStartListener(v);const O=this.loadModuleFactory(v.loadChildren).pipe((0,it.U)(V=>{this.onLoadEndListener&&this.onLoadEndListener(v);const Y=V.create(E);return new $o(En(Y.injector.get(ls,void 0,f.XFs.Self|f.XFs.Optional)).map(st),Y)}),ye(V=>{throw v._loader$=void 0,V}));return v._loader$=new Pt.c(O,()=>new G.xQ).pipe((0,Fi.x)()),v._loader$}loadModuleFactory(E){return"string"==typeof E?(0,Ae.D)(this.loader.load(E)):Rn(E()).pipe((0,pn.zg)(v=>v instanceof f.YKP?(0,Be.of)(v):(0,Ae.D)(this.compiler.compileModuleAsync(v))))}}class ic{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zo,this.attachRef=null}}class Zo{constructor(){this.contexts=new Map}onChildOutletCreated(E,v){const S=this.getOrCreateContext(E);S.outlet=v,this.contexts.set(E,S)}onChildOutletDestroyed(E){const v=this.getContext(E);v&&(v.outlet=null,v.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let v=this.getContext(E);return v||(v=new ic,this.contexts.set(E,v)),v}getContext(E){return this.contexts.get(E)||null}}class sl{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,v){return E}}function Do(I){throw I}function ba(I,E,v){return E.parse("/")}function Ko(I,E){return(0,Be.of)(null)}const io={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pr=(()=>{class I{constructor(v,S,O,V,Y,ne,Ue,rt){this.rootComponentType=v,this.urlSerializer=S,this.rootContexts=O,this.location=V,this.config=rt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new G.xQ,this.errorHandler=Do,this.malformedUriErrorHandler=ba,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ko,afterPreactivation:Ko},this.urlHandlingStrategy=new sl,this.routeReuseStrategy=new Bn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Y.get(f.h0i),this.console=Y.get(f.c2e);const Nn=Y.get(f.R0b);this.isNgZoneEnabled=Nn instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(rt),this.currentUrlTree=new oi(new wt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Du(ne,Ue,Xt=>this.triggerEvent(new pt(Xt)),Xt=>this.triggerEvent(new gt(Xt))),this.routerState=Bi(this.currentUrlTree,this.rootComponentType),this.transitions=new re({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var v;return null===(v=this.location.getState())||void 0===v?void 0:v.\u0275routerPageId}setupNavigations(v){const S=this.events;return v.pipe((0,Ce.h)(O=>0!==O.id),(0,it.U)(O=>Object.assign(Object.assign({},O),{extractedUrl:this.urlHandlingStrategy.extract(O.rawUrl)})),(0,Ht.w)(O=>{let V=!1,Y=!1;return(0,Be.of)(O).pipe((0,On.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.currentRawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ht.w)(ne=>{const Ue=this.browserUrlTree.toString(),rt=!this.navigated||ne.extractedUrl.toString()!==Ue||Ue!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||rt)&&this.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return To(ne.source)&&(this.browserUrlTree=ne.extractedUrl),(0,Be.of)(ne).pipe((0,Ht.w)(St=>{const Nn=this.transitions.getValue();return S.next(new Sn(St.id,this.serializeUrl(St.extractedUrl),St.source,St.restoredState)),Nn!==this.transitions.getValue()?Te.E:Promise.resolve(St)}),function(I,E,v,S){return(0,Ht.w)(O=>function(I,E,v,S,O){return new ec(I,E,v,S,O).apply()}(I,E,v,O.extractedUrl,S).pipe((0,it.U)(V=>Object.assign(Object.assign({},O),{urlAfterRedirects:V}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,On.b)(St=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:St.urlAfterRedirects})}),function(I,E,v,S,O){return(0,pn.zg)(V=>function(I,E,v,S,O="emptyOnly",V="legacy"){try{const Y=new nc(I,E,v,S,O,V).recognize();return null===Y?qo(new Ls):(0,Be.of)(Y)}catch(Y){return qo(Y)}}(I,E,V.urlAfterRedirects,v(V.urlAfterRedirects),S,O).pipe((0,it.U)(Y=>Object.assign(Object.assign({},V),{targetSnapshot:Y}))))}(this.rootComponentType,this.config,St=>this.serializeUrl(St),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,On.b)(St=>{"eager"===this.urlUpdateStrategy&&(St.extras.skipLocationChange||this.setBrowserUrl(St.urlAfterRedirects,St),this.browserUrlTree=St.urlAfterRedirects);const Nn=new ze(St.id,this.serializeUrl(St.extractedUrl),this.serializeUrl(St.urlAfterRedirects),St.targetSnapshot);S.next(Nn)}));if(rt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Nn,extractedUrl:Xt,source:fi,restoredState:zi,extras:Wi}=ne,tu=new Sn(Nn,this.serializeUrl(Xt),fi,zi);S.next(tu);const or=Bi(Xt,this.rootComponentType).snapshot;return(0,Be.of)(Object.assign(Object.assign({},ne),{targetSnapshot:or,urlAfterRedirects:Xt,extras:Object.assign(Object.assign({},Wi),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ne.rawUrl,this.browserUrlTree=ne.urlAfterRedirects,ne.resolve(null),Te.E}),td(ne=>{const{targetSnapshot:Ue,id:rt,extractedUrl:sn,rawUrl:St,extras:{skipLocationChange:Nn,replaceUrl:Xt}}=ne;return this.hooks.beforePreactivation(Ue,{navigationId:rt,appliedUrlTree:sn,rawUrlTree:St,skipLocationChange:!!Nn,replaceUrl:!!Xt})}),(0,On.b)(ne=>{const Ue=new gn(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot);this.triggerEvent(Ue)}),(0,it.U)(ne=>Object.assign(Object.assign({},ne),{guards:rn(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)})),function(I,E){return(0,pn.zg)(v=>{const{targetSnapshot:S,currentSnapshot:O,guards:{canActivateChecks:V,canDeactivateChecks:Y}}=v;return 0===Y.length&&0===V.length?(0,Be.of)(Object.assign(Object.assign({},v),{guardsResult:!0})):function(I,E,v,S){return(0,Ae.D)(I).pipe((0,pn.zg)(O=>function(I,E,v,S,O){const V=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!V||0===V.length)return(0,Be.of)(!0);const Y=V.map(ne=>{const Ue=zn(ne,E,O);let rt;if(function(I){return I&&tr(I.canDeactivate)}(Ue))rt=Rn(Ue.canDeactivate(I,E,v,S));else{if(!tr(Ue))throw new Error("Invalid CanDeactivate guard");rt=Rn(Ue(I,E,v,S))}return rt.pipe((0,wr.P)())});return(0,Be.of)(Y).pipe(N())}(O.component,O.route,v,E,S)),(0,wr.P)(O=>!0!==O,!0))}(Y,S,O,I).pipe((0,pn.zg)(ne=>ne&&function(I){return"boolean"==typeof I}(ne)?function(I,E,v,S){return(0,Ae.D)(E).pipe((0,xr.b)(O=>(0,Ut.z)(function(I,E){return null!==I&&E&&E(new Un(I)),(0,Be.of)(!0)}(O.route.parent,S),function(I,E){return null!==I&&E&&E(new Li(I)),(0,Be.of)(!0)}(O.route,S),function(I,E,v){const S=E[E.length-1],V=E.slice(0,E.length-1).reverse().map(Y=>function(I){const E=I.routeConfig?I.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:I,guards:E}:null}(Y)).filter(Y=>null!==Y).map(Y=>je(()=>{const ne=Y.guards.map(Ue=>{const rt=zn(Ue,Y.node,v);let sn;if(function(I){return I&&tr(I.canActivateChild)}(rt))sn=Rn(rt.canActivateChild(S,I));else{if(!tr(rt))throw new Error("Invalid CanActivateChild guard");sn=Rn(rt(S,I))}return sn.pipe((0,wr.P)())});return(0,Be.of)(ne).pipe(N())}));return(0,Be.of)(V).pipe(N())}(I,O.path,v),function(I,E,v){const S=E.routeConfig?E.routeConfig.canActivate:null;if(!S||0===S.length)return(0,Be.of)(!0);const O=S.map(V=>je(()=>{const Y=zn(V,E,v);let ne;if(function(I){return I&&tr(I.canActivate)}(Y))ne=Rn(Y.canActivate(E,I));else{if(!tr(Y))throw new Error("Invalid CanActivate guard");ne=Rn(Y(E,I))}return ne.pipe((0,wr.P)())}));return(0,Be.of)(O).pipe(N())}(I,O.route,v))),(0,wr.P)(O=>!0!==O,!0))}(S,V,I,E):(0,Be.of)(ne)),(0,it.U)(ne=>Object.assign(Object.assign({},v),{guardsResult:ne})))})}(this.ngModule.injector,ne=>this.triggerEvent(ne)),(0,On.b)(ne=>{if(Ei(ne.guardsResult)){const rt=He(`Redirecting to "${this.serializeUrl(ne.guardsResult)}"`);throw rt.url=ne.guardsResult,rt}const Ue=new xn(ne.id,this.serializeUrl(ne.extractedUrl),this.serializeUrl(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.triggerEvent(Ue)}),(0,Ce.h)(ne=>!!ne.guardsResult||(this.restoreHistory(ne),this.cancelNavigationTransition(ne,""),!1)),td(ne=>{if(ne.guards.canActivateChecks.length)return(0,Be.of)(ne).pipe((0,On.b)(Ue=>{const rt=new jn(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(rt)}),(0,Ht.w)(Ue=>{let rt=!1;return(0,Be.of)(Ue).pipe(function(I,E){return(0,pn.zg)(v=>{const{targetSnapshot:S,guards:{canActivateChecks:O}}=v;if(!O.length)return(0,Be.of)(v);let V=0;return(0,Ae.D)(O).pipe((0,xr.b)(Y=>function(I,E,v,S){return function(I,E,v,S){const O=Object.keys(I);if(0===O.length)return(0,Be.of)({});const V={};return(0,Ae.D)(O).pipe((0,pn.zg)(Y=>function(I,E,v,S){const O=zn(I,E,S);return Rn(O.resolve?O.resolve(E,v):O(E,v))}(I[Y],E,v,S).pipe((0,On.b)(ne=>{V[Y]=ne}))),Re(1),(0,pn.zg)(()=>Object.keys(V).length===O.length?(0,Be.of)(V):Te.E))}(I._resolve,I,E,S).pipe((0,it.U)(V=>(I._resolvedData=V,I.data=Object.assign(Object.assign({},I.data),$r(I,v).resolve),null)))}(Y.route,S,I,E)),(0,On.b)(()=>V++),Re(1),(0,pn.zg)(Y=>V===O.length?(0,Be.of)(v):Te.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,On.b)({next:()=>rt=!0,complete:()=>{rt||(this.restoreHistory(Ue),this.cancelNavigationTransition(Ue,"At least one route resolver didn't emit any value."))}}))}),(0,On.b)(Ue=>{const rt=new an(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(rt)}))}),td(ne=>{const{targetSnapshot:Ue,id:rt,extractedUrl:sn,rawUrl:St,extras:{skipLocationChange:Nn,replaceUrl:Xt}}=ne;return this.hooks.afterPreactivation(Ue,{navigationId:rt,appliedUrlTree:sn,rawUrlTree:St,skipLocationChange:!!Nn,replaceUrl:!!Xt})}),(0,it.U)(ne=>{const Ue=function(I,E,v){const S=$i(I,E._root,v?v._root:void 0);return new Ir(S,E)}(this.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return Object.assign(Object.assign({},ne),{targetRouterState:Ue})}),(0,On.b)(ne=>{this.currentUrlTree=ne.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),this.routerState=ne.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ne.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ne),this.browserUrlTree=ne.urlAfterRedirects)}),((I,E,v)=>(0,it.U)(S=>(new cs(E,S.targetRouterState,S.currentRouterState,v).activate(I),S)))(this.rootContexts,this.routeReuseStrategy,ne=>this.triggerEvent(ne)),(0,On.b)({next(){V=!0},complete(){V=!0}}),function(I){return E=>E.lift(new Yr(I))}(()=>{if(!V&&!Y){const ne=`Navigation ID ${O.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(O),this.cancelNavigationTransition(O,ne)):this.cancelNavigationTransition(O,ne)}this.currentNavigation=null}),ye(ne=>{if(Y=!0,function(I){return I&&I[ee]}(ne)){const Ue=Ei(ne.url);Ue||(this.navigated=!0,this.restoreHistory(O,!0));const rt=new As(O.id,this.serializeUrl(O.extractedUrl),ne.message);S.next(rt),Ue?setTimeout(()=>{const sn=this.urlHandlingStrategy.merge(ne.url,this.rawUrlTree),St={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||To(O.source)};this.scheduleNavigation(sn,"imperative",null,St,{resolve:O.resolve,reject:O.reject,promise:O.promise})},0):O.resolve(!1)}else{this.restoreHistory(O,!0);const Ue=new Tt(O.id,this.serializeUrl(O.extractedUrl),ne);S.next(Ue);try{O.resolve(this.errorHandler(ne))}catch(rt){O.reject(rt)}}return Te.E}))}))}resetRootComponentType(v){this.rootComponentType=v,this.routerState.root.component=this.rootComponentType}getTransition(){const v=this.transitions.value;return v.urlAfterRedirects=this.browserUrlTree,v}setTransition(v){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),v))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const S=this.extractLocationChangeInfoFromEvent(v);this.shouldScheduleNavigation(this.lastLocationChangeInfo,S)&&setTimeout(()=>{const{source:O,state:V,urlTree:Y}=S,ne={replaceUrl:!0};if(V){const Ue=Object.assign({},V);delete Ue.navigationId,delete Ue.\u0275routerPageId,0!==Object.keys(Ue).length&&(ne.state=Ue)}this.scheduleNavigation(Y,O,V,ne)},0),this.lastLocationChangeInfo=S}))}extractLocationChangeInfoFromEvent(v){var S;return{source:"popstate"===v.type?"popstate":"hashchange",urlTree:this.parseUrl(v.url),state:(null===(S=v.state)||void 0===S?void 0:S.navigationId)?v.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(v,S){if(!v)return!0;const O=S.urlTree.toString()===v.urlTree.toString();return S.transitionId!==v.transitionId||!O||!("hashchange"===S.source&&"popstate"===v.source||"popstate"===S.source&&"hashchange"===v.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(v){this.events.next(v)}resetConfig(v){te(v),this.config=v.map(st),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,S={}){const{relativeTo:O,queryParams:V,fragment:Y,queryParamsHandling:ne,preserveFragment:Ue}=S,rt=O||this.routerState.root,sn=Ue?this.currentUrlTree.fragment:Y;let St=null;switch(ne){case"merge":St=Object.assign(Object.assign({},this.currentUrlTree.queryParams),V);break;case"preserve":St=this.currentUrlTree.queryParams;break;default:St=V||null}return null!==St&&(St=this.removeEmptyProps(St)),function(I,E,v,S,O){if(0===v.length)return Xu(E.root,E.root,E,S,O);const V=function(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new wu(!0,0,I);let E=0,v=!1;const S=I.reduce((O,V,Y)=>{if("object"==typeof V&&null!=V){if(V.outlets){const ne={};return $t(V.outlets,(Ue,rt)=>{ne[rt]="string"==typeof Ue?Ue.split("/"):Ue}),[...O,{outlets:ne}]}if(V.segmentPath)return[...O,V.segmentPath]}return"string"!=typeof V?[...O,V]:0===Y?(V.split("/").forEach((ne,Ue)=>{0==Ue&&"."===ne||(0==Ue&&""===ne?v=!0:".."===ne?E++:""!=ne&&O.push(ne))}),O):[...O,V]},[]);return new wu(v,E,S)}(v);if(V.toRoot())return Xu(E.root,new wt([],{}),E,S,O);const Y=function(I,E,v){if(I.isAbsolute)return new Jr(E.root,!0,0);if(-1===v.snapshot._lastPathIndex){const V=v.snapshot._urlSegment;return new Jr(V,V===E.root,0)}const S=Hi(I.commands[0])?0:1;return function(I,E,v){let S=I,O=E,V=v;for(;V>O;){if(V-=O,S=S.parent,!S)throw new Error("Invalid number of '../'");O=S.segments.length}return new Jr(S,!1,O-V)}(v.snapshot._urlSegment,v.snapshot._lastPathIndex+S,I.numberOfDoubleDots)}(V,E,I),ne=Y.processChildren?Kn(Y.segmentGroup,Y.index,V.commands):jo(Y.segmentGroup,Y.index,V.commands);return Xu(Y.segmentGroup,ne,E,S,O)}(rt,this.currentUrlTree,v,St,null!=sn?sn:null)}navigateByUrl(v,S={skipLocationChange:!1}){const O=Ei(v)?v:this.parseUrl(v),V=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(V,"imperative",null,S)}navigate(v,S={skipLocationChange:!1}){return function(I){for(let E=0;E<I.length;E++){const v=I[E];if(null==v)throw new Error(`The requested path contains ${v} segment at index ${E}`)}}(v),this.navigateByUrl(this.createUrlTree(v,S),S)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let S;try{S=this.urlSerializer.parse(v)}catch(O){S=this.malformedUriErrorHandler(O,this.urlSerializer,v)}return S}isActive(v,S){let O;if(O=!0===S?Object.assign({},io):!1===S?Object.assign({},sc):S,Ei(v))return yo(this.currentUrlTree,v,O);const V=this.parseUrl(v);return yo(this.currentUrlTree,V,O)}removeEmptyProps(v){return Object.keys(v).reduce((S,O)=>{const V=v[O];return null!=V&&(S[O]=V),S},{})}processNavigations(){this.navigations.subscribe(v=>{this.navigated=!0,this.lastSuccessfulId=v.id,this.currentPageId=v.targetPageId,this.events.next(new er(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,v.resolve(!0)},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}scheduleNavigation(v,S,O,V,Y){var ne,Ue;if(this.disposed)return Promise.resolve(!1);const rt=this.getTransition(),sn=To(S)&&rt&&!To(rt.source),Xt=(this.lastSuccessfulId===rt.id||this.currentNavigation?rt.rawUrl:rt.urlAfterRedirects).toString()===v.toString();if(sn&&Xt)return Promise.resolve(!0);let fi,zi,Wi;Y?(fi=Y.resolve,zi=Y.reject,Wi=Y.promise):Wi=new Promise((ao,uc)=>{fi=ao,zi=uc});const tu=++this.navigationId;let or;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(O=this.location.getState()),or=O&&O.\u0275routerPageId?O.\u0275routerPageId:V.replaceUrl||V.skipLocationChange?null!==(ne=this.browserPageId)&&void 0!==ne?ne:0:(null!==(Ue=this.browserPageId)&&void 0!==Ue?Ue:0)+1):or=0,this.setTransition({id:tu,targetPageId:or,source:S,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:v,extras:V,resolve:fi,reject:zi,promise:Wi,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Wi.catch(ao=>Promise.reject(ao))}setBrowserUrl(v,S){const O=this.urlSerializer.serialize(v),V=Object.assign(Object.assign({},S.extras.state),this.generateNgRouterState(S.id,S.targetPageId));this.location.isCurrentPathEqualTo(O)||S.extras.replaceUrl?this.location.replaceState(O,"",V):this.location.go(O,"",V)}restoreHistory(v,S=!1){var O,V;if("computed"===this.canceledNavigationResolution){const Y=this.currentPageId-v.targetPageId;"popstate"!==v.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(O=this.currentNavigation)||void 0===O?void 0:O.finalUrl)||0===Y?this.currentUrlTree===(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)&&0===Y&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Y)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(v,S){const O=new As(v.id,this.serializeUrl(v.extractedUrl),S);this.triggerEvent(O),v.resolve(!1)}generateNgRouterState(v,S){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:S}:{navigationId:v}}}return I.\u0275fac=function(v){return new(v||I)(f.LFG(f.DyG),f.LFG(cn),f.LFG(Zo),f.LFG(T.Ye),f.LFG(f.zs3),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(void 0))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})();function To(I){return"imperative"!==I}let Yo=(()=>{class I{constructor(v,S,O){this.router=v,this.route=S,this.locationStrategy=O,this.commands=[],this.onChanges=new G.xQ,this.subscription=v.events.subscribe(V=>{V instanceof er&&this.updateTargetUrlAndHref()})}set routerLink(v){this.commands=null!=v?Array.isArray(v)?v:[v]:[]}ngOnChanges(v){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(v,S,O,V,Y){if(0!==v||S||O||V||Y||"string"==typeof this.target&&"_self"!=this.target)return!0;const ne={skipLocationChange:Yn(this.skipLocationChange),replaceUrl:Yn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ne),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Yn(this.preserveFragment)})}}return I.\u0275fac=function(v){return new(v||I)(f.Y36(Pr),f.Y36(Rs),f.Y36(T.S$))},I.\u0275dir=f.lG2({type:I,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(v,S){1&v&&f.NdJ("click",function(V){return S.onClick(V.button,V.ctrlKey,V.shiftKey,V.altKey,V.metaKey)}),2&v&&(f.Ikx("href",S.href,f.LSH),f.uIk("target",S.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.TTD]}),I})();function Yn(I){return""===I||!!I}let Tu=(()=>{class I{constructor(v,S,O,V,Y){this.parentContexts=v,this.location=S,this.resolver=O,this.changeDetector=Y,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.name=V||Lt,v.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const v=this.parentContexts.getContext(this.name);v&&v.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,v}attach(v,S){this.activated=v,this._activatedRoute=S,this.location.insert(v.hostView)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=v;const Y=(S=S||this.resolver).resolveComponentFactory(v._futureSnapshot.routeConfig.component),ne=this.parentContexts.getOrCreateContext(this.name).children,Ue=new Au(v,ne,this.location.injector);this.activated=this.location.createComponent(Y,this.location.length,Ue),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)(f.Y36(Zo),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},I.\u0275dir=f.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),I})();class Au{constructor(E,v,S){this.route=E,this.childContexts=v,this.parent=S}get(E,v){return E===Rs?this.route:E===Zo?this.childContexts:this.parent.get(E,v)}}class mh{}class Qa{preload(E,v){return(0,Be.of)(null)}}let wa=(()=>{class I{constructor(v,S,O,V,Y){this.router=v,this.injector=V,this.preloadingStrategy=Y,this.loader=new Du(S,O,rt=>v.triggerEvent(new pt(rt)),rt=>v.triggerEvent(new gt(rt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ce.h)(v=>v instanceof er),(0,xr.b)(()=>this.preload())).subscribe(()=>{})}preload(){const v=this.injector.get(f.h0i);return this.processRoutes(v,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,S){const O=[];for(const V of S)if(V.loadChildren&&!V.canLoad&&V._loadedConfig){const Y=V._loadedConfig;O.push(this.processRoutes(Y.module,Y.routes))}else V.loadChildren&&!V.canLoad?O.push(this.preloadConfig(v,V)):V.children&&O.push(this.processRoutes(v,V.children));return(0,Ae.D)(O).pipe((0,vi.J)(),(0,it.U)(V=>{}))}preloadConfig(v,S){return this.preloadingStrategy.preload(S,()=>(S._loadedConfig?(0,Be.of)(S._loadedConfig):this.loader.load(v.injector,S)).pipe((0,pn.zg)(V=>(S._loadedConfig=V,this.processRoutes(V.module,V.routes)))))}}return I.\u0275fac=function(v){return new(v||I)(f.LFG(Pr),f.LFG(f.v3s),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(mh))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})(),Ao=(()=>{class I{constructor(v,S,O={}){this.router=v,this.viewportScroller=S,this.options=O,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},O.scrollPositionRestoration=O.scrollPositionRestoration||"disabled",O.anchorScrolling=O.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Sn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof er&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.router.parseUrl(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(v=>{v instanceof Ur&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,S){this.router.triggerEvent(new Ur(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(v){return new(v||I)(f.LFG(Pr),f.LFG(T.EM),f.LFG(void 0))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})();const Vs=new f.OlP("ROUTER_CONFIGURATION"),Qo=new f.OlP("ROUTER_FORROOT_GUARD"),Ca=[T.Ye,{provide:cn,useClass:nt},{provide:Pr,useFactory:function(I,E,v,S,O,V,Y,ne={},Ue,rt){const sn=new Pr(null,I,E,v,S,O,V,En(Y));return Ue&&(sn.urlHandlingStrategy=Ue),rt&&(sn.routeReuseStrategy=rt),function(I,E){I.errorHandler&&(E.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(E.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(E.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(E.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(E.urlUpdateStrategy=I.urlUpdateStrategy)}(ne,sn),ne.enableTracing&&sn.events.subscribe(St=>{var Nn,Xt;null===(Nn=console.group)||void 0===Nn||Nn.call(console,`Router Event: ${St.constructor.name}`),console.log(St.toString()),console.log(St),null===(Xt=console.groupEnd)||void 0===Xt||Xt.call(console)}),sn},deps:[cn,Zo,T.Ye,f.zs3,f.v3s,f.Sil,ls,Vs,[class{},new f.FiY],[class{},new f.FiY]]},Zo,{provide:Rs,useFactory:function(I){return I.routerState.root},deps:[Pr]},{provide:f.v3s,useClass:f.EAV},wa,Qa,class{preload(E,v){return v().pipe(ye(()=>(0,Be.of)(null)))}},{provide:Vs,useValue:{enableTracing:!1}}];function Ja(){return new f.PXZ("Router",Pr)}let Jo=(()=>{class I{constructor(v,S){}static forRoot(v,S){return{ngModule:I,providers:[Ca,Ci(v),{provide:Qo,useFactory:Xa,deps:[[Pr,new f.FiY,new f.tp0]]},{provide:Vs,useValue:S||{}},{provide:T.S$,useFactory:Xo,deps:[T.lw,[new f.tBr(T.mr),new f.FiY],Vs]},{provide:Ao,useFactory:xu,deps:[Pr,T.EM,Vs]},{provide:mh,useExisting:S&&S.preloadingStrategy?S.preloadingStrategy:Qa},{provide:f.PXZ,multi:!0,useFactory:Ja},[oo,{provide:f.ip1,multi:!0,useFactory:Ia,deps:[oo]},{provide:Nu,useFactory:So,deps:[oo]},{provide:f.tb,multi:!0,useExisting:Nu}]]}}static forChild(v){return{ngModule:I,providers:[Ci(v)]}}}return I.\u0275fac=function(v){return new(v||I)(f.LFG(Qo,8),f.LFG(Pr,8))},I.\u0275mod=f.oAB({type:I}),I.\u0275inj=f.cJS({}),I})();function xu(I,E,v){return v.scrollOffset&&E.setOffset(v.scrollOffset),new Ao(I,E,v)}function Xo(I,E,v={}){return v.useHash?new T.Do(I,E):new T.b0(I,E)}function Xa(I){return"guarded"}function Ci(I){return[{provide:f.deG,multi:!0,useValue:I},{provide:ls,multi:!0,useValue:I}]}let oo=(()=>{class I{constructor(v){this.injector=v,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new G.xQ}appInitializer(){return this.injector.get(T.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let S=null;const O=new Promise(ne=>S=ne),V=this.injector.get(Pr),Y=this.injector.get(Vs);return"disabled"===Y.initialNavigation?(V.setUpLocationChangeListener(),S(!0)):"enabled"===Y.initialNavigation||"enabledBlocking"===Y.initialNavigation?(V.hooks.afterPreactivation=()=>this.initNavigation?(0,Be.of)(null):(this.initNavigation=!0,S(!0),this.resultOfPreactivationDone),V.initialNavigation()):S(!0),O})}bootstrapListener(v){const S=this.injector.get(Vs),O=this.injector.get(wa),V=this.injector.get(Ao),Y=this.injector.get(Pr),ne=this.injector.get(f.z2F);v===ne.components[0]&&(("enabledNonBlocking"===S.initialNavigation||void 0===S.initialNavigation)&&Y.initialNavigation(),O.setUpPreloading(),V.init(),Y.resetRootComponentType(ne.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(v){return new(v||I)(f.LFG(f.zs3))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})();function Ia(I){return I.appInitializer.bind(I)}function So(I){return I.bootstrapListener.bind(I)}const Nu=new f.OlP("Router Initializer")},4486:(ut,Ne,U)=>{"use strict";U.d(Ne,{Z:()=>Ve});var T=U(3854),f=U(6034),G=U(5452),pe=U(5601);class re{constructor(ue,Oe){this._delegate=ue,this.firebase=Oe,(0,G._addComponent)(ue,new f.wA("app-compat",()=>this,"PUBLIC")),this.container=ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ue){this._delegate.automaticDataCollectionEnabled=ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ue=>{this._delegate.checkDestroyed(),ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(ue,Oe=G._DEFAULT_ENTRY_NAME){var Ae;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(ue);return!Te.isInitialized()&&"EXPLICIT"===(null===(Ae=Te.getComponent())||void 0===Ae?void 0:Ae.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:Oe})}_removeServiceInstance(ue,Oe=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ue).clearInstance(Oe)}_addComponent(ue){(0,G._addComponent)(this._delegate,ue)}_addOrOverwriteComponent(ue){(0,G._addOrOverwriteComponent)(this._delegate,ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function J(){const Me=function(Me){const ue={},Oe={__esModule:!0,initializeApp:function(Pt,$e={}){const ye=G.initializeApp(Pt,$e);if((0,T.r3)(ue,ye.name))return ue[ye.name];const Ie=new Me(ye,Oe);return ue[ye.name]=Ie,Ie},app:Te,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function(Pt){const $e=Pt.name,ye=$e.replace("-compat","");if(G._registerComponent(Pt)&&"PUBLIC"===Pt.type){const Ie=(xe=Te())=>{if("function"!=typeof xe[ye])throw ve.create("invalid-app-argument",{appName:$e});return xe[ye]()};void 0!==Pt.serviceProps&&(0,T.ZB)(Ie,Pt.serviceProps),Oe[ye]=Ie,Me.prototype[ye]=function(...xe){return this._getService.bind(this,$e).apply(this,Pt.multipleInstances?xe:[])}}return"PUBLIC"===Pt.type?Oe[ye]:null},removeApp:function(Pt){delete ue[Pt]},useAsService:function(Pt,$e){return"serverAuth"===$e?null:$e},modularAPIs:G}};function Te(Pt){if(!(0,T.r3)(ue,Pt=Pt||G._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Pt});return ue[Pt]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function(){return Object.keys(ue).map(Pt=>ue[Pt])}}),Te.App=Me,Oe}(re);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:J,extendNamespace:function(Oe){(0,T.ZB)(Me,Oe)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),Me}(),Z=new pe.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=W;(0,G.registerVersion)("@firebase/app-compat","0.1.5",undefined)},5452:(ut,Ne,U)=>{"use strict";U.r(Ne),U.d(Ne,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>xr,_DEFAULT_ENTRY_NAME:()=>Zn,_addComponent:()=>_n,_addOrOverwriteComponent:()=>lr,_apps:()=>dn,_clearComponents:()=>Ht,_components:()=>Jn,_getProvider:()=>Vn,_registerComponent:()=>Yr,_removeServiceInstance:()=>it,deleteApp:()=>Fi,getApp:()=>pn,getApps:()=>On,initializeApp:()=>wr,onLog:()=>Sn,registerVersion:()=>Xn,setLogLevel:()=>er});var T=U(8239),f=U(6034),G=U(5601),pe=U(3854);class re{constructor(ze){this.container=ze}getPlatformInfoString(){return this.container.getProviders().map(gn=>{if(function(Tt){const ze=Tt.getComponent();return"VERSION"===(null==ze?void 0:ze.type)}(gn)){const xn=gn.getImmediate();return`${xn.library}/${xn.version}`}return null}).filter(gn=>gn).join(" ")}}const ve="@firebase/app",J=new G.Yd("@firebase/app"),Zn="[DEFAULT]",Ft={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Jn=new Map;function _n(Tt,ze){try{Tt.container.addComponent(ze)}catch(gn){J.debug(`Component ${ze.name} failed to register with FirebaseApp ${Tt.name}`,gn)}}function lr(Tt,ze){Tt.container.addOrOverwriteComponent(ze)}function Yr(Tt){const ze=Tt.name;if(Jn.has(ze))return J.debug(`There were multiple attempts to register component ${ze}.`),!1;Jn.set(ze,Tt);for(const gn of dn.values())_n(gn,Tt);return!0}function Vn(Tt,ze){return Tt.container.getProvider(ze)}function it(Tt,ze,gn=Zn){Vn(Tt,ze).clearInstance(gn)}function Ht(){Jn.clear()}const dr=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class vn{constructor(ze,gn,xn){this._isDeleted=!1,this._options=Object.assign({},ze),this._config=Object.assign({},gn),this._name=gn.name,this._automaticDataCollectionEnabled=gn.automaticDataCollectionEnabled,this._container=xn,this.container.addComponent(new f.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ze){this._isDeleted=ze}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const xr="9.1.3";function wr(Tt,ze={}){"object"!=typeof ze&&(ze={name:ze});const gn=Object.assign({name:Zn,automaticDataCollectionEnabled:!1},ze),xn=gn.name;if("string"!=typeof xn||!xn)throw dr.create("bad-app-name",{appName:String(xn)});const jn=dn.get(xn);if(jn){if((0,pe.vZ)(Tt,jn.options)&&(0,pe.vZ)(gn,jn.config))return jn;throw dr.create("duplicate-app",{appName:xn})}const an=new f.H0(xn);for(const gt of Jn.values())an.addComponent(gt);const pt=new vn(Tt,gn,an);return dn.set(xn,pt),pt}function pn(Tt=Zn){const ze=dn.get(Tt);if(!ze)throw dr.create("no-app",{appName:Tt});return ze}function On(){return Array.from(dn.values())}function Fi(Tt){return vi.apply(this,arguments)}function vi(){return(vi=(0,T.Z)(function*(Tt){const ze=Tt.name;dn.has(ze)&&(dn.delete(ze),yield Promise.all(Tt.container.getProviders().map(gn=>gn.delete())),Tt.isDeleted=!0)})).apply(this,arguments)}function Xn(Tt,ze,gn){var xn;let jn=null!==(xn=Ft[Tt])&&void 0!==xn?xn:Tt;gn&&(jn+=`-${gn}`);const an=jn.match(/\s|\//),pt=ze.match(/\s|\//);if(an||pt){const gt=[`Unable to register library "${jn}" with version "${ze}":`];return an&&gt.push(`library name "${jn}" contains illegal characters (whitespace or "/")`),an&&pt&&gt.push("and"),pt&&gt.push(`version name "${ze}" contains illegal characters (whitespace or "/")`),void J.warn(gt.join(" "))}Yr(new f.wA(`${jn}-version`,()=>({library:jn,version:ze}),"VERSION"))}function Sn(Tt,ze){if(null!==Tt&&"function"!=typeof Tt)throw dr.create("invalid-log-argument");(0,G.Am)(Tt,ze)}function er(Tt){(0,G.Ub)(Tt)}Yr(new f.wA("platform-logger",ze=>new re(ze),"PRIVATE")),Xn(ve,"0.7.4",""),Xn(ve,"0.7.4","esm2017"),Xn("fire-js","")},6034:(ut,Ne,U)=>{"use strict";U.d(Ne,{wA:()=>G,H0:()=>ae});var T=U(4762),f=U(3854),G=function(){function J(W,Z,de){this.name=W,this.instanceFactory=Z,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return J.prototype.setInstantiationMode=function(W){return this.instantiationMode=W,this},J.prototype.setMultipleInstances=function(W){return this.multipleInstances=W,this},J.prototype.setServiceProps=function(W){return this.serviceProps=W,this},J.prototype.setInstanceCreatedCallback=function(W){return this.onInstanceCreated=W,this},J}(),pe="[DEFAULT]",re=function(){function J(W,Z){this.name=W,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return J.prototype.get=function(W){var Z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(Z)){var de=new f.BH;if(this.instancesDeferred.set(Z,de),this.isInitialized(Z)||this.shouldAutoInitialize())try{var le=this.getOrInitializeService({instanceIdentifier:Z});le&&de.resolve(le)}catch(Ee){}}return this.instancesDeferred.get(Z).promise},J.prototype.getImmediate=function(W){var Z,de=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),le=null!==(Z=null==W?void 0:W.optional)&&void 0!==Z&&Z;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(le)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(Ee){if(le)return null;throw Ee}},J.prototype.getComponent=function(){return this.component},J.prototype.setComponent=function(W){var Z,de;if(W.name!==this.name)throw Error("Mismatching Component "+W.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=W,this.shouldAutoInitialize()){if(function(J){return"EAGER"===J.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:pe})}catch(Te){}try{for(var le=(0,T.XA)(this.instancesDeferred.entries()),Ee=le.next();!Ee.done;Ee=le.next()){var Ve=(0,T.CR)(Ee.value,2),ue=Ve[1],Oe=this.normalizeInstanceIdentifier(Ve[0]);try{var Ae=this.getOrInitializeService({instanceIdentifier:Oe});ue.resolve(Ae)}catch(Te){}}}catch(Te){Z={error:Te}}finally{try{Ee&&!Ee.done&&(de=le.return)&&de.call(le)}finally{if(Z)throw Z.error}}}},J.prototype.clearInstance=function(W){void 0===W&&(W=pe),this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)},J.prototype.delete=function(){return(0,T.mG)(this,void 0,void 0,function(){var W;return(0,T.Jh)(this,function(Z){switch(Z.label){case 0:return W=Array.from(this.instances.values()),[4,Promise.all((0,T.ev)((0,T.ev)([],(0,T.CR)(W.filter(function(de){return"INTERNAL"in de}).map(function(de){return de.INTERNAL.delete()}))),(0,T.CR)(W.filter(function(de){return"_delete"in de}).map(function(de){return de._delete()}))))];case 1:return Z.sent(),[2]}})})},J.prototype.isComponentSet=function(){return null!=this.component},J.prototype.isInitialized=function(W){return void 0===W&&(W=pe),this.instances.has(W)},J.prototype.getOptions=function(W){return void 0===W&&(W=pe),this.instancesOptions.get(W)||{}},J.prototype.initialize=function(W){var Z,de;void 0===W&&(W={});var le=W.options,Ee=void 0===le?{}:le,Ve=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(Ve))throw Error(this.name+"("+Ve+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Me=this.getOrInitializeService({instanceIdentifier:Ve,options:Ee});try{for(var ue=(0,T.XA)(this.instancesDeferred.entries()),Oe=ue.next();!Oe.done;Oe=ue.next()){var Ae=(0,T.CR)(Oe.value,2),je=Ae[1];Ve===this.normalizeInstanceIdentifier(Ae[0])&&je.resolve(Me)}}catch(Xe){Z={error:Xe}}finally{try{Oe&&!Oe.done&&(de=ue.return)&&de.call(ue)}finally{if(Z)throw Z.error}}return Me},J.prototype.onInit=function(W,Z){var de,le=this.normalizeInstanceIdentifier(Z),Ee=null!==(de=this.onInitCallbacks.get(le))&&void 0!==de?de:new Set;Ee.add(W),this.onInitCallbacks.set(le,Ee);var Ve=this.instances.get(le);return Ve&&W(Ve,le),function(){Ee.delete(W)}},J.prototype.invokeOnInitCallbacks=function(W,Z){var de,le,Ee=this.onInitCallbacks.get(Z);if(Ee)try{for(var Ve=(0,T.XA)(Ee),Me=Ve.next();!Me.done;Me=Ve.next()){var ue=Me.value;try{ue(W,Z)}catch(Oe){}}}catch(Oe){de={error:Oe}}finally{try{Me&&!Me.done&&(le=Ve.return)&&le.call(Ve)}finally{if(de)throw de.error}}},J.prototype.getOrInitializeService=function(W){var Z=W.instanceIdentifier,de=W.options,le=void 0===de?{}:de,Ee=this.instances.get(Z);if(!Ee&&this.component&&(Ee=this.component.instanceFactory(this.container,{instanceIdentifier:oe(Z),options:le}),this.instances.set(Z,Ee),this.instancesOptions.set(Z,le),this.invokeOnInitCallbacks(Ee,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,Ee)}catch(Ve){}return Ee||null},J.prototype.normalizeInstanceIdentifier=function(W){return void 0===W&&(W=pe),this.component?this.component.multipleInstances?W:pe:W},J.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},J}();function oe(J){return J===pe?void 0:J}var ae=function(){function J(W){this.name=W,this.providers=new Map}return J.prototype.addComponent=function(W){var Z=this.getProvider(W.name);if(Z.isComponentSet())throw new Error("Component "+W.name+" has already been registered with "+this.name);Z.setComponent(W)},J.prototype.addOrOverwriteComponent=function(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)},J.prototype.getProvider=function(W){if(this.providers.has(W))return this.providers.get(W);var Z=new re(W,this);return this.providers.set(W,Z),Z},J.prototype.getProviders=function(){return Array.from(this.providers.values())},J}()},5601:(ut,Ne,U)=>{"use strict";U.d(Ne,{in:()=>f,Yd:()=>ve,Ub:()=>ae,Am:()=>J});const T=[];var f=(()=>{return(W=f||(f={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",f;var W})();const G={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},pe=f.INFO,re={[f.DEBUG]:"log",[f.VERBOSE]:"log",[f.INFO]:"info",[f.WARN]:"warn",[f.ERROR]:"error"},oe=(W,Z,...de)=>{if(Z<W.logLevel)return;const le=(new Date).toISOString(),Ee=re[Z];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ee](`[${le}]  ${W.name}:`,...de)};class ve{constructor(Z){this.name=Z,this._logLevel=pe,this._logHandler=oe,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in f))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?G[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,f.DEBUG,...Z),this._logHandler(this,f.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,f.VERBOSE,...Z),this._logHandler(this,f.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,f.INFO,...Z),this._logHandler(this,f.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,f.WARN,...Z),this._logHandler(this,f.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,f.ERROR,...Z),this._logHandler(this,f.ERROR,...Z)}}function ae(W){T.forEach(Z=>{Z.setLogLevel(W)})}function J(W,Z){for(const de of T){let le=null;Z&&Z.level&&(le=G[Z.level]),de.userLogHandler=null===W?null:(Ee,Ve,...Me)=>{const ue=Me.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch(Ae){return null}}).filter(Oe=>Oe).join(" ");Ve>=(null!=le?le:Ee.logLevel)&&W({level:f[Ve].toLowerCase(),message:ue,args:Me,type:Ee.name})}}}},3854:(ut,Ne,U)=>{"use strict";U.d(Ne,{BH:()=>le,LL:()=>Re,ZR:()=>Ye,zI:()=>Ie,US:()=>oe,tV:()=>J,$s:()=>Li,r3:()=>Vn,Sg:()=>Ee,ne:()=>Fi,vZ:()=>dr,ZB:()=>Z,pd:()=>pn,m9:()=>Lt,z$:()=>Ve,jU:()=>Oe,ru:()=>Ae,d:()=>je,xb:()=>Ht,w1:()=>Be,hl:()=>$e,uI:()=>Me,UG:()=>ue,b$:()=>Te,G6:()=>Pt,Mn:()=>Xe,xO:()=>xr,zd:()=>wr,eu:()=>ye});const pe=function(ie){const se=[];let ee=0;for(let He=0;He<ie.length;He++){let be=ie.charCodeAt(He);be<128?se[ee++]=be:be<2048?(se[ee++]=be>>6|192,se[ee++]=63&be|128):55296==(64512&be)&&He+1<ie.length&&56320==(64512&ie.charCodeAt(He+1))?(be=65536+((1023&be)<<10)+(1023&ie.charCodeAt(++He)),se[ee++]=be>>18|240,se[ee++]=be>>12&63|128,se[ee++]=be>>6&63|128,se[ee++]=63&be|128):(se[ee++]=be>>12|224,se[ee++]=be>>6&63|128,se[ee++]=63&be|128)}return se},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,se){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,He=[];for(let be=0;be<ie.length;be+=3){const lt=ie[be],ot=be+1<ie.length,qt=ot?ie[be+1]:0,In=be+2<ie.length,En=In?ie[be+2]:0;let $t=(15&qt)<<2|En>>6,Rn=63&En;In||(Rn=64,ot||($t=64)),He.push(ee[lt>>2],ee[(3&lt)<<4|qt>>4],ee[$t],ee[Rn])}return He.join("")},encodeString(ie,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(ie):this.encodeByteArray(pe(ie),se)},decodeString(ie,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(ie):function(ie){const se=[];let ee=0,He=0;for(;ee<ie.length;){const be=ie[ee++];if(be<128)se[He++]=String.fromCharCode(be);else if(be>191&&be<224){const lt=ie[ee++];se[He++]=String.fromCharCode((31&be)<<6|63&lt)}else if(be>239&&be<365){const In=((7&be)<<18|(63&ie[ee++])<<12|(63&ie[ee++])<<6|63&ie[ee++])-65536;se[He++]=String.fromCharCode(55296+(In>>10)),se[He++]=String.fromCharCode(56320+(1023&In))}else{const lt=ie[ee++],ot=ie[ee++];se[He++]=String.fromCharCode((15&be)<<12|(63&lt)<<6|63&ot)}}return se.join("")}(this.decodeStringToByteArray(ie,se))},decodeStringToByteArray(ie,se){this.init_();const ee=se?this.charToByteMapWebSafe_:this.charToByteMap_,He=[];for(let be=0;be<ie.length;){const lt=ee[ie.charAt(be++)],qt=be<ie.length?ee[ie.charAt(be)]:0;++be;const En=be<ie.length?ee[ie.charAt(be)]:64;++be;const tn=be<ie.length?ee[ie.charAt(be)]:64;if(++be,null==lt||null==qt||null==En||null==tn)throw Error();He.push(lt<<2|qt>>4),64!==En&&(He.push(qt<<4&240|En>>2),64!==tn&&He.push(En<<6&192|tn))}return He},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}},ae=function(ie){return function(ie){const se=pe(ie);return oe.encodeByteArray(se,!0)}(ie).replace(/\./g,"")},J=function(ie){try{return oe.decodeString(ie,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function Z(ie,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return se}for(const ee in se)!se.hasOwnProperty(ee)||!de(ee)||(ie[ee]=Z(ie[ee],se[ee]));return ie}function de(ie){return"__proto__"!==ie}class le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,ee)=>{this.resolve=se,this.reject=ee})}wrapCallback(se){return(ee,He)=>{ee?this.reject(ee):this.resolve(He),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(ee):se(ee,He))}}}function Ee(ie,se){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const He=se||"demo-project",be=ie.iat||0,lt=ie.sub||ie.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${He}`,aud:He,iat:be,exp:be+3600,auth_time:be,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(ot)),""].join(".")}function Ve(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ue(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ie){return!1}}function Oe(){return"object"==typeof self&&self.self===self}function Ae(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return Ve().indexOf("Electron/")>=0}function Be(){const ie=Ve();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function Xe(){return Ve().indexOf("MSAppHost/")>=0}function Pt(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function ye(){return new Promise((ie,se)=>{try{let ee=!0;const He="validate-browser-context-for-indexeddb-analytics-module",be=self.indexedDB.open(He);be.onsuccess=()=>{be.result.close(),ee||self.indexedDB.deleteDatabase(He),ie(!0)},be.onupgradeneeded=()=>{ee=!1},be.onerror=()=>{var lt;se((null===(lt=be.error)||void 0===lt?void 0:lt.message)||"")}}catch(ee){se(ee)}})}function Ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ye extends Error{constructor(se,ee,He){super(ee),this.code=se,this.customData=He,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor(se,ee,He){this.service=se,this.serviceName=ee,this.errors=He}create(se,...ee){const He=ee[0]||{},be=`${this.service}/${se}`,lt=this.errors[se],ot=lt?function(ie,se){return ie.replace(un,(ee,He)=>{const be=se[He];return null!=be?String(be):`<${He}?>`})}(lt,He):"Error";return new Ye(be,`${this.serviceName}: ${ot} (${be}).`,He)}}const un=/\{\$([^}]+)}/g;function Vn(ie,se){return Object.prototype.hasOwnProperty.call(ie,se)}function Ht(ie){for(const se in ie)if(Object.prototype.hasOwnProperty.call(ie,se))return!1;return!0}function dr(ie,se){if(ie===se)return!0;const ee=Object.keys(ie),He=Object.keys(se);for(const be of ee){if(!He.includes(be))return!1;const lt=ie[be],ot=se[be];if(vn(lt)&&vn(ot)){if(!dr(lt,ot))return!1}else if(lt!==ot)return!1}for(const be of He)if(!ee.includes(be))return!1;return!0}function vn(ie){return null!==ie&&"object"==typeof ie}function xr(ie){const se=[];for(const[ee,He]of Object.entries(ie))Array.isArray(He)?He.forEach(be=>{se.push(encodeURIComponent(ee)+"="+encodeURIComponent(be))}):se.push(encodeURIComponent(ee)+"="+encodeURIComponent(He));return se.length?"&"+se.join("&"):""}function wr(ie){const se={};return ie.replace(/^\?/,"").split("&").forEach(He=>{if(He){const[be,lt]=He.split("=");se[decodeURIComponent(be)]=decodeURIComponent(lt)}}),se}function pn(ie){const se=ie.indexOf("?");if(!se)return"";const ee=ie.indexOf("#",se);return ie.substring(se,ee>0?ee:void 0)}function Fi(ie,se){const ee=new vi(ie,se);return ee.subscribe.bind(ee)}class vi{constructor(se,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{se(this)}).catch(He=>{this.error(He)})}next(se){this.forEachObserver(ee=>{ee.next(se)})}error(se){this.forEachObserver(ee=>{ee.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,ee,He){let be;if(void 0===se&&void 0===ee&&void 0===He)throw new Error("Missing Observer.");be=function(ie,se){if("object"!=typeof ie||null===ie)return!1;for(const ee of["next","error","complete"])if(ee in ie&&"function"==typeof ie[ee])return!0;return!1}(se)?se:{next:se,error:ee,complete:He},void 0===be.next&&(be.next=er),void 0===be.error&&(be.error=er),void 0===be.complete&&(be.complete=er);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?be.error(this.finalError):be.complete()}catch(ot){}}),this.observers.push(be),lt}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,se)}sendOne(se,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{ee(this.observers[se])}catch(He){"undefined"!=typeof console&&console.error&&console.error(He)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function er(){}function Li(ie,se=1e3,ee=2){const He=se*Math.pow(ee,ie),be=Math.round(.5*He*(Math.random()-.5)*2);return Math.min(144e5,He+be)}function Lt(ie){return ie&&ie._delegate?ie._delegate:ie}},2329:(ut,Ne,U)=>{"use strict";U.d(Ne,{Mq:()=>T.getApp,C6:()=>T.getApps});var T=U(5452);(0,T.registerVersion)("firebase","9.1.3","app")},7841:(ut,Ne,U)=>{"use strict";U.d(Ne,{Z:()=>T.Z});var T=U(4486);T.Z.registerVersion("firebase","9.1.3","app-compat")},4671:(ut,Ne,U)=>{"use strict";U.r(Ne);var T=U(8239),f=U(4486),G=U(3854),pe=U(5452),re=U(4762),oe=U(5601),ve=U(6034);const Ve=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Me=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ue=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new oe.Yd("@firebase/auth");function Te(_,...h){Ae.logLevel<=oe.in.ERROR&&Ae.error(`Auth (${pe.SDK_VERSION}): ${_}`,...h)}function je(_,...h){throw Pt(_,...h)}function Be(_,...h){return Pt(_,...h)}function Xe(_,h,p){const b=Object.assign(Object.assign({},Me()),{[h]:p});return new G.LL("auth","Firebase",b).create(h,{appName:_.name})}function Ut(_,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&je(_,"argument-error"),Xe(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pt(_,...h){if("string"!=typeof _){const p=h[0],b=[...h.slice(1)];return b[0]&&(b[0].appName=_.name),_._errorFactory.create(p,...b)}return ue.create(_,...h)}function $e(_,h,...p){if(!_)throw Pt(h,...p)}function ye(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Te(h),new Error(h)}function Ie(_,h){_||ye(h)}const xe=new Map;function Ce(_){Ie(_ instanceof Function,"Expected a class definition");let h=xe.get(_);return h?(Ie(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,xe.set(_,h),h)}function _t(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function un(){return"http:"===Zn()||"https:"===Zn()}function Zn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Jn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Ie(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _n(_,h){Ie(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class lr{static initialize(h,p,b){this.fetchImpl=h,p&&(this.headersImpl=p),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vn=new Jn(3e4,6e4);function it(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function Ht(_,h,p,b){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,T.Z)(function*(_,h,p,b,k={}){return dr(_,k,()=>{let H={},he={};b&&("GET"===h?he=b:H={body:JSON.stringify(b)});const Le=(0,G.xO)(Object.assign({key:_.config.apiKey},he)).slice(1),at=new(lr.headers());return at.set("Content-Type","application/json"),at.set("X-Client-Version",_._getSdkClientVersion()),_.languageCode&&at.set("X-Firebase-Locale",_.languageCode),lr.fetch()(pn(_,_.config.apiHost,p,Le),Object.assign({method:h,headers:at,referrerPolicy:"no-referrer"},H))})})).apply(this,arguments)}function dr(_,h,p){return vn.apply(this,arguments)}function vn(){return(vn=(0,T.Z)(function*(_,h,p){_._canInitEmulator=!1;const b=Object.assign(Object.assign({},Yr),h);try{const k=new On(_),H=yield Promise.race([p(),k.promise]);k.clearNetworkTimeout();const he=yield H.json();if("needConfirmation"in he)throw Fi(_,"account-exists-with-different-credential",he);if(H.ok&&!("errorMessage"in he))return he;{const Le=H.ok?he.errorMessage:he.error.message,[at,vt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw Fi(_,"credential-already-in-use",he);if("EMAIL_EXISTS"===at)throw Fi(_,"email-already-in-use",he);const Bt=b[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Xe(_,Bt,vt);je(_,Bt)}}catch(k){if(k instanceof G.ZR)throw k;je(_,"network-request-failed")}})).apply(this,arguments)}function xr(_,h,p,b){return wr.apply(this,arguments)}function wr(){return(wr=(0,T.Z)(function*(_,h,p,b,k={}){const H=yield Ht(_,h,p,b,k);return"mfaPendingCredential"in H&&je(_,"multi-factor-auth-required",{serverResponse:H}),H})).apply(this,arguments)}function pn(_,h,p,b){const k=`${h}${p}?${b}`;return _.config.emulator?_n(_.config,k):`${_.config.apiScheme}://${k}`}class On{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,b)=>{this.timer=setTimeout(()=>b(Be(this.auth,"timeout")),Vn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fi(_,h,p){const b={appName:_.name};p.email&&(b.email=p.email),p.phoneNumber&&(b.phoneNumber=p.phoneNumber);const k=Be(_,h,b);return k.customData._tokenResponse=p,k}function Xn(){return(Xn=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Sn(_,h){return er.apply(this,arguments)}function er(){return(er=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function As(_,h){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ze(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function jn(){return(jn=(0,T.Z)(function*(_,h=!1){const p=(0,G.m9)(_),b=yield p.getIdToken(h),k=pt(b);$e(k&&k.exp&&k.auth_time&&k.iat,p.auth,"internal-error");const H="object"==typeof k.firebase?k.firebase:void 0,he=null==H?void 0:H.sign_in_provider;return{claims:k,token:b,authTime:ze(an(k.auth_time)),issuedAtTime:ze(an(k.iat)),expirationTime:ze(an(k.exp)),signInProvider:he||null,signInSecondFactor:(null==H?void 0:H.sign_in_second_factor)||null}})).apply(this,arguments)}function an(_){return 1e3*Number(_)}function pt(_){const[h,p,b]=_.split(".");if(void 0===h||void 0===p||void 0===b)return Te("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,G.tV)(p);return k?JSON.parse(k):(Te("Failed to decode base64 JWT payload"),null)}catch(k){return Te("Caught error parsing JWT payload as JSON",k),null}}function Un(_,h){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,T.Z)(function*(_,h,p=!1){if(p)return h;try{return yield h}catch(b){throw b instanceof G.ZR&&Li(b)&&_.auth.currentUser===_&&(yield _.auth.signOut()),b}})).apply(this,arguments)}function Li({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class $n{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const k=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const b=this.getInterval(h);this.timerId=setTimeout((0,T.Z)(function*(){yield p.iteration()}),b)}iteration(){var h=this;return(0,T.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class Ur{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ze(this.lastLoginAt),this.creationTime=ze(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lt(_){return ie.apply(this,arguments)}function ie(){return(ie=(0,T.Z)(function*(_){var h;const p=_.auth,b=yield _.getIdToken(),k=yield Un(_,As(p,{idToken:b}));$e(null==k?void 0:k.users.length,p,"internal-error");const H=k.users[0];_._notifyReloadListener(H);const he=(null===(h=H.providerUserInfo)||void 0===h?void 0:h.length)?be(H.providerUserInfo):[],Le=He(_.providerData,he),Bt=!!_.isAnonymous&&!(_.email&&H.passwordHash||(null==Le?void 0:Le.length)),Ot={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Le,metadata:new Ur(H.createdAt,H.lastLoginAt),isAnonymous:Bt};Object.assign(_,Ot)})).apply(this,arguments)}function ee(){return(ee=(0,T.Z)(function*(_){const h=(0,G.m9)(_);yield Lt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function He(_,h){return[..._.filter(b=>!h.some(k=>k.providerId===b.providerId)),...h]}function be(_){return _.map(h=>{var{providerId:p}=h,b=(0,re._T)(h,["providerId"]);return{providerId:p,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ot(){return(ot=(0,T.Z)(function*(_,h){const p=yield dr(_,{},()=>{const b=(0,G.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:k,apiKey:H}=_.config,he=pn(_,k,"/v1/token",`key=${H}`);return lr.fetch()(he,{method:"POST",headers:{"X-Client-Version":_._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:b})});return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){$e(h.idToken,"internal-error"),$e(void 0!==h.idToken,"internal-error"),$e(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=pt(_);return $e(h,"internal-error"),$e(void 0!==h.exp,"internal-error"),$e(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var b=this;return(0,T.Z)(function*(){return $e(!b.accessToken||b.refreshToken,h,"user-token-expired"),p||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(h,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var b=this;return(0,T.Z)(function*(){const{accessToken:k,refreshToken:H,expiresIn:he}=yield function(_,h){return ot.apply(this,arguments)}(h,p);b.updateTokensAndExpiration(k,H,Number(he))})()}updateTokensAndExpiration(h,p,b){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(h,p){const{refreshToken:b,accessToken:k,expirationTime:H}=p,he=new qt;return b&&($e("string"==typeof b,"internal-error",{appName:h}),he.refreshToken=b),k&&($e("string"==typeof k,"internal-error",{appName:h}),he.accessToken=k),H&&($e("number"==typeof H,"internal-error",{appName:h}),he.expirationTime=H),he}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function In(_,h){$e("string"==typeof _||void 0===_,"internal-error",{appName:h})}class En{constructor(h){var{uid:p,auth:b,stsTokenManager:k}=h,H=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=b,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.metadata=new Ur(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,T.Z)(function*(){const b=yield Un(p,p.stsTokenManager.getToken(p.auth,h));return $e(b,p.auth,"internal-error"),p.accessToken!==b&&(p.accessToken=b,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),b})()}getIdTokenResult(h){return function(_){return jn.apply(this,arguments)}(this,h)}reload(){return function(_){return ee.apply(this,arguments)}(this)}_assign(h){this!==h&&($e(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new En(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var b=this;return(0,T.Z)(function*(){let k=!1;h.idToken&&h.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(h),k=!0),p&&(yield Lt(b)),yield b.auth._persistUserIfCurrent(b),k&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var h=this;return(0,T.Z)(function*(){const p=yield h.getIdToken();return yield Un(h,function(_,h){return Xn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var b,k,H,he,Le,at,vt,Bt;const Ot=null!==(b=p.displayName)&&void 0!==b?b:void 0,Lr=null!==(k=p.email)&&void 0!==k?k:void 0,Si=null!==(H=p.phoneNumber)&&void 0!==H?H:void 0,js=null!==(he=p.photoURL)&&void 0!==he?he:void 0,vc=null!==(Le=p.tenantId)&&void 0!==Le?Le:void 0,Dl=null!==(at=p._redirectEventId)&&void 0!==at?at:void 0,Ec=null!==(vt=p.createdAt)&&void 0!==vt?vt:void 0,bc=null!==(Bt=p.lastLoginAt)&&void 0!==Bt?Bt:void 0,{uid:Kg,emailVerified:gd,isAnonymous:gp,providerData:md,stsTokenManager:mp}=p;$e(Kg&&mp,h,"internal-error");const Bu=qt.fromJSON(this.name,mp);$e("string"==typeof Kg,h,"internal-error"),In(Ot,h.name),In(Lr,h.name),$e("boolean"==typeof gd,h,"internal-error"),$e("boolean"==typeof gp,h,"internal-error"),In(Si,h.name),In(js,h.name),In(vc,h.name),In(Dl,h.name),In(Ec,h.name),In(bc,h.name);const $s=new En({uid:Kg,auth:h,email:Lr,emailVerified:gd,displayName:Ot,isAnonymous:gp,photoURL:js,phoneNumber:Si,tenantId:vc,stsTokenManager:Bu,createdAt:Ec,lastLoginAt:bc});return md&&Array.isArray(md)&&($s.providerData=md.map(wc=>Object.assign({},wc))),Dl&&($s._redirectEventId=Dl),$s}static _fromIdTokenResponse(h,p,b=!1){return(0,T.Z)(function*(){const k=new qt;k.updateFromServerResponse(p);const H=new En({uid:p.localId,auth:h,stsTokenManager:k,isAnonymous:b});return yield Lt(H),H})()}}const tn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(p,b){var k=this;return(0,T.Z)(function*(){k.storage[p]=b})()}_get(p){var b=this;return(0,T.Z)(function*(){const k=b.storage[p];return void 0===k?null:k})()}_remove(p){var b=this;return(0,T.Z)(function*(){delete b.storage[p]})()}_addListener(p,b){}_removeListener(p,b){}}return _.type="NONE",_})();function $t(_,h,p){return`firebase:${_}:${h}:${p}`}class Rn{constructor(h,p,b){this.persistence=h,this.auth=p,this.userKey=b;const{config:k,name:H}=this.auth;this.fullUserKey=$t(this.userKey,k.apiKey,H),this.fullPersistenceKey=$t("persistence",k.apiKey,H),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,T.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?En._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,T.Z)(function*(){if(p.persistence===h)return;const b=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,b?p.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,b="authUser"){return(0,T.Z)(function*(){if(!p.length)return new Rn(Ce(tn),h,b);const k=(yield Promise.all(p.map(function(){var vt=(0,T.Z)(function*(Bt){if(yield Bt._isAvailable())return Bt});return function(Bt){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let H=k[0]||Ce(tn);const he=$t(b,h.config.apiKey,h.name);let Le=null;for(const vt of p)try{const Bt=yield vt._get(he);if(Bt){const Ot=En._fromJSON(h,Bt);vt!==H&&(Le=Ot),H=vt;break}}catch(Bt){}const at=k.filter(vt=>vt._shouldAllowMigration);return H._shouldAllowMigration&&at.length?(H=at[0],Le&&(yield H._set(he,Le.toJSON())),yield Promise.all(p.map(function(){var vt=(0,T.Z)(function*(Bt){if(Bt!==H)try{yield Bt._remove(he)}catch(Ot){}});return function(Bt){return vt.apply(this,arguments)}}())),new Rn(H,h,b)):new Rn(H,h,b)})()}}function fa(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ua(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(mo(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Vo(h))return"Blackberry";if(Cr(h))return"Webos";if(Va(h))return"Safari";if((h.includes("chrome/")||yo(h))&&!h.includes("edge/"))return"Chrome";if(xs(h))return"Android";{const b=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function mo(_=(0,G.z$)()){return/firefox\//i.test(_)}function Va(_=(0,G.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function yo(_=(0,G.z$)()){return/crios\//i.test(_)}function Ua(_=(0,G.z$)()){return/iemobile/i.test(_)}function xs(_=(0,G.z$)()){return/android/i.test(_)}function Vo(_=(0,G.z$)()){return/blackberry/i.test(_)}function Cr(_=(0,G.z$)()){return/webos/i.test(_)}function si(_=(0,G.z$)()){return/iphone|ipad|ipod/i.test(_)}function ai(_=(0,G.z$)()){return si(_)||xs(_)||Cr(_)||Vo(_)||/windows phone/i.test(_)||Ua(_)}function Hn(_,h=[]){let p;switch(_){case"Browser":p=fa((0,G.z$)());break;case"Worker":p=`${fa((0,G.z$)())}-${_}`;break;default:p=_}const b=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${pe.SDK_VERSION}/${b}`}class vu{constructor(h,p){this.app=h,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nt(this),this.idTokenSubscription=new nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(h,p){var b=this;return p&&(this._popupRedirectResolver=Ce(p)),this._initializationPromise=this.queue((0,T.Z)(function*(){var k;b._deleted||(b.persistenceManager=yield Rn.create(b,h),!b._deleted&&((null===(k=b._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)&&(yield b._popupRedirectResolver._initialize(b)),yield b.initializeCurrentUser(p),!b._deleted&&(b._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,T.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,T.Z)(function*(){var b;let k=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const H=null===(b=p.redirectUser)||void 0===b?void 0:b._redirectEventId,he=null==k?void 0:k._redirectEventId,Le=yield p.tryRedirectSignIn(h);(!H||H===he)&&(null==Le?void 0:Le.user)&&(k=Le.user)}return k?k._redirectEventId?($e(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===k._redirectEventId?p.directlySetCurrentUser(k):p.reloadAndSetCurrentUserOrClear(k)):p.reloadAndSetCurrentUserOrClear(k):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,T.Z)(function*(){let b=null;try{b=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(k){yield p._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,T.Z)(function*(){try{yield Lt(h)}catch(b){if("auth/network-request-failed"!==b.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,T.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,T.Z)(function*(){const b=h?(0,G.m9)(h):null;return b&&$e(b.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(b&&b._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,T.Z)(function*(){if(!p._deleted)return h&&$e(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,T.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,T.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,T.Z)(function*(){yield p.assertedPersistence.setPersistence(Ce(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new G.LL("auth","Firebase",h())}onAuthStateChanged(h,p,b){return this.registerStateListener(this.authStateSubscription,h,p,b)}onIdTokenChanged(h,p,b){return this.registerStateListener(this.idTokenSubscription,h,p,b)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var b=this;return(0,T.Z)(function*(){const k=yield b.getOrInitRedirectPersistenceManager(p);return null===h?k.removeCurrentUser():k.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,T.Z)(function*(){if(!p.redirectPersistenceManager){const b=h&&Ce(h)||p._popupRedirectResolver;$e(b,p,"argument-error"),p.redirectPersistenceManager=yield Rn.create(p,[Ce(b._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,T.Z)(function*(){var b,k;return p._isInitialized&&(yield p.queue((0,T.Z)(function*(){}))),(null===(b=p._currentUser)||void 0===b?void 0:b._redirectEventId)===h?p._currentUser:(null===(k=p.redirectUser)||void 0===k?void 0:k._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,T.Z)(function*(){if(h===p.currentUser)return p.queue((0,T.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,b,k){if(this._deleted)return()=>{};const H="function"==typeof p?p:p.next.bind(p),he=this._isInitialized?Promise.resolve():this._initializationPromise;return $e(he,this,"internal-error"),he.then(()=>H(this.currentUser)),"function"==typeof p?h.addObserver(p,b,k):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,T.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Hn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function cn(_){return(0,G.m9)(_)}class nt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,G.ne)(p=>this.observer=p)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bn(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Vi(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class hr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Wt(_,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:resetPassword",it(_,h))})).apply(this,arguments)}function Rr(_,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Js(_,h){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:update",it(_,h))})).apply(this,arguments)}function Br(){return(Br=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithPassword",it(_,h))})).apply(this,arguments)}function fr(_,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:sendOobCode",it(_,h))})).apply(this,arguments)}function hn(_,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,T.Z)(function*(_,h){return fr(_,h)})).apply(this,arguments)}function Nt(_,h){return us.apply(this,arguments)}function us(){return(us=(0,T.Z)(function*(_,h){return fr(_,h)})).apply(this,arguments)}function Se(_,h){return pr.apply(this,arguments)}function pr(){return(pr=(0,T.Z)(function*(_,h){return fr(_,h)})).apply(this,arguments)}function Et(_,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,T.Z)(function*(_,h){return fr(_,h)})).apply(this,arguments)}function Bi(){return(Bi=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithEmailLink",it(_,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithEmailLink",it(_,h))})).apply(this,arguments)}class $r extends hr{constructor(h,p,b,k=null){super("password",b),this._email=h,this._password=p,this._tenantId=k}static _fromEmailAndPassword(h,p){return new $r(h,p,"password")}static _fromEmailAndCode(h,p,b=null){return new $r(h,p,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,T.Z)(function*(){switch(p.signInMethod){case"password":return function(_,h){return Br.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,h){return Bi.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:je(h,"internal-error")}})()}_linkToIdToken(h,p){var b=this;return(0,T.Z)(function*(){switch(b.signInMethod){case"password":return Rr(h,{idToken:p,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function(_,h){return Rs.apply(this,arguments)}(h,{idToken:p,email:b._email,oobCode:b._password});default:je(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function At(_,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithIdp",it(_,h))})).apply(this,arguments)}class Nr extends hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Nr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):je("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:k}=p,H=(0,re._T)(p,["providerId","signInMethod"]);if(!b||!k)return null;const he=new Nr(b,k);return he.idToken=H.idToken||void 0,he.accessToken=H.accessToken||void 0,he.secret=H.secret,he.nonce=H.nonce,he.pendingToken=H.pendingToken||null,he}_getIdTokenResponse(h){return At(h,this.buildRequest())}_linkToIdToken(h,p){const b=this.buildRequest();return b.idToken=p,At(h,b)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,At(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,G.xO)(p)}return h}}function ui(_,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:sendVerificationCode",it(_,h))})).apply(this,arguments)}function vo(){return(vo=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithPhoneNumber",it(_,h))})).apply(this,arguments)}function ga(){return(ga=(0,T.Z)(function*(_,h){const p=yield xr(_,"POST","/v1/accounts:signInWithPhoneNumber",it(_,h));if(p.temporaryProof)throw Fi(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Xc={USER_NOT_FOUND:"user-not-found"};function bu(){return(bu=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithPhoneNumber",it(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Xc)})).apply(this,arguments)}class Hi extends hr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Hi({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Hi({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function(_,h){return vo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function(_,h){return ga.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return bu.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:b,verificationCode:k}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:b,code:k}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:b,phoneNumber:k,temporaryProof:H}=h;return b||p||k||H?new Hi({verificationId:p,verificationCode:b,phoneNumber:k,temporaryProof:H}):null}}class ci{constructor(h){var p,b,k,H,he,Le;const at=(0,G.zd)((0,G.pd)(h)),vt=null!==(p=at.apiKey)&&void 0!==p?p:null,Bt=null!==(b=at.oobCode)&&void 0!==b?b:null,Ot=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=at.mode)&&void 0!==k?k:null);$e(vt&&Bt&&Ot,"argument-error"),this.apiKey=vt,this.operation=Ot,this.code=Bt,this.continueUrl=null!==(H=at.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(he=at.languageCode)&&void 0!==he?he:null,this.tenantId=null!==(Le=at.tenantId)&&void 0!==Le?Le:null}static parseLink(h){const p=function(_){const h=(0,G.zd)((0,G.pd)(_)).link,p=h?(0,G.zd)((0,G.pd)(h)).deep_link_id:null,b=(0,G.zd)((0,G.pd)(_)).deep_link_id;return(b?(0,G.zd)((0,G.pd)(b)).link:null)||b||p||h||_}(h);try{return new ci(p)}catch(b){return null}}}let Bo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,b){return $r._fromEmailAndPassword(p,b)}static credentialWithLink(p,b){const k=ci.parseLink(b);return $e(k,"argument-error"),$r._fromEmailAndCode(p,k.code,k.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Jr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ns extends Jr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ms extends Ns{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return $e("providerId"in p&&"signInMethod"in p,"argument-error"),Nr._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return $e(h.idToken||h.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ms.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ms.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:b,oauthTokenSecret:k,pendingToken:H,nonce:he,providerId:Le}=h;if(!b&&!k&&!p&&!H||!Le)return null;try{return new Ms(Le)._credential({idToken:p,accessToken:b,nonce:he,pendingToken:H})}catch(at){return null}}}let ja=(()=>{class _ extends Ns{constructor(){super("facebook.com")}static credential(p){return Nr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(b){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),jo=(()=>{class _ extends Ns{constructor(){super("google.com"),this.addScope("profile")}static credential(p,b){return Nr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:b})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:b,oauthAccessToken:k}=p;if(!b&&!k)return null;try{return _.credential(b,k)}catch(H){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Kn=(()=>{class _ extends Ns{constructor(){super("github.com")}static credential(p){return Nr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(b){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Os extends hr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return At(h,this.buildRequest())}_linkToIdToken(h,p){const b=this.buildRequest();return b.idToken=p,At(h,b)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,At(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:b,signInMethod:k,pendingToken:H}=p;return b&&k&&H&&b===k?new Os(b,H):null}static _create(h,p){return new Os(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let li=(()=>{class _ extends Ns{constructor(){super("twitter.com")}static credential(p,b){return Nr._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:b})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:b,oauthTokenSecret:k}=p;if(!b||!k)return null;try{return _.credential(b,k)}catch(H){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function $a(_,h){return cs.apply(this,arguments)}function cs(){return(cs=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signUp",it(_,h))})).apply(this,arguments)}class Xr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,b,k=!1){return(0,T.Z)(function*(){const H=yield En._fromIdTokenResponse(h,b,k),he=ya(b);return new Xr({user:H,providerId:he,_tokenResponse:b,operationType:p})})()}static _forOperation(h,p,b){return(0,T.Z)(function*(){yield h._updateTokensIfNecessary(b,!0);const k=ya(b);return new Xr({user:h,providerId:k,_tokenResponse:b,operationType:p})})()}}function ya(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function tr(){return(tr=(0,T.Z)(function*(_){var h;const p=cn(_);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Xr({user:p.currentUser,providerId:null,operationType:"signIn"});const b=yield $a(p,{returnSecureToken:!0}),k=yield Xr._fromIdTokenResponse(p,"signIn",b,!0);return yield p._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ho extends G.ZR{constructor(h,p,b,k){var H;super(p.code,p.message),this.operationType=b,this.user=k,this.name="FirebaseError",Object.setPrototypeOf(this,Ho.prototype),this.appName=h.name,this.code=p.code,this.tenantId=null!==(H=h.tenantId)&&void 0!==H?H:void 0,this.serverResponse=p.customData.serverResponse}static _fromErrorAndOperation(h,p,b,k){return new Ho(h,p,b,k)}}function Ei(_,h,p,b){return("reauthenticate"===h?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?Ho._fromErrorAndOperation(_,H,h,b):H})}function Go(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function Eo(){return(Eo=(0,T.Z)(function*(_,h){const p=(0,G.m9)(_);yield N(!0,p,h);const{providerUserInfo:b}=yield Sn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),k=Go(b||[]);return p.providerData=p.providerData.filter(H=>k.has(H.providerId)),k.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function R(_,h){return L.apply(this,arguments)}function L(){return(L=(0,T.Z)(function*(_,h,p=!1){const b=yield Un(_,h._linkToIdToken(_.auth,yield _.getIdToken()),p);return Xr._forOperation(_,"link",b)})).apply(this,arguments)}function N(_,h,p){return j.apply(this,arguments)}function j(){return(j=(0,T.Z)(function*(_,h,p){yield Lt(h);const k=!1===_?"provider-already-linked":"no-such-provider";$e(Go(h.providerData).has(p)===_,h.auth,k)})).apply(this,arguments)}function te(_,h){return we.apply(this,arguments)}function we(){return(we=(0,T.Z)(function*(_,h,p=!1){const{auth:b}=_,k="reauthenticate";try{const H=yield Un(_,Ei(b,k,h,_),p);$e(H.idToken,b,"internal-error");const he=pt(H.idToken);$e(he,b,"internal-error");const{sub:Le}=he;return $e(_.uid===Le,b,"user-mismatch"),Xr._forOperation(_,k,H)}catch(H){throw"auth/user-not-found"===(null==H?void 0:H.code)&&je(b,"user-mismatch"),H}})).apply(this,arguments)}function We(_,h){return st.apply(this,arguments)}function st(){return(st=(0,T.Z)(function*(_,h,p=!1){const b="signIn",k=yield Ei(_,b,h),H=yield Xr._fromIdTokenResponse(_,b,k);return p||(yield _._updateCurrentUser(H.user)),H})).apply(this,arguments)}function Vt(_,h){return ht.apply(this,arguments)}function ht(){return(ht=(0,T.Z)(function*(_,h){return We(cn(_),h)})).apply(this,arguments)}function wn(_,h){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,T.Z)(function*(_,h){const p=(0,G.m9)(_);return yield N(!1,p,h.providerId),R(p,h)})).apply(this,arguments)}function Pn(_,h){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,T.Z)(function*(_,h){return te((0,G.m9)(_),h)})).apply(this,arguments)}function Dr(_,h){return bi.apply(this,arguments)}function bi(){return(bi=(0,T.Z)(function*(_,h){return xr(_,"POST","/v1/accounts:signInWithCustomToken",it(_,h))})).apply(this,arguments)}function on(){return(on=(0,T.Z)(function*(_,h){const p=cn(_),b=yield Dr(p,{token:h,returnSecureToken:!0}),k=yield Xr._fromIdTokenResponse(p,"signIn",b);return yield p._updateCurrentUser(k.user),k})).apply(this,arguments)}class Or{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ps._fromServerResponse(h,p):je(h,"internal-error")}}class Ps extends Or{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ps(p)}}function Gi(_,h,p){var b;$e((null===(b=p.url)||void 0===b?void 0:b.length)>0,_,"invalid-continue-uri"),$e(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&($e(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&($e(p.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function to(){return(to=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_),k={requestType:"PASSWORD_RESET",email:h};p&&Gi(b,k,p),yield Nt(b,k)})).apply(this,arguments)}function Dt(){return(Dt=(0,T.Z)(function*(_,h,p){yield Wt((0,G.m9)(_),{oobCode:h,newPassword:p})})).apply(this,arguments)}function no(){return(no=(0,T.Z)(function*(_,h){yield Js((0,G.m9)(_),{oobCode:h})})).apply(this,arguments)}function ec(_,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,T.Z)(function*(_,h){const p=(0,G.m9)(_),b=yield Wt(p,{oobCode:h}),k=b.requestType;switch($e(k,p,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$e(b.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$e(b.mfaInfo,p,"internal-error");default:$e(b.email,p,"internal-error")}let H=null;return b.mfaInfo&&(H=Or._fromServerResponse(cn(p),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:H},operation:k}})).apply(this,arguments)}function qa(){return(qa=(0,T.Z)(function*(_,h){const{data:p}=yield ec((0,G.m9)(_),h);return p.email})).apply(this,arguments)}function qe(){return(qe=(0,T.Z)(function*(_,h,p){const b=cn(_),k=yield $a(b,{returnSecureToken:!0,email:h,password:p}),H=yield Xr._fromIdTokenResponse(b,"signIn",k);return yield b._updateCurrentUser(H.user),H})).apply(this,arguments)}function zn(){return(zn=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_),k={requestType:"EMAIL_SIGNIN",email:h};$e(p.handleCodeInApp,b,"argument-error"),p&&Gi(b,k,p),yield Se(b,k)})).apply(this,arguments)}function ei(){return(ei=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_),k=Bo.credentialWithLink(h,p||_t());return $e(k._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Vt(b,k)})).apply(this,arguments)}function za(_,h){return ro.apply(this,arguments)}function ro(){return(ro=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:createAuthUri",it(_,h))})).apply(this,arguments)}function bo(){return(bo=(0,T.Z)(function*(_,h){const b={identifier:h,continueUri:un()?_t():"http://localhost"},{signinMethods:k}=yield za((0,G.m9)(_),b);return k||[]})).apply(this,arguments)}function wo(){return(wo=(0,T.Z)(function*(_,h){const p=(0,G.m9)(_),k={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Gi(p.auth,k,h);const{email:H}=yield hn(p.auth,k);H!==_.email&&(yield _.reload())})).apply(this,arguments)}function di(){return(di=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};p&&Gi(b.auth,H,p);const{email:he}=yield Et(b.auth,H);he!==_.email&&(yield _.reload())})).apply(this,arguments)}function tc(_,h){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,T.Z)(function*(_,h){return Ht(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qo(){return(qo=(0,T.Z)(function*(_,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const b=(0,G.m9)(_),H={idToken:yield b.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},he=yield Un(b,tc(b.auth,H));b.displayName=he.displayName||null,b.photoURL=he.photoUrl||null;const Le=b.providerData.find(({providerId:at})=>"password"===at);Le&&(Le.displayName=b.displayName,Le.photoURL=b.photoURL),yield b._updateTokensIfNecessary(he)})).apply(this,arguments)}function Iu(_,h,p){return va.apply(this,arguments)}function va(){return(va=(0,T.Z)(function*(_,h,p){const{auth:b}=_,H={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(H.email=h),p&&(H.password=p);const he=yield Un(_,Rr(b,H));yield _._updateTokensIfNecessary(he,!0)})).apply(this,arguments)}class Co{constructor(h,p,b={}){this.isNewUser=h,this.providerId=p,this.profile=b}}class rc extends Co{constructor(h,p,b,k){super(h,p,b),this.username=k}}class Gr extends Co{constructor(h,p){super(h,"facebook.com",p)}}class Ea extends rc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class zo extends Co{constructor(h,p){super(h,"google.com",p)}}class Io extends rc{constructor(h,p,b){super(h,"twitter.com",p,b)}}function Ya(_){const{user:h,_tokenResponse:p}=_;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,p;if(!_)return null;const{providerId:b}=_,k=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},H=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!b&&(null==_?void 0:_.idToken)){const he=null===(p=null===(h=pt(_.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(he)return new Co(H,"anonymous"!==he&&"custom"!==he?he:null)}if(!b)return null;switch(b){case"facebook.com":return new Gr(H,k);case"github.com":return new Ea(H,k);case"google.com":return new zo(H,k);case"twitter.com":return new Io(H,k,_.screenName||null);case"custom":case"anonymous":return new Co(H,null);default:return new Co(H,b,k)}}(p)}class ls{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ls("enroll",h)}static _fromMfaPendingCredential(h){return new ls("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,b;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ls._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(b=h.multiFactorSession)||void 0===b?void 0:b.idToken)return ls._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Du{constructor(h,p,b){this.session=h,this.hints=p,this.signInResolver=b}static _fromError(h,p){const b=cn(h),k=(p.serverResponse.mfaInfo||[]).map(he=>Or._fromServerResponse(b,he));$e(p.serverResponse.mfaPendingCredential,b,"internal-error");const H=ls._fromMfaPendingCredential(p.serverResponse.mfaPendingCredential);return new Du(H,k,function(){var he=(0,T.Z)(function*(Le){const at=yield Le._process(b,H);delete p.serverResponse.mfaInfo,delete p.serverResponse.mfaPendingCredential;const vt=Object.assign(Object.assign({},p.serverResponse),{idToken:at.idToken,refreshToken:at.refreshToken});switch(p.operationType){case"signIn":const Bt=yield Xr._fromIdTokenResponse(b,p.operationType,vt);return yield b._updateCurrentUser(Bt.user),Bt;case"reauthenticate":return $e(p.user,b,"internal-error"),Xr._forOperation(p.user,p.operationType,vt);default:je(b,"internal-error")}});return function(Le){return he.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,T.Z)(function*(){return p.signInResolver(h)})()}}function Zo(_,h){return Ht(_,"POST","/v2/accounts/mfaEnrollment:start",it(_,h))}class Do{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(b=>Or._fromServerResponse(h.auth,b)))})}static _fromUser(h){return new Do(h)}getSession(){var h=this;return(0,T.Z)(function*(){return ls._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var b=this;return(0,T.Z)(function*(){const k=h,H=yield b.getSession(),he=yield Un(b.user,k._process(b.user.auth,H,p));return yield b.user._updateTokensIfNecessary(he),b.user.reload()})()}unenroll(h){var p=this;return(0,T.Z)(function*(){const b="string"==typeof h?h:h.uid,k=yield p.user.getIdToken(),H=yield Un(p.user,function(_,h){return Ht(_,"POST","/v2/accounts/mfaEnrollment:withdraw",it(_,h))}(p.user.auth,{idToken:k,mfaEnrollmentId:b}));p.enrolledFactors=p.enrolledFactors.filter(({uid:he})=>he!==b),yield p.user._updateTokensIfNecessary(H);try{yield p.user.reload()}catch(he){if("auth/user-token-expired"!==he.code)throw he}})()}}const ba=new WeakMap,io="__sak";class sc{constructor(h,p){this.storage=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(io,"1"),this.storage.removeItem(io),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}}const Yo=(()=>{class _ extends sc{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(p,b)=>this.onStorageEvent(p,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,G.z$)();return Va(_)||si(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ai(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const b of Object.keys(this.listeners)){const k=this.storage.getItem(b),H=this.localCache[b];k!==H&&p(b,H,k)}}onStorageEvent(p,b=!1){if(!p.key)return void this.forAllChangedKeys((Le,at,vt)=>{this.notifyListeners(Le,vt)});const k=p.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(k);if(p.newValue!==Le)null!==p.newValue?this.storage.setItem(k,p.newValue):this.storage.removeItem(k);else if(this.localCache[k]===p.newValue&&!b)return}const H=()=>{const Le=this.storage.getItem(k);!b&&this.localCache[k]===Le||this.notifyListeners(k,Le)},he=this.storage.getItem(k);(0,G.w1)()&&10===document.documentMode&&he!==p.newValue&&p.newValue!==p.oldValue?setTimeout(H,10):H()}notifyListeners(p,b){this.localCache[p]=b;const k=this.listeners[p];if(k)for(const H of Array.from(k))H(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,b,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:b,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(b)}_removeListener(p,b){this.listeners[p]&&(this.listeners[p].delete(b),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,b){var k=()=>super._set,H=this;return(0,T.Z)(function*(){yield k().call(H,p,b),H.localCache[p]=JSON.stringify(b)})()}_get(p){var b=()=>super._get,k=this;return(0,T.Z)(function*(){const H=yield b().call(k,p);return k.localCache[p]=JSON.stringify(H),H})()}_remove(p){var b=()=>super._remove,k=this;return(0,T.Z)(function*(){yield b().call(k,p),delete k.localCache[p]})()}}return _.type="LOCAL",_})(),ds=(()=>{class _ extends sc{constructor(){super(window.sessionStorage,"SESSION")}_addListener(p,b){}_removeListener(p,b){}}return _.type="SESSION",_})();let Tu=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const b=this.receivers.find(H=>H.isListeningto(p));if(b)return b;const k=new _(p);return this.receivers.push(k),k}isListeningto(p){return this.eventTarget===p}handleEvent(p){var b=this;return(0,T.Z)(function*(){const k=p,{eventId:H,eventType:he,data:Le}=k.data,at=b.handlersMap[he];if(!(null==at?void 0:at.size))return;k.ports[0].postMessage({status:"ack",eventId:H,eventType:he});const vt=Array.from(at).map(function(){var Ot=(0,T.Z)(function*(Lr){return Lr(k.origin,Le)});return function(Lr){return Ot.apply(this,arguments)}}()),Bt=yield function(_){return Promise.all(_.map(function(){var h=(0,T.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(b){return{fulfilled:!1,reason:b}}});return function(p){return h.apply(this,arguments)}}()))}(vt);k.ports[0].postMessage({status:"done",eventId:H,eventType:he,response:Bt})})()}_subscribe(p,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(b)}_unsubscribe(p,b){this.handlersMap[p]&&b&&this.handlersMap[p].delete(b),(!b||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Au(_="",h=10){let p="";for(let b=0;b<h;b++)p+=Math.floor(10*Math.random());return _+p}class mh{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,b=50){var k=this;return(0,T.Z)(function*(){const H="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let he,Le;return new Promise((at,vt)=>{const Bt=Au("",20);H.port1.start();const Ot=setTimeout(()=>{vt(new Error("unsupported_event"))},b);Le={messageChannel:H,onMessage(Lr){const Si=Lr;if(Si.data.eventId===Bt)switch(Si.data.status){case"ack":clearTimeout(Ot),he=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(he),at(Si.data.response);break;default:clearTimeout(Ot),clearTimeout(he),vt(new Error("invalid_response"))}}},k.handlers.add(Le),H.port1.addEventListener("message",Le.onMessage),k.target.postMessage({eventType:h,eventId:Bt,data:p},[H.port2])}).finally(()=>{Le&&k.removeMessageHandler(Le)})})()}}function nr(){return window}function wa(){return void 0!==nr().WorkerGlobalScope&&"function"==typeof nr().importScripts}function Su(){return(Su=(0,T.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ac="firebaseLocalStorageDb",Ja="firebaseLocalStorage",Jo="fbase_key";class xu{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Xo(_,h){return _.transaction([Ja],h?"readwrite":"readonly").objectStore(Ja)}function Ci(){const _=indexedDB.open(ac,1);return new Promise((h,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const b=_.result;try{b.createObjectStore(Ja,{keyPath:Jo})}catch(k){p(k)}}),_.addEventListener("success",(0,T.Z)(function*(){const b=_.result;b.objectStoreNames.contains(Ja)?h(b):(b.close(),yield function(){const _=indexedDB.deleteDatabase(ac);return new xu(_).toPromise()}(),h(yield Ci()))}))})}function Ru(_,h,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,T.Z)(function*(_,h,p){const b=Xo(_,!0).put({[Jo]:h,value:p});return new xu(b).toPromise()})).apply(this,arguments)}function oo(){return(oo=(0,T.Z)(function*(_,h){const p=Xo(_,!1).get(h),b=yield new xu(p).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ia(_,h){const p=Xo(_,!0).delete(h);return new xu(p).toPromise()}const eu=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,T.Z)(function*(){return p.db||(p.db=yield Ci()),p.db})()}_withRetries(p){var b=this;return(0,T.Z)(function*(){let k=0;for(;;)try{const H=yield b._openDb();return yield p(H)}catch(H){if(k++>3)throw H;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,T.Z)(function*(){return wa()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,T.Z)(function*(){p.receiver=Tu._getInstance(wa()?self:null),p.receiver._subscribe("keyChanged",function(){var b=(0,T.Z)(function*(k,H){return{keyProcessed:(yield p._poll()).includes(H.key)}});return function(k,H){return b.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var b=(0,T.Z)(function*(k,H){return["keyChanged"]});return function(k,H){return b.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,T.Z)(function*(){var b,k;if(p.activeServiceWorker=yield function(){return Su.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new mh(p.activeServiceWorker);const H=yield p.sender._send("ping",{},800);!H||(null===(b=H[0])||void 0===b?void 0:b.fulfilled)&&(null===(k=H[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var b=this;return(0,T.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:p},b.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ci();return yield Ru(p,io,"1"),yield Ia(p,io),!0}catch(p){}return!1})()}_withPendingWrite(p){var b=this;return(0,T.Z)(function*(){b.pendingWrites++;try{yield p()}finally{b.pendingWrites--}})()}_set(p,b){var k=this;return(0,T.Z)(function*(){return k._withPendingWrite((0,T.Z)(function*(){return yield k._withRetries(H=>Ru(H,p,b)),k.localCache[p]=b,k.notifyServiceWorker(p)}))})()}_get(p){var b=this;return(0,T.Z)(function*(){const k=yield b._withRetries(H=>function(_,h){return oo.apply(this,arguments)}(H,p));return b.localCache[p]=k,k})()}_remove(p){var b=this;return(0,T.Z)(function*(){return b._withPendingWrite((0,T.Z)(function*(){return yield b._withRetries(k=>Ia(k,p)),delete b.localCache[p],b.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,T.Z)(function*(){const b=yield p._withRetries(he=>{const Le=Xo(he,!1).getAll();return new xu(Le).toPromise()});if(!b)return[];if(0!==p.pendingWrites)return[];const k=[],H=new Set;for(const{fbase_key:he,value:Le}of b)H.add(he),JSON.stringify(p.localCache[he])!==JSON.stringify(Le)&&(p.notifyListeners(he,Le),k.push(he));for(const he of Object.keys(p.localCache))p.localCache[he]&&!H.has(he)&&(p.notifyListeners(he,null),k.push(he));return k})()}notifyListeners(p,b){this.localCache[p]=b;const k=this.listeners[p];if(k)for(const H of Array.from(k))H(b)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(b)}_removeListener(p,b){this.listeners[p]&&(this.listeners[p].delete(b),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function I(_,h){return Ht(_,"POST","/v2/accounts/mfaSignIn:start",it(_,h))}function S(){return(S=(0,T.Z)(function*(_){return(yield Ht(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function V(_){return new Promise((h,p)=>{const b=document.createElement("script");b.setAttribute("src",_),b.onload=h,b.onerror=k=>{const H=Be("internal-error");H.customData=k,p(H)},b.type="text/javascript",b.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(b)})}function Y(_){return`__${_}${Math.floor(1e6*Math.random())}`}const rt=1e12;class sn{constructor(h){this.auth=h,this.counter=rt,this._widgets=new Map}render(h,p){const b=this.counter;return this._widgets.set(b,new St(h,this.auth.name,p||{})),this.counter++,b}reset(h){var p;const b=h||rt;null===(p=this._widgets.get(b))||void 0===p||p.delete(),this._widgets.delete(b)}getResponse(h){var p;return(null===(p=this._widgets.get(h||rt))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,T.Z)(function*(){var b;return null===(b=p._widgets.get(h||rt))||void 0===b||b.execute(),""})()}}class St{constructor(h,p,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof h?document.getElementById(h):h;$e(k,"argument-error",{appName:p}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<50;b++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}();const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xt=Y("rcb"),fi=new Jn(3e4,6e4);class Wi{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nr().grecaptcha}load(h,p=""){return $e((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(nr().grecaptcha):new Promise((b,k)=>{const H=nr().setTimeout(()=>{k(Be(h,"network-request-failed"))},fi.get());nr()[Xt]=()=>{nr().clearTimeout(H),delete nr()[Xt];const Le=nr().grecaptcha;if(!Le)return void k(Be(h,"internal-error"));const at=Le.render;Le.render=(vt,Bt)=>{const Ot=at(vt,Bt);return this.counter++,Ot},this.hostLanguage=p,b(Le)},V(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Xt,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(H),k(Be(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!nr().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class or{load(h){return(0,T.Z)(function*(){return new sn(h)})()}clearedOneInstance(){}}const ao="recaptcha",uc={theme:"light",type:"image"};class _h{constructor(h,p=Object.assign({},uc),b){this.parameters=p,this.type=ao,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cn(b),this.isInvisible="invisible"===this.parameters.size,$e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof h?document.getElementById(h):h;$e(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new or:new Wi,this.validateStartingState()}verify(){var h=this;return(0,T.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),b=h.getAssertedRecaptcha();return b.getResponse(p)||new Promise(H=>{const he=Le=>{!Le||(h.tokenChangeListeners.delete(he),H(Le))};h.tokenChangeListeners.add(he),h.isInvisible&&b.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){$e(!this.parameters.sitekey,this.auth,"argument-error"),$e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$e("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(b=>b(p)),"function"==typeof h)h(p);else if("string"==typeof h){const b=nr()[h];"function"==typeof b&&b(p)}}}assertNotDestroyed(){$e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,T.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const b=document.createElement("div");p.appendChild(b),p=b}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,T.Z)(function*(){$e(un()&&!wa(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function(_){return S.apply(this,arguments)}(h.auth);$e(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return $e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Us{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Hi._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function al(){return(al=(0,T.Z)(function*(_,h,p){const b=cn(_),k=yield cc(b,h,(0,G.m9)(p));return new Us(k,H=>Vt(b,H))})).apply(this,arguments)}function vh(){return(vh=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_);yield N(!1,b,"phone");const k=yield cc(b.auth,h,(0,G.m9)(p));return new Us(k,H=>wn(b,H))})).apply(this,arguments)}function rd(){return(rd=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_),k=yield cc(b.auth,h,(0,G.m9)(p));return new Us(k,H=>Pn(b,H))})).apply(this,arguments)}function cc(_,h,p){return id.apply(this,arguments)}function id(){return(id=(0,T.Z)(function*(_,h,p){var b;const k=yield p.verify();try{let H;if($e("string"==typeof k,_,"argument-error"),$e(p.type===ao,_,"argument-error"),H="string"==typeof h?{phoneNumber:h}:h,"session"in H){const he=H.session;if("phoneNumber"in H)return $e("enroll"===he.type,_,"internal-error"),(yield Zo(_,{idToken:he.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{$e("signin"===he.type,_,"internal-error");const Le=(null===(b=H.multiFactorHint)||void 0===b?void 0:b.uid)||H.multiFactorUid;return $e(Le,_,"missing-multi-factor-info"),(yield I(_,{mfaPendingCredential:he.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:he}=yield ui(_,{phoneNumber:H.phoneNumber,recaptchaToken:k});return he}}finally{p._reset()}})).apply(this,arguments)}function ul(){return(ul=(0,T.Z)(function*(_,h){yield R((0,G.m9)(_),h)})).apply(this,arguments)}let nu=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=cn(p)}verifyPhoneNumber(p,b){return cc(this.auth,p,(0,G.m9)(b))}static credential(p,b){return Hi._fromVerification(p,b)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:b,temporaryProof:k}=p;return b&&k?Hi._fromTokenResponse(b,k):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Da(_,h){return h?Ce(h):($e(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ru extends hr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return At(h,this._buildIdpRequest())}_linkToIdToken(h,p){return At(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return At(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Qf(_){return We(_.auth,new ru(_),_.bypassAuthState)}function zr(_){const{auth:h,user:p}=_;return $e(p,h,"internal-error"),te(p,new ru(_),_.bypassAuthState)}function cl(_){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,T.Z)(function*(_){const{auth:h,user:p}=_;return $e(p,h,"internal-error"),R(p,new ru(_),_.bypassAuthState)})).apply(this,arguments)}class Ou{constructor(h,p,b,k,H=!1){this.auth=h,this.resolver=b,this.user=k,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,T.Z)(function*(b,k){h.pendingPromise={resolve:b,reject:k};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(H){h.reject(H)}});return function(b,k){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,T.Z)(function*(){const{urlResponse:b,sessionId:k,postBody:H,tenantId:he,error:Le,type:at}=h;if(Le)return void p.reject(Le);const vt={auth:p.auth,requestUri:b,sessionId:k,tenantId:he||void 0,postBody:H||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(at)(vt))}catch(Bt){p.reject(Bt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Qf;case"linkViaPopup":case"linkViaRedirect":return cl;case"reauthViaPopup":case"reauthViaRedirect":return zr;default:je(this.auth,"internal-error")}}resolve(h){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pu=new Jn(2e3,1e4);function Ii(){return(Ii=(0,T.Z)(function*(_,h,p){const b=cn(_);Ut(_,h,Jr);const k=Da(b,p);return new Eh(b,"signInViaPopup",h,k).executeNotNull()})).apply(this,arguments)}function ta(){return(ta=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_);Ut(b.auth,h,Jr);const k=Da(b.auth,p);return new Eh(b.auth,"reauthViaPopup",h,k,b).executeNotNull()})).apply(this,arguments)}function ll(){return(ll=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_);Ut(b.auth,h,Jr);const k=Da(b.auth,p);return new Eh(b.auth,"linkViaPopup",h,k,b).executeNotNull()})).apply(this,arguments)}let Eh=(()=>{class _ extends Ou{constructor(p,b,k,H,he){super(p,b,H,he),this.provider=k,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,T.Z)(function*(){const b=yield p.execute();return $e(b,p.auth,"internal-error"),b})()}onExecution(){var p=this;return(0,T.Z)(function*(){Ie(1===p.filter.length,"Popup operations only handle one event");const b=Au();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],b),p.authWindow.associatedEvent=b,p.resolver._originValidation(p.auth).catch(k=>{p.reject(k)}),p.resolver._isIframeWebStorageSupported(p.auth,k=>{k||p.reject(Be(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var b,k;this.pollId=(null===(k=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Pu.get())};p()}}return _.currentPopupAction=null,_})();const dl=new Map;class Jf extends Ou{constructor(h,p,b=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,b),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,T.Z)(function*(){let b=dl.get(p.auth._key());if(!b){try{const H=(yield function(_,h){return D.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;b=()=>Promise.resolve(H)}catch(k){b=()=>Promise.reject(k)}dl.set(p.auth._key(),b)}return b()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,b=this;return(0,T.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(b,h);if("unknown"!==h.type){if(h.eventId){const k=yield b.auth._redirectUserForId(h.eventId);if(k)return b.user=k,p().call(b,h);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function D(){return(D=(0,T.Z)(function*(_,h){const p=ke(h),b="true"===(yield fe(_)._get(p));return yield fe(_)._remove(p),b})).apply(this,arguments)}function M(_,h){return B.apply(this,arguments)}function B(){return(B=(0,T.Z)(function*(_,h){return fe(_)._set(ke(h),"true")})).apply(this,arguments)}function fe(_){return Ce(_._redirectPersistence)}function ke(_){return $t("pendingRedirect",_.config.apiKey,_.name)}function dt(){return(dt=(0,T.Z)(function*(_,h,p){const b=cn(_);Ut(_,h,Jr);const k=Da(b,p);return yield M(k,b),k._openRedirect(b,h,"signInViaRedirect")})).apply(this,arguments)}function ni(){return(ni=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_);Ut(b.auth,h,Jr);const k=Da(b.auth,p);yield M(k,b.auth);const H=yield iu(b);return k._openRedirect(b.auth,h,"reauthViaRedirect",H)})).apply(this,arguments)}function Bs(){return(Bs=(0,T.Z)(function*(_,h,p){const b=(0,G.m9)(_);Ut(b.auth,h,Jr);const k=Da(b.auth,p);yield N(!1,b,h.providerId),yield M(k,b.auth);const H=yield iu(b);return k._openRedirect(b.auth,h,"linkViaRedirect",H)})).apply(this,arguments)}function Qi(){return(Qi=(0,T.Z)(function*(_,h){return yield cn(_)._initializationPromise,xo(_,h,!1)})).apply(this,arguments)}function xo(_,h){return na.apply(this,arguments)}function na(){return(na=(0,T.Z)(function*(_,h,p=!1){const b=cn(_),k=Da(b,h),he=yield new Jf(b,k,p).execute();return he&&!p&&(delete he.user._redirectEventId,yield b._persistUserIfCurrent(he.user),yield b._setRedirectUser(null,h)),he})).apply(this,arguments)}function iu(_){return ad.apply(this,arguments)}function ad(){return(ad=(0,T.Z)(function*(_){const h=Au(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class bh{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(h,b)&&(p=!0,this.sendToConsumer(h,b),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lc(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var b;if(h.error&&!lc(h)){const k=(null===(b=h.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";p.onError(Be(this.auth,k))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const b=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&b}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hl(h))}saveEventToCache(h){this.cachedEventUids.add(hl(h)),this.lastProcessedEventTime=Date.now()}}function hl(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function lc({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Fr(_){return wh.apply(this,arguments)}function wh(){return(wh=(0,T.Z)(function*(_,h={}){return Ht(_,"GET","/v1/projects",h)})).apply(this,arguments)}const D0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,su=/^https?/;function Xf(){return(Xf=(0,T.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Fr(_);for(const p of h)try{if(ep(p))return}catch(b){}je(_,"unauthorized-domain")})).apply(this,arguments)}function ep(_){const h=_t(),{protocol:p,hostname:b}=new URL(h);if(_.startsWith("chrome-extension://")){const he=new URL(_);return""===he.hostname&&""===b?"chrome-extension:"===p&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&he.hostname===b}if(!su.test(p))return!1;if(D0.test(_))return b===_;const k=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(b)}const tp=new Jn(3e4,6e4);function T0(){const _=nr().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let ra=null;function np(_){return ra=ra||function(_){return new Promise((h,p)=>{var b,k,H;function he(){T0(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{T0(),p(Be(_,"network-request-failed"))},timeout:tp.get()})}if(null===(k=null===(b=nr().gapi)||void 0===b?void 0:b.iframes)||void 0===k?void 0:k.Iframe)h(gapi.iframes.getContext());else{if(!(null===(H=nr().gapi)||void 0===H?void 0:H.load)){const Le=Y("iframefcb");return nr()[Le]=()=>{gapi.load?he():p(Be(_,"network-request-failed"))},V(`https://apis.google.com/js/api.js?onload=${Le}`)}he()}}).catch(h=>{throw ra=null,h})}(_),ra}const Ta=new Jn(5e3,15e3),Ch={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ih=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rp(_){const h=_.config;$e(h.authDomain,_,"auth-domain-config-required");const p=h.emulator?_n(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,b={apiKey:h.apiKey,appName:_.name,v:pe.SDK_VERSION},k=Ih.get(_.config.apiHost);k&&(b.eid=k);const H=_._getFrameworks();return H.length&&(b.fw=H.join(",")),`${p}?${(0,G.xO)(b).slice(1)}`}function gl(){return(gl=(0,T.Z)(function*(_){const h=yield np(_),p=nr().gapi;return $e(p,_,"internal-error"),h.open({where:document.body,url:rp(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ch,dontclear:!0},b=>new Promise(function(){var k=(0,T.Z)(function*(H,he){yield b.restyle({setHideOnLeave:!1});const Le=Be(_,"network-request-failed"),at=nr().setTimeout(()=>{he(Le)},Ta.get());function vt(){nr().clearTimeout(at),H(b)}b.ping(vt).then(vt,()=>{he(Le)})});return function(H,he){return k.apply(this,arguments)}}()))})).apply(this,arguments)}const ud={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vg{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function cd(_,h,p,b,k,H){$e(_.config.authDomain,_,"auth-domain-config-required"),$e(_.config.apiKey,_,"invalid-api-key");const he={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:b,v:pe.SDK_VERSION,eventId:k};if(h instanceof Jr){h.setDefaultLanguage(_.languageCode),he.providerId=h.providerId||"",(0,G.xb)(h.getCustomParameters())||(he.customParameters=JSON.stringify(h.getCustomParameters()));for(const[at,vt]of Object.entries(H||{}))he[at]=vt}if(h instanceof Ns){const at=h.getScopes().filter(vt=>""!==vt);at.length>0&&(he.scopes=at.join(","))}_.tenantId&&(he.tid=_.tenantId);const Le=he;for(const at of Object.keys(Le))void 0===Le[at]&&delete Le[at];return`${function({config:_}){return _.emulator?_n(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,G.xO)(Le).slice(1)}`}const hc="webStorageSupport";class ml extends class{constructor(h){this.factorId=h}_process(h,p,b){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,b);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ml(h)}_finalizeEnroll(h,p,b){return function(_,h){return Ht(_,"POST","/v2/accounts/mfaEnrollment:finalize",it(_,h))}(h,{idToken:p,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function(_,h){return Ht(_,"POST","/v2/accounts/mfaSignIn:finalize",it(_,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dh=(()=>{class _{constructor(){}static assertion(p){return ml._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,yl="@firebase/auth";class Bg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,T.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(b=>{var k;h((null===(k=b)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _l(){return window}function fs(){return(fs=(0,T.Z)(function*(_,h,p){var b;const{BuildInfo:k}=_l();Ie(h.sessionId,"AuthEvent did not contain a session ID");const H=yield Aa(h.sessionId),he={};return si()?he.ibi=k.packageName:xs()?he.apn=k.packageName:je(_,"operation-not-supported-in-this-environment"),k.displayName&&(he.appDisplayName=k.displayName),he.sessionId=H,cd(_,p,h.type,void 0,null!==(b=h.eventId)&&void 0!==b?b:void 0,he)})).apply(this,arguments)}function Th(){return(Th=(0,T.Z)(function*(_){const{BuildInfo:h}=_l(),p={};si()?p.iosBundleId=h.packageName:xs()?p.androidPackageName=h.packageName:je(_,"operation-not-supported-in-this-environment"),yield Fr(_,p)})).apply(this,arguments)}function Sh(){return(Sh=(0,T.Z)(function*(_,h,p){const{cordova:b}=_l();let k=()=>{};try{yield new Promise((H,he)=>{let Le=null;function at(){var Ot;H();const Lr=null===(Ot=b.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function vt(){Le||(Le=window.setTimeout(()=>{he(Be(_,"redirect-cancelled-by-user"))},2e3))}function Bt(){"visible"===(null==document?void 0:document.visibilityState)&&vt()}h.addPassiveListener(at),document.addEventListener("resume",vt,!1),xs()&&document.addEventListener("visibilitychange",Bt,!1),k=()=>{h.removePassiveListener(at),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",Bt,!1),Le&&window.clearTimeout(Le)}})}finally{k()}})).apply(this,arguments)}function Aa(_){return xh.apply(this,arguments)}function xh(){return(xh=(0,T.Z)(function*(_){const h=op(_),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function op(_){if(Ie(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),p=new Uint8Array(h);for(let b=0;b<_.length;b++)p[b]=_.charCodeAt(b);return p}_="Browser",(0,pe._registerComponent)(new ve.wA("auth",(h,{options:p})=>{const b=h.getProvider("app").getImmediate(),{apiKey:k,authDomain:H}=b.options;return(he=>{$e(k&&!k.includes(":"),"invalid-api-key",{appName:he.name}),$e(!(null==H?void 0:H.includes(":")),"argument-error",{appName:he.name});const Le={apiKey:k,authDomain:H,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hn(_)},at=new vu(he,Le);return function(_,h){const p=(null==h?void 0:h.persistence)||[],b=(Array.isArray(p)?p:[p]).map(Ce);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(b,null==h?void 0:h.popupRedirectResolver)}(at,p),at})(b)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,b)=>{h.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new ve.wA("auth-internal",h=>{const p=cn(h.getProvider("auth").getImmediate());return new Bg(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(yl,"0.18.3",void 0),(0,pe.registerVersion)(yl,"0.18.3","esm2017");class d_ extends bh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,T.Z)(function*(){yield h.initPromise})()}}function ou(_){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,T.Z)(function*(_){const h=yield mc()._get(Tn(_));return h&&(yield mc()._remove(Tn(_))),h})).apply(this,arguments)}function Ai(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const b=Math.floor(Math.random()*h.length);_.push(h.charAt(b))}return _.join("")}function mc(){return Ce(Yo)}function Tn(_){return $t("authEvent",_.config.apiKey,_.name)}function Nh(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...p]=_.split("?");return(0,G.zd)(p.join("?"))}function ld(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Be("no-auth-event")}}function dd(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function $g(_=(0,G.z$)()){return!("file:"!==dd()&&"ionic:"!==dd()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function El(){try{const _=self.localStorage,h=Au();if(_)return _.setItem(h,"1"),_.removeItem(h),!function(_=(0,G.z$)()){return(0,G.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,G.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,G.hl)()}catch(_){return Ph()&&(0,G.hl)()}return!1}function Ph(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ir(){return("http:"===dd()||"https:"===dd()||(0,G.ru)()||$g())&&!((0,G.b$)()||(0,G.UG)())&&El()&&!Ph()}function hp(){return $g()&&"undefined"!=typeof document}function Lu(){return(Lu=(0,T.Z)(function*(){return!!hp()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const ps={LOCAL:"local",NONE:"none",SESSION:"session"},bl=$e,pp="persistence";function Sa(_){return kh.apply(this,arguments)}function kh(){return(kh=(0,T.Z)(function*(_){yield _._initializationPromise;const h=k0(),p=$t(pp,_.config.apiKey,_.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(p,_._getPersistence())})).apply(this,arguments)}function k0(){return"undefined"!=typeof window?window:null}const Vu=$e;class ar{constructor(){this.browserResolver=Ce(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=xo}_openPopup(h,p,b,k){var H=this;return(0,T.Z)(function*(){var he;Ie(null===(he=H.eventManagers[h._key()])||void 0===he?void 0:he.manager,"_initialize() not called before _openPopup()");const Le=cd(h,p,b,_t(),k);return function(_,h,p,b=500,k=600){const H=Math.max((window.screen.availHeight-k)/2,0).toString(),he=Math.max((window.screen.availWidth-b)/2,0).toString();let Le="";const at=Object.assign(Object.assign({},ud),{width:b.toString(),height:k.toString(),top:H,left:he}),vt=(0,G.z$)().toLowerCase();p&&(Le=yo(vt)?"_blank":p),mo(vt)&&(h=h||"http://localhost",at.scrollbars="yes");const Bt=Object.entries(at).reduce((Lr,[Si,js])=>`${Lr}${Si}=${js},`,"");if(function(_=(0,G.z$)()){var h;return si(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(vt)&&"_self"!==Le)return function(_,h){const p=document.createElement("a");p.href=_,p.target=h;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(b)}(h||"",Le),new Vg(null);const Ot=window.open(h||"",Le,Bt);$e(Ot,_,"popup-blocked");try{Ot.focus()}catch(Lr){}return new Vg(Ot)}(h,Le,Au())})()}_openRedirect(h,p,b,k){var H=this;return(0,T.Z)(function*(){return yield H._originValidation(h),_=cd(h,p,b,_t(),k),nr().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:k,promise:H}=this.eventManagers[p];return k?Promise.resolve(k):(Ie(H,"If manager is not set, promise should be"),H)}const b=this.initAndGetManager(h);return this.eventManagers[p]={promise:b},b}initAndGetManager(h){var p=this;return(0,T.Z)(function*(){const b=yield function(_){return gl.apply(this,arguments)}(h),k=new bh(h);return b.register("authEvent",H=>($e(null==H?void 0:H.authEvent,h,"invalid-auth-event"),{status:k.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:k},p.iframes[h._key()]=b,k})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(hc,{type:hc},k=>{var H;const he=null===(H=null==k?void 0:k[0])||void 0===H?void 0:H[hc];void 0!==he&&p(!!he),je(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Xf.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ai()||Va()||si()}}),this.cordovaResolver=Ce(class{constructor(){this._redirectPersistence=ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xo}_initialize(h){var p=this;return(0,T.Z)(function*(){const b=h._key();let k=p.eventManagers.get(b);return k||(k=new d_(h),p.eventManagers.set(b,k),p.attachCallbackListeners(h,k)),k})()}_openPopup(h){je(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,b,k){var H=this;return(0,T.Z)(function*(){!function(_){var h,p,b,k,H,he,Le,at,vt,Bt;const Ot=_l();$e("function"==typeof(null===(h=null==Ot?void 0:Ot.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$e(void 0!==(null===(p=null==Ot?void 0:Ot.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$e("function"==typeof(null===(H=null===(k=null===(b=null==Ot?void 0:Ot.cordova)||void 0===b?void 0:b.plugins)||void 0===k?void 0:k.browsertab)||void 0===H?void 0:H.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$e("function"==typeof(null===(at=null===(Le=null===(he=null==Ot?void 0:Ot.cordova)||void 0===he?void 0:he.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===at?void 0:at.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$e("function"==typeof(null===(Bt=null===(vt=null==Ot?void 0:Ot.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===Bt?void 0:Bt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const he=yield H._initialize(h);yield he.initialized(),he.resetRedirect(),dl.clear(),yield H._originValidation(h);const Le=function(_,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Ai(),postBody:null,tenantId:_.tenantId,error:Be(_,"no-auth-event")}}(h,b,k);yield function(_,h){return mc()._set(Tn(_),h)}(h,Le);const at=yield function(_,h,p){return fs.apply(this,arguments)}(h,Le,p),vt=yield function(_){const{cordova:h}=_l();return new Promise(p=>{h.plugins.browsertab.isAvailable(b=>{let k=null;b?h.plugins.browsertab.openUrl(_):k=h.InAppBrowser.open(_,function(_=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(k)})})}(at);return function(_,h,p){return Sh.apply(this,arguments)}(h,he,vt)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Th.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:b,handleOpenURL:k,BuildInfo:H}=_l(),he=setTimeout((0,T.Z)(function*(){yield ou(h),p.onEvent(ld())}),500),Le=function(){var Bt=(0,T.Z)(function*(Ot){clearTimeout(he);const Lr=yield ou(h);let Si=null;Lr&&(null==Ot?void 0:Ot.url)&&(Si=function(_,h){var p,b;const k=function(_){const h=Nh(_),p=h.link?decodeURIComponent(h.link):void 0,b=Nh(p).link,k=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Nh(k).link||k||b||p||_}(h);if(k.includes("/__/auth/callback")){const H=Nh(k),he=H.firebaseError?function(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(H.firebaseError)):null,Le=null===(b=null===(p=null==he?void 0:he.code)||void 0===p?void 0:p.split("auth/"))||void 0===b?void 0:b[1],at=Le?Be(Le):null;return at?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:at,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:k,postBody:null}}return null}(Lr,Ot.url)),p.onEvent(Si||ld())});return function(Lr){return Bt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Le);const at=k,vt=`${H.packageName.toLowerCase()}://`;_l().handleOpenURL=function(){var Bt=(0,T.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(vt)&&Le({url:Ot}),"function"==typeof at)try{at(Ot)}catch(Lr){console.error(Lr)}});return function(Ot){return Bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ds,this._completeRedirectFn=xo}_initialize(h){var p=this;return(0,T.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,b,k){var H=this;return(0,T.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openPopup(h,p,b,k)})()}_openRedirect(h,p,b,k){var H=this;return(0,T.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openRedirect(h,p,b,k)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return hp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vu(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,T.Z)(function*(){if(h.underlyingResolver)return;const p=yield function(){return Lu.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function wl(_){return _.unwrap()}function Gg(_){return Cl(_)}function Cl(_){const{_tokenResponse:h}=_ instanceof G.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof G.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return nu.credentialFromResult(_);const p=h.providerId;if(!p||"password"===p)return null;let b;switch(p){case"google.com":b=jo;break;case"facebook.com":b=ja;break;case"github.com":b=Kn;break;case"twitter.com":b=li;break;default:const{oauthIdToken:k,oauthAccessToken:H,oauthTokenSecret:he,pendingToken:Le,nonce:at}=h;return H||he||k||Le?Le?p.startsWith("saml.")?Os._create(p,Le):Nr._fromParams({providerId:p,signInMethod:p,pendingToken:Le,idToken:k,accessToken:H}):new Ms(p).credential({idToken:k,accessToken:H,rawNonce:at}):null}return _ instanceof G.ZR?b.credentialFromError(_):b.credentialFromResult(_)}function ms(_,h){return h.catch(p=>{throw p instanceof G.ZR&&function(_,h){var p;const b=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new m_(_,function(_,h){var p;const b=(0,G.m9)(_),k=h;return $e(h.operationType,b,"argument-error"),$e(null===(p=k.serverResponse)||void 0===p?void 0:p.mfaPendingCredential,b,"argument-error"),Du._fromError(b,k)}(_,h));else if(b){const k=Cl(h),H=h;k&&(H.credential=k,H.tenantId=b.tenantId||void 0,H.email=b.email||void 0,H.phoneNumber=b.phoneNumber||void 0)}}(_,p),p}).then(p=>{const k=p.user;return{operationType:p.operationType,credential:Gg(p),additionalUserInfo:Ya(p),user:Uu.getOrCreate(k)}})}function qg(_,h){return zg.apply(this,arguments)}function zg(){return(zg=(0,T.Z)(function*(_,h){const p=yield h;return{verificationId:p.verificationId,confirm:b=>ms(_,p.confirm(b))}})).apply(this,arguments)}class m_{constructor(h,p){this.resolver=p,this.auth=function(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ms(wl(this.auth),this.resolver.resolveSignIn(h))}}class Uu{constructor(h){this._delegate=h,this.multiFactor=function(_){const h=(0,G.m9)(_);return ba.has(h)||ba.set(h,Do._fromUser(h)),ba.get(h)}(h)}static getOrCreate(h){return Uu.USER_MAP.has(h)||Uu.USER_MAP.set(h,new Uu(h)),Uu.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,T.Z)(function*(){return ms(p.auth,wn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var b=this;return(0,T.Z)(function*(){return qg(b.auth,function(_,h,p){return vh.apply(this,arguments)}(b._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,T.Z)(function*(){return ms(p.auth,function(_,h,p){return ll.apply(this,arguments)}(p._delegate,h,ar))})()}linkWithRedirect(h){var p=this;return(0,T.Z)(function*(){return yield Sa(cn(p.auth)),function(_,h,p){return function(_,h,p){return Bs.apply(this,arguments)}(_,h,p)}(p._delegate,h,ar)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,T.Z)(function*(){return ms(p.auth,Pn(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return qg(this.auth,function(_,h,p){return rd.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ms(this.auth,function(_,h,p){return ta.apply(this,arguments)}(this._delegate,h,ar))}reauthenticateWithRedirect(h){var p=this;return(0,T.Z)(function*(){return yield Sa(cn(p.auth)),function(_,h,p){return function(_,h,p){return ni.apply(this,arguments)}(_,h,p)}(p._delegate,h,ar)})()}sendEmailVerification(h){return function(_,h){return wo.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,T.Z)(function*(){return yield function(_,h){return Eo.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function(_,h){return Iu((0,G.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function(_,h){return Iu((0,G.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(_,h){return ul.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(_,h){return qo.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function(_,h,p){return di.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Uu.USER_MAP=new WeakMap;const fd=$e;let Wg=(()=>{class _{constructor(p,b){if(this.app=p,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=p.options;fd(k,"invalid-api-key",{appName:p.name});let H=[tn];if("undefined"!=typeof window){H=function(_,h){const p=k0();if(!(null==p?void 0:p.sessionStorage))return[];const b=$t(pp,_,h);switch(p.sessionStorage.getItem(b)){case ps.NONE:return[tn];case ps.LOCAL:return[eu,ds];case ps.SESSION:return[ds];default:return[]}}(k,p.name);for(const Le of[eu,Yo,ds])H.includes(Le)||H.push(Le)}fd(k,"invalid-api-key",{appName:p.name});const he="undefined"!=typeof window?ar:void 0;this._delegate=b.initialize({options:{persistence:H,popupRedirectResolver:he}}),this._delegate._updateErrorMap(Ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Uu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,b){!function(_,h,p){const b=cn(_);$e(b._canInitEmulator,b,"emulator-config-failed"),$e(/^https?:\/\//.test(h),b,"invalid-emulator-scheme");const k=!!(null==p?void 0:p.disableWarnings),H=bn(h),{host:he,port:Le}=function(_){const h=bn(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!p)return{host:"",port:null};const b=p[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(b);if(k){const H=k[1];return{host:H,port:Vi(b.substr(H.length+1))}}{const[H,he]=b.split(":");return{host:H,port:Vi(he)}}}(h);b.config.emulator={url:`${H}//${he}${null===Le?"":`:${Le}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:he,port:Le,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function(){function _(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,b)}applyActionCode(p){return function(_,h){return no.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ec(this._delegate,p)}confirmPasswordReset(p,b){return function(_,h,p){return Dt.apply(this,arguments)}(this._delegate,p,b)}createUserWithEmailAndPassword(p,b){var k=this;return(0,T.Z)(function*(){return ms(k._delegate,function(_,h,p){return qe.apply(this,arguments)}(k._delegate,p,b))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(_,h){return bo.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(_,h){const p=ci.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,T.Z)(function*(){fd(ir(),p._delegate,"operation-not-supported-in-this-environment");const b=yield function(_,h){return Qi.apply(this,arguments)}(p._delegate,ar);return b?ms(p._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(_,h){cn(_)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,b,k){const{next:H,error:he,complete:Le}=Il(p,b,k);return this._delegate.onAuthStateChanged(H,he,Le)}onIdTokenChanged(p,b,k){const{next:H,error:he,complete:Le}=Il(p,b,k);return this._delegate.onIdTokenChanged(H,he,Le)}sendSignInLinkToEmail(p,b){return function(_,h,p){return zn.apply(this,arguments)}(this._delegate,p,b)}sendPasswordResetEmail(p,b){return function(_,h,p){return to.apply(this,arguments)}(this._delegate,p,b||void 0)}setPersistence(p){var b=this;return(0,T.Z)(function*(){let k;switch(function(_,h){bl(Object.values(ps).includes(h),_,"invalid-persistence-type"),(0,G.b$)()?bl(h!==ps.SESSION,_,"unsupported-persistence-type"):(0,G.UG)()?bl(h===ps.NONE,_,"unsupported-persistence-type"):Ph()?bl(h===ps.NONE||h===ps.LOCAL&&(0,G.hl)(),_,"unsupported-persistence-type"):bl(h===ps.NONE||El(),_,"unsupported-persistence-type")}(b._delegate,p),p){case ps.SESSION:k=ds;break;case ps.LOCAL:k=(yield Ce(eu)._isAvailable())?eu:Yo;break;case ps.NONE:k=tn;break;default:return je("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ms(this._delegate,function(_){return tr.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ms(this._delegate,Vt(this._delegate,p))}signInWithCustomToken(p){return ms(this._delegate,function(_,h){return on.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,b){return ms(this._delegate,function(_,h,p){return Vt((0,G.m9)(_),Bo.credential(h,p))}(this._delegate,p,b))}signInWithEmailLink(p,b){return ms(this._delegate,function(_,h,p){return ei.apply(this,arguments)}(this._delegate,p,b))}signInWithPhoneNumber(p,b){return qg(this._delegate,function(_,h,p){return al.apply(this,arguments)}(this._delegate,p,b))}signInWithPopup(p){var b=this;return(0,T.Z)(function*(){return fd(ir(),b._delegate,"operation-not-supported-in-this-environment"),ms(b._delegate,function(_,h,p){return Ii.apply(this,arguments)}(b._delegate,p,ar))})()}signInWithRedirect(p){var b=this;return(0,T.Z)(function*(){return fd(ir(),b._delegate,"operation-not-supported-in-this-environment"),yield Sa(b._delegate),function(_,h,p){return function(_,h,p){return dt.apply(this,arguments)}(_,h,p)}(b._delegate,p,ar)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(_,h){return qa.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ps,_})();function Il(_,h,p){let b=_;"function"!=typeof _&&({next:b,error:h,complete:p}=_);const k=b;return{next:he=>k(he&&Uu.getOrCreate(he)),error:h,complete:p}}class _c{constructor(){this.providerId="phone",this._delegate=new nu(wl(f.Z.auth()))}static credential(h,p){return nu.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}_c.PHONE_SIGN_IN_METHOD=nu.PHONE_SIGN_IN_METHOD,_c.PROVIDER_ID=nu.PROVIDER_ID;const Fh=$e;class Lh{constructor(h,p,b=f.Z.app()){var k;Fh(null===(k=b.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new _h(h,p,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new ve.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),b=h.getProvider("auth");return new Wg(p,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Bo,FacebookAuthProvider:ja,GithubAuthProvider:Kn,GoogleAuthProvider:jo,OAuthProvider:Ms,PhoneAuthProvider:_c,PhoneMultiFactorGenerator:Dh,RecaptchaVerifier:Lh,TwitterAuthProvider:li,Auth:Wg,AuthCredential:hr,Error:G.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.1.6")}(f.Z)},6676:function(ut,Ne){!function(U){"use strict";function T(ue){return Array.prototype.slice.call(ue)}function f(ue){return new Promise(function(Oe,Ae){ue.onsuccess=function(){Oe(ue.result)},ue.onerror=function(){Ae(ue.error)}})}function G(ue,Oe,Ae){var Te,je=new Promise(function(Be,Xe){f(Te=ue[Oe].apply(ue,Ae)).then(Be,Xe)});return je.request=Te,je}function pe(ue,Oe,Ae){var Te=G(ue,Oe,Ae);return Te.then(function(je){if(je)return new W(je,Te.request)})}function re(ue,Oe,Ae){Ae.forEach(function(Te){Object.defineProperty(ue.prototype,Te,{get:function(){return this[Oe][Te]},set:function(je){this[Oe][Te]=je}})})}function oe(ue,Oe,Ae,Te){Te.forEach(function(je){je in Ae.prototype&&(ue.prototype[je]=function(){return G(this[Oe],je,arguments)})})}function ve(ue,Oe,Ae,Te){Te.forEach(function(je){je in Ae.prototype&&(ue.prototype[je]=function(){return this[Oe][je].apply(this[Oe],arguments)})})}function ae(ue,Oe,Ae,Te){Te.forEach(function(je){je in Ae.prototype&&(ue.prototype[je]=function(){return pe(this[Oe],je,arguments)})})}function J(ue){this._index=ue}function W(ue,Oe){this._cursor=ue,this._request=Oe}function Z(ue){this._store=ue}function de(ue){this._tx=ue,this.complete=new Promise(function(Oe,Ae){ue.oncomplete=function(){Oe()},ue.onerror=function(){Ae(ue.error)},ue.onabort=function(){Ae(ue.error)}})}function le(ue,Oe,Ae){this._db=ue,this.oldVersion=Oe,this.transaction=new de(Ae)}function Ee(ue){this._db=ue}re(J,"_index",["name","keyPath","multiEntry","unique"]),oe(J,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ae(J,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(W,"_cursor",["direction","key","primaryKey","value"]),oe(W,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ue){ue in IDBCursor.prototype&&(W.prototype[ue]=function(){var Oe=this,Ae=arguments;return Promise.resolve().then(function(){return Oe._cursor[ue].apply(Oe._cursor,Ae),f(Oe._request).then(function(Te){if(Te)return new W(Te,Oe._request)})})})}),Z.prototype.createIndex=function(){return new J(this._store.createIndex.apply(this._store,arguments))},Z.prototype.index=function(){return new J(this._store.index.apply(this._store,arguments))},re(Z,"_store",["name","keyPath","indexNames","autoIncrement"]),oe(Z,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ae(Z,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ve(Z,"_store",IDBObjectStore,["deleteIndex"]),de.prototype.objectStore=function(){return new Z(this._tx.objectStore.apply(this._tx,arguments))},re(de,"_tx",["objectStoreNames","mode"]),ve(de,"_tx",IDBTransaction,["abort"]),le.prototype.createObjectStore=function(){return new Z(this._db.createObjectStore.apply(this._db,arguments))},re(le,"_db",["name","version","objectStoreNames"]),ve(le,"_db",IDBDatabase,["deleteObjectStore","close"]),Ee.prototype.transaction=function(){return new de(this._db.transaction.apply(this._db,arguments))},re(Ee,"_db",["name","version","objectStoreNames"]),ve(Ee,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ue){[Z,J].forEach(function(Oe){ue in Oe.prototype&&(Oe.prototype[ue.replace("open","iterate")]=function(){var Ae=T(arguments),Te=Ae[Ae.length-1],je=this._store||this._index,Be=je[ue].apply(je,Ae.slice(0,-1));Be.onsuccess=function(){Te(Be.result)}})})}),[J,Z].forEach(function(ue){ue.prototype.getAll||(ue.prototype.getAll=function(Oe,Ae){var Te=this,je=[];return new Promise(function(Be){Te.iterateCursor(Oe,function(Xe){Xe?(je.push(Xe.value),void 0===Ae||je.length!=Ae?Xe.continue():Be(je)):Be(je)})})})}),U.openDb=function(ue,Oe,Ae){var Te=G(indexedDB,"open",[ue,Oe]),je=Te.request;return je&&(je.onupgradeneeded=function(Be){Ae&&Ae(new le(je.result,Be.oldVersion,je.transaction))}),Te.then(function(Be){return new Ee(Be)})},U.deleteDb=function(ue){return G(indexedDB,"deleteDatabase",[ue])},Object.defineProperty(U,"__esModule",{value:!0})}(Ne)},7574:(ut,Ne,U)=>{"use strict";U.d(Ne,{y:()=>Z});var T=U(7393),G=U(9181),pe=U(6490),oe=U(6554),ve=U(4487);var W=U(2494);let Z=(()=>{class le{constructor(Ve){this._isScalar=!1,Ve&&(this._subscribe=Ve)}lift(Ve){const Me=new le;return Me.source=this,Me.operator=Ve,Me}subscribe(Ve,Me,ue){const{operator:Oe}=this,Ae=function(le,Ee,Ve){if(le){if(le instanceof T.L)return le;if(le[G.b])return le[G.b]()}return le||Ee||Ve?new T.L(le,Ee,Ve):new T.L(pe.c)}(Ve,Me,ue);if(Ae.add(Oe?Oe.call(Ae,this.source):this.source||W.v.useDeprecatedSynchronousErrorHandling&&!Ae.syncErrorThrowable?this._subscribe(Ae):this._trySubscribe(Ae)),W.v.useDeprecatedSynchronousErrorHandling&&Ae.syncErrorThrowable&&(Ae.syncErrorThrowable=!1,Ae.syncErrorThrown))throw Ae.syncErrorValue;return Ae}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Me){W.v.useDeprecatedSynchronousErrorHandling&&(Ve.syncErrorThrown=!0,Ve.syncErrorValue=Me),function(le){for(;le;){const{closed:Ee,destination:Ve,isStopped:Me}=le;if(Ee||Me)return!1;le=Ve&&Ve instanceof T.L?Ve:null}return!0}(Ve)?Ve.error(Me):console.warn(Me)}}forEach(Ve,Me){return new(Me=de(Me))((ue,Oe)=>{let Ae;Ae=this.subscribe(Te=>{try{Ve(Te)}catch(je){Oe(je),Ae&&Ae.unsubscribe()}},Oe,ue)})}_subscribe(Ve){const{source:Me}=this;return Me&&Me.subscribe(Ve)}[oe.L](){return this}pipe(...Ve){return 0===Ve.length?this:function(le){return 0===le.length?ve.y:1===le.length?le[0]:function(Ve){return le.reduce((Me,ue)=>ue(Me),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=de(Ve))((Me,ue)=>{let Oe;this.subscribe(Ae=>Oe=Ae,Ae=>ue(Ae),()=>Me(Oe))})}}return le.create=Ee=>new le(Ee),le})();function de(le){if(le||(le=W.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(ut,Ne,U)=>{"use strict";U.d(Ne,{c:()=>G});var T=U(2494),f=U(4449);const G={closed:!0,next(pe){},error(pe){if(T.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,f.z)(pe)},complete(){}}},9765:(ut,Ne,U)=>{"use strict";U.d(Ne,{Yc:()=>ve,xQ:()=>ae});var T=U(7574),f=U(7393),G=U(5319),pe=U(7971),re=U(8858),oe=U(9181);class ve extends f.L{constructor(Z){super(Z),this.destination=Z}}let ae=(()=>{class W extends T.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[oe.b](){return new ve(this)}lift(de){const le=new J(this,this);return le.operator=de,le}next(de){if(this.closed)throw new pe.N;if(!this.isStopped){const{observers:le}=this,Ee=le.length,Ve=le.slice();for(let Me=0;Me<Ee;Me++)Ve[Me].next(de)}}error(de){if(this.closed)throw new pe.N;this.hasError=!0,this.thrownError=de,this.isStopped=!0;const{observers:le}=this,Ee=le.length,Ve=le.slice();for(let Me=0;Me<Ee;Me++)Ve[Me].error(de);this.observers.length=0}complete(){if(this.closed)throw new pe.N;this.isStopped=!0;const{observers:de}=this,le=de.length,Ee=de.slice();for(let Ve=0;Ve<le;Ve++)Ee[Ve].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(de){if(this.closed)throw new pe.N;return super._trySubscribe(de)}_subscribe(de){if(this.closed)throw new pe.N;return this.hasError?(de.error(this.thrownError),G.w.EMPTY):this.isStopped?(de.complete(),G.w.EMPTY):(this.observers.push(de),new re.W(this,de))}asObservable(){const de=new T.y;return de.source=this,de}}return W.create=(Z,de)=>new J(Z,de),W})();class J extends ae{constructor(Z,de){super(),this.destination=Z,this.source=de}next(Z){const{destination:de}=this;de&&de.next&&de.next(Z)}error(Z){const{destination:de}=this;de&&de.error&&this.destination.error(Z)}complete(){const{destination:Z}=this;Z&&Z.complete&&this.destination.complete()}_subscribe(Z){const{source:de}=this;return de?this.source.subscribe(Z):G.w.EMPTY}}},8858:(ut,Ne,U)=>{"use strict";U.d(Ne,{W:()=>f});var T=U(5319);class f extends T.w{constructor(pe,re){super(),this.subject=pe,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const pe=this.subject,re=pe.observers;if(this.subject=null,!re||0===re.length||pe.isStopped||pe.closed)return;const oe=re.indexOf(this.subscriber);-1!==oe&&re.splice(oe,1)}}},7393:(ut,Ne,U)=>{"use strict";U.d(Ne,{L:()=>ve});var T=U(9105),f=U(6490),G=U(5319),pe=U(9181),re=U(2494),oe=U(4449);class ve extends G.w{constructor(W,Z,de){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=f.c;break;case 1:if(!W){this.destination=f.c;break}if("object"==typeof W){W instanceof ve?(this.syncErrorThrowable=W.syncErrorThrowable,this.destination=W,W.add(this)):(this.syncErrorThrowable=!0,this.destination=new ae(this,W));break}default:this.syncErrorThrowable=!0,this.destination=new ae(this,W,Z,de)}}[pe.b](){return this}static create(W,Z,de){const le=new ve(W,Z,de);return le.syncErrorThrowable=!1,le}next(W){this.isStopped||this._next(W)}error(W){this.isStopped||(this.isStopped=!0,this._error(W))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(W){this.destination.next(W)}_error(W){this.destination.error(W),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:W}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=W,this}}class ae extends ve{constructor(W,Z,de,le){super(),this._parentSubscriber=W;let Ee,Ve=this;(0,T.m)(Z)?Ee=Z:Z&&(Ee=Z.next,de=Z.error,le=Z.complete,Z!==f.c&&(Ve=Object.create(Z),(0,T.m)(Ve.unsubscribe)&&this.add(Ve.unsubscribe.bind(Ve)),Ve.unsubscribe=this.unsubscribe.bind(this))),this._context=Ve,this._next=Ee,this._error=de,this._complete=le}next(W){if(!this.isStopped&&this._next){const{_parentSubscriber:Z}=this;re.v.useDeprecatedSynchronousErrorHandling&&Z.syncErrorThrowable?this.__tryOrSetError(Z,this._next,W)&&this.unsubscribe():this.__tryOrUnsub(this._next,W)}}error(W){if(!this.isStopped){const{_parentSubscriber:Z}=this,{useDeprecatedSynchronousErrorHandling:de}=re.v;if(this._error)de&&Z.syncErrorThrowable?(this.__tryOrSetError(Z,this._error,W),this.unsubscribe()):(this.__tryOrUnsub(this._error,W),this.unsubscribe());else if(Z.syncErrorThrowable)de?(Z.syncErrorValue=W,Z.syncErrorThrown=!0):(0,oe.z)(W),this.unsubscribe();else{if(this.unsubscribe(),de)throw W;(0,oe.z)(W)}}}complete(){if(!this.isStopped){const{_parentSubscriber:W}=this;if(this._complete){const Z=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&W.syncErrorThrowable?(this.__tryOrSetError(W,Z),this.unsubscribe()):(this.__tryOrUnsub(Z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(W,Z){try{W.call(this._context,Z)}catch(de){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw de;(0,oe.z)(de)}}__tryOrSetError(W,Z,de){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Z.call(this._context,de)}catch(le){return re.v.useDeprecatedSynchronousErrorHandling?(W.syncErrorValue=le,W.syncErrorThrown=!0,!0):((0,oe.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:W}=this;this._context=null,this._parentSubscriber=null,W.unsubscribe()}}},5319:(ut,Ne,U)=>{"use strict";U.d(Ne,{w:()=>oe});var T=U(9796),f=U(1555),G=U(9105);const re=(()=>{function ae(J){return Error.call(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((W,Z)=>`${Z+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J,this}return ae.prototype=Object.create(Error.prototype),ae})();class oe{constructor(J){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,J&&(this._ctorUnsubscribe=!0,this._unsubscribe=J)}unsubscribe(){let J;if(this.closed)return;let{_parentOrParents:W,_ctorUnsubscribe:Z,_unsubscribe:de,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,W instanceof oe)W.remove(this);else if(null!==W)for(let Ee=0;Ee<W.length;++Ee)W[Ee].remove(this);if((0,G.m)(de)){Z&&(this._unsubscribe=void 0);try{de.call(this)}catch(Ee){J=Ee instanceof re?ve(Ee.errors):[Ee]}}if((0,T.k)(le)){let Ee=-1,Ve=le.length;for(;++Ee<Ve;){const Me=le[Ee];if((0,f.K)(Me))try{Me.unsubscribe()}catch(ue){J=J||[],ue instanceof re?J=J.concat(ve(ue.errors)):J.push(ue)}}}if(J)throw new re(J)}add(J){let W=J;if(!J)return oe.EMPTY;switch(typeof J){case"function":W=new oe(J);case"object":if(W===this||W.closed||"function"!=typeof W.unsubscribe)return W;if(this.closed)return W.unsubscribe(),W;if(!(W instanceof oe)){const le=W;W=new oe,W._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+J+" added to Subscription.")}let{_parentOrParents:Z}=W;if(null===Z)W._parentOrParents=this;else if(Z instanceof oe){if(Z===this)return W;W._parentOrParents=[Z,this]}else{if(-1!==Z.indexOf(this))return W;Z.push(this)}const de=this._subscriptions;return null===de?this._subscriptions=[W]:de.push(W),W}remove(J){const W=this._subscriptions;if(W){const Z=W.indexOf(J);-1!==Z&&W.splice(Z,1)}}}var ae;function ve(ae){return ae.reduce((J,W)=>J.concat(W instanceof re?W.errors:W),[])}oe.EMPTY=((ae=new oe).closed=!0,ae)},2494:(ut,Ne,U)=>{"use strict";U.d(Ne,{v:()=>f});let T=!1;const f={Promise:void 0,set useDeprecatedSynchronousErrorHandling(G){if(G){const pe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+pe.stack)}else T&&console.log("RxJS: Back to a better error behavior. Thank you. <3");T=G},get useDeprecatedSynchronousErrorHandling(){return T}}},5345:(ut,Ne,U)=>{"use strict";U.d(Ne,{IY:()=>pe,Ds:()=>oe,ft:()=>ae});var T=U(7393),f=U(7574),G=U(7444);class pe extends T.L{constructor(W){super(),this.parent=W}_next(W){this.parent.notifyNext(W)}_error(W){this.parent.notifyError(W),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class oe extends T.L{notifyNext(W){this.destination.next(W)}notifyError(W){this.destination.error(W)}notifyComplete(){this.destination.complete()}}function ae(J,W){if(W.closed)return;if(J instanceof f.y)return J.subscribe(W);let Z;try{Z=(0,G.s)(J)(W)}catch(de){W.error(de)}return Z}},2441:(ut,Ne,U)=>{"use strict";U.d(Ne,{c:()=>re,N:()=>oe});var T=U(9765),f=U(7574),G=U(5319),pe=U(1307);class re extends f.y{constructor(Z,de){super(),this.source=Z,this.subjectFactory=de,this._refCount=0,this._isComplete=!1}_subscribe(Z){return this.getSubject().subscribe(Z)}getSubject(){const Z=this._subject;return(!Z||Z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Z=this._connection;return Z||(this._isComplete=!1,Z=this._connection=new G.w,Z.add(this.source.subscribe(new ve(this.getSubject(),this))),Z.closed&&(this._connection=null,Z=G.w.EMPTY)),Z}refCount(){return(0,pe.x)()(this)}}const oe=(()=>{const W=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:W._subscribe},_isComplete:{value:W._isComplete,writable:!0},getSubject:{value:W.getSubject},connect:{value:W.connect},refCount:{value:W.refCount}}})();class ve extends T.Yc{constructor(Z,de){super(Z),this.connectable=de}_error(Z){this._unsubscribe(),super._error(Z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Z=this.connectable;if(Z){this.connectable=null;const de=Z._connection;Z._refCount=0,Z._subject=null,Z._connection=null,de&&de.unsubscribe()}}}},8071:(ut,Ne,U)=>{"use strict";U.d(Ne,{z:()=>pe});var T=U(5917),f=U(3282);function pe(...re){return(0,f.J)(1)((0,T.of)(...re))}},9193:(ut,Ne,U)=>{"use strict";U.d(Ne,{E:()=>f,c:()=>G});var T=U(7574);const f=new T.y(re=>re.complete());function G(re){return re?function(re){return new T.y(oe=>re.schedule(()=>oe.complete()))}(re):f}},4402:(ut,Ne,U)=>{"use strict";U.d(Ne,{D:()=>Ve});var T=U(7574),f=U(7444),G=U(5319),pe=U(6554),ve=U(4087),ae=U(377),Z=U(4072),de=U(9489);function Ve(Me,ue){return ue?function(Me,ue){if(null!=Me){if(function(Me){return Me&&"function"==typeof Me[pe.L]}(Me))return function(Me,ue){return new T.y(Oe=>{const Ae=new G.w;return Ae.add(ue.schedule(()=>{const Te=Me[pe.L]();Ae.add(Te.subscribe({next(je){Ae.add(ue.schedule(()=>Oe.next(je)))},error(je){Ae.add(ue.schedule(()=>Oe.error(je)))},complete(){Ae.add(ue.schedule(()=>Oe.complete()))}}))})),Ae})}(Me,ue);if((0,Z.t)(Me))return function(Me,ue){return new T.y(Oe=>{const Ae=new G.w;return Ae.add(ue.schedule(()=>Me.then(Te=>{Ae.add(ue.schedule(()=>{Oe.next(Te),Ae.add(ue.schedule(()=>Oe.complete()))}))},Te=>{Ae.add(ue.schedule(()=>Oe.error(Te)))}))),Ae})}(Me,ue);if((0,de.z)(Me))return(0,ve.r)(Me,ue);if(function(Me){return Me&&"function"==typeof Me[ae.hZ]}(Me)||"string"==typeof Me)return function(Me,ue){if(!Me)throw new Error("Iterable cannot be null");return new T.y(Oe=>{const Ae=new G.w;let Te;return Ae.add(()=>{Te&&"function"==typeof Te.return&&Te.return()}),Ae.add(ue.schedule(()=>{Te=Me[ae.hZ](),Ae.add(ue.schedule(function(){if(Oe.closed)return;let je,Be;try{const Xe=Te.next();je=Xe.value,Be=Xe.done}catch(Xe){return void Oe.error(Xe)}Be?Oe.complete():(Oe.next(je),this.schedule())}))})),Ae})}(Me,ue)}throw new TypeError((null!==Me&&typeof Me||Me)+" is not observable")}(Me,ue):Me instanceof T.y?Me:new T.y((0,f.s)(Me))}},6693:(ut,Ne,U)=>{"use strict";U.d(Ne,{n:()=>pe});var T=U(7574),f=U(5015),G=U(4087);function pe(re,oe){return oe?(0,G.r)(re,oe):new T.y((0,f.V)(re))}},6682:(ut,Ne,U)=>{"use strict";U.d(Ne,{T:()=>re});var T=U(7574),f=U(4869),G=U(3282),pe=U(6693);function re(...oe){let ve=Number.POSITIVE_INFINITY,ae=null,J=oe[oe.length-1];return(0,f.K)(J)?(ae=oe.pop(),oe.length>1&&"number"==typeof oe[oe.length-1]&&(ve=oe.pop())):"number"==typeof J&&(ve=oe.pop()),null===ae&&1===oe.length&&oe[0]instanceof T.y?oe[0]:(0,G.J)(ve)((0,pe.n)(oe,ae))}},5917:(ut,Ne,U)=>{"use strict";U.d(Ne,{of:()=>pe});var T=U(4869),f=U(6693),G=U(4087);function pe(...re){let oe=re[re.length-1];return(0,T.K)(oe)?(re.pop(),(0,G.r)(re,oe)):(0,f.n)(re)}},4612:(ut,Ne,U)=>{"use strict";U.d(Ne,{b:()=>f});var T=U(9773);function f(G,pe){return(0,T.zg)(G,pe,1)}},5242:(ut,Ne,U)=>{"use strict";U.d(Ne,{d:()=>f});var T=U(7393);function f(re=null){return oe=>oe.lift(new G(re))}class G{constructor(oe){this.defaultValue=oe}call(oe,ve){return ve.subscribe(new pe(oe,this.defaultValue))}}class pe extends T.L{constructor(oe,ve){super(oe),this.defaultValue=ve,this.isEmpty=!0}_next(oe){this.isEmpty=!1,this.destination.next(oe)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(ut,Ne,U)=>{"use strict";U.d(Ne,{h:()=>f});var T=U(7393);function f(re,oe){return function(ae){return ae.lift(new G(re,oe))}}class G{constructor(oe,ve){this.predicate=oe,this.thisArg=ve}call(oe,ve){return ve.subscribe(new pe(oe,this.predicate,this.thisArg))}}class pe extends T.L{constructor(oe,ve,ae){super(oe),this.predicate=ve,this.thisArg=ae,this.count=0}_next(oe){let ve;try{ve=this.predicate.call(this.thisArg,oe,this.count++)}catch(ae){return void this.destination.error(ae)}ve&&this.destination.next(oe)}}},8049:(ut,Ne,U)=>{"use strict";U.d(Ne,{P:()=>ve});var T=U(3410),f=U(5435),G=U(5257),pe=U(5242),re=U(4635),oe=U(4487);function ve(ae,J){const W=arguments.length>=2;return Z=>Z.pipe(ae?(0,f.h)((de,le)=>ae(de,le,Z)):oe.y,(0,G.q)(1),W?(0,pe.d)(J):(0,re.T)(()=>new T.K))}},8002:(ut,Ne,U)=>{"use strict";U.d(Ne,{U:()=>f});var T=U(7393);function f(re,oe){return function(ae){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ae.lift(new G(re,oe))}}class G{constructor(oe,ve){this.project=oe,this.thisArg=ve}call(oe,ve){return ve.subscribe(new pe(oe,this.project,this.thisArg))}}class pe extends T.L{constructor(oe,ve,ae){super(oe),this.project=ve,this.count=0,this.thisArg=ae||this}_next(oe){let ve;try{ve=this.project.call(this.thisArg,oe,this.count++)}catch(ae){return void this.destination.error(ae)}this.destination.next(ve)}}},3282:(ut,Ne,U)=>{"use strict";U.d(Ne,{J:()=>G});var T=U(9773),f=U(4487);function G(pe=Number.POSITIVE_INFINITY){return(0,T.zg)(f.y,pe)}},9773:(ut,Ne,U)=>{"use strict";U.d(Ne,{zg:()=>pe});var T=U(8002),f=U(4402),G=U(5345);function pe(ae,J,W=Number.POSITIVE_INFINITY){return"function"==typeof J?Z=>Z.pipe(pe((de,le)=>(0,f.D)(ae(de,le)).pipe((0,T.U)((Ee,Ve)=>J(de,Ee,le,Ve))),W)):("number"==typeof J&&(W=J),Z=>Z.lift(new re(ae,W)))}class re{constructor(J,W=Number.POSITIVE_INFINITY){this.project=J,this.concurrent=W}call(J,W){return W.subscribe(new oe(J,this.project,this.concurrent))}}class oe extends G.Ds{constructor(J,W,Z=Number.POSITIVE_INFINITY){super(J),this.project=W,this.concurrent=Z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(J){this.active<this.concurrent?this._tryNext(J):this.buffer.push(J)}_tryNext(J){let W;const Z=this.index++;try{W=this.project(J,Z)}catch(de){return void this.destination.error(de)}this.active++,this._innerSub(W)}_innerSub(J){const W=new G.IY(this),Z=this.destination;Z.add(W);const de=(0,G.ft)(J,W);de!==W&&Z.add(de)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(J){this.destination.next(J)}notifyComplete(){const J=this.buffer;this.active--,J.length>0?this._next(J.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(ut,Ne,U)=>{"use strict";U.d(Ne,{ht:()=>Z,QV:()=>J});var T=U(7393),f=U(9193),G=U(5917),pe=U(7574);class ae{constructor(Ee,Ve,Me){this.kind=Ee,this.value=Ve,this.error=Me,this.hasValue="N"===Ee}observe(Ee){switch(this.kind){case"N":return Ee.next&&Ee.next(this.value);case"E":return Ee.error&&Ee.error(this.error);case"C":return Ee.complete&&Ee.complete()}}do(Ee,Ve,Me){switch(this.kind){case"N":return Ee&&Ee(this.value);case"E":return Ve&&Ve(this.error);case"C":return Me&&Me()}}accept(Ee,Ve,Me){return Ee&&"function"==typeof Ee.next?this.observe(Ee):this.do(Ee,Ve,Me)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return le=this.error,new pe.y(Ve=>Ve.error(le));case"C":return(0,f.c)()}var le;throw new Error("unexpected notification kind value")}static createNext(Ee){return void 0!==Ee?new ae("N",Ee):ae.undefinedValueNotification}static createError(Ee){return new ae("E",void 0,Ee)}static createComplete(){return ae.completeNotification}}function J(le,Ee=0){return function(Me){return Me.lift(new W(le,Ee))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class W{constructor(Ee,Ve=0){this.scheduler=Ee,this.delay=Ve}call(Ee,Ve){return Ve.subscribe(new Z(Ee,this.scheduler,this.delay))}}class Z extends T.L{constructor(Ee,Ve,Me=0){super(Ee),this.scheduler=Ve,this.delay=Me}static dispatch(Ee){const{notification:Ve,destination:Me}=Ee;Ve.observe(Me),this.unsubscribe()}scheduleMessage(Ee){this.destination.add(this.scheduler.schedule(Z.dispatch,this.delay,new de(Ee,this.destination)))}_next(Ee){this.scheduleMessage(ae.createNext(Ee))}_error(Ee){this.scheduleMessage(ae.createError(Ee)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class de{constructor(Ee,Ve){this.notification=Ee,this.destination=Ve}}},1307:(ut,Ne,U)=>{"use strict";U.d(Ne,{x:()=>f});var T=U(7393);function f(){return function(oe){return oe.lift(new G(oe))}}class G{constructor(oe){this.connectable=oe}call(oe,ve){const{connectable:ae}=this;ae._refCount++;const J=new pe(oe,ae),W=ve.subscribe(J);return J.closed||(J.connection=ae.connect()),W}}class pe extends T.L{constructor(oe,ve){super(oe),this.connectable=ve}_unsubscribe(){const{connectable:oe}=this;if(!oe)return void(this.connection=null);this.connectable=null;const ve=oe._refCount;if(ve<=0)return void(this.connection=null);if(oe._refCount=ve-1,ve>1)return void(this.connection=null);const{connection:ae}=this,J=oe._connection;this.connection=null,J&&(!ae||J===ae)&&J.unsubscribe()}}},2145:(ut,Ne,U)=>{"use strict";U.d(Ne,{R:()=>f});var T=U(7393);function f(re,oe){let ve=!1;return arguments.length>=2&&(ve=!0),function(J){return J.lift(new G(re,oe,ve))}}class G{constructor(oe,ve,ae=!1){this.accumulator=oe,this.seed=ve,this.hasSeed=ae}call(oe,ve){return ve.subscribe(new pe(oe,this.accumulator,this.seed,this.hasSeed))}}class pe extends T.L{constructor(oe,ve,ae,J){super(oe),this.accumulator=ve,this._seed=ae,this.hasSeed=J,this.index=0}get seed(){return this._seed}set seed(oe){this.hasSeed=!0,this._seed=oe}_next(oe){if(this.hasSeed)return this._tryNext(oe);this.seed=oe,this.destination.next(oe)}_tryNext(oe){const ve=this.index++;let ae;try{ae=this.accumulator(this.seed,oe,ve)}catch(J){this.destination.error(J)}this.seed=ae,this.destination.next(ae)}}},9761:(ut,Ne,U)=>{"use strict";U.d(Ne,{O:()=>G});var T=U(8071),f=U(4869);function G(...pe){const re=pe[pe.length-1];return(0,f.K)(re)?(pe.pop(),oe=>(0,T.z)(pe,oe,re)):oe=>(0,T.z)(pe,oe)}},3101:(ut,Ne,U)=>{"use strict";U.d(Ne,{R:()=>ue});var T=U(7574);let f=1;const G=Promise.resolve(),pe={};function re(Ae){return Ae in pe&&(delete pe[Ae],!0)}const oe={setImmediate(Ae){const Te=f++;return pe[Te]=!0,G.then(()=>re(Te)&&Ae()),Te},clearImmediate(Ae){re(Ae)}};var ae=U(6465),W=U(6102);const le=new class extends W.v{flush(Te){this.active=!0,this.scheduled=void 0;const{actions:je}=this;let Be,Xe=-1,Ut=je.length;Te=Te||je.shift();do{if(Be=Te.execute(Te.state,Te.delay))break}while(++Xe<Ut&&(Te=je.shift()));if(this.active=!1,Be){for(;++Xe<Ut&&(Te=je.shift());)Te.unsubscribe();throw Be}}}(class extends ae.o{constructor(Te,je){super(Te,je),this.scheduler=Te,this.work=je}requestAsyncId(Te,je,Be=0){return null!==Be&&Be>0?super.requestAsyncId(Te,je,Be):(Te.actions.push(this),Te.scheduled||(Te.scheduled=oe.setImmediate(Te.flush.bind(Te,null))))}recycleAsyncId(Te,je,Be=0){if(null!==Be&&Be>0||null===Be&&this.delay>0)return super.recycleAsyncId(Te,je,Be);0===Te.actions.length&&(oe.clearImmediate(je),Te.scheduled=void 0)}});var Ee=U(9796);class Me extends T.y{constructor(Te,je=0,Be=le){var Ae;super(),this.source=Te,this.delayTime=je,this.scheduler=Be,(!(!(0,Ee.k)(Ae=je)&&Ae-parseFloat(Ae)+1>=0)||je<0)&&(this.delayTime=0),(!Be||"function"!=typeof Be.schedule)&&(this.scheduler=le)}static create(Te,je=0,Be=le){return new Me(Te,je,Be)}static dispatch(Te){const{source:je,subscriber:Be}=Te;return this.add(je.subscribe(Be))}_subscribe(Te){return this.scheduler.schedule(Me.dispatch,this.delayTime,{source:this.source,subscriber:Te})}}function ue(Ae,Te=0){return function(Be){return Be.lift(new Oe(Ae,Te))}}class Oe{constructor(Te,je){this.scheduler=Te,this.delay=je}call(Te,je){return new Me(je,this.delay,this.scheduler).subscribe(Te)}}},3190:(ut,Ne,U)=>{"use strict";U.d(Ne,{w:()=>pe});var T=U(8002),f=U(4402),G=U(5345);function pe(ve,ae){return"function"==typeof ae?J=>J.pipe(pe((W,Z)=>(0,f.D)(ve(W,Z)).pipe((0,T.U)((de,le)=>ae(W,de,Z,le))))):J=>J.lift(new re(ve))}class re{constructor(ae){this.project=ae}call(ae,J){return J.subscribe(new oe(ae,this.project))}}class oe extends G.Ds{constructor(ae,J){super(ae),this.project=J,this.index=0}_next(ae){let J;const W=this.index++;try{J=this.project(ae,W)}catch(Z){return void this.destination.error(Z)}this._innerSub(J)}_innerSub(ae){const J=this.innerSubscription;J&&J.unsubscribe();const W=new G.IY(this),Z=this.destination;Z.add(W),this.innerSubscription=(0,G.ft)(ae,W),this.innerSubscription!==W&&Z.add(this.innerSubscription)}_complete(){const{innerSubscription:ae}=this;(!ae||ae.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ae){this.destination.next(ae)}}},5257:(ut,Ne,U)=>{"use strict";U.d(Ne,{q:()=>pe});var T=U(7393),f=U(7108),G=U(9193);function pe(ve){return ae=>0===ve?(0,G.c)():ae.lift(new re(ve))}class re{constructor(ae){if(this.total=ae,this.total<0)throw new f.W}call(ae,J){return J.subscribe(new oe(ae,this.total))}}class oe extends T.L{constructor(ae,J){super(ae),this.total=J,this.count=0}_next(ae){const J=this.total,W=++this.count;W<=J&&(this.destination.next(ae),W===J&&(this.destination.complete(),this.unsubscribe()))}}},3342:(ut,Ne,U)=>{"use strict";U.d(Ne,{b:()=>pe});var T=U(7393);function f(){}var G=U(9105);function pe(ve,ae,J){return function(Z){return Z.lift(new re(ve,ae,J))}}class re{constructor(ae,J,W){this.nextOrObserver=ae,this.error=J,this.complete=W}call(ae,J){return J.subscribe(new oe(ae,this.nextOrObserver,this.error,this.complete))}}class oe extends T.L{constructor(ae,J,W,Z){super(ae),this._tapNext=f,this._tapError=f,this._tapComplete=f,this._tapError=W||f,this._tapComplete=Z||f,(0,G.m)(J)?(this._context=this,this._tapNext=J):J&&(this._context=J,this._tapNext=J.next||f,this._tapError=J.error||f,this._tapComplete=J.complete||f)}_next(ae){try{this._tapNext.call(this._context,ae)}catch(J){return void this.destination.error(J)}this.destination.next(ae)}_error(ae){try{this._tapError.call(this._context,ae)}catch(J){return void this.destination.error(J)}this.destination.error(ae)}_complete(){try{this._tapComplete.call(this._context)}catch(ae){return void this.destination.error(ae)}return this.destination.complete()}}},4635:(ut,Ne,U)=>{"use strict";U.d(Ne,{T:()=>G});var T=U(3410),f=U(7393);function G(ve=oe){return ae=>ae.lift(new pe(ve))}class pe{constructor(ae){this.errorFactory=ae}call(ae,J){return J.subscribe(new re(ae,this.errorFactory))}}class re extends f.L{constructor(ae,J){super(ae),this.errorFactory=J,this.hasValue=!1}_next(ae){this.hasValue=!0,this.destination.next(ae)}_complete(){if(this.hasValue)return this.destination.complete();{let ae;try{ae=this.errorFactory()}catch(J){ae=J}this.destination.error(ae)}}}function oe(){return new T.K}},4087:(ut,Ne,U)=>{"use strict";U.d(Ne,{r:()=>G});var T=U(7574),f=U(5319);function G(pe,re){return new T.y(oe=>{const ve=new f.w;let ae=0;return ve.add(re.schedule(function(){ae!==pe.length?(oe.next(pe[ae++]),oe.closed||ve.add(this.schedule())):oe.complete()})),ve})}},6465:(ut,Ne,U)=>{"use strict";U.d(Ne,{o:()=>G});var T=U(5319);class f extends T.w{constructor(re,oe){super()}schedule(re,oe=0){return this}}class G extends f{constructor(re,oe){super(re,oe),this.scheduler=re,this.work=oe,this.pending=!1}schedule(re,oe=0){if(this.closed)return this;this.state=re;const ve=this.id,ae=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(ae,ve,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId(ae,this.id,oe),this}requestAsyncId(re,oe,ve=0){return setInterval(re.flush.bind(re,this),ve)}recycleAsyncId(re,oe,ve=0){if(null!==ve&&this.delay===ve&&!1===this.pending)return oe;clearInterval(oe)}execute(re,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(re,oe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,oe){let ae,ve=!1;try{this.work(re)}catch(J){ve=!0,ae=!!J&&J||new Error(J)}if(ve)return this.unsubscribe(),ae}_unsubscribe(){const re=this.id,oe=this.scheduler,ve=oe.actions,ae=ve.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ae&&ve.splice(ae,1),null!=re&&(this.id=this.recycleAsyncId(oe,re,null)),this.delay=null}}},6102:(ut,Ne,U)=>{"use strict";U.d(Ne,{v:()=>f});let T=(()=>{class G{constructor(re,oe=G.now){this.SchedulerAction=re,this.now=oe}schedule(re,oe=0,ve){return new this.SchedulerAction(this,re).schedule(ve,oe)}}return G.now=()=>Date.now(),G})();class f extends T{constructor(pe,re=T.now){super(pe,()=>f.delegate&&f.delegate!==this?f.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(pe,re=0,oe){return f.delegate&&f.delegate!==this?f.delegate.schedule(pe,re,oe):super.schedule(pe,re,oe)}flush(pe){const{actions:re}=this;if(this.active)return void re.push(pe);let oe;this.active=!0;do{if(oe=pe.execute(pe.state,pe.delay))break}while(pe=re.shift());if(this.active=!1,oe){for(;pe=re.shift();)pe.unsubscribe();throw oe}}}},3637:(ut,Ne,U)=>{"use strict";U.d(Ne,{z:()=>G,P:()=>pe});var T=U(6465);const G=new(U(6102).v)(T.o),pe=G},7771:(ut,Ne,U)=>{"use strict";U.d(Ne,{c:()=>oe,N:()=>re});var T=U(6465),G=U(6102);const re=new class extends G.v{}(class extends T.o{constructor(ae,J){super(ae,J),this.scheduler=ae,this.work=J}schedule(ae,J=0){return J>0?super.schedule(ae,J):(this.delay=J,this.state=ae,this.scheduler.flush(this),this)}execute(ae,J){return J>0||this.closed?super.execute(ae,J):this._execute(ae,J)}requestAsyncId(ae,J,W=0){return null!==W&&W>0||null===W&&this.delay>0?super.requestAsyncId(ae,J,W):ae.flush(this)}}),oe=re},377:(ut,Ne,U)=>{"use strict";U.d(Ne,{hZ:()=>f});const f="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ut,Ne,U)=>{"use strict";U.d(Ne,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ut,Ne,U)=>{"use strict";U.d(Ne,{b:()=>T});const T="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(ut,Ne,U)=>{"use strict";U.d(Ne,{W:()=>f});const f=(()=>{function G(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return G.prototype=Object.create(Error.prototype),G})()},3410:(ut,Ne,U)=>{"use strict";U.d(Ne,{K:()=>f});const f=(()=>{function G(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return G.prototype=Object.create(Error.prototype),G})()},7971:(ut,Ne,U)=>{"use strict";U.d(Ne,{N:()=>f});const f=(()=>{function G(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return G.prototype=Object.create(Error.prototype),G})()},4449:(ut,Ne,U)=>{"use strict";function T(f){setTimeout(()=>{throw f},0)}U.d(Ne,{z:()=>T})},4487:(ut,Ne,U)=>{"use strict";function T(f){return f}U.d(Ne,{y:()=>T})},9796:(ut,Ne,U)=>{"use strict";U.d(Ne,{k:()=>T});const T=Array.isArray||(f=>f&&"number"==typeof f.length)},9489:(ut,Ne,U)=>{"use strict";U.d(Ne,{z:()=>T});const T=f=>f&&"number"==typeof f.length&&"function"!=typeof f},9105:(ut,Ne,U)=>{"use strict";function T(f){return"function"==typeof f}U.d(Ne,{m:()=>T})},1555:(ut,Ne,U)=>{"use strict";function T(f){return null!==f&&"object"==typeof f}U.d(Ne,{K:()=>T})},4072:(ut,Ne,U)=>{"use strict";function T(f){return!!f&&"function"!=typeof f.subscribe&&"function"==typeof f.then}U.d(Ne,{t:()=>T})},4869:(ut,Ne,U)=>{"use strict";function T(f){return f&&"function"==typeof f.schedule}U.d(Ne,{K:()=>T})},7444:(ut,Ne,U)=>{"use strict";U.d(Ne,{s:()=>Z});var T=U(5015),f=U(4449),pe=U(377),oe=U(6554),ae=U(9489),J=U(4072),W=U(1555);const Z=de=>{if(de&&"function"==typeof de[oe.L])return(de=>le=>{const Ee=de[oe.L]();if("function"!=typeof Ee.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ee.subscribe(le)})(de);if((0,ae.z)(de))return(0,T.V)(de);if((0,J.t)(de))return(de=>le=>(de.then(Ee=>{le.closed||(le.next(Ee),le.complete())},Ee=>le.error(Ee)).then(null,f.z),le))(de);if(de&&"function"==typeof de[pe.hZ])return(de=>le=>{const Ee=de[pe.hZ]();for(;;){let Ve;try{Ve=Ee.next()}catch(Me){return le.error(Me),le}if(Ve.done){le.complete();break}if(le.next(Ve.value),le.closed)break}return"function"==typeof Ee.return&&le.add(()=>{Ee.return&&Ee.return()}),le})(de);{const Ee=`You provided ${(0,W.K)(de)?"an invalid object":`'${de}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ee)}}},5015:(ut,Ne,U)=>{"use strict";U.d(Ne,{V:()=>T});const T=f=>G=>{for(let pe=0,re=f.length;pe<re&&!G.closed;pe++)G.next(f[pe]);G.complete()}},1917:(ut,Ne,U)=>{"use strict";U.d(Ne,{i:()=>f});var T=U(3018);let f=(()=>{class G{constructor(){this.registro=new T.vpe,this.usuarioYaRegistrado=new T.vpe,this.sesionIniciada=new T.vpe,this.errorInicioDeSesion=new T.vpe,this.sesionTerminada=new T.vpe,this.errorRegistro=new T.vpe}registroUsuario(re){this.iniciado=re,this.registro.emit(this.iniciado)}usuarioExistente(re){this.usuarioYaRegistrado.emit(re)}iniciarSesion(re){this.iniciado=re,this.sesionIniciada.emit(re)}errorIniciarSesion(){this.errorInicioDeSesion.emit("Error al iniciar sesi\xf3n. Datos incorrectos!")}salirDeSesion(){this.iniciado=void 0,this.sesionTerminada.emit(!0)}errorRegistrar(re){this.errorRegistro.emit(re)}}return G.\u0275fac=function(re){return new(re||G)},G.\u0275prov=T.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})()},7039:(ut,Ne,U)=>{"use strict";var T=U(8583),f=U(3018);class G extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pe extends G{static makeCurrent(){(0,T.HT)(new pe)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(re=re||document.querySelector("base"),re?re.getAttribute("href"):null);return null==t?null:function(n){ve=ve||document.createElement("a"),ve.setAttribute("href",n);const e=ve.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){re=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,T.Mx)(document.cookie,e)}}let ve,re=null;const J=new f.OlP("TRANSITION_ID"),Z=[{provide:f.ip1,useFactory:function(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const s=(0,T.q)(),u=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let d=0;d<u.length;d++)s.remove(u[d])})}},deps:[J,T.K0,f.zs3],multi:!0}];class de{static init(){(0,f.VLi)(new de)}addToWindow(e){f.dqk.getAngularTestability=(s,u=!0)=>{const d=e.findTestabilityInTree(s,u);if(null==d)throw new Error("Could not find testability for element.");return d},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(s=>{const u=f.dqk.getAllAngularTestabilities();let d=u.length,m=!1;const C=function(x){m=m||x,d--,0==d&&s(m)};u.forEach(function(x){x.whenStable(C)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const u=e.getTestability(t);return null!=u?u:s?(0,T.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let le=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const xe=new f.OlP("EventManagerPlugins");let Ce=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(u=>u.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,u){return this._findPluginFor(s).addEventListener(t,s,u)}addGlobalEventListener(t,s,u){return this._findPluginFor(s).addGlobalEventListener(t,s,u)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const u=this._plugins;for(let d=0;d<u.length;d++){const m=u[d];if(m.supports(t))return this._eventNameToPlugin.set(t,m),m}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xe),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ye{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const u=(0,T.q)().getGlobalEventTarget(this._doc,e);if(!u)throw new Error(`Unsupported event target ${u} for event ${t}`);return this.addEventListener(u,t,s)}}let Re=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),s.add(u))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_t=(()=>{class n extends Re{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,u){t.forEach(d=>{const m=this._doc.createElement("style");m.textContent=d,u.push(s.appendChild(m))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(un),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,u)=>{this._addStylesToHost(t,u,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(un))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T.K0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function un(n){(0,T.q)().remove(n)}const Zn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ft=/%COMP%/g;function it(n,e,t){for(let s=0;s<e.length;s++){let u=e[s];Array.isArray(u)?it(n,u,t):(u=u.replace(Ft,n),t.push(u))}return t}function Ht(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dr=(()=>{class n{constructor(t,s,u){this.eventManager=t,this.sharedStylesHost=s,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new vn(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case f.ifc.Emulated:{let u=this.rendererByCompId.get(s.id);return u||(u=new On(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,u)),u.applyToHost(t),u}case 1:case f.ifc.ShadowDom:return new Fi(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const u=it(s.id,s.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ce),f.LFG(_t),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class vn{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Zn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,u){if(u){t=u+":"+t;const d=Zn[u];d?e.setAttributeNS(d,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const u=Zn[s];u?e.removeAttributeNS(u,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,u){u&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,s,u&f.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ht(s)):this.eventManager.addEventListener(e,t,Ht(s))}}class On extends vn{constructor(e,t,s,u){super(e),this.component=s;const d=it(u+"-"+s.id,s.styles,[]);t.addStyles(d),this.contentAttr="_ngcontent-%COMP%".replace(Ft,u+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Ft,n)}(u+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class Fi extends vn{constructor(e,t,s,u){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=it(u.id,u.styles,[]);for(let m=0;m<d.length;m++){const C=document.createElement("style");C.textContent=d[m],this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vi=(()=>{class n extends Ye{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,u){return t.addEventListener(s,u,!1),()=>this.removeEventListener(t,s,u)}removeEventListener(t,s,u){return t.removeEventListener(s,u)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T.K0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const an=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Un={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lt={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ie=(()=>{class n extends Ye{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,u){const d=n.parseEventName(s),m=n.eventCallback(d.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(t,d.domEventName,m))}static parseEventName(t){const s=t.toLowerCase().split("."),u=s.shift();if(0===s.length||"keydown"!==u&&"keyup"!==u)return null;const d=n._normalizeKey(s.pop());let m="";if(an.forEach(x=>{const F=s.indexOf(x);F>-1&&(s.splice(F,1),m+=x+".")}),m+=d,0!=s.length||0===d.length)return null;const C={};return C.domEventName=u,C.fullKey=m,C}static getEventFullKey(t){let s="",u=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Un.hasOwnProperty(e)&&(e=Un[e]))}return gt[e]||e}(t);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),an.forEach(d=>{d!=u&&Lt[d](t)&&(s+=d+".")}),s+=u,s}static eventCallback(t,s,u){return d=>{n.getEventFullKey(d)===t&&u.runGuarded(()=>s(d))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T.K0))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Rn=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:T.bD},{provide:f.g9A,useValue:function(){pe.makeCurrent(),de.init()},multi:!0},{provide:T.K0,useFactory:function(){return(0,f.RDi)(document),document},deps:[]}]),fa=[[],{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function(){return new f.qLn},deps:[]},{provide:xe,useClass:vi,multi:!0,deps:[T.K0,f.R0b,f.Lbi]},{provide:xe,useClass:ie,multi:!0,deps:[T.K0]},[],{provide:dr,useClass:dr,deps:[Ce,_t,f.AFp]},{provide:f.FYo,useExisting:dr},{provide:Re,useExisting:_t},{provide:_t,useClass:_t,deps:[T.K0]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Ce,useClass:Ce,deps:[xe,f.R0b]},{provide:T.JF,useClass:le,deps:[]},[]];let mo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:J,useExisting:f.AFp},Z]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:fa,imports:[T.ez,f.hGG]}),n})();"undefined"!=typeof window&&window;const hr_firebaseConfig={apiKey:"AIzaSyBYEnEGmOKDT5PqTLRJ2Jh4tisOyFDvxhM",authDomain:"labo-iv-tpclinica-lvv.firebaseapp.com",projectId:"labo-iv-tpclinica-lvv",storageBucket:"labo-iv-tpclinica-lvv.appspot.com",messagingSenderId:"927885202294",appId:"1:927885202294:web:0c7302c9b03e525078e057"};var Wt=U(8939),mn=U(7574),Rr=U(5917),bt=U(4402),Js=U(7393),Ui=U(3637);class Br{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new fr(e,this.dueTime,this.scheduler))}}class fr extends Js.L{constructor(e,t,s){super(e),this.dueTime=t,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Xs,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Xs(n){n.debouncedNext()}var hn=U(8002),qn=U(3190),Nt=U(6643),us=U(4486),Se=U(8239),pr=U(5452),Et=U(3854),jr=U(6034),Ir=(()=>{return(n=Ir||(Ir={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Ir;var n})();const Bi="firebasestorage.googleapis.com",gr="storageBucket";class At extends Et.ZR{constructor(e,t){super(ji(e),`Firebase Storage: ${t} (${ji(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,At.prototype)}_codeEquals(e){return ji(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ji(n){return"storage/"+n}function eo(){return new At("unknown","An unknown error occurred, please check the error payload for server response.")}function ga(){return new At("canceled","User canceled the upload/download.")}function Hi(){return new At("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xu(){return new At("no-download-url","The given file does not have any download URLs.")}function ci(n){return new At("invalid-argument",n)}function wu(){return new At("app-deleted","The Firebase app was deleted.")}function Bo(n){return new At("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jr(n,e){return new At("invalid-format","String does not match format '"+n+"': "+e)}function Ns(n){throw new At("internal-error","Internal error: "+n)}class Ms{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ir.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ir.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ir.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,u){if(this.sent_)throw Ns("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==u)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return void 0!==s?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ns("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ns("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponseText(){if(!this.sent_)throw Ns("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class jo{createConnection(){return new Ms}}class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Kn.makeFromUrl(e,t)}catch(u){return new Kn(e,"")}if(""===s.path)return s;throw new At("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let s=null;const u="([A-Za-z0-9.\\-_]+)",C=new RegExp("^gs://"+u+"(/(.*))?$","i");function F(kt){kt.path_=decodeURIComponent(kt.path)}const Q=t.replace(/[.]/g,"\\."),Ln=[{regex:C,indices:{bucket:1,path:3},postModify:function(kt){"/"===kt.path.charAt(kt.path.length-1)&&(kt.path_=kt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Q}/v[A-Za-z0-9_]+/b/${u}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:F},{regex:new RegExp(`^https?://${t===Bi?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${u}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:F}];for(let kt=0;kt<Ln.length;kt++){const cr=Ln[kt],ki=cr.regex.exec(e);if(ki){let Kf=ki[cr.indices.path];Kf||(Kf=""),s=new Kn(ki[cr.indices.bucket],Kf),cr.postModify(s);break}}if(null==s)throw new At("invalid-url","Invalid URL '"+e+"'.");return s}}class tl{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cs(n){return"string"==typeof n||n instanceof String}function Xr(n){return ya()&&n instanceof Blob}function ya(){return"undefined"!=typeof Blob}function $o(n,e,t,s){if(s<e)throw ci(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw ci(`Invalid value for '${n}'. Expected ${t} or less.`)}function tr(n,e,t){let s=e;return null==t&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function Ho(n){const e=encodeURIComponent;let t="?";for(const s in n)n.hasOwnProperty(s)&&(t=t+(e(s)+"=")+e(n[s])+"&");return t=t.slice(0,-1),t}class Ei{constructor(e,t,s,u,d,m,C,x,F,q,Q){this.url_=e,this.method_=t,this.headers_=s,this.body_=u,this.successCodes_=d,this.additionalRetryCodes_=m,this.callback_=C,this.errorCallback_=x,this.timeout_=F,this.progressCallback_=q,this.pool_=Q,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ge,me)=>{this.resolve_=ge,this.reject_=me,this.start_()})}start_(){const t=(s,u)=>{const d=this.resolve_,m=this.reject_,C=u.connection;if(u.wasSuccessCode)try{const x=this.callback_(C,C.getResponseText());void 0!==x?d(x):d()}catch(x){m(x)}else if(null!==C){const x=eo();x.serverResponse=C.getResponseText(),m(this.errorCallback_?this.errorCallback_(C,x):x)}else m(u.canceled?this.appDelete_?wu():ga():new At("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Go(!1,null,!0)):this.backoffId_=function(n,e,t){let s=1,u=null,d=!1,m=0;function C(){return 2===m}let x=!1;function F(...De){x||(x=!0,e.apply(null,De))}function q(De){u=setTimeout(()=>{u=null,n(Q,C())},De)}function Q(De,...et){if(x)return;if(De)return void F.call(null,De,...et);if(C()||d)return void F.call(null,De,...et);let xt;s<64&&(s*=2),1===m?(m=2,xt=0):xt=1e3*(s+Math.random()),q(xt)}let ge=!1;function me(De){ge||(ge=!0,!x&&(null!==u?(De||(m=2),clearTimeout(u),q(0)):De||(m=1)))}return q(0),setTimeout(()=>{d=!0,me(!0)},t),me}((s,u)=>{if(u)return void s(!1,new Go(!1,null,!0));const d=this.pool_.createConnection();this.pendingConnection_=d;const m=C=>{null!==this.progressCallback_&&this.progressCallback_(C.loaded,C.lengthComputable?C.total:-1)};null!==this.progressCallback_&&d.addUploadProgressListener(m),d.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&d.removeUploadProgressListener(m),this.pendingConnection_=null;const C=d.getErrorCode()===Ir.NO_ERROR,x=d.getStatus();if(!C||this.isRetryStatusCode_(x)){const q=d.getErrorCode()===Ir.ABORT;return void s(!1,new Go(!1,null,q))}const F=-1!==this.successCodes_.indexOf(x);s(!0,new Go(F,d))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,u=-1!==[408,429].indexOf(e),d=-1!==this.additionalRetryCodes_.indexOf(e);return t||u||d}}class Go{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function te(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}if(ya())return new Blob(n);throw new At("unsupported-environment","This browser doesn't seem to support creating Blobs")}const st={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vt{constructor(e,t){this.data=e,this.contentType=t||null}}function ht(n,e){switch(n){case st.RAW:return new Vt(wn(e));case st.BASE64:case st.BASE64URL:return new Vt(Pn(n,e));case st.DATA_URL:return new Vt(function(n){const e=new Zt(n);return e.base64?Pn(st.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Jr(st.DATA_URL,"Malformed data URL.")}return wn(e)}(e.rest)}(e),function(n){return new Zt(n).contentType}(e))}throw eo()}function wn(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);s<=127?e.push(s):s<=2047?e.push(192|s>>6,128|63&s):55296==(64512&s)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(s=65536|(1023&s)<<10|1023&n.charCodeAt(++t),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s)):e.push(239,191,189):56320==(64512&s)?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|63&s)}return new Uint8Array(e)}function Pn(n,e){switch(n){case st.BASE64:{const u=-1!==e.indexOf("-"),d=-1!==e.indexOf("_");if(u||d)throw Jr(n,"Invalid character '"+(u?"-":"_")+"' found: is it base64url encoded?");break}case st.BASE64URL:{const u=-1!==e.indexOf("+"),d=-1!==e.indexOf("/");if(u||d)throw Jr(n,"Invalid character '"+(u?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(u){throw Jr(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let u=0;u<t.length;u++)s[u]=t.charCodeAt(u);return s}class Zt{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Jr(st.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;null!=s&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-";base64".length):s),this.rest=e.substring(e.indexOf(",")+1)}}class on{constructor(e,t){let s=0,u="";Xr(e)?(this.data_=e,s=e.size,u=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=u}size(){return this.size_}type(){return this.type_}slice(e,t){if(Xr(this.data_)){const u=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===u?null:new on(u)}{const s=new Uint8Array(this.data_.buffer,e,t-e);return new on(s,!0)}}static getBlob(...e){if(ya()){const t=e.map(s=>s instanceof on?s.data_:s);return new on(te.apply(null,t))}{const t=e.map(m=>cs(m)?ht(st.RAW,m).data:m.data_);let s=0;t.forEach(m=>{s+=m.byteLength});const u=new Uint8Array(s);let d=0;return t.forEach(m=>{for(let C=0;C<m.length;C++)u[d++]=m[C]}),new on(u,!0)}}uploadData(){return this.data_}}function Or(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function wi(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function to(n,e){return e}class yr{constructor(e,t,s,u){this.server=e,this.local=t||e,this.writable=!!s,this.xform=u||to}}let Dt=null;function no(){if(Dt)return Dt;const n=[];n.push(new yr("bucket")),n.push(new yr("generation")),n.push(new yr("metageneration")),n.push(new yr("name","fullPath",!0));const t=new yr("name");t.xform=function(d,m){return function(n){return!cs(n)||n.length<2?n:wi(n)}(m)},n.push(t);const u=new yr("size");return u.xform=function(d,m){return void 0!==m?Number(m):m},n.push(u),n.push(new yr("timeCreated")),n.push(new yr("updated")),n.push(new yr("md5Hash",null,!0)),n.push(new yr("cacheControl",null,!0)),n.push(new yr("contentDisposition",null,!0)),n.push(new yr("contentEncoding",null,!0)),n.push(new yr("contentLanguage",null,!0)),n.push(new yr("contentType",null,!0)),n.push(new yr("metadata","customMetadata",!0)),Dt=n,Dt}function Ga(n,e,t){const s=Or(e);return null===s?null:function(n,e,t){const s={type:"file"},u=t.length;for(let d=0;d<u;d++){const m=t[d];s[m.local]=m.xform(s,e[m.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const d=new Kn(n.bucket,n.fullPath);return e._makeStorageReference(d)}})}(s,n),s}(n,s,t)}function Cu(n,e){const t={},s=e.length;for(let u=0;u<s;u++){const d=e[u];d.writable&&(t[d.server]=n[d.local])}return JSON.stringify(t)}const qe="prefixes";class ks{constructor(e,t,s,u){this.url=e,this.method=t,this.handler=s,this.timeout=u,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _r(n){if(!n)throw eo()}function ei(n,e){return function(s,u){const d=Ga(n,u,e);return _r(null!==d),d}}function _a(n){return function(t,s){let u;return u=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new At("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new At("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new At("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new At("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):s,u.serverResponse=s.serverResponse,u}}function bo(n){const e=_a(n);return function(s,u){let d=e(s,u);return 404===s.getStatus()&&(d=function(n){return new At("object-not-found","Object '"+n+"' does not exist.")}(n.path)),d.serverResponse=u.serverResponse,d}}function Wa(n,e,t){const u=tr(e.fullServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,C=new ks(u,"GET",ei(n,t),m);return C.errorHandler=bo(e),C}function wo(n,e,t,s,u){const d={};d.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(d.delimiter=t),s&&(d.pageToken=s),u&&(d.maxResults=u);const C=tr(e.bucketOnlyServerUrl(),n.host,n._protocol),F=n.maxOperationRetryTime,q=new ks(C,"GET",function(n,e){return function(s,u){const d=function(n,e,t){const s=Or(t);return null===s?null:function(n,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[qe])for(const u of t[qe]){const d=u.replace(/\/$/,""),m=n._makeStorageReference(new Kn(e,d));s.prefixes.push(m)}if(t.items)for(const u of t.items){const d=n._makeStorageReference(new Kn(e,u.name));s.items.push(d)}return s}(n,e,s)}(n,e,u);return _r(null!==d),d}}(n,e.bucket),F);return q.urlParams=d,q.errorHandler=_a(e),q}function ti(n,e,t){const u=tr(e.fullServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,C=new ks(u,"GET",function(n,e){return function(s,u){const d=Ga(n,u,e);return _r(null!==d),function(n,e,t,s){const u=Or(e);if(null===u||!cs(u.downloadTokens))return null;const d=u.downloadTokens;if(0===d.length)return null;const m=encodeURIComponent;return d.split(",").map(F=>{const Q=n.fullPath;return tr("/b/"+m(n.bucket)+"/o/"+m(Q),t,s)+Ho({alt:"media",token:F})})[0]}(d,u,n.host,n._protocol)}}(n,t),m);return C.errorHandler=bo(e),C}function di(n,e,t,s){const d=tr(e.fullServerUrl(),n.host,n._protocol),C=Cu(t,s),F=n.maxOperationRetryTime,q=new ks(d,"PATCH",ei(n,s),F);return q.headers={"Content-Type":"application/json; charset=utf-8"},q.body=C,q.errorHandler=bo(e),q}function tc(n,e){const s=tr(e.fullServerUrl(),n.host,n._protocol),C=new ks(s,"DELETE",function(x,F){},n.maxOperationRetryTime);return C.successCodes=[200,204],C.errorHandler=bo(e),C}function Ls(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),s}class Za{constructor(e,t,s,u){this.current=e,this.total=t,this.finalized=!!s,this.metadata=u||null}}function nc(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(u){_r(!1)}return _r(!!t&&-1!==(e||["active"]).indexOf(t)),t}const rc={STATE_CHANGED:"state_changed"},Gr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ea(n){switch(n){case"running":case"pausing":case"canceling":return Gr.RUNNING;case"paused":return Gr.PAUSED;case"success":return Gr.SUCCESS;case"canceled":return Gr.CANCELED;case"error":default:return Gr.ERROR}}class zo{constructor(e,t,s){if("function"==typeof e||null!=t||null!=s)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=s?s:void 0;else{const d=e;this.next=d.next,this.error=d.error,this.complete=d.complete}}}function Io(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Ya{constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=no(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=u=>{this._request=void 0,this._chunkMultiplier=1,u._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=u,this._transition("error"))},this._metadataErrorHandler=u=>{this._request=void 0,u._codeEquals("canceled")?this.completeTransitions_():(this._error=u,this._transition("error"))},this._promise=new Promise((u,d)=>{this._resolve=u,this._reject=d,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const s=function(n,e,t,s,u){const d=e.bucketOnlyServerUrl(),m=Ls(e,s,u),C={name:m.fullPath},x=tr(d,n.host,n._protocol),q={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":m.contentType,"Content-Type":"application/json; charset=utf-8"},Q=Cu(m,t),De=new ks(x,"POST",function(et){let ft;nc(et);try{ft=et.getResponseHeader("X-Goog-Upload-URL")}catch(xt){_r(!1)}return _r(cs(ft)),ft},n.maxUploadRetryTime);return De.urlParams=C,De.headers=q,De.body=Q,De.errorHandler=_a(e),De}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),u=this._ref.storage._makeRequest(s,e,t);this._request=u,u.getPromise().then(d=>{this._request=void 0,this._uploadUrl=d,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const u=function(n,e,t,s){const x=new ks(t,"POST",function(F){const q=nc(F,["active","final"]);let Q=null;try{Q=F.getResponseHeader("X-Goog-Upload-Size-Received")}catch(me){_r(!1)}Q||_r(!1);const ge=Number(Q);return _r(!isNaN(ge)),new Za(ge,s.size(),"final"===q)},n.maxUploadRetryTime);return x.headers={"X-Goog-Upload-Command":"query"},x.errorHandler=_a(e),x}(this._ref.storage,this._ref._location,e,this._blob),d=this._ref.storage._makeRequest(u,t,s);this._request=d,d.getPromise().then(m=>{m=m,this._request=void 0,this._updateProgress(m.current),this._needToFetchStatus=!1,m.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Za(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((u,d)=>{let m;try{m=function(n,e,t,s,u,d,m,C){const x=new Za(0,0);if(m?(x.current=m.current,x.total=m.total):(x.current=0,x.total=s.size()),s.size()!==x.total)throw new At("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const F=x.total-x.current;let q=F;u>0&&(q=Math.min(q,u));const Q=x.current,De={"X-Goog-Upload-Command":q===F?"upload, finalize":"upload","X-Goog-Upload-Offset":`${x.current}`},et=s.slice(Q,Q+q);if(null===et)throw Hi();const Ln=new ks(t,"POST",function(kt,cr){const ki=nc(kt,["active","final"]),kg=x.current+q,Kf=s.size();let Qy;return Qy="final"===ki?ei(e,d)(kt,cr):null,new Za(kg,Kf,"final"===ki,Qy)},e.maxUploadRetryTime);return Ln.headers=De,Ln.body=et.uploadData(),Ln.progressCallback=C||null,Ln.errorHandler=_a(n),Ln}(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(x){return this._error=x,void this._transition("error")}const C=this._ref.storage._makeRequest(m,u,d);this._request=C,C.getPromise().then(x=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(x.current),x.finalized?(this._metadata=x.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=Wa(this._ref.storage,this._ref._location,this._mappings),u=this._ref.storage._makeRequest(s,e,t);this._request=u,u.getPromise().then(d=>{this._request=void 0,this._metadata=d,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=function(n,e,t,s,u){const d=e.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"},x=function(){let Ln="";for(let kt=0;kt<2;kt++)Ln+=Math.random().toString().slice(2);return Ln}();m["Content-Type"]="multipart/related; boundary="+x;const F=Ls(e,s,u),q=Cu(F,t),me=on.getBlob("--"+x+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+q+"\r\n--"+x+"\r\nContent-Type: "+F.contentType+"\r\n\r\n",s,"\r\n--"+x+"--");if(null===me)throw Hi();const De={name:F.fullPath},et=tr(d,n.host,n._protocol),xt=n.maxUploadRetryTime,Mn=new ks(et,"POST",ei(n,t),xt);return Mn.urlParams=De,Mn.headers=m,Mn.body=me.uploadData(),Mn.errorHandler=_a(e),Mn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),u=this._ref.storage._makeRequest(s,e,t);this._request=u,u.getPromise().then(d=>{this._request=void 0,this._metadata=d,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=ga(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ea(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,u){const d=new zo(t||void 0,s||void 0,u||void 0);return this._addObserver(d),()=>{this._removeObserver(d)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ea(this._state)){case Gr.SUCCESS:Io(this._resolve.bind(null,this.snapshot))();break;case Gr.CANCELED:case Gr.ERROR:Io(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ea(this._state)){case Gr.RUNNING:case Gr.PAUSED:e.next&&Io(e.next.bind(e,this.snapshot))();break;case Gr.SUCCESS:e.complete&&Io(e.complete.bind(e))();break;case Gr.CANCELED:case Gr.ERROR:e.error&&Io(e.error.bind(e,this._error))();break;default:e.error&&Io(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wo{constructor(e,t){this._service=e,this._location=t instanceof Kn?t:Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wo(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wi(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Kn(this._location.bucket,e);return new Wo(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Bo(e)}}function hi(n,e,t){return qi.apply(this,arguments)}function qi(){return(qi=(0,Se.Z)(function*(n,e,t){const u=yield Bn(n,{pageToken:t});e.prefixes.push(...u.prefixes),e.items.push(...u.items),null!=u.nextPageToken&&(yield hi(n,e,u.nextPageToken))})).apply(this,arguments)}function Bn(n,e){return ls.apply(this,arguments)}function ls(){return(ls=(0,Se.Z)(function*(n,e){null!=e&&"number"==typeof e.maxResults&&$o("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=wo(n.storage,n._location,"/",t.pageToken,t.maxResults);return(yield n.storage.makeRequestWithTokens(s)).getPromise()})).apply(this,arguments)}function ic(){return(ic=(0,Se.Z)(function*(n){n._throwIfRoot("getMetadata");const e=Wa(n.storage,n._location,no());return(yield n.storage.makeRequestWithTokens(e)).getPromise()})).apply(this,arguments)}function vr(){return(vr=(0,Se.Z)(function*(n,e){n._throwIfRoot("updateMetadata");const t=di(n.storage,n._location,e,no());return(yield n.storage.makeRequestWithTokens(t)).getPromise()})).apply(this,arguments)}function Do(){return(Do=(0,Se.Z)(function*(n){n._throwIfRoot("getDownloadURL");const e=ti(n.storage,n._location,no());return(yield n.storage.makeRequestWithTokens(e)).getPromise().then(t=>{if(null===t)throw Xu();return t})})).apply(this,arguments)}function Ko(){return(Ko=(0,Se.Z)(function*(n){n._throwIfRoot("deleteObject");const e=tc(n.storage,n._location);return(yield n.storage.makeRequestWithTokens(e)).getPromise()})).apply(this,arguments)}function io(n,e){const t=function(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),s=new Kn(n._location.bucket,t);return new Wo(n.storage,s)}function so(n,e){if(n instanceof Yn){const t=n;if(null==t._bucket)throw new At("no-default-bucket","No default bucket found. Did you set the '"+gr+"' property when initializing the app?");const s=new Wo(t,t._bucket);return null!=e?so(s,e):s}return void 0!==e?io(n,e):n}function To(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Yn)return function(n,e){return new Wo(n,e)}(n,e);throw ci("To use ref(service, url), the first argument must be a Storage instance.")}return so(n,e)}function oc(n,e){const t=null==e?void 0:e[gr];return null==t?null:Kn.makeFromBucketSpec(t,n)}class Yn{constructor(e,t,s,u,d,m){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._pool=u,this._url=d,this._firebaseVersion=m,this._bucket=null,this._host=Bi,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=d?Kn.makeFromBucketSpec(d,this._host):oc(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Kn.makeFromBucketSpec(this._url,e):oc(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$o("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$o("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Se.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const s=yield t.getToken();if(null!==s)return s.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Se.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wo(this,e)}_makeRequest(e,t,s){if(this._deleted)return new tl(wu());{const u=function(n,e,t,s,u,d){const m=Ho(n.urlParams),C=n.url+m,x=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(x,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(x,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(x,d),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(x,s),new Ei(C,n.method,x,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,u)}(e,this._appId,t,s,this._pool,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e){var t=this;return(0,Se.Z)(function*(){const[s,u]=yield Promise.all([t._getAuthToken(),t._getAppCheckToken()]);return t._makeRequest(e,s,u)})()}}const ds="@firebase/storage";function ac(n,e){return To(n=(0,Et.m9)(n),e)}(0,pr._registerComponent)(new jr.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),u=n.getProvider("app-check-internal");return new Yn(t,s,u,new jo,e,pr.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,pr.registerVersion)(ds,"0.8.4",""),(0,pr.registerVersion)(ds,"0.8.4","esm2017");class Xa{constructor(e,t,s){this._delegate=e,this.task=t,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ci{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Xa(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(s=>{if(e)return e(new Xa(s,this,this._ref))},t)}on(e,t,s,u){let d;return t&&(d="function"==typeof t?m=>t(new Xa(m,this,this._ref)):{next:t.next?m=>t.next(new Xa(m,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,d,s||void 0,u||void 0)}}class Ru{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new qr(e,this._service))}get items(){return this._delegate.items.map(e=>new qr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qr{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return io(n,e)}(this._delegate,e);return new qr(t,this.storage)}get root(){return new qr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new qr(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Ci(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ya(n,new on(e),t)}(n=(0,Et.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=st.RAW,s){this._throwIfRoot("putString");const u=ht(t,e),d=Object.assign({},s);return null==d.contentType&&null!=u.contentType&&(d.contentType=u.contentType),new Ci(new Ya(this._delegate,new on(u.data,!0),d),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return hi(n,e).then(()=>e)}(n=(0,Et.m9)(n))}(this._delegate).then(e=>new Ru(e,this.storage))}list(e){return function(n,e){return Bn(n=(0,Et.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ru(t,this.storage))}getMetadata(){return function(n){return function(n){return ic.apply(this,arguments)}(n=(0,Et.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){return vr.apply(this,arguments)}(n=(0,Et.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return function(n){return Do.apply(this,arguments)}(n=(0,Et.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){return Ko.apply(this,arguments)}(n=(0,Et.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Bo(e)}}class ea{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(oo(e))throw ci("ref() expected a child path but got a URL, use refFromURL instead.");return new qr(ac(this._delegate,e),this)}refFromURL(e){if(!oo(e))throw ci("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kn.makeFromUrl(e,this._delegate.host)}catch(t){throw ci("refFromUrl() expected a valid full URL but got an invalid one.")}return new qr(ac(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,s={}){!function(n,e,t,s={}){!function(n,e,t,s={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:u}=s;u&&(n._overrideAuthToken="string"==typeof u?u:(0,Et.Sg)(u,n.app.options.projectId))}(n,e,t,s)}(this._delegate,e,t,s)}}function oo(n){return/^[A-Za-z]+:\/\//.test(n)}function yh(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),s=n.getProvider("storage").getImmediate({identifier:e});return new ea(t,s)}!function(n){const e={TaskState:Gr,TaskEvent:rc,StringFormat:st,Storage:ea,Reference:qr};n.INTERNAL.registerComponent(new jr.wA("storage-compat",yh,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.4")}(us.Z),U(2329);var or=U(5601);const ao=new Map,uc={activated:!1,tokenObservers:[]},_h={initialized:!1,enabled:!1};function Zi(n){return ao.get(n)||uc}function Us(n,e){ao.set(n,e)}function Qn(){return _h}class rd{constructor(e,t,s,u,d){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=u,this.upperBound=d,this.pending=null,this.nextErrorWaitInterval=u,u>d)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Se.Z)(function*(){t.stop();try{t.pending=new Et.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new Et.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ki=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function nu(n){if(!Zi(n).activated)throw Ki.create("use-before-activation",{appName:n.name})}function ru(n,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,Se.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});u&&(s["X-Firebase-Client"]=u.getPlatformInfoString());const d={method:"POST",body:JSON.stringify(e),headers:s};let m,C;try{m=yield fetch(n,d)}catch(Q){throw Ki.create("fetch-network-error",{originalErrorMessage:Q.message})}if(200!==m.status)throw Ki.create("fetch-status-error",{httpStatus:m.status});try{C=yield m.json()}catch(Q){throw Ki.create("fetch-parse-error",{originalErrorMessage:Q.message})}const x=C.ttl.match(/^([\d.]+)(s)$/);if(!x||!x[2]||isNaN(Number(x[1])))throw Ki.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const F=1e3*Number(x[1]),q=Date.now();return{token:C.attestationToken,expireTimeMillis:q+F,issuedAtTimeMillis:q}})).apply(this,arguments)}function cl(n,e){const{projectId:t,appId:s,apiKey:u}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${u}`,body:{debug_token:e}}}const Pu="firebase-app-check-store";let Ii=null;function uo(){return Ii||(Ii=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var u;e(Ki.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},t.onupgradeneeded=s=>{const u=s.target.result;switch(s.oldVersion){case 0:u.createObjectStore(Pu,{keyPath:"compositeKey"})}}}catch(t){e(Ki.create("storage-open",{originalErrorMessage:t.message}))}}),Ii)}function dl(){return(dl=(0,Se.Z)(function*(n,e){const s=(yield uo()).transaction(Pu,"readwrite"),d=s.objectStore(Pu).put({compositeKey:n,value:e});return new Promise((m,C)=>{d.onsuccess=x=>{m()},s.onerror=x=>{var F;C(Ki.create("storage-set",{originalErrorMessage:null===(F=x.target.error)||void 0===F?void 0:F.message}))}})})).apply(this,arguments)}const M=new or.Yd("@firebase/app-check");function fe(n,e){return(0,Et.hl)()?function(n,e){return function(n,e){return dl.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{M.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mt(){return Qn().enabled}function dt(){return ln.apply(this,arguments)}function ln(){return(ln=(0,Se.Z)(function*(){const n=Qn();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ni={error:"UNKNOWN_ERROR"};function Di(n){return Et.US.encodeString(JSON.stringify(n),!1)}function kr(n){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,Se.Z)(function*(n,e=!1){const t=n.app;nu(t);const s=Zi(t);let d,m,u=s.token;if(!u){const C=yield s.cachedTokenPromise;C&&iu(C)&&(u=C,Us(t,Object.assign(Object.assign({},s),{token:u})),na(t,{token:u.token}))}if(!e&&u&&iu(u))return{token:u.token};if(mt()){const C=yield ru(cl(t,yield dt()),n.platformLoggerProvider);return yield fe(t,C),Us(t,Object.assign(Object.assign({},s),{token:C})),{token:C.token}}try{u=yield s.provider.getToken()}catch(C){M.error(C),d=C}return u?(m={token:u.token},Us(t,Object.assign(Object.assign({},s),{token:u})),yield fe(t,u)):m=ad(d),na(t,m),m})).apply(this,arguments)}function Qi(n,e){const t=Zi(n),s=t.tokenObservers.filter(u=>u.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Us(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function na(n,e){const t=Zi(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(u){}}function iu(n){return n.expireTimeMillis-Date.now()>0}function ad(n){return{token:Di(ni),error:n}}class I0{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Zi(this.app);for(const t of e)Qi(this.app,t.next);return Promise.resolve()}}const Ch="app-check-internal";(0,pr._registerComponent)(new jr.wA("app-check",n=>function(n,e){return new I0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ch).initialize()})),(0,pr._registerComponent)(new jr.wA(Ch,n=>function(n){return{getToken:e=>kr(n,e),addTokenListener:e=>function(n,e,t,s){const{app:u}=n,d=Zi(u),m={next:t,error:s,type:e},C=Object.assign(Object.assign({},d),{tokenObservers:[...d.tokenObservers,m]});if(!C.tokenRefresher){const x=function(n){const{app:e}=n;return new rd((0,Se.Z)(function*(){let s;if(s=Zi(e).token?yield kr(n,!0):yield kr(n),s.error)throw s.error}),()=>!0,()=>{const t=Zi(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n);C.tokenRefresher=x}if(!C.tokenRefresher.isRunning()&&d.isTokenAutoRefreshEnabled&&C.tokenRefresher.start(),d.token&&iu(d.token)){const x=d.token;Promise.resolve().then(()=>t({token:x.token})).catch(()=>{})}else null==d.token&&d.cachedTokenPromise.then(x=>{x&&iu(x)&&t({token:x.token})}).catch(()=>{});Us(u,C)}(n,"INTERNAL",e),removeTokenListener:e=>Qi(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pr.registerVersion)("@firebase/app-check","0.4.2");class gl{constructor(){return(0,Nt.vb)("app-check")}}"undefined"!=typeof window&&window;var P0=U(7841);function Dh(n){const e=function(n){return new mn.y(e=>{const t=m=>e.next(m);t(n.snapshot);const d=n.on("state_changed",t);return n.then(m=>{t(m),e.complete()},m=>{t(n.snapshot),(m=>{e.error(m)})(m)}),function(){d()}}).pipe(function(n,e=Ui.P){return t=>t.lift(new Br(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,hn.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function yl(n){return{getDownloadURL:()=>(0,Rr.of)(void 0).pipe(Nt.fc,(0,qn.w)(()=>n.getDownloadURL()),Nt.iC),getMetadata:()=>(0,Rr.of)(void 0).pipe(Nt.fc,(0,qn.w)(()=>n.getMetadata()),Nt.iC),delete:()=>(0,bt.D)(n.delete()),child:e=>yl(n.child(e)),updateMetadata:e=>(0,bt.D)(n.updateMetadata(e)),put:(e,t)=>Dh(n.put(e,t)),putString:(e,t,s)=>Dh(n.putString(e,t,s)),list:e=>(0,bt.D)(n.list(e)),listAll:()=>(0,bt.D)(n.listAll())}}const sp=new f.OlP("angularfire2.storageBucket"),Bg=new f.OlP("angularfire2.storage.maxUploadRetryTime"),fc=new f.OlP("angularfire2.storage.maxOperationRetryTime"),s_=new f.OlP("angularfire2.storage.use-emulator");let o_=(()=>{class n{constructor(t,s,u,d,m,C,x,F,q,Q){const ge=(0,Wt.on)(t,m,s);this.storage=(0,Wt.cc)(`${ge.name}.storage.${u}`,"AngularFireStorage",ge.name,()=>{const me=m.runOutsideAngular(()=>ge.storage(u||void 0)),De=q;return De&&me.useEmulator(...De),x&&me.setMaxUploadRetryTime(x),F&&me.setMaxOperationRetryTime(F),me},[x,F])}ref(t){return yl(this.storage.ref(t))}refFromURL(t){return yl(this.storage.refFromURL(t))}upload(t,s,u){return yl(this.storage.ref(t)).put(s,u)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wt.Dh),f.LFG(Wt.xv,8),f.LFG(sp,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Nt.HU),f.LFG(Bg,8),f.LFG(fc,8),f.LFG(s_,8),f.LFG(gl,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),u_=(()=>{class n{constructor(){P0.Z.registerVersion("angularfire",Nt.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[o_],imports:[a_]}),n})();var fs=U(4363),pc=U(9796),Th=U(1555);function Ah(n,e){return new mn.y(t=>{const s=n.length;if(0===s)return void t.complete();const u=new Array(s);let d=0,m=0;for(let C=0;C<s;C++){const x=(0,bt.D)(n[C]);let F=!1;t.add(x.subscribe({next:q=>{F||(F=!0,m++),u[C]=q},error:q=>t.error(q),complete:()=>{d++,(d===s||!F)&&(m===s&&t.next(e?e.reduce((q,Q,ge)=>(q[Q]=u[ge],q),{}):u),t.complete())}}))}})}let Sh=(()=>{class n{constructor(t,s){this._renderer=t,this._elementRef=s,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(t,s){this._renderer.setProperty(this._elementRef.nativeElement,t,s)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),gc=(()=>{class n extends Sh{}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Aa=new f.OlP("NgValueAccessor"),xh={provide:Aa,useExisting:(0,f.Gpc)(()=>op),multi:!0};let op=(()=>{class n extends gc{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,s){1&t&&f.NdJ("change",function(d){return s.onChange(d.target.checked)})("blur",function(){return s.onTouched()})},features:[f._Bn([xh]),f.qOj]}),n})();const l_={provide:Aa,useExisting:(0,f.Gpc)(()=>Rh),multi:!0},h_=new f.OlP("CompositionEventMode");let Rh=(()=>{class n extends Sh{constructor(t,s,u){super(t,s),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=(0,T.q)()?(0,T.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(h_,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,s){1&t&&f.NdJ("input",function(d){return s._handleInput(d.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(d){return s._compositionEnd(d.target.value)})},features:[f._Bn([l_]),f.qOj]}),n})();function ou(n){return null==n||0===n.length}function Fu(n){return null!=n&&"number"==typeof n.length}const Ti=new f.OlP("NgValidators"),Ai=new f.OlP("NgAsyncValidators"),mc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Tn{static min(e){return ap(e)}static max(e){return up(e)}static required(e){return Nh(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return ou(n.value)||mc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>ou(e.value)||!Fu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>Fu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return yc;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),s=>{if(ou(s.value))return null;const u=s.value;return e.test(u)?null:{pattern:{requiredPattern:t,actualValue:u}}}}(e)}static nullValidator(e){return null}static compose(e){return lp(e)}static composeAsync(e){return dp(e)}}function ap(n){return e=>{if(ou(e.value)||ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function up(n){return e=>{if(ou(e.value)||ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Nh(n){return ou(n.value)?{required:!0}:null}function yc(n){return null}function g_(n){return null!=n}function cp(n){const e=(0,f.QGY)(n)?(0,bt.D)(n):n;return(0,f.CqO)(e),e}function dd(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function jg(n,e){return e.map(t=>t(n))}function Hg(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function lp(n){if(!n)return null;const e=n.filter(g_);return 0==e.length?null:function(t){return dd(jg(t,e))}}function vl(n){return null!=n?lp(Hg(n)):null}function dp(n){if(!n)return null;const e=n.filter(g_);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,pc.k)(e))return Ah(e,null);if((0,Th.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ah(t.map(s=>e[s]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Ah(n=1===n.length&&(0,pc.k)(n[0])?n[0]:n,null).pipe((0,hn.U)(t=>e(...t)))}return Ah(n,null)}(jg(t,e).map(cp)).pipe((0,hn.U)(dd))}}function El(n){return null!=n?dp(Hg(n)):null}function Ph(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ir(n){return n._rawValidators}function hp(n){return n._rawAsyncValidators}function fp(n){return n?Array.isArray(n)?n:[n]:[]}function Lu(n,e){return Array.isArray(n)?n.includes(e):n===e}function ps(n,e){const t=fp(e);return fp(n).forEach(u=>{Lu(t,u)||t.push(u)}),t}function bl(n,e){return fp(e).filter(t=>!Lu(n,t))}let pp=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=vl(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=El(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,s){return!!this.control&&this.control.hasError(t,s)}getError(t,s){return this.control?this.control.getError(t,s):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})(),gs=(()=>{class n extends pp{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();class Sa extends pp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kh{constructor(e){this._cd=e}is(e){var t,s,u;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(u=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===u?void 0:u[e])}}let Vu=(()=>{class n extends kh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Sa,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,s){2&t&&f.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[f.qOj]}),n})(),ar=(()=>{class n extends kh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gs,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,s){2&t&&f.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))("ng-submitted",s.is("submitted"))},features:[f.qOj]}),n})();function Il(n,e){return[...e.path,n]}function _c(n,e){pd(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function(n,e){const t=(s,u)=>{e.valueAccessor.writeValue(s),u&&e.viewToModelUpdate(s)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=s=>{e.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fh(n,e,t=!0){const s=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(s),e.valueAccessor.registerOnTouched(s)),_(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pd(n,e){const t=ir(n);null!==e.validator?n.setValidators(Ph(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const s=hp(n);null!==e.asyncValidator?n.setAsyncValidators(Ph(s,e.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const u=()=>n.updateValueAndValidity();Lh(e._rawValidators,u),Lh(e._rawAsyncValidators,u)}function _(n,e){let t=!1;if(null!==n){if(null!==e.validator){const u=ir(n);if(Array.isArray(u)&&u.length>0){const d=u.filter(m=>m!==e.validator);d.length!==u.length&&(t=!0,n.setValidators(d))}}if(null!==e.asyncValidator){const u=hp(n);if(Array.isArray(u)&&u.length>0){const d=u.filter(m=>m!==e.asyncValidator);d.length!==u.length&&(t=!0,n.setAsyncValidators(d))}}}const s=()=>{};return Lh(e._rawValidators,s),Lh(e._rawAsyncValidators,s),t}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Lr(n,e){if(!e)return null;let t,s,u;return Array.isArray(e),e.forEach(d=>{d.constructor===Rh?t=d:function(n){return Object.getPrototypeOf(n.constructor)===gc}(d)?s=d:u=d}),u||s||t||null}function Si(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const vc="VALID",Dl="INVALID",Ec="PENDING",bc="DISABLED";function gd(n){return(Bu(n)?n.validators:n)||null}function gp(n){return Array.isArray(n)?vl(n):n||null}function md(n,e){return(Bu(e)?e.asyncValidators:n)||null}function mp(n){return Array.isArray(n)?El(n):n||null}function Bu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $s{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=gp(this._rawValidators),this._composedAsyncValidatorFn=mp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vc}get invalid(){return this.status===Dl}get pending(){return this.status==Ec}get disabled(){return this.status===bc}get enabled(){return this.status!==bc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=gp(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=mp(e)}addValidators(e){this.setValidators(ps(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ps(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(bl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(bl(e,this._rawAsyncValidators))}hasValidator(e){return Lu(this._rawValidators,e)}hasAsyncValidator(e){return Lu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ec,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bc,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vc,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vc||this.status===Ec)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bc:vc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ec,this._hasOwnPendingAsyncValidator=!0;const t=cp(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let s=n;return e.forEach(u=>{s=s instanceof yp?s.controls.hasOwnProperty(u)?s.controls[u]:null:s instanceof Yg&&s.at(u)||null}),s}(this,e)}getError(e,t){const s=t?this.get(t):this;return s&&s.errors?s.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?bc:this.errors?Dl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ec)?Ec:this._anyControlsHaveStatus(Dl)?Dl:vc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wc extends $s{constructor(e=null,t,s){super(gd(t),md(s,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Si(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Si(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class yp extends $s{constructor(e,t,s){super(gd(t),md(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,s={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((s,u)=>{s.reset(e[u],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,s)=>(e[s]=t instanceof wc?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,s)=>!!s._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const s=this.controls[t];s&&e(s,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const s=this.controls[t];if(this.contains(t)&&e(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,s)=>((t.enabled||this.disabled)&&(e[s]=t.value),e))}_reduceChildren(e,t){let s=e;return this._forEachChild((u,d)=>{s=t(s,u,d)}),s}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class Yg extends $s{constructor(e,t,s){super(gd(t),md(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,s={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((s,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((s,u)=>{this.at(u)&&this.at(u).patchValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((s,u)=>{s.reset(e[u],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof wc?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,s)=>!!s._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,s)=>{e(t,s)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const L0={provide:Sa,useExisting:(0,f.Gpc)(()=>vp)},_d=(()=>Promise.resolve(null))();let vp=(()=>{class n extends Sa{constructor(t,s,u,d){super(),this.control=new wc,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(s),this._setAsyncValidators(u),this.valueAccessor=Lr(0,d)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),vt(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Il(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_c(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){_d.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const s=t.isDisabled.currentValue,u=""===s||s&&"false"!==s;_d.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gs,9),f.Y36(Ti,10),f.Y36(Ai,10),f.Y36(Aa,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([L0]),f.qOj,f.TTD]}),n})(),Xg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const WI={provide:Aa,useExisting:(0,f.Gpc)(()=>Ep),multi:!0};let Ep=(()=>{class n extends gc{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=s=>{t(""==s?null:parseFloat(s))}}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,s){1&t&&f.NdJ("input",function(d){return s.onChange(d.target.value)})("blur",function(){return s.onTouched()})},features:[f._Bn([WI]),f.qOj]}),n})(),V0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const bp=new f.OlP("NgModelWithFormControlWarning"),QI={provide:gs,useExisting:(0,f.Gpc)(()=>wp)};let wp=(()=>{class n extends gs{constructor(t,s){super(),this.validators=t,this.asyncValidators=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(s)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const s=this.form.get(t.path);return _c(s,t),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),s}getControl(t){return this.form.get(t.path)}removeControl(t){Fh(t.control||null,t,!1),Si(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,s){this.form.get(t.path).setValue(s)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const s=t.control;"submit"===s.updateOn&&s._pendingChange&&(t.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const s=t.control,u=this.form.get(t.path);s!==u&&(Fh(s||null,t),u instanceof wc&&(_c(u,t),t.control=u))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const s=this.form.get(t.path);(function(n,e){pd(n,e)})(s,t),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const s=this.form.get(t.path);s&&function(n,e){return _(n,e)}(s,t)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pd(this.form,this),this._oldForm&&_(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ti,10),f.Y36(Ai,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,s){1&t&&f.NdJ("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([QI]),f.qOj,f.TTD]}),n})();const JI={provide:Sa,useExisting:(0,f.Gpc)(()=>Ed)};let Ed=(()=>{class n extends Sa{constructor(t,s,u,d,m){super(),this._ngModelWarningConfig=m,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(s),this._setAsyncValidators(u),this.valueAccessor=Lr(0,d)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),vt(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Il(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gs,13),f.Y36(Ti,10),f.Y36(Ai,10),f.Y36(Aa,10),f.Y36(bp,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([JI]),f.qOj,f.TTD]}),n._ngModelWarningSentOnce=!1,n})();const XI={provide:Aa,useExisting:(0,f.Gpc)(()=>Cp),multi:!0};function E_(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Cp=(()=>{class n extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=this._getOptionId(t);null==s&&this.setProperty("selectedIndex",-1);const u=E_(s,t);this.setProperty("value",u)}registerOnChange(t){this.onChange=s=>{this.value=this._getOptionValue(s),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s),t))return s;return null}_getOptionValue(t){const s=function(n){return n.split(":")[0]}(t);return this._optionMap.has(s)?this._optionMap.get(s):t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,s){1&t&&f.NdJ("change",function(d){return s.onChange(d.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([XI]),f.qOj]}),n})(),rm=(()=>{class n{constructor(t,s,u){this._element=t,this._renderer=s,this._select=u,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(E_(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Cp,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const H0={provide:Aa,useExisting:(0,f.Gpc)(()=>Dp),multi:!0};function Ip(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Dp=(()=>{class n extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let s;if(this.value=t,Array.isArray(t)){const u=t.map(d=>this._getOptionId(d));s=(d,m)=>{d._setSelected(u.indexOf(m.toString())>-1)}}else s=(u,d)=>{u._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(t){this.onChange=s=>{const u=[];if(void 0!==s.selectedOptions){const d=s.selectedOptions;for(let m=0;m<d.length;m++){const C=d.item(m),x=this._getOptionValue(C.value);u.push(x)}}else{const d=s.options;for(let m=0;m<d.length;m++){const C=d.item(m);if(C.selected){const x=this._getOptionValue(C.value);u.push(x)}}}this.value=u,t(u)}}_registerOption(t){const s=(this._idCounter++).toString();return this._optionMap.set(s,t),s}_getOptionId(t){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s)._value,t))return s;return null}_getOptionValue(t){const s=function(n){return n.split(":")[0]}(t);return this._optionMap.has(s)?this._optionMap.get(s)._value:t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,s){1&t&&f.NdJ("change",function(d){return s.onChange(d.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([H0]),f.qOj]}),n})(),b_=(()=>{class n{constructor(t,s,u){this._element=t,this._renderer=s,this._select=u,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Ip(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Ip(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(Dp,9))},n.\u0275dir=f.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Vh=(()=>{class n{constructor(){this._validator=yc}handleChanges(t){if(this.inputName in t){const s=this.normalizeInput(t[this.inputName].currentValue);this._validator=this.createValidator(s),this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n}),n})();const tD={provide:Ti,useExisting:(0,f.Gpc)(()=>om),multi:!0};let om=(()=>{class n extends Vh{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>parseFloat(t),this.createValidator=t=>up(t)}ngOnChanges(t){this.handleChanges(t)}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,s){if(2&t){let u;f.uIk("max",null!==(u=s.max)&&void 0!==u?u:null)}},inputs:{max:"max"},features:[f._Bn([tD]),f.qOj,f.TTD]}),n})();const nD={provide:Ti,useExisting:(0,f.Gpc)(()=>w_),multi:!0};let w_=(()=>{class n extends Vh{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>parseFloat(t),this.createValidator=t=>ap(t)}ngOnChanges(t){this.handleChanges(t)}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=f.n5z(n)))(s||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,s){if(2&t){let u;f.uIk("min",null!==(u=s.min)&&void 0!==u?u:null)}},inputs:{min:"min"},features:[f._Bn([nD]),f.qOj,f.TTD]}),n})();const G0={provide:Ti,useExisting:(0,f.Gpc)(()=>Tp),multi:!0};let Tp=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Nh(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,s){2&t&&f.uIk("required",s.required?"":null)},inputs:{required:"required"},features:[f._Bn([G0])]}),n})(),K0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[V0]]}),n})(),Y0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[K0]}),n})(),Q0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[K0]}),n})(),aD=(()=>{class n{group(t,s=null){const u=this._reduceControls(t);let C,d=null,m=null;return null!=s&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(s)?(d=null!=s.validators?s.validators:null,m=null!=s.asyncValidators?s.asyncValidators:null,C=null!=s.updateOn?s.updateOn:void 0):(d=null!=s.validator?s.validator:null,m=null!=s.asyncValidator?s.asyncValidator:null)),new yp(u,{asyncValidators:m,updateOn:C,validators:d})}control(t,s,u){return new wc(t,s,u)}array(t,s,u){const d=t.map(m=>this._createControl(m));return new Yg(d,s,u)}_reduceControls(t){const s={};return Object.keys(t).forEach(u=>{s[u]=this._createControl(t[u])}),s}_createControl(t){return t instanceof wc||t instanceof yp||t instanceof Yg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n},token:n,providedIn:Q0}),n})();class D_{constructor(){}}class J0{constructor(e,t,s){this.eventLog=e,this.hora=t,this.usuario=s}}var bd=U(1917),ia=U(9761);function am(){return n=>n.lift(new uD)}class uD{call(e,t){return t.subscribe(new T_(e))}}class T_ extends Js.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var au=U(2145);class X0{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new S_(e,this.compare,this.keySelector))}}class S_ extends Js.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:u}=this;t=u?u(e):e}catch(u){return this.destination.error(u)}let s=!1;if(this.hasKey)try{const{compare:u}=this;s=u(this.key,t)}catch(u){return this.destination.error(u)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}var yt,x_=U(5435),JS=(U(4671),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{}),ys={},Uh=Uh||{},Kt=JS||self;function R_(){}function N_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Bh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var M_="closure_uid_"+(1e9*Math.random()>>>0),ex=0;function eb(n,e,t){return n.call.apply(n.bind,arguments)}function tb(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),n.apply(e,u)}}return function(){return n.apply(e,arguments)}}function _s(n,e,t){return(_s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eb:tb).apply(null,arguments)}function jh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Hs(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,u,d){for(var m=Array(arguments.length-2),C=2;C<arguments.length;C++)m[C-2]=arguments[C];return e.prototype[u].apply(s,m)}}function wd(){this.s=this.s,this.o=this.o}var nx={};wd.prototype.s=!1,wd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,M_)&&n[M_]||(n[M_]=++ex)}(this);delete nx[n]}},wd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},dD=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,u="string"==typeof n?n.split(""):n;for(let d=0;d<s;d++)d in u&&e.call(t,u[d],d,n)};function hD(n){return Array.prototype.concat.apply([],arguments)}function nb(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function O_(n){return/^[\s\xa0]*$/.test(n)}var co,fD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wr(n,e){return-1!=n.indexOf(e)}function Ap(n,e){return n<e?-1:n>e?1:0}e:{var P_=Kt.navigator;if(P_){var um=P_.userAgent;if(um){co=um;break e}}co=""}function cm(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function lm(n){const e={};for(const t in n)e[t]=n[t];return e}var rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ic(n,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)n[t]=s[t];for(let d=0;d<rb.length;d++)t=rb[d],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function dm(n){return dm[" "](n),n}dm[" "]=R_;var Dc,n,ix=Wr(co,"Opera"),Tl=Wr(co,"Trident")||Wr(co,"MSIE"),ib=Wr(co,"Edge"),hm=ib||Tl,sb=Wr(co,"Gecko")&&!(Wr(co.toLowerCase(),"webkit")&&!Wr(co,"Edge"))&&!(Wr(co,"Trident")||Wr(co,"MSIE"))&&!Wr(co,"Edge"),gD=Wr(co.toLowerCase(),"webkit")&&!Wr(co,"Edge");function $h(){var n=Kt.document;return n?n.documentMode:void 0}e:{var Sp="",Al=(n=co,sb?/rv:([^\);]+)(\)|;)/.exec(n):ib?/Edge\/([\d\.]+)/.exec(n):Tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gD?/WebKit\/(\S+)/.exec(n):ix?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Al&&(Sp=Al?Al[1]:""),Tl){var Cd=$h();if(null!=Cd&&Cd>parseFloat(Sp)){Dc=String(Cd);break e}}Dc=Sp}var Hh={};function mD(){return e=Hh,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=fD(String(Dc)).split("."),t=fD("9").split("."),s=Math.max(e.length,t.length);for(let m=0;0==n&&m<s;m++){var u=e[m]||"",d=t[m]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],0==u[0].length&&0==d[0].length)break;n=Ap(0==u[1].length?0:parseInt(u[1],10),0==d[1].length?0:parseInt(d[1],10))||Ap(0==u[2].length,0==d[2].length)||Ap(u[2],d[2]),u=u[3],d=d[3]}while(0==n)}return 0<=n}();var e}var F_=Kt.document&&Tl&&($h()||parseInt(Dc,10))||void 0,L_=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",R_,e),Kt.removeEventListener("test",R_,e)}catch(t){}return n}();function vs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sl(n,e){if(vs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(sb){e:{try{dm(e.nodeName);var u=!0;break e}catch(d){}u=!1}u||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:yD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sl.Z.h.call(this)}}vs.prototype.h=function(){this.defaultPrevented=!0},Hs(Sl,vs);var yD={2:"touch",3:"pen",4:"mouse"};Sl.prototype.h=function(){Sl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gh="closure_listenable_"+(1e6*Math.random()|0),sx=0;function ob(n,e,t,s,u){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=u,this.key=++sx,this.ca=this.fa=!1}function xp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pm(n){this.src=n,this.g={},this.h=0}function gm(n,e){var t=e.type;if(t in n.g){var d,s=n.g[t],u=lD(s,e);(d=0<=u)&&Array.prototype.splice.call(s,u,1),d&&(xp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function V_(n,e,t,s){for(var u=0;u<n.length;++u){var d=n[u];if(!d.ca&&d.listener==e&&d.capture==!!t&&d.ia==s)return u}return-1}pm.prototype.add=function(n,e,t,s,u){var d=n.toString();(n=this.g[d])||(n=this.g[d]=[],this.h++);var m=V_(n,e,s,u);return-1<m?(e=n[m],t||(e.fa=!1)):((e=new ob(e,this.src,d,!!s,u)).fa=t,n.push(e)),e};var U_="closure_lm_"+(1e6*Math.random()|0),lo={};function ab(n,e,t,s,u){if(s&&s.once)return _D(n,e,t,s,u);if(Array.isArray(e)){for(var d=0;d<e.length;d++)ab(n,e[d],t,s,u);return null}return t=H_(t),n&&n[Gh]?n.N(e,t,Bh(s)?!!s.capture:!!s,u):ub(n,e,t,!1,s,u)}function ub(n,e,t,s,u,d){if(!e)throw Error("Invalid event type");var m=Bh(u)?!!u.capture:!!u,C=mm(n);if(C||(n[U_]=C=new pm(n)),(t=C.add(e,t,s,m,d)).proxy)return t;if(s=function(){var e=j_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)L_||(u=m),void 0===u&&(u=!1),n.addEventListener(e.toString(),s,u);else if(n.attachEvent)n.attachEvent(lb(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function _D(n,e,t,s,u){if(Array.isArray(e)){for(var d=0;d<e.length;d++)_D(n,e[d],t,s,u);return null}return t=H_(t),n&&n[Gh]?n.O(e,t,Bh(s)?!!s.capture:!!s,u):ub(n,e,t,!0,s,u)}function B_(n,e,t,s,u){if(Array.isArray(e))for(var d=0;d<e.length;d++)B_(n,e[d],t,s,u);else s=Bh(s)?!!s.capture:!!s,t=H_(t),n&&n[Gh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=V_(d=n.g[e],t,s,u))&&(xp(d[t]),Array.prototype.splice.call(d,t,1),0==d.length&&(delete n.g[e],n.h--))):n&&(n=mm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=V_(e,t,s,u)),(t=-1<n?e[n]:null)&&cb(t))}function cb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gh])gm(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(lb(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=mm(e))?(gm(t,n),0==t.h&&(t.src=null,e[U_]=null)):xp(n)}}}function lb(n){return n in lo?lo[n]:lo[n]="on"+n}function j_(n,e){if(n.ca)n=!0;else{e=new Sl(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&cb(n),n=t.call(s,e)}return n}function mm(n){return(n=n[U_])instanceof pm?n:null}var $_="__closure_events_fn_"+(1e9*Math.random()>>>0);function H_(n){return"function"==typeof n?n:(n[$_]||(n[$_]=function(e){return n.handleEvent(e)}),n[$_])}function Ji(){wd.call(this),this.i=new pm(this),this.P=this,this.I=null}function Xi(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new vs(e,n);else if(e instanceof vs)e.target=e.target||n;else{var u=e;Ic(e=new vs(s,n),u)}if(u=!0,t)for(var d=t.length-1;0<=d;d--){var m=e.g=t[d];u=ym(m,s,!0,e)&&u}if(u=ym(m=e.g=n,s,!0,e)&&u,u=ym(m,s,!1,e)&&u,t)for(d=0;d<t.length;d++)u=ym(m=e.g=t[d],s,!1,e)&&u}function ym(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,d=0;d<e.length;++d){var m=e[d];if(m&&!m.ca&&m.capture==t){var C=m.listener,x=m.ia||m.src;m.fa&&gm(n.i,m),u=!1!==C.call(x,s)&&u}}return u&&!s.defaultPrevented}Hs(Ji,wd),Ji.prototype[Gh]=!0,Ji.prototype.removeEventListener=function(n,e,t,s){B_(this,n,e,t,s)},Ji.prototype.M=function(){if(Ji.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)xp(t[s]);delete n.g[e],n.h--}}this.I=null},Ji.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Ji.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var _m=Kt.JSON.stringify;function vD(){var n=CD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Rp,G_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new db,n=>n.reset());class db{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function bD(n){Kt.setTimeout(()=>{throw n},0)}function Ra(n,e){Rp||function(){var n=Kt.Promise.resolve(void 0);Rp=function(){n.then(hb)}}(),q_||(Rp(),q_=!0),CD.add(n,e)}var q_=!1,CD=new class{constructor(){this.h=this.g=null}add(e,t){const s=G_.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function hb(){for(var n;n=vD();){try{n.h.call(n.g)}catch(t){bD(t)}var e=G_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}q_=!1}function vm(n,e){Ji.call(this),this.h=n||1,this.g=e||Kt,this.j=_s(this.kb,this),this.l=Date.now()}function z_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function W_(n,e,t){if("function"==typeof n)t&&(n=_s(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_s(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function Em(n){n.g=W_(()=>{n.g=null,n.i&&(n.i=!1,Em(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hs(vm,Ji),(yt=vm.prototype).da=!1,yt.S=null,yt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xi(this,"tick"),this.da&&(z_(this),this.start()))}},yt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){vm.Z.M.call(this),z_(this),delete this.g};class ID extends wd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Em(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Np(n){wd.call(this),this.h=n,this.g={}}Hs(Np,wd);var Mp=[];function bm(n,e,t,s){Array.isArray(t)||(t&&(Mp[0]=t.toString()),t=Mp);for(var u=0;u<t.length;u++){var d=ab(e,t[u],s||n.handleEvent,!1,n.h||n);if(!d)break;n.g[d.key]=d}}function fb(n){cm(n.g,function(e,t){this.g.hasOwnProperty(t)&&cb(e)},n),n.g={}}function qh(){this.g=!0}function zh(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var d=u[0];if("noop"!=d&&"stop"!=d&&"close"!=d)for(var m=1;m<u.length;m++)u[m]=""}}}return _m(t)}catch(C){return e}}(n,t)+(s?" "+s:"")})}Np.prototype.M=function(){Np.Z.M.call(this),fb(this)},Np.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qh.prototype.Aa=function(){this.g=!1},qh.prototype.info=function(){};var Wh={},gb=null;function Op(){return gb=gb||new Ji}function Y_(n){vs.call(this,Wh.Ma,n)}function Zh(n){const e=Op();Xi(e,new Y_(e,n))}function Q_(n,e){vs.call(this,Wh.STAT_EVENT,n),this.stat=e}function Gs(n){const e=Op();Xi(e,new Q_(e,n))}function ju(n,e){vs.call(this,Wh.Na,n),this.size=e}function xl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}Wh.Ma="serverreachability",Hs(Y_,vs),Wh.STAT_EVENT="statevent",Hs(Q_,vs),Wh.Na="timingevent",Hs(ju,vs);var wm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mb={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function yb(){}function J_(){}yb.prototype.h=null;var Pp,Tc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Dd(){vs.call(this,"d")}function X_(){vs.call(this,"c")}function kp(){}function Fp(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Np(this),this.P=TD,this.W=new vm(n=hm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ev}function ev(){this.i=null,this.g="",this.h=!1}Hs(Dd,vs),Hs(X_,vs),Hs(kp,yb),kp.prototype.g=function(){return new XMLHttpRequest},kp.prototype.i=function(){return{}},Pp=new kp;var TD=45e3,Lp={},Cm={};function tv(n,e,t){n.K=1,n.v=Bp(uu(e)),n.s=t,n.U=!0,nv(n,null)}function nv(n,e){n.F=Date.now(),Vp(n),n.A=uu(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),ND(t.h,"t",s),n.C=0,t=n.l.H,n.h=new ev,n.g=vv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ID(_s(n.Ia,n,n.g),n.O)),bm(n.V,n.g,"readystatechange",n.gb),e=n.H?lm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Zh(1),function(n,e,t,s,u,d){n.info(function(){if(n.g)if(d)for(var m="",C=d.split("&"),x=0;x<C.length;x++){var F=C[x].split("=");if(1<F.length){var q=F[0];F=F[1];var Q=q.split("_");m=2<=Q.length&&"type"==Q[1]?m+(q+"=")+F+"&":m+(q+"=redacted&")}}else m=null;else m=d;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+m})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Td(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function rv(n,e,t){let u,s=!0;for(;!n.I&&n.C<t.length;){if(u=AD(n,t),u==Cm){4==e&&(n.o=4,Gs(14),s=!1),zh(n.j,n.m,null,"[Incomplete Response]");break}if(u==Lp){n.o=4,Gs(15),zh(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}zh(n.j,n.m,u,null),iv(n,u)}Td(n)&&u!=Cm&&u!=Lp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gs(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ml(e),e.L=!0,Gs(11))):(zh(n.j,n.m,t,"[Invalid Chunked Response]"),Sd(n),Up(n))}function AD(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Cm:(t=Number(e.substring(t,s)),isNaN(t)?Lp:(s+=1)+t>e.length?Cm:(e=e.substr(s,t),n.C=s+t,e))}function Vp(n){n.Y=Date.now()+n.P,Ad(n,n.P)}function Ad(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=xl(_s(n.eb,n),e)}function Im(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function Up(n){0==n.l.G||n.I||gv(n.l,n)}function Sd(n){Im(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,z_(n.W),fb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Sm(t.i,n)))if(t.I=n.N,!n.J&&Sm(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(F){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=xl(_s(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Wp(t),Od(t)}Nl(t),Gs(18)}if(1>=Cb(t.i)&&t.ka){try{t.ka()}catch(F){}t.ka=void 0}}else Ol(t,11)}else if((n.J||t.g==n)&&Wp(t),!O_(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let F=u[e];if(t.U=F[0],F=F[1],2==t.G)if("c"==F[0]){t.J=F[1],t.la=F[2];const q=F[3];null!=q&&(t.ma=q,t.h.info("VER="+t.ma));const Q=F[4];null!=Q&&(t.za=Q,t.h.info("SVER="+t.za));const ge=F[5];null!=ge&&"number"==typeof ge&&0<ge&&(t.K=s=1.5*ge,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const me=n.g;if(me){const De=me.g?me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(De){var d=s.i;!d.g&&(Wr(De,"spdy")||Wr(De,"quic")||Wr(De,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(xm(d,d.h),d.h=null))}if(s.D){const et=me.g?me.g.getResponseHeader("X-HTTP-Session-Id"):null;et&&(s.sa=et,Er(s.F,s.D,et))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var m=n;if((s=t).oa=_v(s,s.H?s.la:null,s.W),m.J){kD(s.i,m);var C=m,x=s.K;x&&C.setTimeout(x),C.B&&(Im(C),Vp(C)),s.g=m}else Fd(s);0<t.l.length&&Pc(t)}else"stop"!=F[0]&&"close"!=F[0]||Ol(t,7);else 3==t.G&&("stop"==F[0]||"close"==F[0]?"stop"==F[0]?Ol(t,7):Oc(t):"noop"!=F[0]&&t.j&&t.j.wa(F),t.A=0)}Zh(4)}catch(F){}}function sv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(N_(n)||"string"==typeof n)dD(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(N_(n)||"string"==typeof n){t=[];for(var s=n.length,u=0;u<s;u++)t.push(u)}else for(u in t=[],s=0,n)t[s++]=u;u=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(N_(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var d=0;d<u;d++)e.call(void 0,s[d],t&&t[d],n)}}function xd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof xd)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function ur(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];Ac(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var u={};for(t=e=0;e<n.g.length;)Ac(u,s=n.g[e])||(n.g[t++]=s,u[s]=1),e++;n.g.length=t}}function Ac(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(yt=Fp.prototype).setTimeout=function(n){this.P=n},yt.gb=function(n){n=n.target;const e=this.L;e&&3==Nc(n)?e.l():this.Ia(n)},yt.Ia=function(n){try{if(n==this.g)e:{const q=Nc(this.g);var e=this.g.Da();const Q=this.g.ba();if(!(3>q)&&(3!=q||hm||this.g&&(this.h.h||this.g.ga()||Sb(this.g)))){this.I||4!=q||7==e||Zh(8==e||0>=Q?3:2),Im(this);var t=this.g.ba();this.N=t;t:if(Td(this)){var s=Sb(this.g);n="";var u=s.length,d=4==Nc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Sd(this),Up(this);var m="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:d&&e==u-1});s.splice(0,u),this.h.g+=n,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==t,function(n,e,t,s,u,d,m){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+d+" "+m})}(this.j,this.u,this.A,this.m,this.X,q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var C,x=this.g;if((C=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O_(C)){var F=C;break t}}F=null}if(!(t=F)){this.i=!1,this.o=3,Gs(12),Sd(this),Up(this);break e}zh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iv(this,t)}this.U?(rv(this,q,m),hm&&this.i&&3==q&&(bm(this.V,this.W,"tick",this.fb),this.W.start())):(zh(this.j,this.m,m,null),iv(this,m)),4==q&&Sd(this),this.i&&!this.I&&(4==q?gv(this.l,this):(this.i=!1,Vp(this)))}else 400==t&&0<m.indexOf("Unknown SID")?(this.o=3,Gs(12)):(this.o=0,Gs(13)),Sd(this),Up(this)}}}catch(q){}},yt.fb=function(){if(this.g){var n=Nc(this.g),e=this.g.ga();this.C<e.length&&(Im(this),rv(this,n,e),this.i&&4!=n&&Vp(this))}},yt.cancel=function(){this.I=!0,Sd(this)},yt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zh(3),Gs(17)),Sd(this),this.o=2,Up(this)):Ad(this,this.Y-n)},(yt=xd.prototype).R=function(){ur(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},yt.T=function(){return ur(this),this.g.concat()},yt.get=function(n,e){return Ac(this.h,n)?this.h[n]:e},yt.set=function(n,e){Ac(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},yt.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var u=t[s],d=this.get(u);n.call(e,d,u,this)}};var SD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof xc){this.g=void 0!==e?e:n.g,ov(this,n.j),this.s=n.s,Dm(this,n.i),Tm(this,n.m),this.l=n.l,e=n.h;var t=new $p;t.i=e.i,e.g&&(t.g=new xd(e.g),t.h=e.h),av(this,t),this.o=n.o}else n&&(t=String(n).match(SD))?(this.g=!!e,ov(this,t[1]||"",!0),this.s=jp(t[2]||""),Dm(this,t[3]||"",!0),Tm(this,t[4]),this.l=jp(t[5]||"",!0),av(this,t[6]||"",!0),this.o=jp(t[7]||"")):(this.g=!!e,this.h=new $p(null,this.g))}function uu(n){return new xc(n)}function ov(n,e,t){n.j=t?jp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dm(n,e,t){n.i=t?jp(e,!0):e}function Tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function av(n,e,t){e instanceof $p?(n.h=e,function(n,e){e&&!n.j&&(Rl(n),n.i=null,n.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(wb(this,s),ND(this,u,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Rc(e,bb)),n.h=new $p(e,n.g))}function Er(n,e,t){n.h.set(e,t)}function Bp(n){return Er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Rc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Rc(e,cv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Rc(e,cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Rc(t,"/"==t.charAt(0)?Eb:vb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Rc(t,RD)),n.join("")};var cv=/[#\/\?@]/g,vb=/[#\?:]/g,Eb=/[#\?]/g,bb=/[#\?@]/g,RD=/#/g;function $p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Rl(n){n.g||(n.g=new xd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),u=null;if(0<=s){var d=n[t].substring(0,s);u=n[t].substring(s+1)}else d=n[t];e(d,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wb(n,e){Rl(n),e=Rd(n,e),Ac(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ac((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ur(n)))}function lv(n,e){return Rl(n),e=Rd(n,e),Ac(n.g.h,e)}function ND(n,e,t){wb(n,e),0<t.length&&(n.i=null,n.g.set(Rd(n,e),nb(t)),n.h+=t.length)}function Rd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PD(n){this.l=n||ux,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ea&&Kt.g.Ea()&&Kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=$p.prototype).add=function(n,e){Rl(this),this.i=null,n=Rd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){Rl(this),this.g.forEach(function(t,s){dD(t,function(u){n.call(e,u,s,this)},this)},this)},yt.T=function(){Rl(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var u=n[s],d=0;d<u.length;d++)t.push(e[s]);return t},yt.R=function(n){Rl(this);var e=[];if("string"==typeof n)lv(this,n)&&(e=hD(e,this.g.get(Rd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=hD(e,n[t])}return e},yt.set=function(n,e){return Rl(this),this.i=null,lv(this,n=Rd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],u=encodeURIComponent(String(s));s=this.R(s);for(var d=0;d<s.length;d++){var m=u;""!==s[d]&&(m+="="+encodeURIComponent(String(s[d]))),n.push(m)}}return this.i=n.join("&")};var ux=10;function Am(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Cb(n){return n.h?1:n.g?n.g.size:0}function Sm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xm(n,e){n.g?n.g.add(e):n.h=e}function kD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Na(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nb(n.i)}function Ib(){}function cx(){this.g=new Ib}function lx(n,e,t){const s=t||"";try{sv(n,function(u,d){let m=u;Bh(u)&&(m=_m(u)),e.push(s+d+"="+encodeURIComponent(m))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function Hp(n,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(d){}}function Kh(n){this.l=n.$b||null,this.j=n.ib||!1}function Rm(n,e){Ji.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Tb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PD.prototype.cancel=function(){if(this.i=Na(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ib.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)},Ib.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)},Hs(Kh,yb),Kh.prototype.g=function(){return new Rm(this.l,this.j)},Kh.prototype.i=function(n){return function(){return n}}({}),Hs(Rm,Ji);var Tb=0;function dv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Nd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Gp(n)}function Gp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=Rm.prototype).open=function(n,e){if(this.readyState!=Tb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Gp(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Kt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nd(this)),this.readyState=Tb},yt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Gp(this)),this.g&&(this.readyState=3,Gp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},yt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nd(this):Gp(this),3==this.readyState&&dv(this)}},yt.Ua=function(n){this.g&&(this.response=this.responseText=n,Nd(this))},yt.Ta=function(n){this.g&&(this.response=n,Nd(this))},yt.ha=function(){this.g&&Nd(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Rm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hv=Kt.JSON.parse;function gi(n){Ji.call(this),this.headers=new xd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ab,this.K=this.L=!1}Hs(gi,Ji);var Ab="",FD=/^https?$/i,LD=["POST","PUT"];function UD(n){return"content-type"==n.toLowerCase()}function qp(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Md(n),Ro(n)}function Md(n){n.D||(n.D=!0,Xi(n,"complete"),Xi(n,"error"))}function fv(n){if(n.h&&void 0!==Uh&&(!n.C[1]||4!=Nc(n)||2!=n.ba()))if(n.v&&4==Nc(n))W_(n.Fa,0,n);else if(Xi(n,"readystatechange"),4==Nc(n)){n.h=!1;try{const C=n.ba();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===C){var u=String(n.H).match(SD)[1]||null;if(!u&&Kt.self&&Kt.self.location){var d=Kt.self.location.protocol;u=d.substr(0,d.length-1)}s=!FD.test(u?u.toLowerCase():"")}t=s}if(t)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var m=2<Nc(n)?n.g.statusText:""}catch(x){m=""}n.j=m+" ["+n.ba()+"]",Md(n)}}finally{Ro(n)}}}function Ro(n,e){if(n.g){Yh(n);const t=n.g,s=n.C[0]?R_:null;n.g=null,n.C=null,e||Xi(n,"ready");try{t.onreadystatechange=s}catch(u){}}}function Yh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function Nc(n){return n.g?n.g.readyState:0}function Sb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ab:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ma(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return cm(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Er(n,e,t))}function Mc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Es(n){this.za=0,this.l=[],this.h=new qh,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mc("baseRetryDelayMs",5e3,n),this.$a=Mc("retryDelaySeedMs",1e4,n),this.Ya=Mc("forwardChannelMaxRetries",2,n),this.ra=Mc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new PD(n&&n.concurrentRequestLimit),this.Ca=new cx,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Oc(n){if(sa(n),3==n.G){var e=n.V++,t=uu(n.F);Er(t,"SID",n.J),Er(t,"RID",e),Er(t,"TYPE","terminate"),$u(n,t),(e=new Fp(n,n.h,e,void 0)).K=2,e.v=Bp(uu(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(t=Kt.navigator.sendBeacon(e.v.toString(),"")),!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vp(e)}yv(n)}function Od(n){n.g&&(Ml(n),n.g.cancel(),n.g=null)}function sa(n){Od(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),Wp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function zp(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Pc(n)}function Pc(n){Am(n.i)||n.m||(n.m=!0,Ra(n.Ha,n),n.C=0)}function Pd(n,e){var t;t=e?e.m:n.V++;const s=uu(n.F);Er(s,"SID",n.J),Er(s,"RID",t),Er(s,"AID",n.U),$u(n,s),n.o&&n.s&&Ma(s,n.o,n.s),t=new Fp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=kd(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),xm(n.i,t),tv(t,s,e)}function $u(n,e){n.j&&sv({},function(t,s){Er(e,s,t)})}function kd(n,e,t){t=Math.min(n.l.length,t);var s=n.j?_s(n.j.Oa,n.j,n):null;e:{var u=n.l;let d=-1;for(;;){const m=["count="+t];-1==d?0<t?(d=u[0].h,m.push("ofs="+d)):d=0:m.push("ofs="+d);let C=!0;for(let x=0;x<t;x++){let F=u[x].h;const q=u[x].g;if(F-=d,0>F)d=Math.max(0,u[x].h-100),C=!1;else try{lx(q,m,"req"+F+"_")}catch(Q){s&&s(q)}}if(C){s=m.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function Fd(n){n.g||n.u||(n.Y=1,Ra(n.Ga,n),n.A=0)}function Nl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=xl(_s(n.Ga,n),mv(n,n.A)),n.A++,0))}function Ml(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function Ld(n){n.g=new Fp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=uu(n.oa);Er(e,"RID","rpc"),Er(e,"SID",n.J),Er(e,"CI",n.N?"0":"1"),Er(e,"AID",n.U),$u(n,e),Er(e,"TYPE","xmlhttp"),n.o&&n.s&&Ma(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Bp(uu(e)),t.s=null,t.U=!0,nv(t,n)}function Wp(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function gv(n,e){var t=null;if(n.g==e){Wp(n),Ml(n),n.g=null;var s=2}else{if(!Sm(n.i,e))return;t=e.D,kD(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=n.C;Xi(s=Op(),new ju(s,t,e,u)),Pc(n)}else Fd(n);else if(3==(u=e.o)||0==u&&0<n.I||!(1==s&&function(n,e){return!(Cb(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=xl(_s(n.Ha,n,e),mv(n,n.C)),n.C++,0)))}(n,e)||2==s&&Nl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),u){case 1:Ol(n,5);break;case 4:Ol(n,10);break;case 3:Ol(n,6);break;default:Ol(n,2)}}function mv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ol(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=_s(n.jb,n);t||(t=new xc("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||ov(t,"https"),Bp(t)),function(n,e){const t=new qh;if(Kt.Image){const s=new Image;s.onload=jh(Hp,t,s,"TestLoadImage: loaded",!0,e),s.onerror=jh(Hp,t,s,"TestLoadImage: error",!1,e),s.onabort=jh(Hp,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=jh(Hp,t,s,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Gs(2);n.G=0,n.j&&n.j.va(e),yv(n),sa(n)}function yv(n){n.G=0,n.I=-1,n.j&&((0!=Na(n.i).length||0!=n.l.length)&&(n.i.i.length=0,nb(n.l),n.l.length=0),n.j.ua())}function _v(n,e,t){let s=function(n){return n instanceof xc?uu(n):new xc(n,void 0)}(t);if(""!=s.i)e&&Dm(s,e+"."+s.i),Tm(s,s.m);else{const u=Kt.location;s=function(n,e,t,s){var u=new xc(null,void 0);return n&&ov(u,n),e&&Dm(u,e),t&&Tm(u,t),s&&(u.l=s),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return n.aa&&cm(n.aa,function(u,d){Er(s,d,u)}),t=n.sa,(e=n.D)&&t&&Er(s,e,t),Er(s,"VER",n.ma),$u(n,s),s}function vv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new gi(t&&n.Ba&&!n.qa?new Kh({ib:!0}):n.qa)).L=n.H,e}function Ev(){}function Zp(){if(Tl&&!(10<=Number(F_)))throw Error("Environmental error: no available transport.")}function oa(n,e){Ji.call(this),this.g=new Es(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!O_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!O_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jh(this)}function bv(n){Dd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function xb(){X_.call(this),this.status=1}function Jh(n){this.g=n}(yt=gi.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Pp.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Pp),this.g.onreadystatechange=_s(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(d){return void qp(this,d)}n=t||"";const u=new xd(this.headers);s&&sv(s,function(d,m){u.set(m,d)}),s=function(n){e:{var e=UD;const t=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<t;u++)if(u in s&&e.call(void 0,s[u],u,n)){e=u;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(u.T()),t=Kt.FormData&&n instanceof Kt.FormData,!(0<=lD(LD,e))||s||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(d,m){this.g.setRequestHeader(m,d)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yh(this),0<this.B&&((this.K=function(n){return Tl&&mD()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_s(this.pa,this)):this.A=W_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(d){qp(this,d)}},yt.pa=function(){void 0!==Uh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),Ro(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ro(this,!0)),gi.Z.M.call(this)},yt.Fa=function(){this.s||(this.F||this.v||this.l?fv(this):this.cb())},yt.cb=function(){fv(this)},yt.ba=function(){try{return 2<Nc(this)?this.g.status:-1}catch(n){return-1}},yt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},yt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),hv(e)}},yt.Da=function(){return this.m},yt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=Es.prototype).ma=8,yt.G=1,yt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},yt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const u=new Fp(this,this.h,n,void 0);let d=this.s;if(this.P&&(d?(d=lm(d),Ic(d,this.P)):d=this.P),null===this.o&&(u.H=d),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kd(this,u,e),Er(t=uu(this.F),"RID",n),Er(t,"CVER",22),this.D&&Er(t,"X-HTTP-Session-Id",this.D),$u(this,t),this.o&&d&&Ma(t,this.o,d),xm(this.i,u),this.Ra&&Er(t,"TYPE","init"),this.ja?(Er(t,"$req",e),Er(t,"SID","null"),u.$=!0,tv(u,t,null)):tv(u,t,e),this.G=2}}else 3==this.G&&(n?Pd(this,n):0==this.l.length||Am(this.i)||Pd(this))},yt.Ga=function(){if(this.u=null,Ld(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=xl(_s(this.bb,this),n)}},yt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Gs(10),Od(this),Ld(this))},yt.ab=function(){null!=this.v&&(this.v=null,Od(this),Nl(this),Gs(19))},yt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Gs(2)):(this.h.info("Failed to ping google.com"),Gs(1))},(yt=Ev.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Oa=function(){},Zp.prototype.g=function(n,e){return new oa(n,e)},Hs(oa,Ji),oa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ra(_s(n.hb,n,e))),Gs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_v(n,null,n.W),Pc(n)},oa.prototype.close=function(){Oc(this.g)},oa.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,zp(this.g,e)}else this.v?((e={}).__data__=_m(n),zp(this.g,e)):zp(this.g,n)},oa.prototype.M=function(){this.g.j=null,delete this.j,Oc(this.g),delete this.g,oa.Z.M.call(this)},Hs(bv,Dd),Hs(xb,X_),Hs(Jh,Ev),Jh.prototype.xa=function(){Xi(this.g,"a")},Jh.prototype.wa=function(n){Xi(this.g,new bv(n))},Jh.prototype.va=function(n){Xi(this.g,new xb(n))},Jh.prototype.ua=function(){Xi(this.g,"b")},Zp.prototype.createWebChannel=Zp.prototype.g,oa.prototype.send=oa.prototype.u,oa.prototype.open=oa.prototype.m,oa.prototype.close=oa.prototype.close,wm.NO_ERROR=0,wm.TIMEOUT=8,wm.HTTP_ERROR=6,mb.COMPLETE="complete",J_.EventType=Tc,Tc.OPEN="a",Tc.CLOSE="b",Tc.ERROR="c",Tc.MESSAGE="d",Ji.prototype.listen=Ji.prototype.N,gi.prototype.listenOnce=gi.prototype.O,gi.prototype.getLastError=gi.prototype.La,gi.prototype.getLastErrorCode=gi.prototype.Da,gi.prototype.getStatus=gi.prototype.ba,gi.prototype.getResponseJson=gi.prototype.Qa,gi.prototype.getResponseText=gi.prototype.ga,gi.prototype.send=gi.prototype.ea;var Rb=ys.createWebChannelTransport=function(){return new Zp},BD=ys.getStatEventTarget=function(){return Op()},Nb=ys.ErrorCode=wm,jD=ys.EventType=mb,Mb=ys.Event=Wh,Ob=ys.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Pb=ys.FetchXmlHttpFactory=Kh,Nm=ys.WebChannel=J_,$D=ys.XhrIo=gi;const HD="@firebase/firestore";class bs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");let Vd="9.1.3";const Ud=new or.Yd("@firebase/firestore");function kb(){return Ud.logLevel}function tt(n,...e){if(Ud.logLevel<=or.in.DEBUG){const t=e.map(wv);Ud.debug(`Firestore (${Vd}): ${n}`,...t)}}function xi(n,...e){if(Ud.logLevel<=or.in.ERROR){const t=e.map(wv);Ud.error(`Firestore (${Vd}): ${n}`,...t)}}function Kp(n,...e){if(Ud.logLevel<=or.in.WARN){const t=e.map(wv);Ud.warn(`Firestore (${Vd}): ${n}`,...t)}}function wv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Ct(n="Unexpected state"){const e=`FIRESTORE (${Vd}) INTERNAL ASSERTION FAILED: `+n;throw xi(e),new Error(e)}function jt(n,e){n||Ct()}function ct(n,e){return n}const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cv{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class hx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bs.UNAUTHENTICATED))}shutdown(){}}class qD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xh{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const d=F=>this.i!==u?(u=this.i,t(F)):Promise.resolve();let m=new es;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new es,e.enqueueRetryable(()=>d(this.currentUser))};const C=()=>{const F=m;e.enqueueRetryable((0,Se.Z)(function*(){yield F.promise,yield d(s.currentUser)}))},x=F=>{tt("FirebaseCredentialsProvider","Auth detected"),this.auth=F,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(F=>x(F)),setTimeout(()=>{if(!this.auth){const F=this.t.getImmediate({optional:!0});F?x(F):(tt("FirebaseCredentialsProvider","Auth not yet detected"),m.resolve(),m=new es)}},0),C()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(tt("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(jt("string"==typeof s.accessToken),new Cv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jt(null===e||"string"==typeof e),new bs(e)}}class zD{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=bs.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Fb{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new zD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.g(s),this.p=s=>t.writeSequenceNumber(s))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Lb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}aa.T=-1;class Yp{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=Lb(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<t&&(s+=e.charAt(u[d]%e.length))}return s}}function yn(n,e){return n<e?-1:n>e?1:0}function Bd(n,e,t){return n.length===e.length&&n.every((s,u)=>t(s,e[u]))}function Vb(n){return n+"\0"}class ts{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qe(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ts.fromMillis(Date.now())}static fromDate(e){return ts.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new ts(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yn(this.nanoseconds,e.nanoseconds):yn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class nn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nn(e)}static min(){return new nn(new ts(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ub(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Iv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Qp{constructor(e,t,s){void 0===t?t=0:t>e.length&&Ct(),void 0===s?s=e.length-t:s>e.length-t&&Ct(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Qp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qp?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const d=e.get(u),m=t.get(u);if(d<m)return-1;if(d>m)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class kn extends Qp{construct(e,t,s){return new kn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new kn(t)}static emptyPath(){return new kn([])}}const Bb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ri extends Qp{construct(e,t,s){return new Ri(e,t,s)}static isValidIdentifier(e){return Bb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ri.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ri(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const d=()=>{if(0===s.length)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let m=!1;for(;u<e.length;){const C=e[u];if("\\"===C){if(u+1===e.length)throw new Qe(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new Qe(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=x,u+=2}else"`"===C?(m=!m,u++):"."!==C||m?(s+=C,u++):(d(),u++)}if(d(),m)throw new Qe(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ri(t)}static emptyPath(){return new Ri([])}}class Jp{constructor(e){this.fields=e,e.sort(Ri.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bd(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ns{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ns(t)}static fromUint8Array(e){const t=function(s){let u="";for(let d=0;d<s.length;++d)u+=String.fromCharCode(s[d]);return u}(e);return new ns(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ns.EMPTY_BYTE_STRING=new ns("");const fx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(n){if(jt(!!n),"string"==typeof n){let e=0;const t=fx.exec(n);if(jt(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mi(n.seconds),nanos:mi(n.nanos)}}function mi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pl(n){return"string"==typeof n?ns.fromBase64String(n):ns.fromUint8Array(n)}function Xp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jb(n){const e=n.mapValue.fields.__previous_value__;return Xp(e)?jb(e):e}function $d(n){const e=Oa(n.mapValue.fields.__local_write_time__.timestampValue);return new ts(e.seconds,e.nanos)}function kc(n){return null==n}function eg(n){return 0===n&&1/n==-1/0}function WD(n){return"number"==typeof n&&Number.isInteger(n)&&!eg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class It{constructor(e){this.path=e}static fromPath(e){return new It(kn.fromString(e))}static fromName(e){return new It(kn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===kn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return kn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new kn(e.slice()))}}function kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xp(n)?4:10:Ct()}function cu(n,e){const t=kl(n);if(t!==kl(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $d(n).isEqual($d(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const d=Oa(s.timestampValue),m=Oa(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,Pl(n.bytesValue).isEqual(Pl(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return mi(s.geoPointValue.latitude)===mi(u.geoPointValue.latitude)&&mi(s.geoPointValue.longitude)===mi(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return mi(s.integerValue)===mi(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const d=mi(s.doubleValue),m=mi(u.doubleValue);return d===m?eg(d)===eg(m):isNaN(d)&&isNaN(m)}return!1}(n,e);case 9:return Bd(n.arrayValue.values||[],e.arrayValue.values||[],cu);case 10:return function(s,u){const d=s.mapValue.fields||{},m=u.mapValue.fields||{};if(Ub(d)!==Ub(m))return!1;for(const C in d)if(d.hasOwnProperty(C)&&(void 0===m[C]||!cu(d[C],m[C])))return!1;return!0}(n,e);default:return Ct()}var u}function tg(n,e){return void 0!==(n.values||[]).find(t=>cu(t,e))}function Hd(n,e){const t=kl(n),s=kl(e);if(t!==s)return yn(t,s);switch(t){case 0:return 0;case 1:return yn(n.booleanValue,e.booleanValue);case 2:return function(u,d){const m=mi(u.integerValue||u.doubleValue),C=mi(d.integerValue||d.doubleValue);return m<C?-1:m>C?1:m===C?0:isNaN(m)?isNaN(C)?0:-1:1}(n,e);case 3:return Mm(n.timestampValue,e.timestampValue);case 4:return Mm($d(n),$d(e));case 5:return yn(n.stringValue,e.stringValue);case 6:return function(u,d){const m=Pl(u),C=Pl(d);return m.compareTo(C)}(n.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),C=d.split("/");for(let x=0;x<m.length&&x<C.length;x++){const F=yn(m[x],C[x]);if(0!==F)return F}return yn(m.length,C.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,d){const m=yn(mi(u.latitude),mi(d.latitude));return 0!==m?m:yn(mi(u.longitude),mi(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,d){const m=u.values||[],C=d.values||[];for(let x=0;x<m.length&&x<C.length;++x){const F=Hd(m[x],C[x]);if(F)return F}return yn(m.length,C.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,d){const m=u.fields||{},C=Object.keys(m),x=d.fields||{},F=Object.keys(x);C.sort(),F.sort();for(let q=0;q<C.length&&q<F.length;++q){const Q=yn(C[q],F[q]);if(0!==Q)return Q;const ge=Hd(m[C[q]],x[F[q]]);if(0!==ge)return ge}return yn(C.length,F.length)}(n.mapValue,e.mapValue);default:throw Ct()}}function Mm(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return yn(n,e);const t=Oa(n),s=Oa(e),u=yn(t.seconds,s.seconds);return 0!==u?u:yn(t.nanos,s.nanos)}function Om(n){return ng(n)}function ng(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const u=Oa(s);return`time(${u.seconds},${u.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pl(n.bytesValue).toBase64():"referenceValue"in n?It.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let u="[",d=!0;for(const m of s.values||[])d?d=!1:u+=",",u+=ng(m);return u+"]"}(n.arrayValue):"mapValue"in n?function(s){const u=Object.keys(s.fields||{}).sort();let d="{",m=!0;for(const C of u)m?m=!1:d+=",",d+=`${C}:${ng(s.fields[C])}`;return d+"}"}(n.mapValue):Ct();var e}function ef(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Pm(n){return!!n&&"integerValue"in n}function Tv(n){return!!n&&"arrayValue"in n}function Av(n){return!!n&&"nullValue"in n}function Sv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tf(n){return!!n&&"mapValue"in n}function nf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jd(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=nf(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nf(n.arrayValue.values[t]);return e}return Object.assign({},n)}class qs{constructor(e){this.value=e}static empty(){return new qs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nf(t)}setAll(e){let t=Ri.emptyPath(),s={},u=[];e.forEach((m,C)=>{if(!t.isImmediateParentOf(C)){const x=this.getFieldsMap(t);this.applyChanges(x,s,u),s={},u=[],t=C.popLast()}m?s[C.lastSegment()]=nf(m):u.push(C.lastSegment())});const d=this.getFieldsMap(t);this.applyChanges(d,s,u)}delete(e){const t=this.field(e.popLast());tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];tf(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){jd(t,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new qs(nf(this.value))}}function $b(n){const e=[];return jd(n.fields,(t,s)=>{const u=new Ri([t]);if(tf(s)){const d=$b(s.mapValue).fields;if(0===d.length)e.push(u);else for(const m of d)e.push(u.child(m))}else e.push(u)}),new Jp(e)}class Tr{constructor(e,t,s,u,d){this.key=e,this.documentType=t,this.version=s,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Tr(e,0,nn.min(),qs.empty(),0)}static newFoundDocument(e,t,s){return new Tr(e,1,t,s,0)}static newNoDocument(e,t){return new Tr(e,2,t,qs.empty(),0)}static newUnknownDocument(e,t){return new Tr(e,3,t,qs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Tr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hb{constructor(e,t=null,s=[],u=[],d=null,m=null,C=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=m,this.endAt=C,this.A=null}}function km(n,e=null,t=[],s=[],u=null,d=null,m=null){return new Hb(n,e,t,s,u,d,m)}function rf(n){const e=ct(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+Om(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Fm(e.startAt)),e.endAt&&(t+="|ub:",t+=Fm(e.endAt)),e.A=t}return e.A}function rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<n.orderBy.length;u++)if(!Yb(n.orderBy[u],e.orderBy[u]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let u=0;u<n.filters.length;u++)if((t=n.filters[u]).op!==(s=e.filters[u]).op||!t.field.isEqual(s.field)||!cu(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xv(n.startAt,e.startAt)&&xv(n.endAt,e.endAt)}function ig(n){return It.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class zs extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,s):new zb(e,t,s):"array-contains"===t?new ZD(e,s):"in"===t?new Kb(e,s):"not-in"===t?new KD(e,s):"array-contains-any"===t?new Ni(e,s):new zs(e,t,s)}static R(e,t,s){return"in"===t?new Wb(e,s):new px(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Hd(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.P(Hd(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ct()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class zb extends zs{constructor(e,t,s){super(e,t,s),this.key=It.fromName(s.referenceValue)}matches(e){const t=It.comparator(e.key,this.key);return this.P(t)}}class Wb extends zs{constructor(e,t){super(e,"in",t),this.keys=Zb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class px extends zs{constructor(e,t){super(e,"not-in",t),this.keys=Zb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Zb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>It.fromName(s.referenceValue))}class ZD extends zs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tv(t)&&tg(t.arrayValue,this.value)}}class Kb extends zs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tg(this.value.arrayValue,t)}}class KD extends zs{constructor(e,t){super(e,"not-in",t)}matches(e){if(tg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tg(this.value.arrayValue,t)}}class Ni extends zs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>tg(this.value.arrayValue,s))}}class sf{constructor(e,t){this.position=e,this.before=t}}function Fm(n){return`${n.before?"b":"a"}:${n.position.map(e=>Om(e)).join(",")}`}class af{constructor(e,t="asc"){this.field=e,this.dir=t}}function Yb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Qb(n,e,t){let s=0;for(let u=0;u<n.position.length;u++){const d=e[u],m=n.position[u];if(s=d.field.isKeyField()?It.comparator(It.fromName(m.referenceValue),t.key):Hd(m,t.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function xv(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cu(n.position[t],e.position[t]))return!1;return!0}class Hu{constructor(e,t=null,s=[],u=[],d=null,m="F",C=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=m,this.startAt=C,this.endAt=x,this.V=null,this.S=null}}function Gd(n,e,t,s,u,d,m,C){return new Hu(n,e,t,s,u,d,m,C)}function uf(n){return new Hu(n)}function Lm(n){return!kc(n.limit)&&"F"===n.limitType}function sg(n){return!kc(n.limit)&&"L"===n.limitType}function Rv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vm(n){for(const e of n.filters)if(e.v())return e.field;return null}function Jb(n){return null!==n.collectionGroup}function qd(n){const e=ct(n);if(null===e.V){e.V=[];const t=Vm(e),s=Rv(e);if(null!==t&&null===s)t.isKeyField()||e.V.push(new af(t)),e.V.push(new af(Ri.keyField(),"asc"));else{let u=!1;for(const d of e.explicitOrderBy)e.V.push(d),d.field.isKeyField()&&(u=!0);if(!u){const d=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new af(Ri.keyField(),d))}}}return e.V}function No(n){const e=ct(n);if(!e.S)if("F"===e.limitType)e.S=km(e.path,e.collectionGroup,qd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const d of qd(e))t.push(new af(d.field,"desc"===d.dir?"asc":"desc"));const s=e.endAt?new sf(e.endAt.position,!e.endAt.before):null,u=e.startAt?new sf(e.startAt.position,!e.startAt.before):null;e.S=km(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e.S}function lu(n,e,t){return new Hu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function og(n,e){return rg(No(n),No(e))&&n.limitType===e.limitType}function Xb(n){return`${rf(No(n))}|lt:${n.limitType}`}function Pa(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Om(s.value)}`;var s}).join(", ")}]`),kc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Fm(n.startAt)),n.endAt&&(e+=", endAt: "+Fm(n.endAt)),`Target(${e})`}(No(n))}; limitType=${n.limitType})`}function ho(n,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):It.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(n,e)&&function(t,s){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!Qb(t.startAt,qd(t),s)||t.endAt&&Qb(t.endAt,qd(t),s)));var t,s}function ka(n){return(e,t)=>{let s=!1;for(const u of qd(n)){const d=ew(u,e,t);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function ew(n,e,t){const s=n.field.isKeyField()?It.comparator(e.key,t.key):function(u,d,m){const C=d.data.field(u),x=m.data.field(u);return null!==C&&null!==x?Hd(C,x):Ct()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ct()}}function Nv(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eg(e)?"-0":e}}function tw(n){return{integerValue:""+n}}function nw(n,e){return WD(e)?tw(e):Nv(n,e)}class Um{constructor(){this._=void 0}}function YD(n,e,t){return n instanceof lf?function(s,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):n instanceof Fl?rw(n,e):n instanceof Ll?Ov(n,e):function(s,u){const d=cf(s,u),m=iw(d)+iw(s.C);return Pm(d)&&Pm(s.C)?tw(m):Nv(s.N,m)}(n,e)}function Mv(n,e,t){return n instanceof Fl?rw(n,e):n instanceof Ll?Ov(n,e):t}function cf(n,e){return n instanceof Fc?Pm(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class lf extends Um{}class Fl extends Um{constructor(e){super(),this.elements=e}}function rw(n,e){const t=Pv(e);for(const s of n.elements)t.some(u=>cu(u,s))||t.push(s);return{arrayValue:{values:t}}}class Ll extends Um{constructor(e){super(),this.elements=e}}function Ov(n,e){let t=Pv(e);for(const s of n.elements)t=t.filter(u=>!cu(u,s));return{arrayValue:{values:t}}}class Fc extends Um{constructor(e,t){super(),this.N=e,this.C=t}}function iw(n){return mi(n.integerValue||n.doubleValue)}function Pv(n){return Tv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class df{constructor(e,t){this.field=e,this.transform=t}}class Bm{constructor(e,t){this.version=e,this.transformResults=t}}class ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ag(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ug{}function sw(n,e,t){n instanceof cg?function(s,u,d){const m=s.value.clone(),C=uw(s.fieldTransforms,u,d.transformResults);m.setAll(C),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(n,e,t):n instanceof Vl?function(s,u,d){if(!ag(s.precondition,u))return void u.convertToUnknownDocument(d.version);const m=uw(s.fieldTransforms,u,d.transformResults),C=u.data;C.setAll(aw(s)),C.setAll(m),u.convertToFoundDocument(d.version,C).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function jm(n,e,t){var u;n instanceof cg?function(s,u,d){if(!ag(s.precondition,u))return;const m=s.value.clone(),C=cw(s.fieldTransforms,d,u);m.setAll(C),u.convertToFoundDocument(Lv(u),m).setHasLocalMutations()}(n,e,t):n instanceof Vl?function(s,u,d){if(!ag(s.precondition,u))return;const m=cw(s.fieldTransforms,d,u),C=u.data;C.setAll(aw(s)),C.setAll(m),u.convertToFoundDocument(Lv(u),C).setHasLocalMutations()}(n,e,t):ag(n.precondition,u=e)&&u.convertToNoDocument(nn.min())}function ow(n,e){let t=null;for(const s of n.fieldTransforms){const u=e.data.field(s.field),d=cf(s.transform,u||null);null!=d&&(null==t&&(t=qs.empty()),t.set(s.field,d))}return t||null}function Fv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Bd(t,s,(u,d)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Fl&&s instanceof Fl||t instanceof Ll&&s instanceof Ll?Bd(t.elements,s.elements,cu):t instanceof Fc&&s instanceof Fc?cu(t.C,s.C):t instanceof lf&&s instanceof lf);var t,s}(u,d))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function Lv(n){return n.isFoundDocument()?n.version:nn.min()}class cg extends ug{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}}class Vl extends ug{constructor(e,t,s,u,d=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}}function aw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function uw(n,e,t){const s=new Map;jt(n.length===t.length);for(let u=0;u<t.length;u++){const d=n[u],m=d.transform,C=e.data.field(d.field);s.set(d.field,Mv(m,C,t[u]))}return s}function cw(n,e,t){const s=new Map;for(const u of n){const d=u.transform,m=t.data.field(u.field);s.set(u.field,YD(d,m,e))}return s}class lg extends ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Vv extends ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class QD{constructor(e){this.count=e}}var yi,An;function lw(n){switch(n){default:return Ct();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function dw(n){if(void 0===n)return xi("GRPC error has no .code"),Fe.UNKNOWN;switch(n){case yi.OK:return Fe.OK;case yi.CANCELLED:return Fe.CANCELLED;case yi.UNKNOWN:return Fe.UNKNOWN;case yi.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case yi.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case yi.INTERNAL:return Fe.INTERNAL;case yi.UNAVAILABLE:return Fe.UNAVAILABLE;case yi.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case yi.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case yi.NOT_FOUND:return Fe.NOT_FOUND;case yi.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case yi.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case yi.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case yi.ABORTED:return Fe.ABORTED;case yi.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case yi.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case yi.DATA_LOSS:return Fe.DATA_LOSS;default:return Ct()}}(An=yi||(yi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class Mi{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new Mi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $m(this.root,e,this.comparator,!1)}getReverseIterator(){return new $m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $m(this.root,e,this.comparator,!0)}}class $m{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=t?s(e.key,t):1,u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,t,s,u,d){this.key=e,this.value=t,this.color=null!=s?s:ws.RED,this.left=null!=u?u:ws.EMPTY,this.right=null!=d?d:ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,d){return new ws(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=d?d:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===d?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return ws.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const e=this.left.check();if(e!==this.right.check())throw Ct();return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1,ws.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(n,e,t,s,u){return this}insert(n,e,t){return new ws(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zr{constructor(e){this.comparator=e,this.data=new Mi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hw(this.data.getIterator())}getIteratorFrom(e){return new hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zr(this.comparator);return t.data=e,t}}class hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const JD=new Mi(It.comparator);function ua(){return JD}const fw=new Mi(It.comparator);function Hm(){return fw}const pw=new Mi(It.comparator);function Uv(){return pw}const gw=new Zr(It.comparator);function Wn(...n){let e=gw;for(const t of n)e=e.add(t);return e}const mw=new Zr(yn);function dg(){return mw}class zd{constructor(e,t,s,u,d){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,t)),new zd(nn.min(),s,dg(),ua(),Wn())}}class hf{constructor(e,t,s,u,d){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,t){return new hf(ns.EMPTY_BYTE_STRING,t,Wn(),Wn(),Wn())}}class Gu{constructor(e,t,s,u){this.k=e,this.removedTargetIds=t,this.key=s,this.$=u}}class yw{constructor(e,t){this.targetId=e,this.O=t}}class _w{constructor(e,t,s=ns.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class Wd{constructor(){this.F=0,this.M=XD(),this.L=ns.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Wn(),t=Wn(),s=Wn();return this.M.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:Ct()}}),new hf(this.L,this.B,e,t,s)}G(){this.U=!1,this.M=XD()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class gx{constructor(e){this.tt=e,this.et=new Map,this.nt=ua(),this.st=Gm(),this.it=new Zr(yn)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const s=this.ut(t);switch(e.state){case 0:this.ht(t)&&s.j(e.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(e.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(t);break;case 3:this.ht(t)&&(s.Z(),s.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),s.j(e.resumeToken));break;default:Ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((s,u)=>{this.ht(u)&&t(u)})}ft(e){const t=e.targetId,s=e.O.count,u=this.dt(t);if(u){const d=u.target;if(ig(d))if(0===s){const m=new It(d.path);this.at(t,m,Tr.newNoDocument(m,nn.min()))}else jt(1===s);else this.wt(t)!==s&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((d,m)=>{const C=this.dt(m);if(C){if(d.current&&ig(C.target)){const x=new It(C.target.path);null!==this.nt.get(x)||this.gt(m,x)||this.at(m,x,Tr.newNoDocument(x,e))}d.K&&(t.set(m,d.W()),d.G())}});let s=Wn();this.st.forEach((d,m)=>{let C=!0;m.forEachWhile(x=>{const F=this.dt(x);return!F||2===F.purpose||(C=!1,!1)}),C&&(s=s.add(d))});const u=new zd(e,t,this.it,this.nt,s);return this.nt=ua(),this.st=Gm(),this.it=new Zr(yn),u}ot(e,t){if(!this.ht(e))return;const s=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,s),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,s){if(!this.ht(e))return;const u=this.ut(e);this.gt(e,t)?u.H(t,1):u.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),s&&(this.nt=this.nt.insert(t,s))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Wd,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Zr(yn),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||tt("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Wd),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Gm(){return new Mi(It.comparator)}function XD(){return new Mi(It.comparator)}const vw={asc:"ASCENDING",desc:"DESCENDING"},Ew={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class mx{constructor(e,t){this.databaseId=e,this.D=t}}function Mt(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bw(n,e){return n.D?e.toBase64():e.toUint8Array()}function eT(n,e){return Mt(n,e.toTimestamp())}function rs(n){return jt(!!n),nn.fromTimestamp(function(e){const t=Oa(e);return new ts(t.seconds,t.nanos)}(n))}function ff(n,e){return(t=n,new kn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ww(n){const e=kn.fromString(n);return jt(Mw(e)),e}function Ul(n,e){return ff(n.databaseId,e.path)}function ca(n,e){const t=ww(e);if(t.get(1)!==n.databaseId.projectId)throw new Qe(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Qe(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new It(qm(t))}function Ar(n,e){return ff(n.databaseId,e)}function tT(n){const e=ww(n);return 4===e.length?kn.emptyPath():qm(e)}function pf(n){return new kn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qm(n){return jt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Cw(n,e,t){return{name:Ul(n,e),fields:t.value.mapValue.fields}}function Bv(n,e,t){const s=ca(n,e.name),u=rs(e.updateTime),d=new qs({mapValue:{fields:e.fields}}),m=Tr.newFoundDocument(s,u,d);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function hg(n,e){let t;if(e instanceof cg)t={update:Cw(n,e.key,e.value)};else if(e instanceof lg)t={delete:Ul(n,e.key)};else if(e instanceof Vl)t={update:Cw(n,e.key,e.data),updateMask:sT(e.fieldMask)};else{if(!(e instanceof Vv))return Ct();t={verify:Ul(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof lf)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Fl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ll)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Fc)return{fieldPath:d.field.canonicalString(),increment:m.C};throw Ct()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:eT(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Ct()),t;var u}function Tw(n,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?ri.updateTime(rs(u.updateTime)):void 0!==u.exists?ri.exists(u.exists):ri.none():ri.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(d,m){let C=null;"setToServerValue"in m?(jt("REQUEST_TIME"===m.setToServerValue),C=new lf):"appendMissingElements"in m?C=new Fl(m.appendMissingElements.values||[]):"removeAllFromArray"in m?C=new Ll(m.removeAllFromArray.values||[]):"increment"in m?C=new Fc(d,m.increment):Ct();const x=Ri.fromServerFormat(m.fieldPath);return new df(x,C)}(n,u)):[];var u;if(e.update){const u=ca(n,e.update.name),d=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Jp((e.updateMask.fieldPaths||[]).map(F=>Ri.fromServerFormat(F)));return new Vl(u,d,m,t,s)}return new cg(u,d,t,s)}if(e.delete){const u=ca(n,e.delete);return new lg(u,t)}if(e.verify){const u=ca(n,e.verify);return new Vv(u,t)}return Ct()}function Aw(n,e){return{documents:[Ar(n,e.path)]}}function gf(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Ar(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ar(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(C){if(0===C.length)return;const x=C.map(F=>function(q){if("=="===q.op){if(Sv(q.value))return{unaryFilter:{field:mf(q.field),op:"IS_NAN"}};if(Av(q.value))return{unaryFilter:{field:mf(q.field),op:"IS_NULL"}}}else if("!="===q.op){if(Sv(q.value))return{unaryFilter:{field:mf(q.field),op:"IS_NOT_NAN"}};if(Av(q.value))return{unaryFilter:{field:mf(q.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(q.field),op:Nw(q.op),value:q.value}}}(F));return 1===x.length?x[0]:{compositeFilter:{op:"AND",filters:x}}}(e.filters);u&&(t.structuredQuery.where=u);const d=function(C){if(0!==C.length)return C.map(x=>{return{field:mf((F=x).field),direction:Rw(F.dir)};var F})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=(x=e.limit,n.D||kc(x)?x:{value:x});var x;return null!==m&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=fg(e.startAt)),e.endAt&&(t.structuredQuery.endAt=fg(e.endAt)),t}function Sw(n){let e=tT(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){jt(1===s);const q=t.from[0];q.allDescendants?u=q.collectionId:e=e.child(q.collectionId)}let d=[];t.where&&(d=xw(t.where));let m=[];t.orderBy&&(m=t.orderBy.map(q=>{return new af(qu((Q=q).field),function(ge){switch(ge){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction));var Q}));let C=null;t.limit&&(C=function(q){let Q;return Q="object"==typeof q?q.value:q,kc(Q)?null:Q}(t.limit));let x=null;t.startAt&&(x=jv(t.startAt));let F=null;return t.endAt&&(F=jv(t.endAt)),Gd(e,u,m,d,C,"F",x,F)}function xw(n){return n?void 0!==n.unaryFilter?[iT(n)]:void 0!==n.fieldFilter?[pg(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>xw(e)).reduce((e,t)=>e.concat(t)):Ct():[]}function fg(n){return{before:n.before,values:n.position}}function jv(n){return new sf(n.values||[],!!n.before)}function Rw(n){return vw[n]}function Nw(n){return Ew[n]}function mf(n){return{fieldPath:n.canonicalString()}}function qu(n){return Ri.fromServerFormat(n.fieldPath)}function pg(n){return zs.create(qu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function iT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=qu(n.unaryFilter.field);return zs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=qu(n.unaryFilter.field);return zs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qu(n.unaryFilter.field);return zs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qu(n.unaryFilter.field);return zs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}function sT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Fa(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$v(e)),e=Ow(n.get(t),e);return $v(e)}function Ow(n,e){let t=e;const s=n.length;for(let u=0;u<s;u++){const d=n.charAt(u);switch(d){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=d}}return t}function $v(n){return n+"\x01\x01"}function Lc(n){const e=n.length;if(jt(e>=2),2===e)return jt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kn.emptyPath();const t=e-2,s=[];let u="";for(let d=0;d<e;){const m=n.indexOf("\x01",d);switch((m<0||m>t)&&Ct(),n.charAt(m+1)){case"\x01":const C=n.substring(d,m);let x;0===u.length?x=C:(u+=C,x=u,u=""),s.push(x);break;case"\x10":u+=n.substring(d,m),u+="\0";break;case"\x11":u+=n.substring(d,m+1);break;default:Ct()}d=m+2}return new kn(s)}class Pw{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class la{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}la.store="owner",la.key="owner";class Bl{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Bl.store="mutationQueues",Bl.keyPath="userId";class Sr{constructor(e,t,s,u,d){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=u,this.mutations=d}}Sr.store="mutations",Sr.keyPath="batchId",Sr.userMutationsIndex="userMutationsIndex",Sr.userMutationsKeyPath=["userId","batchId"];class fo{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Fa(t)]}static key(e,t,s){return[e,Fa(t),s]}}fo.store="documentMutations",fo.PLACEHOLDER=new fo;class yx{constructor(e,t){this.path=e,this.readTime=t}}class _x{constructor(e,t){this.path=e,this.version=t}}class Vr{constructor(e,t,s,u,d,m){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=u,this.readTime=d,this.parentPath=m}}Vr.store="remoteDocuments",Vr.readTimeIndex="readTimeIndex",Vr.readTimeIndexPath="readTime",Vr.collectionReadTimeIndex="collectionReadTimeIndex",Vr.collectionReadTimeIndexPath=["parentPath","readTime"];class da{constructor(e){this.byteSize=e}}da.store="remoteDocumentGlobal",da.key="remoteDocumentGlobalKey";class Mo{constructor(e,t,s,u,d,m,C){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=u,this.lastListenSequenceNumber=d,this.lastLimboFreeSnapshotVersion=m,this.query=C}}Mo.store="targets",Mo.keyPath="targetId",Mo.queryTargetsIndexName="queryTargetsIndex",Mo.queryTargetsKeyPath=["canonicalId","targetId"];class Cs{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}Cs.store="targetDocuments",Cs.keyPath=["targetId","path"],Cs.documentTargetsIndex="documentTargetsIndex",Cs.documentTargetsKeyPath=["path","targetId"];class Oo{constructor(e,t,s,u){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=u}}Oo.key="targetGlobalKey",Oo.store="targetGlobal";class du{constructor(e,t){this.collectionId=e,this.parent=t}}du.store="collectionParents",du.keyPath=["collectionId","parent"];class Vc{constructor(e,t,s,u){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=u}}Vc.store="clientMetadata",Vc.keyPath="clientId";class yf{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}yf.store="bundles",yf.keyPath="bundleId";class _f{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}_f.store="namedQueries",_f.keyPath="name";const oT=[Bl.store,Sr.store,fo.store,Vr.store,Mo.store,la.store,Oo.store,Cs.store,Vc.store,da.store,du.store,yf.store,_f.store],kw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ke((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(t,d).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ke?t:Ke.resolve(t)}catch(t){return Ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ke.reject(t)}static resolve(e){return new Ke((t,s)=>{t(e)})}static reject(e){return new Ke((t,s)=>{s(e)})}static waitFor(e){return new Ke((t,s)=>{let u=0,d=0,m=!1;e.forEach(C=>{++u,C.next(()=>{++d,m&&d===u&&t()},x=>s(x))}),m=!0,d===u&&t()})}static or(e){let t=Ke.resolve(!1);for(const s of e)t=t.next(u=>u?Ke.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,d)=>{s.push(t.call(this,u,d))}),this.waitFor(s)}}class zm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new es,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new vf(e,t.error)):this.Et.resolve()},this.transaction.onerror=s=>{const u=qv(s.target.error);this.Et.reject(new vf(e,u))}}static open(e,t,s,u){try{return new zm(t,e.transaction(u,s))}catch(d){throw new vf(t,d)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Fw(t)}}class Ws{constructor(e,t,s){this.name=e,this.version=t,this.At=s,12.2===Ws.Rt((0,Et.z$)())&&xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tt("SimpleDb","Removing database:",e),Kd(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Et.hl)())return!1;if(Ws.Pt())return!0;const e=(0,Et.z$)(),t=Ws.Rt(e),s=0<t&&t<10,u=Ws.vt(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(e){var t=this;return(0,Se.Z)(function*(){return t.db||(tt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const d=indexedDB.open(t.name,t.version);d.onsuccess=m=>{s(m.target.result)},d.onblocked=()=>{u(new vf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const C=m.target.error;u("VersionError"===C.name?new Qe(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new Qe(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new vf(e,C))},d.onupgradeneeded=m=>{tt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',m.oldVersion),t.At.Ct(m.target.result,d.transaction,m.oldVersion,t.version).next(()=>{tt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=s=>t.Nt(s)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var d=this;return(0,Se.Z)(function*(){const m="readonly"===t;let C=0;for(;;){++C;try{d.db=yield d.Dt(e);const x=zm.open(d.db,e,m?"readonly":"readwrite",s),F=u(x).catch(q=>(x.abort(q),Ke.reject(q))).toPromise();return F.catch(()=>{}),yield x.It,F}catch(x){const F="FirebaseError"!==x.name&&C<3;if(tt("SimpleDb","Transaction failed with error:",x.message,"Retrying:",F),d.close(),!F)return Promise.reject(x)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class aT{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Kd(this.kt.delete())}}class vf extends Qe{constructor(e,t){super(Fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zd(n){return"IndexedDbTransactionError"===n.name}class Fw{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(tt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Kd(s)}add(e){return tt("SimpleDb","ADD",this.store.name,e,e),Kd(this.store.add(e))}get(e){return Kd(this.store.get(e)).next(t=>(void 0===t&&(t=null),tt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return tt("SimpleDb","DELETE",this.store.name,e),Kd(this.store.delete(e))}count(){return tt("SimpleDb","COUNT",this.store.name),Kd(this.store.count())}Lt(e,t){const s=this.cursor(this.options(e,t)),u=[];return this.Bt(s,(d,m)=>{u.push(m)}).next(()=>u)}Ut(e,t){tt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.qt=!1;const u=this.cursor(s);return this.Bt(u,(d,m,C)=>C.delete())}Kt(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.Bt(u,t)}jt(e){const t=this.cursor({});return new Ke((s,u)=>{t.onerror=d=>{const m=qv(d.target.error);u(m)},t.onsuccess=d=>{const m=d.target.result;m?e(m.primaryKey,m.value).next(C=>{C?m.continue():s()}):s()}})}Bt(e,t){const s=[];return new Ke((u,d)=>{e.onerror=m=>{d(m.target.error)},e.onsuccess=m=>{const C=m.target.result;if(!C)return void u();const x=new aT(C),F=t(C.primaryKey,C.value,x);if(F instanceof Ke){const q=F.catch(Q=>(x.done(),Ke.reject(Q)));s.push(q)}x.isDone?u():null===x.Ft?C.continue():C.continue(x.Ft)}}).next(()=>Ke.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.qt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kd(n){return new Ke((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const u=qv(s.target.error);t(u)}})}let Gv=!1;function qv(n){const e=Ws.Rt((0,Et.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gv||(Gv=!0,setTimeout(()=>{throw s},0)),s}}return n}class Wm extends Hv{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Po(n,e){const t=ct(n);return Ws.St(t.Qt,e)}class Zm{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&sw(d,e,s[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&jm(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&jm(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),u=s;this.applyToLocalView(u),s.isValidDocument()||u.convertToNoDocument(nn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wn())}isEqual(e){return this.batchId===e.batchId&&Bd(this.mutations,e.mutations,(t,s)=>Fv(t,s))&&Bd(this.baseMutations,e.baseMutations,(t,s)=>Fv(t,s))}}class Km{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){jt(e.mutations.length===s.length);let u=Uv();const d=e.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,s[m].version);return new Km(e,t,s,u)}}class jl{constructor(e,t,s,u,d=nn.min(),m=nn.min(),C=ns.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=C}withSequenceNumber(e){return new jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Lw{constructor(e){this.Wt=e}}function zv(n,e){if(e.document)return Bv(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=It.fromSegments(e.noDocument.path),s=bf(e.noDocument.readTime),u=Tr.newNoDocument(t,s);return e.hasCommittedMutations?u.setHasCommittedMutations():u}if(e.unknownDocument){const t=It.fromSegments(e.unknownDocument.path),s=bf(e.unknownDocument.version);return Tr.newUnknownDocument(t,s)}return Ct()}function Ym(n,e,t){const s=Wv(t),u=e.key.path.popLast().toArray();if(e.isFoundDocument()){const d={name:Ul(C=n.Wt,(x=e).key),fields:x.data.value.mapValue.fields,updateTime:Mt(C,x.version.toTimestamp())};return new Vr(null,null,d,e.hasCommittedMutations,s,u)}var C,x;if(e.isNoDocument()){const d=e.key.path.toArray(),m=Ef(e.version),C=e.hasCommittedMutations;return new Vr(null,new yx(d,m),null,C,s,u)}if(e.isUnknownDocument()){const d=e.key.path.toArray(),m=Ef(e.version);return new Vr(new _x(d,m),null,null,!0,s,u)}return Ct()}function Wv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zv(n){const e=new ts(n[0],n[1]);return nn.fromTimestamp(e)}function Ef(n){const e=n.toTimestamp();return new Pw(e.seconds,e.nanoseconds)}function bf(n){const e=new ts(n.seconds,n.nanoseconds);return nn.fromTimestamp(e)}function wf(n,e){const t=(e.baseMutations||[]).map(d=>Tw(n.Wt,d));for(let d=0;d<e.mutations.length-1;++d){const m=e.mutations[d];d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(m.updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d)}const s=e.mutations.map(d=>Tw(n.Wt,d)),u=ts.fromMillis(e.localWriteTimeMs);return new Zm(e.batchId,u,t,s)}function gg(n){const e=bf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bf(n.lastLimboFreeSnapshotVersion):nn.min();let s;var u;return void 0!==n.query.documents?(jt(1===(u=n.query).documents.length),s=No(uf(tT(u.documents[0])))):s=No(Sw(n.query)),new jl(s,n.targetId,0,n.lastListenSequenceNumber,e,t,ns.fromBase64String(n.resumeToken))}function Vw(n,e){const t=Ef(e.snapshotVersion),s=Ef(e.lastLimboFreeSnapshotVersion);let u;u=ig(e.target)?Aw(n.Wt,e.target):gf(n.Wt,e.target);const d=e.resumeToken.toBase64();return new Mo(e.targetId,rf(e.target),t,d,e.sequenceNumber,s,u)}function Kv(n){const e=Sw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lu(e,e.limit,"L"):e}class uT{getBundleMetadata(e,t){return Uw(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:bf(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Uw(e).put({bundleId:(s=t).id,createTime:Ef(rs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Yv(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Kv(u.bundledQuery),readTime:bf(u.readTime)};var u})}saveNamedQuery(e,t){return Yv(e).put({name:(s=t).name,readTime:Ef(rs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Uw(n){return Po(n,yf.store)}function Yv(n){return Po(n,_f.store)}class Bw{constructor(){this.Gt=new Qv}addToCollectionParentIndex(e,t){return this.Gt.add(t),Ke.resolve()}getCollectionParents(e,t){return Ke.resolve(this.Gt.getEntries(t))}}class Qv{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new Zr(kn.comparator),d=!u.has(s);return this.index[t]=u.add(s),d}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Zr(kn.comparator)).toArray()}}class cT{constructor(){this.zt=new Qv}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const d={collectionId:s,parent:Fa(u)};return Jv(e).put(d)}return Ke.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[Vb(t),""],!1,!0);return Jv(e).Lt(u).next(d=>{for(const m of d){if(m.collectionId!==t)break;s.push(Lc(m.parent))}return s})}}function Jv(n){return Po(n,du.store)}const jw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ko{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ko(e,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $w(n,e,t){const s=n.store(Sr.store),u=n.store(fo.store),d=[],m=IDBKeyRange.only(t.batchId);let C=0;const x=s.Kt({range:m},(q,Q,ge)=>(C++,ge.delete()));d.push(x.next(()=>{jt(1===C)}));const F=[];for(const q of t.mutations){const Q=fo.key(e,q.key.path,t.batchId);d.push(u.delete(Q)),F.push(q.key)}return Ke.waitFor(d).next(()=>F)}function Cf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ct();e=n.noDocument}return JSON.stringify(e).length}ko.DEFAULT_COLLECTION_PERCENTILE=10,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ko.DEFAULT=new ko(41943040,ko.DEFAULT_COLLECTION_PERCENTILE,ko.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ko.DISABLED=new ko(-1,0,0);class mg{constructor(e,t,s,u){this.userId=e,this.N=t,this.Ht=s,this.referenceDelegate=u,this.Jt={}}static Yt(e,t,s,u){jt(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new mg(d,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zu(e).Kt({index:Sr.userMutationsIndex,range:s},(u,d,m)=>{t=!1,m.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const d=If(e),m=zu(e);return m.add({}).next(C=>{jt("number"==typeof C);const x=new Zm(C,t,s,u),F=function(ge,me,De){const et=De.baseMutations.map(xt=>hg(ge.Wt,xt)),ft=De.mutations.map(xt=>hg(ge.Wt,xt));return new Sr(me,De.batchId,De.localWriteTime.toMillis(),et,ft)}(this.N,this.userId,x),q=[];let Q=new Zr((ge,me)=>yn(ge.canonicalString(),me.canonicalString()));for(const ge of u){const me=fo.key(this.userId,ge.key.path,C);Q=Q.add(ge.key.path.popLast()),q.push(m.put(F)),q.push(d.put(me,fo.PLACEHOLDER))}return Q.forEach(ge=>{q.push(this.Ht.addToCollectionParentIndex(e,ge))}),e.addOnCommittedListener(()=>{this.Jt[C]=x.keys()}),Ke.waitFor(q).next(()=>x)})}lookupMutationBatch(e,t){return zu(e).get(t).next(s=>s?(jt(s.userId===this.userId),wf(this.N,s)):null)}Xt(e,t){return this.Jt[t]?Ke.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.Jt[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return zu(e).Kt({index:Sr.userMutationsIndex,range:u},(m,C,x)=>{C.userId===this.userId&&(jt(C.batchId>=s),d=wf(this.N,C)),x.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return zu(e).Kt({index:Sr.userMutationsIndex,range:t,reverse:!0},(u,d,m)=>{s=d.batchId,m.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zu(e).Lt(Sr.userMutationsIndex,t).next(s=>s.map(u=>wf(this.N,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=fo.prefixForPath(this.userId,t.path),u=IDBKeyRange.lowerBound(s),d=[];return If(e).Kt({range:u},(m,C,x)=>{const[F,q,Q]=m,ge=Lc(q);if(F===this.userId&&t.path.isEqual(ge))return zu(e).get(Q).next(me=>{if(!me)throw Ct();jt(me.userId===this.userId),d.push(wf(this.N,me))});x.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Zr(yn);const u=[];return t.forEach(d=>{const m=fo.prefixForPath(this.userId,d.path),C=IDBKeyRange.lowerBound(m),x=If(e).Kt({range:C},(F,q,Q)=>{const[ge,me,De]=F,et=Lc(me);ge===this.userId&&d.path.isEqual(et)?s=s.add(De):Q.done()});u.push(x)}),Ke.waitFor(u).next(()=>this.Zt(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,d=fo.prefixForPath(this.userId,s),m=IDBKeyRange.lowerBound(d);let C=new Zr(yn);return If(e).Kt({range:m},(x,F,q)=>{const[Q,ge,me]=x,De=Lc(ge);Q===this.userId&&s.isPrefixOf(De)?De.length===u&&(C=C.add(me)):q.done()}).next(()=>this.Zt(e,C))}Zt(e,t){const s=[],u=[];return t.forEach(d=>{u.push(zu(e).get(d).next(m=>{if(null===m)throw Ct();jt(m.userId===this.userId),s.push(wf(this.N,m))}))}),Ke.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return $w(e.Qt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Ke.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ke.resolve();const s=IDBKeyRange.lowerBound(fo.prefixForUser(this.userId)),u=[];return If(e).Kt({range:s},(d,m,C)=>{if(d[0]===this.userId){const x=Lc(d[1]);u.push(x)}else C.done()}).next(()=>{jt(0===u.length)})})}containsKey(e,t){return Xv(e,this.userId,t)}ee(e){return Hw(e).get(this.userId).next(t=>t||new Bl(this.userId,-1,""))}}function Xv(n,e,t){const s=fo.prefixForPath(e,t.path),u=s[1],d=IDBKeyRange.lowerBound(s);let m=!1;return If(n).Kt({range:d,qt:!0},(C,x,F)=>{const[q,Q,ge]=C;q===e&&Q===u&&(m=!0),F.done()}).next(()=>m)}function zu(n){return Po(n,Sr.store)}function If(n){return Po(n,fo.store)}function Hw(n){return Po(n,Bl.store)}class Uc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Uc(0)}static ie(){return new Uc(-1)}}class lT{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const s=new Uc(t.highestTargetId);return t.highestTargetId=s.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>nn.fromTimestamp(new ts(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.re(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.oe(e,u)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(s=>(s.targetCount+=1,this.ce(t,s),this.oe(e,s))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yd(e).delete(t.targetId)).next(()=>this.re(e)).next(s=>(jt(s.targetCount>0),s.targetCount-=1,this.oe(e,s)))}removeTargets(e,t,s){let u=0;const d=[];return Yd(e).Kt((m,C)=>{const x=gg(C);x.sequenceNumber<=t&&null===s.get(x.targetId)&&(u++,d.push(this.removeTargetData(e,x)))}).next(()=>Ke.waitFor(d)).next(()=>u)}forEachTarget(e,t){return Yd(e).Kt((s,u)=>{const d=gg(u);t(d)})}re(e){return Gw(e).get(Oo.key).next(t=>(jt(null!==t),t))}oe(e,t){return Gw(e).put(Oo.key,t)}ae(e,t){return Yd(e).put(Vw(this.N,t))}ce(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const s=rf(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Yd(e).Kt({range:u,index:Mo.queryTargetsIndexName},(m,C,x)=>{const F=gg(C);rg(t,F.target)&&(d=F,x.done())}).next(()=>d)}addMatchingKeys(e,t,s){const u=[],d=Bc(e);return t.forEach(m=>{const C=Fa(m.path);u.push(d.put(new Cs(s,C))),u.push(this.referenceDelegate.addReference(e,s,m))}),Ke.waitFor(u)}removeMatchingKeys(e,t,s){const u=Bc(e);return Ke.forEach(t,d=>{const m=Fa(d.path);return Ke.waitFor([u.delete([s,m]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,t){const s=Bc(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=Bc(e);let d=Wn();return u.Kt({range:s,qt:!0},(m,C,x)=>{const F=Lc(m[1]),q=new It(F);d=d.add(q)}).next(()=>d)}containsKey(e,t){const s=Fa(t.path),u=IDBKeyRange.bound([s],[Vb(s)],!1,!0);let d=0;return Bc(e).Kt({index:Cs.documentTargetsIndex,qt:!0,range:u},([m,C],x,F)=>{0!==m&&(d++,F.done())}).next(()=>d>0)}Tt(e,t){return Yd(e).get(t).next(s=>s?gg(s):null)}}function Yd(n){return Po(n,Mo.store)}function Gw(n){return Po(n,Oo.store)}function Bc(n){return Po(n,Cs.store)}function $l(n){return Qm.apply(this,arguments)}function Qm(){return(Qm=(0,Se.Z)(function*(n){if(n.code!==Fe.FAILED_PRECONDITION||n.message!==kw)throw n;tt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function dT([n,e],[t,s]){const u=yn(n,t);return 0===u?yn(e,s):u}class hT{constructor(e){this.ue=e,this.buffer=new Zr(dT),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();dT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Df{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const s=this.de?3e5:6e4;tt("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Se.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Zd(u)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield $l(u)}yield t._e(e)}))}}class vx{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Ke.resolve(aa.T);const s=new hT(t);return this.me.forEachTarget(e,u=>s.fe(u.sequenceNumber)).next(()=>this.me.ye(e,u=>s.fe(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.me.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(jw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jw):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let s,u,d,m,C,x,F;const q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Q=>(Q>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Q}`),u=this.params.maximumSequenceNumbersToCollect):u=Q,m=Date.now(),this.nthSequenceNumber(e,u))).next(Q=>(s=Q,C=Date.now(),this.removeTargets(e,s,t))).next(Q=>(d=Q,x=Date.now(),this.removeOrphanedDocuments(e,s))).next(Q=>(F=Date.now(),kb()<=or.in.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-q}ms\n\tDetermined least recently used ${u} in `+(C-m)+`ms\n\tRemoved ${d} targets in `+(x-C)+`ms\n\tRemoved ${Q} documents in `+(F-x)+`ms\nTotal Duration: ${F-q}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:Q})))}}class eE{constructor(e,t){this.db=e,this.garbageCollector=new vx(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Te(e){let t=0;return this.ye(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(s,u)=>t(u))}addReference(e,t,s){return Qd(e,s)}removeReference(e,t,s){return Qd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Qd(e,t)}Ie(e,t){return function(s,u){let d=!1;return Hw(s).jt(m=>Xv(s,m,u).next(C=>(C&&(d=!0),Ke.resolve(!C)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.Ee(e,(m,C)=>{if(C<=t){const x=this.Ie(e,m).next(F=>{if(!F)return d++,s.getEntry(e,m).next(()=>(s.removeEntry(m),Bc(e).delete([0,Fa(m.path)])))});u.push(x)}}).next(()=>Ke.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Qd(e,t)}Ee(e,t){const s=Bc(e);let u,d=aa.T;return s.Kt({index:Cs.documentTargetsIndex},([m,C],{path:x,sequenceNumber:F})=>{0===m?(d!==aa.T&&t(new It(Lc(u)),d),d=F,u=x):d=aa.T}).next(()=>{d!==aa.T&&t(new It(Lc(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qd(n,e){return Bc(n).put((s=n.currentSequenceNumber,new Cs(0,Fa(e.path),s)));var s}class Tf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0!==u){for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,t]);u.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),!0;return!1}forEach(e){jd(this.inner,(t,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return Iv(this.inner)}}class Jd{constructor(){this.changes=new Tf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:nn.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Tr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Ke.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fT{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,s){return Is(e).put(yg(t),s)}removeEntry(e,t){const s=Is(e),u=yg(t);return s.delete(u)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Ae(e,s)))}getEntry(e,t){return Is(e).get(yg(t)).next(s=>this.Re(t,s))}be(e,t){return Is(e).get(yg(t)).next(s=>({document:this.Re(t,s),size:Cf(s)}))}getEntries(e,t){let s=ua();return this.Pe(e,t,(u,d)=>{const m=this.Re(u,d);s=s.insert(u,m)}).next(()=>s)}ve(e,t){let s=ua(),u=new Mi(It.comparator);return this.Pe(e,t,(d,m)=>{const C=this.Re(d,m);s=s.insert(d,C),u=u.insert(d,Cf(m))}).next(()=>({documents:s,Ve:u}))}Pe(e,t,s){if(t.isEmpty())return Ke.resolve();const u=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),d=t.getIterator();let m=d.getNext();return Is(e).Kt({range:u},(C,x,F)=>{const q=It.fromSegments(C);for(;m&&It.comparator(m,q)<0;)s(m,null),m=d.getNext();m&&m.isEqual(q)&&(s(m,x),m=d.hasNext()?d.getNext():null),m?F.Mt(m.path.toArray()):F.done()}).next(()=>{for(;m;)s(m,null),m=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,s){let u=ua();const d=t.path.length+1,m={};if(s.isEqual(nn.min())){const C=t.path.toArray();m.range=IDBKeyRange.lowerBound(C)}else{const C=t.path.toArray(),x=Wv(s);m.range=IDBKeyRange.lowerBound([C,x],!0),m.index=Vr.collectionReadTimeIndex}return Is(e).Kt(m,(C,x,F)=>{if(C.length!==d)return;const q=zv(this.N,x);t.path.isPrefixOf(q.key.path)?ho(t,q)&&(u=u.insert(q.key,q)):F.done()}).next(()=>u)}newChangeBuffer(e){return new Ex(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qw(e).get(da.key).next(t=>(jt(!!t),t))}Ae(e,t){return qw(e).put(da.key,t)}Re(e,t){if(t){const s=zv(this.N,t);if(!s.isNoDocument()||!s.version.isEqual(nn.min()))return s}return Tr.newInvalidDocument(e)}}class Ex extends Jd{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Tf(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new Zr((d,m)=>yn(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const C=this.De.get(d);if(m.document.isValidDocument()){const x=Ym(this.Se.N,m.document,this.getReadTime(d));u=u.add(d.path.popLast()),s+=Cf(x)-C,t.push(this.Se.addEntry(e,d,x))}else if(s-=C,this.trackRemovals){const x=Ym(this.Se.N,Tr.newNoDocument(d,nn.min()),this.getReadTime(d));t.push(this.Se.addEntry(e,d,x))}else t.push(this.Se.removeEntry(e,d))}),u.forEach(d=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,d))}),t.push(this.Se.updateMetadata(e,s)),Ke.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(s=>(this.De.set(t,s.size),s.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:s,Ve:u})=>(u.forEach((d,m)=>{this.De.set(d,m)}),s))}}function qw(n){return Po(n,da.store)}function Is(n){return Po(n,Vr.store)}function yg(n){return n.path.toArray()}class bx{constructor(e){this.N=e}Ct(e,t,s,u){jt(s<u&&s>=0&&u<=11);const d=new zm("createOrUpgrade",t);var C;s<1&&u>=1&&(e.createObjectStore(la.store),(C=e).createObjectStore(Bl.store,{keyPath:Bl.keyPath}),C.createObjectStore(Sr.store,{keyPath:Sr.keyPath,autoIncrement:!0}).createIndex(Sr.userMutationsIndex,Sr.userMutationsKeyPath,{unique:!0}),C.createObjectStore(fo.store),_g(e),function(C){C.createObjectStore(Vr.store)}(e));let m=Ke.resolve();return s<3&&u>=3&&(0!==s&&(function(C){C.deleteObjectStore(Cs.store),C.deleteObjectStore(Mo.store),C.deleteObjectStore(Oo.store)}(e),_g(e)),m=m.next(()=>function(C){const x=C.store(Oo.store),F=new Oo(0,0,nn.min().toTimestamp(),0);return x.put(Oo.key,F)}(d))),s<4&&u>=4&&(0!==s&&(m=m.next(()=>function(C,x){return x.store(Sr.store).Lt().next(F=>{C.deleteObjectStore(Sr.store),C.createObjectStore(Sr.store,{keyPath:Sr.keyPath,autoIncrement:!0}).createIndex(Sr.userMutationsIndex,Sr.userMutationsKeyPath,{unique:!0});const q=x.store(Sr.store),Q=F.map(ge=>q.put(ge));return Ke.waitFor(Q)})}(e,d))),m=m.next(()=>{!function(C){C.createObjectStore(Vc.store,{keyPath:Vc.keyPath})}(e)})),s<5&&u>=5&&(m=m.next(()=>this.Ce(d))),s<6&&u>=6&&(m=m.next(()=>(function(C){C.createObjectStore(da.store)}(e),this.Ne(d)))),s<7&&u>=7&&(m=m.next(()=>this.xe(d))),s<8&&u>=8&&(m=m.next(()=>this.ke(e,d))),s<9&&u>=9&&(m=m.next(()=>{(function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")})(e),function(C){const x=C.objectStore(Vr.store);x.createIndex(Vr.readTimeIndex,Vr.readTimeIndexPath,{unique:!1}),x.createIndex(Vr.collectionReadTimeIndex,Vr.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&u>=10&&(m=m.next(()=>this.$e(d))),s<11&&u>=11&&(m=m.next(()=>{(function(C){C.createObjectStore(yf.store,{keyPath:yf.keyPath})})(e),function(C){C.createObjectStore(_f.store,{keyPath:_f.keyPath})}(e)})),m}Ne(e){let t=0;return e.store(Vr.store).Kt((s,u)=>{t+=Cf(u)}).next(()=>{const s=new da(t);return e.store(da.store).put(da.key,s)})}Ce(e){const t=e.store(Bl.store),s=e.store(Sr.store);return t.Lt().next(u=>Ke.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.Lt(Sr.userMutationsIndex,m).next(C=>Ke.forEach(C,x=>{jt(x.userId===d.userId);const F=wf(this.N,x);return $w(e,d.userId,F).next(()=>{})}))}))}xe(e){const t=e.store(Cs.store),s=e.store(Vr.store);return e.store(Oo.store).get(Oo.key).next(u=>{const d=[];return s.Kt((m,C)=>{const x=new kn(m),F=[0,Fa(x)];d.push(t.get(F).next(q=>q?Ke.resolve():t.put(new Cs(0,Fa(x),u.highestListenSequenceNumber))))}).next(()=>Ke.waitFor(d))})}ke(e,t){e.createObjectStore(du.store,{keyPath:du.keyPath});const s=t.store(du.store),u=new Qv,d=m=>{if(u.add(m)){const C=m.lastSegment(),x=m.popLast();return s.put({collectionId:C,parent:Fa(x)})}};return t.store(Vr.store).Kt({qt:!0},(m,C)=>{const x=new kn(m);return d(x.popLast())}).next(()=>t.store(fo.store).Kt({qt:!0},([m,C,x],F)=>{const q=Lc(C);return d(q.popLast())}))}$e(e){const t=e.store(Mo.store);return t.Kt((s,u)=>{const d=gg(u),m=Vw(this.N,d);return t.put(m)})}}function _g(n){n.createObjectStore(Cs.store,{keyPath:Cs.keyPath}).createIndex(Cs.documentTargetsIndex,Cs.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Mo.store,{keyPath:Mo.keyPath}).createIndex(Mo.queryTargetsIndexName,Mo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Oo.store)}const tE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nE{constructor(e,t,s,u,d,m,C,x,F,q){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=d,this.window=m,this.document=C,this.Fe=F,this.Me=q,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=Q=>Promise.resolve(),!nE.bt())throw new Qe(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eE(this,u),this.We=t+"main",this.N=new Lw(x),this.Ge=new Ws(this.We,11,new bx(this.N)),this.ze=new lT(this.referenceDelegate,this.N),this.Ht=new cT,this.He=new fT(this.N,this.Ht),this.Je=new uT,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===q&&xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qe(Fe.FAILED_PRECONDITION,tE);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new aa(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var s=(0,Se.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Se.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xm(e).put(new Vc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(Zd(e))return tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Jm(e).get(la.key).next(t=>Ke.resolve(this.cn(t)))}un(e){return Xm(e).delete(this.clientId)}hn(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Po(s,Vc.store);return u.Lt().next(d=>{const m=e.fn(d,18e5),C=d.filter(x=>-1===m.indexOf(x));return Ke.forEach(C,x=>u.delete(x.clientId)).next(()=>C)})}).catch(()=>[]);if(e.Ye)for(const s of t)e.Ye.removeItem(e.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Ke.resolve(!0):Jm(e).get(la.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Qe(Fe.FAILED_PRECONDITION,tE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xm(e).Lt().next(s=>void 0===this.fn(s,5e3).find(u=>{if(this.clientId!==u.clientId){const m=!this.inForeground&&u.inForeground,C=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||m&&C)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&tt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[la.store,Vc.store],t=>{const s=new Wm(t,aa.T);return e.on(s).next(()=>e.un(s))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(s=>this.ln(s.updateTimeMs,t)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Xm(e).Lt().next(t=>this.fn(t,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(e){return mg.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,s){let d;return tt("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",oT,m=>(d=new Wm(m,this.Le?this.Le.next():aa.T),"readwrite-primary"===t?this.sn(d).next(C=>!!C||this.rn(d)).next(C=>{if(!C)throw xi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Qe(Fe.FAILED_PRECONDITION,kw);return s(d)}).next(C=>this.an(d).next(()=>C)):this.Tn(d).next(()=>s(d)))).then(m=>(d.raiseOnCommittedEvent(),m))}Tn(e){return Jm(e).get(la.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Qe(Fe.FAILED_PRECONDITION,tE)})}an(e){const t=new la(this.clientId,this.allowTabSynchronization,Date.now());return Jm(e).put(la.key,t)}static bt(){return Ws.bt()}on(e){const t=Jm(e);return t.get(la.key).next(s=>this.cn(s)?(tt("IndexedDbPersistence","Releasing primary lease."),t.delete(la.key)):Ke.resolve())}ln(e,t){const s=Date.now();return!(e<s-t||e>s&&(xi(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,Et.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const s=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return tt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return xi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){xi("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jm(n){return Po(n,la.store)}function Xm(n){return Po(n,Vc.store)}function rE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pT{constructor(e,t){this.progress=e,this.En=t}}class ey{constructor(e,t,s){this.He=e,this.In=t,this.Ht=s}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Rn(e,t,s))}Rn(e,t,s){return this.He.getEntry(e,t).next(u=>{for(const d of s)d.applyToLocalView(u);return u})}bn(e,t){e.forEach((s,u)=>{for(const d of t)d.applyToLocalView(u)})}Pn(e,t){return this.He.getEntries(e,t).next(s=>this.vn(e,s).next(()=>s))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return It.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.Vn(e,t.path):Jb(t)?this.Sn(e,t,s):this.Dn(e,t,s);var u}Vn(e,t){return this.An(e,new It(t)).next(s=>{let u=Hm();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}Sn(e,t,s){const u=t.collectionGroup;let d=Hm();return this.Ht.getCollectionParents(e,u).next(m=>Ke.forEach(m,C=>{const x=(F=t,q=C.child(u),new Hu(q,null,F.explicitOrderBy.slice(),F.filters.slice(),F.limit,F.limitType,F.startAt,F.endAt));var F,q;return this.Dn(e,x,s).next(F=>{F.forEach((q,Q)=>{d=d.insert(q,Q)})})}).next(()=>d))}Dn(e,t,s){let u,d;return this.He.getDocumentsMatchingQuery(e,t,s).next(m=>(u=m,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(m=>(d=m,this.Cn(e,d,u).next(C=>{u=C;for(const x of d)for(const F of x.mutations){const q=F.key;let Q=u.get(q);null==Q&&(Q=Tr.newInvalidDocument(q),u=u.insert(q,Q)),jm(F,Q,x.localWriteTime),Q.isFoundDocument()||(u=u.remove(q))}}))).next(()=>(u.forEach((m,C)=>{ho(t,C)||(u=u.remove(m))}),u))}Cn(e,t,s){let u=Wn();for(const m of t)for(const C of m.mutations)C instanceof Vl&&null===s.get(C.key)&&(u=u.add(C.key));let d=s;return this.He.getEntries(e,u).next(m=>(m.forEach((C,x)=>{x.isFoundDocument()&&(d=d.insert(C,x))}),d))}}class ty{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Nn=s,this.xn=u}static kn(e,t){let s=Wn(),u=Wn();for(const d of t.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new ty(e,t.fromCache,s,u)}}class ny{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,s,u){return 0===(d=t).filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())||s.isEqual(nn.min())?this.Fn(e,t):this.On.Pn(e,u).next(d=>{const m=this.Mn(t,d);return(Lm(t)||sg(t))&&this.Ln(t.limitType,m,u,s)?this.Fn(e,t):(kb()<=or.in.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pa(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(C=>(m.forEach(x=>{C=C.insert(x.key,x)}),C)))});var d}Mn(e,t){let s=new Zr(ka(e));return t.forEach((u,d)=>{ho(e,d)&&(s=s.add(d))}),s}Ln(e,t,s,u){if(s.size!==t.size)return!0;const d="F"===e?t.last():t.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Fn(e,t){return kb()<=or.in.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Pa(t)),this.On.getDocumentsMatchingQuery(e,t,nn.min())}}class zw{constructor(e,t,s,u){this.persistence=e,this.Bn=t,this.N=u,this.Un=new Mi(yn),this.qn=new Tf(d=>rf(d),rg),this.Kn=nn.min(),this.In=e.getMutationQueue(s),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new ey(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function Ww(n,e,t,s){return new zw(n,e,t,s)}function gT(n,e){return iE.apply(this,arguments)}function iE(){return(iE=(0,Se.Z)(function*(n,e){const t=ct(n);let s=t.In,u=t.Qn;const d=yield t.persistence.runTransaction("Handle user change","readonly",m=>{let C;return t.In.getAllMutationBatches(m).next(x=>(C=x,s=t.persistence.getMutationQueue(e),u=new ey(t.jn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(m))).next(x=>{const F=[],q=[];let Q=Wn();for(const ge of C){F.push(ge.batchId);for(const me of ge.mutations)Q=Q.add(me.key)}for(const ge of x){q.push(ge.batchId);for(const me of ge.mutations)Q=Q.add(me.key)}return u.Pn(m,Q).next(ge=>({Wn:ge,removedBatchIds:F,addedBatchIds:q}))})});return t.In=s,t.Qn=u,t.Bn.$n(t.Qn),d})).apply(this,arguments)}function mT(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=t.jn.newChangeBuffer({trackRemovals:!0});return function(m,C,x,F){const q=x.batch,Q=q.keys();let ge=Ke.resolve();return Q.forEach(me=>{ge=ge.next(()=>F.getEntry(C,me)).next(De=>{const et=x.docVersions.get(me);jt(null!==et),De.version.compareTo(et)<0&&(q.applyToRemoteDocument(De,x),De.isValidDocument()&&F.addEntry(De,x.commitVersion))})}),ge.next(()=>m.In.removeMutationBatch(C,q))}(t,s,e,d).next(()=>d.apply(s)).next(()=>t.In.performConsistencyCheck(s)).next(()=>t.Qn.Pn(s,u))})}function Zw(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function Kw(n,e){const t=ct(n),s=e.snapshotVersion;let u=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=t.jn.newChangeBuffer({trackRemovals:!0});u=t.Un;const C=[];e.targetChanges.forEach((F,q)=>{const Q=u.get(q);if(!Q)return;C.push(t.ze.removeMatchingKeys(d,F.removedDocuments,q).next(()=>t.ze.addMatchingKeys(d,F.addedDocuments,q)));const ge=F.resumeToken;if(ge.approximateByteSize()>0){const me=Q.withResumeToken(ge,s).withSequenceNumber(d.currentSequenceNumber);u=u.insert(q,me),De=Q,ft=F,jt((et=me).resumeToken.approximateByteSize()>0),(0===De.resumeToken.approximateByteSize()||et.snapshotVersion.toMicroseconds()-De.snapshotVersion.toMicroseconds()>=3e8||ft.addedDocuments.size+ft.modifiedDocuments.size+ft.removedDocuments.size>0)&&C.push(t.ze.updateTargetData(d,me))}var De,et,ft});let x=ua();if(e.documentUpdates.forEach((F,q)=>{e.resolvedLimboDocuments.has(F)&&C.push(t.persistence.referenceDelegate.updateLimboDocument(d,F))}),C.push(sE(d,m,e.documentUpdates,s,void 0).next(F=>{x=F})),!s.isEqual(nn.min())){const F=t.ze.getLastRemoteSnapshotVersion(d).next(q=>t.ze.setTargetsMetadata(d,d.currentSequenceNumber,s));C.push(F)}return Ke.waitFor(C).next(()=>m.apply(d)).next(()=>t.Qn.vn(d,x)).next(()=>x)}).then(d=>(t.Un=u,d))}function sE(n,e,t,s,u){let d=Wn();return t.forEach(m=>d=d.add(m)),e.getEntries(n,d).next(m=>{let C=ua();return t.forEach((x,F)=>{const q=m.get(x),Q=(null==u?void 0:u.get(x))||s;F.isNoDocument()&&F.version.isEqual(nn.min())?(e.removeEntry(x,Q),C=C.insert(x,F)):!q.isValidDocument()||F.version.compareTo(q.version)>0||0===F.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(F,Q),C=C.insert(x,F)):tt("LocalStore","Ignoring outdated watch update for ",x,". Current version:",q.version," Watch version:",F.version)}),C})}function Yw(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(s,e)))}function Af(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.ze.getTargetData(s,e).next(d=>d?(u=d,Ke.resolve(u)):t.ze.allocateTargetId(s).next(m=>(u=new jl(e,m,0,s.currentSequenceNumber),t.ze.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.Un.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Un=t.Un.insert(s.targetId,s),t.qn.set(e,s.targetId)),s})}function Sf(n,e,t){return ry.apply(this,arguments)}function ry(){return(ry=(0,Se.Z)(function*(n,e,t){const s=ct(n),u=s.Un.get(e),d=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",d,m=>s.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!Zd(m))throw m;tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}s.Un=s.Un.remove(e),s.qn.delete(u.target)})).apply(this,arguments)}function Xd(n,e,t){const s=ct(n);let u=nn.min(),d=Wn();return s.persistence.runTransaction("Execute query","readonly",m=>function(C,x,F){const q=ct(C),Q=q.qn.get(F);return void 0!==Q?Ke.resolve(q.Un.get(Q)):q.ze.getTargetData(x,F)}(s,m,No(e)).next(C=>{if(C)return u=C.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(m,C.targetId).next(x=>{d=x})}).next(()=>s.Bn.getDocumentsMatchingQuery(m,e,t?u:nn.min(),t?d:Wn())).next(C=>({documents:C,Gn:d})))}function Qw(n,e){const t=ct(n),s=ct(t.ze),u=t.Un.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",d=>s.Tt(d,e).next(m=>m?m.target:null))}function oE(n){const e=ct(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,u,d){const m=ct(s);let C=ua(),x=Wv(d);const F=Is(u),q=IDBKeyRange.lowerBound(x,!0);return F.Kt({index:Vr.readTimeIndex,range:q},(Q,ge)=>{const me=zv(m.N,ge);C=C.insert(me.key,me),x=ge.readTime}).next(()=>({En:C,readTime:Zv(x)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:s})=>(e.Kn=s,t))}function xf(){return(xf=(0,Se.Z)(function*(n){const e=ct(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const u=Is(s);let d=nn.min();return u.Kt({index:Vr.readTimeIndex,reverse:!0},(m,C,x)=>{C.readTime&&(d=Zv(C.readTime)),x.done()}).next(()=>d)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function aE(){return(aE=(0,Se.Z)(function*(n,e,t,s){const u=ct(n);let d=Wn(),m=ua(),C=Uv();for(const q of t){const Q=e.zn(q.metadata.name);q.document&&(d=d.add(Q)),m=m.insert(Q,e.Hn(q)),C=C.insert(Q,e.Jn(q.metadata.readTime))}const x=u.jn.newChangeBuffer({trackRemovals:!0}),F=yield Af(u,(q=s,No(uf(kn.fromString(`__bundle__/docs/${q}`)))));var q;return u.persistence.runTransaction("Apply bundle documents","readwrite",q=>sE(q,x,m,nn.min(),C).next(Q=>(x.apply(q),Q)).next(Q=>u.ze.removeMatchingKeysForTargetId(q,F.targetId).next(()=>u.ze.addMatchingKeys(q,d,F.targetId)).next(()=>u.Qn.vn(q,Q)).next(()=>Q)))})).apply(this,arguments)}function yT(n,e){return Jw.apply(this,arguments)}function Jw(){return(Jw=(0,Se.Z)(function*(n,e,t=Wn()){const s=yield Af(n,No(Kv(e.bundledQuery))),u=ct(n);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=rs(e.readTime);if(s.snapshotVersion.compareTo(m)>=0)return u.Je.saveNamedQuery(d,e);const C=s.withResumeToken(ns.EMPTY_BYTE_STRING,m);return u.Un=u.Un.insert(C.targetId,C),u.ze.updateTargetData(d,C).next(()=>u.ze.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.ze.addMatchingKeys(d,t,s.targetId)).next(()=>u.Je.saveNamedQuery(d,e))})})).apply(this,arguments)}class _T{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Ke.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var s;return this.Yn.set(t.id,{id:(s=t).id,version:s.version,createTime:rs(s.createTime)}),Ke.resolve()}getNamedQuery(e,t){return Ke.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:Kv(s.bundledQuery),readTime:rs(s.readTime)}),Ke.resolve();var s}}class uE{constructor(){this.Zn=new Zr(is.ts),this.es=new Zr(is.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new is(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new is(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}cs(e){const t=new It(new kn([])),s=new is(t,e),u=new is(t,e+1),d=[];return this.es.forEachInRange([s,u],m=>{this.rs(m),d.push(m.key)}),d}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new It(new kn([])),s=new is(t,e),u=new is(t,e+1);let d=Wn();return this.es.forEachInRange([s,u],m=>{d=d.add(m.key)}),d}containsKey(e){const t=new is(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class is{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return It.comparator(e.key,t.key)||yn(e.ls,t.ls)}static ns(e,t){return yn(e.ls,t.ls)||It.comparator(e.key,t.key)}}class vT{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Zr(is.ts)}checkEmpty(e){return Ke.resolve(0===this.In.length)}addMutationBatch(e,t,s,u){const d=this.fs;this.fs++;const m=new Zm(d,t,s,u);this.In.push(m);for(const C of u)this.ds=this.ds.add(new is(C.key,d)),this.Ht.addToCollectionParentIndex(e,C.key.path.popLast());return Ke.resolve(m)}lookupMutationBatch(e,t){return Ke.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const u=this._s(t+1),d=u<0?0:u;return Ke.resolve(this.In.length>d?this.In[d]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Ke.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new is(t,0),u=new is(t,Number.POSITIVE_INFINITY),d=[];return this.ds.forEachInRange([s,u],m=>{const C=this.ws(m.ls);d.push(C)}),Ke.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Zr(yn);return t.forEach(u=>{const d=new is(u,0),m=new is(u,Number.POSITIVE_INFINITY);this.ds.forEachInRange([d,m],C=>{s=s.add(C.ls)})}),Ke.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let d=s;It.isDocumentKey(d)||(d=d.child(""));const m=new is(new It(d),0);let C=new Zr(yn);return this.ds.forEachWhile(x=>{const F=x.key.path;return!!s.isPrefixOf(F)&&(F.length===u&&(C=C.add(x.ls)),!0)},m),Ke.resolve(this.gs(C))}gs(e){const t=[];return e.forEach(s=>{const u=this.ws(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){jt(0===this.ys(t.batchId,"removed")),this.In.shift();let s=this.ds;return Ke.forEach(t.mutations,u=>{const d=new is(u.key,t.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.ds=s})}te(e){}containsKey(e,t){const s=new is(t,0),u=this.ds.firstAfterOrEqual(s);return Ke.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Ke.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class ET{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Mi(It.comparator),this.size=0}addEntry(e,t,s){const u=t.key,d=this.docs.get(u),m=d?d.size:0,C=this.ps(t);return this.docs=this.docs.insert(u,{document:t.clone(),size:C,readTime:s}),this.size+=C-m,this.Ht.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ke.resolve(s?s.document.clone():Tr.newInvalidDocument(t))}getEntries(e,t){let s=ua();return t.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.clone():Tr.newInvalidDocument(u))}),Ke.resolve(s)}getDocumentsMatchingQuery(e,t,s){let u=ua();const d=new It(t.path.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:C,value:{document:x,readTime:F}}=m.getNext();if(!t.path.isPrefixOf(C.path))break;F.compareTo(s)<=0||ho(t,x)&&(u=u.insert(x.key,x.clone()))}return Ke.resolve(u)}Ts(e,t){return Ke.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new bT(this)}getSize(e){return Ke.resolve(this.size)}}class bT extends Jd{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.document.isValidDocument()?t.push(this.Se.addEntry(e,u.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Ke.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class wT{constructor(e){this.persistence=e,this.Es=new Tf(t=>rf(t),rg),this.lastRemoteSnapshotVersion=nn.min(),this.highestTargetId=0,this.Is=0,this.As=new uE,this.targetCount=0,this.Rs=Uc.se()}forEachTarget(e,t){return this.Es.forEach((s,u)=>t(u)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Is&&(this.Is=t),Ke.resolve()}ae(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Ke.resolve()}updateTargetData(e,t){return this.ae(t),Ke.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,t,s){let u=0;const d=[];return this.Es.forEach((m,C)=>{C.sequenceNumber<=t&&null===s.get(C.targetId)&&(this.Es.delete(m),d.push(this.removeMatchingKeysForTargetId(e,C.targetId)),u++)}),Ke.waitFor(d).next(()=>u)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,t){const s=this.Es.get(t)||null;return Ke.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Ke.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const u=this.persistence.referenceDelegate,d=[];return u&&t.forEach(m=>{d.push(u.markPotentiallyOrphaned(e,m))}),Ke.waitFor(d)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Ke.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Ke.resolve(s)}containsKey(e,t){return Ke.resolve(this.As.containsKey(t))}}class CT{constructor(e,t){this.bs={},this.Le=new aa(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new wT(this),this.Ht=new Bw,this.He=new ET(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new Lw(t),this.Je=new _T(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new vT(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,s){tt("MemoryPersistence","Starting transaction:",e);const u=new IT(this.Le.next());return this.referenceDelegate.vs(),s(u).next(d=>this.referenceDelegate.Vs(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Ss(e,t){return Ke.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class IT extends Hv{constructor(e){super(),this.currentSequenceNumber=e}}class Xw{constructor(e){this.persistence=e,this.Ds=new uE,this.Cs=null}static Ns(e){return new Xw(e)}get xs(){if(this.Cs)return this.Cs;throw Ct()}addReference(e,t,s){return this.Ds.addReference(s,t),this.xs.delete(s.toString()),Ke.resolve()}removeReference(e,t,s){return this.Ds.removeReference(s,t),this.xs.add(s.toString()),Ke.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ke.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(u=>this.xs.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(d=>this.xs.add(d.toString()))}).next(()=>s.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.xs,s=>{const u=It.fromPath(s);return this.ks(e,u).next(d=>{d||t.removeEntry(u)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Ke.or([()=>Ke.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function eC(n,e){return`firestore_clients_${n}_${e}`}function Rf(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function cE(n,e){return`firestore_targets_${n}_${e}`}class sy{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static $s(e,t,s){const u=JSON.parse(s);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Qe(u.error.code,u.error.message))),m?new sy(e,t,u.state,d):(xi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eg{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Qe(s.error.code,s.error.message))),d?new Eg(e,s.state,u):(xi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=dg();for(let m=0;u&&m<s.activeTargetIds.length;++m)u=WD(s.activeTargetIds[m]),d=d.add(s.activeTargetIds[m]);return u?new eh(e,d):(xi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jc{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jc(t.clientId,t.onlineState):(xi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class oy{constructor(){this.activeTargetIds=dg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lE{constructor(e,t,s,u,d){this.window=e,this.Oe=t,this.persistenceKey=s,this.Ls=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Mi(yn),this.started=!1,this.Ks=[];const m=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.js=eC(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new oy),this.Ws=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(C){return`firestore_bundle_loaded_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.pn();for(const u of t){if(u===e.Ls)continue;const d=e.getItem(eC(e.persistenceKey,u));if(d){const m=eh.$s(u,d);m&&(e.qs=e.qs.insert(m.clientId,m))}}e.Ys();const s=e.storage.getItem(e.Hs);if(s){const u=e.Xs(s);u&&e.Zs(u)}for(const u of e.Ks)e.Us(u);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,s){this.ei(e,t,s),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(cE(this.persistenceKey,e));if(s){const u=Eg.$s(e,s);u&&(t=u.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cE(this.persistenceKey,e))}updateQueryState(e,t,s){this.ii(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.ni(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return tt("SharedClientState","READ",e,t),t}setItem(e,t){tt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const s=e;if(s.storageArea===this.storage){if(tt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ws.test(s.key)){if(null==s.newValue){const u=t.ai(s.key);return t.ci(u,null)}{const u=t.ui(s.key,s.newValue);if(u)return t.ci(u.clientId,u)}}else if(t.Gs.test(s.key)){if(null!==s.newValue){const u=t.hi(s.key,s.newValue);if(u)return t.li(u)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const u=t.fi(s.key,s.newValue);if(u)return t.di(u)}}else if(s.key===t.Hs){if(null!==s.newValue){const u=t.Xs(s.newValue);if(u)return t.Zs(u)}}else if(s.key===t.Qs){const u=function(d){let m=aa.T;if(null!=d)try{const C=JSON.parse(d);jt("number"==typeof C),m=C}catch(C){xi("SharedClientState","Failed to read sequence number from WebStorage",C)}return m}(s.newValue);u!==aa.T&&t.sequenceNumberHandler(u)}else if(s.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,s){const u=new sy(this.currentUser,e,t,s),d=Rf(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Os())}ni(e){const t=Rf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,s){const u=cE(this.persistenceKey,e),d=new Eg(e,t,s);this.setItem(u,d.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const s=this.ai(e);return eh.$s(s,t)}hi(e,t){const s=this.Gs.exec(e),u=Number(s[1]);return sy.$s(new bs(void 0!==s[2]?s[2]:null),u,t)}fi(e,t){const s=this.zs.exec(e),u=Number(s[1]);return Eg.$s(u,t)}Xs(e){return jc.$s(e)}li(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const s=t?this.qs.insert(e,t):this.qs.remove(e),u=this.ti(this.qs),d=this.ti(s),m=[],C=[];return d.forEach(x=>{u.has(x)||m.push(x)}),u.forEach(x=>{d.has(x)||C.push(x)}),this.syncEngine.gi(m,C).then(()=>{this.qs=s})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=dg();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class DT{constructor(){this.yi=new oy,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,s){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new oy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class TT{Ti(e){}shutdown(){}}class bg{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ST{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class tC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,s,u){const d=this.Bi(e,t);tt("RestConnection","Sending: ",d,s);const m={};return this.Ui(m,u),this.qi(e,d,m,s).then(C=>(tt("RestConnection","Received: ",C),C),C=>{throw Kp("RestConnection",`${e} failed with error: `,C,"url: ",d,"request:",s),C})}Ki(e,t,s,u){return this.Li(e,t,s,u)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Vd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])}Bi(e,t){return`${this.Fi}/v1/${t}:${AT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,s,u){return new Promise((d,m)=>{const C=new $D;C.listenOnce(jD.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case Nb.NO_ERROR:const F=C.getResponseJson();tt("Connection","XHR received:",JSON.stringify(F)),d(F);break;case Nb.TIMEOUT:tt("Connection",'RPC "'+e+'" timed out'),m(new Qe(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case Nb.HTTP_ERROR:const q=C.getStatus();if(tt("Connection",'RPC "'+e+'" failed with status:',q,"response text:",C.getResponseText()),q>0){const Q=C.getResponseJson().error;if(Q&&Q.status&&Q.message){const ge=function(me){const De=me.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(De)>=0?De:Fe.UNKNOWN}(Q.status);m(new Qe(ge,Q.message))}else m(new Qe(Fe.UNKNOWN,"Server responded with status "+C.getStatus()))}else m(new Qe(Fe.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{tt("Connection",'RPC "'+e+'" completed.')}});const x=JSON.stringify(u);C.send(t,"POST",x,s,15)})}ji(e,t){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Rb(),d=BD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Pb({})),this.Ui(m.initMessageHeaders,t),(0,Et.uI)()||(0,Et.b$)()||(0,Et.d)()||(0,Et.w1)()||(0,Et.Mn)()||(0,Et.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const C=s.join("");tt("Connection","Creating WebChannel: "+C,m);const x=u.createWebChannel(C,m);let F=!1,q=!1;const Q=new ST({vi:me=>{q?tt("Connection","Not sending because WebChannel is closed:",me):(F||(tt("Connection","Opening WebChannel transport."),x.open(),F=!0),tt("Connection","WebChannel sending:",me),x.send(me))},Vi:()=>x.close()}),ge=(me,De,et)=>{me.listen(De,ft=>{try{et(ft)}catch(xt){setTimeout(()=>{throw xt},0)}})};return ge(x,Nm.EventType.OPEN,()=>{q||tt("Connection","WebChannel transport opened.")}),ge(x,Nm.EventType.CLOSE,()=>{q||(q=!0,tt("Connection","WebChannel transport closed"),Q.$i())}),ge(x,Nm.EventType.ERROR,me=>{q||(q=!0,Kp("Connection","WebChannel transport errored:",me),Q.$i(new Qe(Fe.UNAVAILABLE,"The operation could not be completed")))}),ge(x,Nm.EventType.MESSAGE,me=>{var De;if(!q){const et=me.data[0];jt(!!et);const ft=et,xt=ft.error||(null===(De=ft[0])||void 0===De?void 0:De.error);if(xt){tt("Connection","WebChannel received error:",xt);const Mn=xt.status;let Ln=function(cr){const ki=yi[cr];if(void 0!==ki)return dw(ki)}(Mn),kt=xt.message;void 0===Ln&&(Ln=Fe.INTERNAL,kt="Unknown error status: "+Mn+" with message "+xt.message),q=!0,Q.$i(new Qe(Ln,kt)),x.close()}else tt("Connection","WebChannel received:",et),Q.Oi(et)}}),ge(d,Mb.STAT_EVENT,me=>{me.stat===Ob.PROXY?tt("Connection","Detected buffering proxy"):me.stat===Ob.NOPROXY&&tt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Q.ki()},0),Q}}function dE(){return"undefined"!=typeof window?window:null}function Nf(){return"undefined"!=typeof document?document:null}function Mf(n){return new mx(n,!0)}class ay{constructor(e,t,s=1e3,u=1.5,d=6e4){this.Oe=e,this.timerId=t,this.Qi=s,this.Wi=u,this.Gi=d,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),u=Math.max(0,t-s);u>0&&tt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,u,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class nC{constructor(e,t,s,u,d,m){this.Oe=e,this.er=s,this.nr=u,this.credentialsProvider=d,this.listener=m,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new ay(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,Se.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,Se.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var s=this;return(0,Se.Z)(function*(){s._r(),s.rr.cancel(),s.sr++,3!==e?s.rr.reset():t&&t.code===Fe.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),s.rr.Yi()):t&&t.code===Fe.UNAUTHENTICATED&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.mr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(s=>{this.sr===t&&this.yr(s)},s=>{e(()=>{const u=new Qe(Fe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.pr(u)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Tr(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(s=>{t(()=>this.pr(s))}),this.stream.onMessage(s=>{t(()=>this.onMessage(s))})}ur(){var e=this;this.state=4,this.rr.Xi((0,Se.Z)(function*(){e.state=0,e.start()}))}pr(e){return tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xT extends nC{constructor(e,t,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,s,d),this.N=u}Tr(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(x=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===x?1:"REMOVE"===x?2:"CURRENT"===x?3:"RESET"===x?4:Ct(),u=e.targetChange.targetIds||[],d=function(x,F){return x.D?(jt(void 0===F||"string"==typeof F),ns.fromBase64String(F||"")):(jt(void 0===F||F instanceof Uint8Array),ns.fromUint8Array(F||new Uint8Array))}(n,e.targetChange.resumeToken),m=e.targetChange.cause,C=m&&function(x){const F=void 0===x.code?Fe.UNKNOWN:dw(x.code);return new Qe(F,x.message||"")}(m);t=new _w(s,u,d,C||null)}else if("documentChange"in e){const s=e.documentChange,u=ca(n,s.document.name),d=rs(s.document.updateTime),m=new qs({mapValue:{fields:s.document.fields}}),C=Tr.newFoundDocument(u,d,m);t=new Gu(s.targetIds||[],s.removedTargetIds||[],C.key,C)}else if("documentDelete"in e){const s=e.documentDelete,u=ca(n,s.document),d=s.readTime?rs(s.readTime):nn.min(),m=Tr.newNoDocument(u,d);t=new Gu([],s.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const s=e.documentRemove,u=ca(n,s.document);t=new Gu([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return Ct();{const s=e.filter,d=new QD(s.count||0);t=new yw(s.targetId,d)}}var x;return t}(this.N,e),s=function(u){if(!("targetChange"in u))return nn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?nn.min():d.readTime?rs(d.readTime):nn.min()}(e);return this.listener.Er(t,s)}Ir(e){const t={};t.database=pf(this.N),t.addTarget=function(u,d){let m;const C=d.target;return m=ig(C)?{documents:Aw(u,C)}:{query:gf(u,C)},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=bw(u,d.resumeToken):d.snapshotVersion.compareTo(nn.min())>0&&(m.readTime=Mt(u,d.snapshotVersion.toTimestamp())),m}(this.N,e);const s=function(n,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.wr(t)}Ar(e){const t={};t.database=pf(this.N),t.removeTarget=e,this.wr(t)}}class rC extends nC{constructor(e,t,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle",t,s,d),this.N=u,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Tr(e){return this.nr.ji("Write",e)}onMessage(e){if(jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(n,e){return n&&n.length>0?(jt(void 0!==e),n.map(t=>function(s,u){let d=rs(s.updateTime?s.updateTime:u);return d.isEqual(nn.min())&&(d=rs(u)),new Bm(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=rs(e.commitTime);return this.listener.vr(s,t)}return jt(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=pf(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>hg(this.N,s))};this.wr(t)}}class RT extends class{}{constructor(e,t,s){super(),this.credentials=e,this.nr=t,this.N=s,this.Dr=!1}Cr(){if(this.Dr)throw new Qe(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,s){return this.Cr(),this.credentials.getToken().then(u=>this.nr.Li(e,t,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new Qe(Fe.UNKNOWN,u.toString())})}Ki(e,t,s){return this.Cr(),this.credentials.getToken().then(u=>this.nr.Ki(e,t,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Fe.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new Qe(Fe.UNKNOWN,u.toString())})}terminate(){this.Dr=!0}}class iC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(xi(t),this.$r=!1):tt("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class uy{constructor(e,t,s,u,d){var m=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=d,this.Qr.Ti(C=>{s.enqueueAndForget((0,Se.Z)(function*(){var x;Ku(m)&&(tt("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,Se.Z)(function*(F){const q=ct(F);q.Kr.add(4),yield Wu(q),q.Wr.set("Unknown"),q.Kr.delete(4),yield Hl(q)}),function(F){return x.apply(this,arguments)})(m))}))}),this.Wr=new iC(s,u)}}function Hl(n){return sC.apply(this,arguments)}function sC(){return(sC=(0,Se.Z)(function*(n){if(Ku(n))for(const e of n.jr)yield e(!0)})).apply(this,arguments)}function Wu(n){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,Se.Z)(function*(n){for(const e of n.jr)yield e(!1)})).apply(this,arguments)}function hu(n,e){const t=ct(n);t.qr.has(e.targetId)||(t.qr.set(e.targetId,e),Fo(t)?Yt(t):Hc(t).cr()&&th(t,e))}function Zu(n,e){const t=ct(n),s=Hc(t);t.qr.delete(e),s.cr()&&NT(t,e),0===t.qr.size&&(s.cr()?s.lr():Ku(t)&&t.Wr.set("Unknown"))}function th(n,e){n.Gr.Y(e.targetId),Hc(n).Ir(e)}function NT(n,e){n.Gr.Y(e),Hc(n).Ar(e)}function Yt(n){n.Gr=new gx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qr.get(e)||null}),Hc(n).start(),n.Wr.Or()}function Fo(n){return Ku(n)&&!Hc(n).ar()&&n.qr.size>0}function Ku(n){return 0===ct(n).Kr.size}function Gl(n){n.Gr=void 0}function wx(n){return cy.apply(this,arguments)}function cy(){return(cy=(0,Se.Z)(function*(n){n.qr.forEach((e,t)=>{th(n,e)})})).apply(this,arguments)}function oC(n,e){return aC.apply(this,arguments)}function aC(){return(aC=(0,Se.Z)(function*(n,e){Gl(n),Fo(n)?(n.Wr.Lr(e),Yt(n)):n.Wr.set("Unknown")})).apply(this,arguments)}function MT(n,e,t){return hE.apply(this,arguments)}function hE(){return(hE=(0,Se.Z)(function*(n,e,t){if(n.Wr.set("Online"),e instanceof _w&&2===e.state&&e.cause)try{yield(s=(0,Se.Z)(function*(u,d){const m=d.cause;for(const C of d.targetIds)u.qr.has(C)&&(yield u.remoteSyncer.rejectListen(C,m),u.qr.delete(C),u.Gr.removeTarget(C))}),function(u,d){return s.apply(this,arguments)})(n,e)}catch(s){tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield po(n,s)}else if(e instanceof Gu?n.Gr.rt(e):e instanceof yw?n.Gr.ft(e):n.Gr.ct(e),!t.isEqual(nn.min()))try{const s=yield Zw(n.localStore);t.compareTo(s)>=0&&(yield function(u,d){const m=u.Gr._t(d);return m.targetChanges.forEach((C,x)=>{if(C.resumeToken.approximateByteSize()>0){const F=u.qr.get(x);F&&u.qr.set(x,F.withResumeToken(C.resumeToken,d))}}),m.targetMismatches.forEach(C=>{const x=u.qr.get(C);if(!x)return;u.qr.set(C,x.withResumeToken(ns.EMPTY_BYTE_STRING,x.snapshotVersion)),NT(u,C);const F=new jl(x.target,C,1,x.sequenceNumber);th(u,F)}),u.remoteSyncer.applyRemoteEvent(m)}(n,t))}catch(s){tt("RemoteStore","Failed to raise snapshot:",s),yield po(n,s)}var s})).apply(this,arguments)}function po(n,e,t){return br.apply(this,arguments)}function br(){return(br=(0,Se.Z)(function*(n,e,t){if(!Zd(e))throw e;n.Kr.add(1),yield Wu(n),n.Wr.set("Offline"),t||(t=()=>Zw(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){tt("RemoteStore","Retrying IndexedDB access"),yield t(),n.Kr.delete(1),yield Hl(n)}))})).apply(this,arguments)}function La(n,e){return e().catch(t=>po(n,t,e))}function nh(n){return fE.apply(this,arguments)}function fE(){return(fE=(0,Se.Z)(function*(n){const e=ct(n),t=Gc(e);let s=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;uC(e);)try{const u=yield Yw(e.localStore,s);if(null===u){0===e.Ur.length&&t.lr();break}s=u.batchId,pE(e,u)}catch(u){yield po(e,u)}rh(e)&&Of(e)})).apply(this,arguments)}function uC(n){return Ku(n)&&n.Ur.length<10}function pE(n,e){n.Ur.push(e);const t=Gc(n);t.cr()&&t.br&&t.Pr(e.mutations)}function rh(n){return Ku(n)&&!Gc(n).ar()&&n.Ur.length>0}function Of(n){Gc(n).start()}function OT(n){return $c.apply(this,arguments)}function $c(){return($c=(0,Se.Z)(function*(n){Gc(n).Sr()})).apply(this,arguments)}function PT(n){return ly.apply(this,arguments)}function ly(){return(ly=(0,Se.Z)(function*(n){const e=Gc(n);for(const t of n.Ur)e.Pr(t.mutations)})).apply(this,arguments)}function gE(n,e,t){return ih.apply(this,arguments)}function ih(){return(ih=(0,Se.Z)(function*(n,e,t){const s=n.Ur.shift(),u=Km.from(s,e,t);yield La(n,()=>n.remoteSyncer.applySuccessfulWrite(u)),yield nh(n)})).apply(this,arguments)}function mE(n,e){return dy.apply(this,arguments)}function dy(){return(dy=(0,Se.Z)(function*(n,e){var t;e&&Gc(n).br&&(yield(t=(0,Se.Z)(function*(s,u){if(lw(d=u.code)&&d!==Fe.ABORTED){const m=s.Ur.shift();Gc(s).hr(),yield La(s,()=>s.remoteSyncer.rejectFailedWrite(m.batchId,u)),yield nh(s)}var d}),function(s,u){return t.apply(this,arguments)})(n,e)),rh(n)&&Of(n)})).apply(this,arguments)}function ql(n,e){return yE.apply(this,arguments)}function yE(){return(yE=(0,Se.Z)(function*(n,e){const t=ct(n);e?(t.Kr.delete(2),yield Hl(t)):e||(t.Kr.add(2),yield Wu(t),t.Wr.set("Unknown"))})).apply(this,arguments)}function Hc(n){return n.zr||(n.zr=function(e,t,s){const u=ct(e);return u.Cr(),new xT(t,u.nr,u.credentials,u.N,s)}(n.datastore,n.asyncQueue,{Si:wx.bind(null,n),Ci:oC.bind(null,n),Er:MT.bind(null,n)}),n.jr.push(function(){var e=(0,Se.Z)(function*(t){t?(n.zr.hr(),Fo(n)?Yt(n):n.Wr.set("Unknown")):(yield n.zr.stop(),Gl(n))});return function(t){return e.apply(this,arguments)}}())),n.zr}function Gc(n){return n.Hr||(n.Hr=function(e,t,s){const u=ct(e);return u.Cr(),new rC(t,u.nr,u.credentials,u.N,s)}(n.datastore,n.asyncQueue,{Si:OT.bind(null,n),Ci:mE.bind(null,n),Vr:PT.bind(null,n),vr:gE.bind(null,n)}),n.jr.push(function(){var e=(0,Se.Z)(function*(t){t?(n.Hr.hr(),yield nh(n)):(yield n.Hr.stop(),n.Ur.length>0&&(tt("RemoteStore",`Stopping write stream with ${n.Ur.length} pending writes`),n.Ur=[]))});return function(t){return e.apply(this,arguments)}}())),n.Hr}class hy{constructor(e,t,s,u,d){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(e,t,s,u,d){const m=Date.now()+s,C=new hy(e,t,m,u,d);return C.start(s),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qe(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sh(n,e){if(xi("AsyncQueue",`${e}: ${n}`),Zd(n))return new Qe(Fe.UNAVAILABLE,`${e}: ${n}`);throw n}class qc{constructor(e){this.comparator=e?(t,s)=>e(t,s)||It.comparator(t.key,s.key):(t,s)=>It.comparator(t.key,s.key),this.keyedMap=Hm(),this.sortedSet=new Mi(this.comparator)}static emptySet(e){return new qc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new qc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class cC{constructor(){this.Jr=new Mi(It.comparator)}track(e){const t=e.doc.key,s=this.Jr.get(t);s?0!==e.type&&3===s.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==s.type?this.Jr=this.Jr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Jr=this.Jr.remove(t):1===e.type&&2===s.type?this.Jr=this.Jr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Ct():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,s)=>{e.push(s)}),e}}class zl{constructor(e,t,s,u,d,m,C,x){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=C,this.excludesMetadataChanges=x}static fromInitialDocuments(e,t,s,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new zl(e,t,qc.emptySet(t),d,s,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&og(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class _E{constructor(){this.Xr=void 0,this.listeners=[]}}class Cx{constructor(){this.queries=new Tf(e=>Xb(e),og),this.onlineState="Unknown",this.Zr=new Set}}function lC(n,e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Se.Z)(function*(n,e){const t=ct(n),s=e.query;let u=!1,d=t.queries.get(s);if(d||(u=!0,d=new _E),u)try{d.Xr=yield t.onListen(s)}catch(m){const C=sh(m,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(C)}t.queries.set(s,d),d.listeners.push(e),e.eo(t.onlineState),d.Xr&&e.no(d.Xr)&&vE(t)})).apply(this,arguments)}function dC(n,e){return oh.apply(this,arguments)}function oh(){return(oh=(0,Se.Z)(function*(n,e){const t=ct(n),s=e.query;let u=!1;const d=t.queries.get(s);if(d){const m=d.listeners.indexOf(e);m>=0&&(d.listeners.splice(m,1),u=0===d.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function kT(n,e){const t=ct(n);let s=!1;for(const u of e){const m=t.queries.get(u.query);if(m){for(const C of m.listeners)C.no(u)&&(s=!0);m.Xr=u}}s&&vE(t)}function FT(n,e,t){const s=ct(n),u=s.queries.get(e);if(u)for(const d of u.listeners)d.onError(t);s.queries.delete(e)}function vE(n){n.Zr.forEach(e=>{e.next()})}class hC{constructor(e,t,s){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=s||{}}no(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new zl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class Ix{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class fC{constructor(e){this.N=e}zn(e){return ca(this.N,e)}Hn(e){return e.metadata.exists?Bv(this.N,e.document,!1):Tr.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return rs(e)}}class Zs{constructor(e,t,s){this.lo=e,this.localStore=t,this.N=s,this.queries=[],this.documents=[],this.progress=pC(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,s=new fC(this.N);for(const u of e)if(u.metadata.queries){const d=s.zn(u.metadata.name);for(const m of u.metadata.queries){const C=(t.get(m)||Wn()).add(d);t.set(m,C)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function(n,e,t,s){return aE.apply(this,arguments)}(e.localStore,new fC(e.N),e.documents,e.lo.id),s=e.wo(e.documents);for(const u of e.queries)yield yT(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",new pT(Object.assign({},e.progress),t)})()}}function pC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gC{constructor(e){this.key=e}}class fy{constructor(e){this.key=e}}class mC{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Wn(),this.mutatedKeys=Wn(),this.po=ka(e),this.To=new qc(this.po)}get Eo(){return this._o}Io(e,t){const s=t?t.Ao:new cC,u=t?t.To:this.To;let d=t?t.mutatedKeys:this.mutatedKeys,m=u,C=!1;const x=Lm(this.query)&&u.size===this.query.limit?u.last():null,F=sg(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((q,Q)=>{const ge=u.get(q),me=ho(this.query,Q)?Q:null,De=!!ge&&this.mutatedKeys.has(ge.key),et=!!me&&(me.hasLocalMutations||this.mutatedKeys.has(me.key)&&me.hasCommittedMutations);let ft=!1;ge&&me?ge.data.isEqual(me.data)?De!==et&&(s.track({type:3,doc:me}),ft=!0):this.Ro(ge,me)||(s.track({type:2,doc:me}),ft=!0,(x&&this.po(me,x)>0||F&&this.po(me,F)<0)&&(C=!0)):!ge&&me?(s.track({type:0,doc:me}),ft=!0):ge&&!me&&(s.track({type:1,doc:ge}),ft=!0,(x||F)&&(C=!0)),ft&&(me?(m=m.add(me),d=et?d.add(q):d.delete(q)):(m=m.delete(q),d=d.delete(q)))}),Lm(this.query)||sg(this.query))for(;m.size>this.query.limit;){const q=Lm(this.query)?m.last():m.first();m=m.delete(q.key),d=d.delete(q.key),s.track({type:1,doc:q})}return{To:m,Ao:s,Ln:C,mutatedKeys:d}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.To;this.To=e.To,this.mutatedKeys=e.mutatedKeys;const d=e.Ao.Yr();d.sort((F,q)=>function(Q,ge){const me=De=>{switch(De){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return me(Q)-me(ge)}(F.type,q.type)||this.po(F.doc,q.doc)),this.bo(s);const m=t?this.Po():[],C=0===this.yo.size&&this.current?1:0,x=C!==this.mo;return this.mo=C,0!==d.length||x?{snapshot:new zl(this.query,e.To,u,d,e.mutatedKeys,0===C,x,!1),vo:m}:{vo:m}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({To:this.To,Ao:new cC,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.To.has(e)&&!this.To.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(t=>this._o=this._o.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this._o=this._o.delete(t)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Wn(),this.To.forEach(s=>{this.Vo(s.key)&&(this.yo=this.yo.add(s.key))});const t=[];return e.forEach(s=>{this.yo.has(s)||t.push(new fy(s))}),this.yo.forEach(s=>{e.has(s)||t.push(new gC(s))}),t}So(e){this._o=e.Gn,this.yo=Wn();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return zl.fromInitialDocuments(this.query,this.To,this.mutatedKeys,0===this.mo)}}class LT{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class VT{constructor(e){this.key=e,this.Co=!1}}class UT{constructor(e,t,s,u,d,m){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.No={},this.xo=new Tf(C=>Xb(C),og),this.ko=new Map,this.$o=new Set,this.Oo=new Mi(It.comparator),this.Fo=new Map,this.Mo=new uE,this.Lo={},this.Bo=new Map,this.Uo=Uc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function BT(n,e){return EE.apply(this,arguments)}function EE(){return(EE=(0,Se.Z)(function*(n,e){const t=Ig(n);let s,u;const d=t.xo.get(e);if(d)s=d.targetId,t.sharedClientState.addLocalQueryTarget(s),u=d.view.Do();else{const m=yield Af(t.localStore,No(e)),C=t.sharedClientState.addLocalQueryTarget(m.targetId);s=m.targetId,u=yield wg(t,e,s,"current"===C),t.isPrimaryClient&&hu(t.remoteStore,m)}return u})).apply(this,arguments)}function wg(n,e,t,s){return bE.apply(this,arguments)}function bE(){return(bE=(0,Se.Z)(function*(n,e,t,s){n.Ko=(q,Q,ge)=>{return(me=(0,Se.Z)(function*(De,et,ft,xt){let Mn=et.view.Io(ft);Mn.Ln&&(Mn=yield Xd(De.localStore,et.query,!1).then(({documents:cr})=>et.view.Io(cr,Mn)));const Ln=xt&&xt.targetChanges.get(et.targetId),kt=et.view.applyChanges(Mn,De.isPrimaryClient,Ln);return SE(De,et.targetId,kt.vo),kt.snapshot}),function(De,et,ft,xt){return me.apply(this,arguments)})(n,q,Q,ge);var me};const u=yield Xd(n.localStore,e,!0),d=new mC(e,u.Gn),m=d.Io(u.documents),C=hf.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),x=d.applyChanges(m,n.isPrimaryClient,C);SE(n,t,x.vo);const F=new LT(e,t,d);return n.xo.set(e,F),n.ko.has(t)?n.ko.get(t).push(e):n.ko.set(t,[e]),x.snapshot})).apply(this,arguments)}function jT(n,e){return py.apply(this,arguments)}function py(){return(py=(0,Se.Z)(function*(n,e){const t=ct(n),s=t.xo.get(e),u=t.ko.get(s.targetId);if(u.length>1)return t.ko.set(s.targetId,u.filter(d=>!og(d,e))),void t.xo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield Sf(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Zu(t.remoteStore,s.targetId),uh(t,s.targetId)}).catch($l))):(uh(t,s.targetId),yield Sf(t.localStore,s.targetId,!0))})).apply(this,arguments)}function CE(){return(CE=(0,Se.Z)(function*(n,e,t){const s=kE(n);try{const u=yield function(d,m){const C=ct(d),x=ts.now(),F=m.reduce((Q,ge)=>Q.add(ge.key),Wn());let q;return C.persistence.runTransaction("Locally write mutations","readwrite",Q=>C.Qn.Pn(Q,F).next(ge=>{q=ge;const me=[];for(const De of m){const et=ow(De,q.get(De.key));null!=et&&me.push(new Vl(De.key,et,$b(et.value.mapValue),ri.exists(!0)))}return C.In.addMutationBatch(Q,x,me,m)})).then(Q=>(Q.applyToLocalDocumentSet(q),{batchId:Q.batchId,changes:q}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(d,m,C){let x=d.Lo[d.currentUser.toKey()];x||(x=new Mi(yn)),x=x.insert(m,C),d.Lo[d.currentUser.toKey()]=x}(s,u.batchId,t),yield zc(s,u.changes),yield nh(s.remoteStore)}catch(u){const d=sh(u,"Failed to persist write");t.reject(d)}})).apply(this,arguments)}function $T(n,e){return IE.apply(this,arguments)}function IE(){return(IE=(0,Se.Z)(function*(n,e){const t=ct(n);try{const s=yield Kw(t.localStore,e);e.targetChanges.forEach((u,d)=>{const m=t.Fo.get(d);m&&(jt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.Co=!0:u.modifiedDocuments.size>0?jt(m.Co):u.removedDocuments.size>0&&(jt(m.Co),m.Co=!1))}),yield zc(t,s,e)}catch(s){yield $l(s)}})).apply(this,arguments)}function yC(n,e,t){const s=ct(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.xo.forEach((d,m)=>{const C=m.view.eo(e);C.snapshot&&u.push(C.snapshot)}),function(d,m){const C=ct(d);C.onlineState=m;let x=!1;C.queries.forEach((F,q)=>{for(const Q of q.listeners)Q.eo(m)&&(x=!0)}),x&&vE(C)}(s.eventManager,e),u.length&&s.No.Er(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function HT(n,e,t){return DE.apply(this,arguments)}function DE(){return(DE=(0,Se.Z)(function*(n,e,t){const s=ct(n);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.Fo.get(e),d=u&&u.key;if(d){let m=new Mi(It.comparator);m=m.insert(d,Tr.newNoDocument(d,nn.min()));const C=Wn().add(d),x=new zd(nn.min(),new Map,new Zr(yn),m,C);yield $T(s,x),s.Oo=s.Oo.remove(d),s.Fo.delete(e),xE(s)}else yield Sf(s.localStore,e,!1).then(()=>uh(s,e,t)).catch($l)})).apply(this,arguments)}function GT(n,e){return TE.apply(this,arguments)}function TE(){return(TE=(0,Se.Z)(function*(n,e){const t=ct(n),s=e.batch.batchId;try{const u=yield mT(t.localStore,e);_C(t,s,null),ah(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield zc(t,u)}catch(u){yield $l(u)}})).apply(this,arguments)}function Cg(n,e,t){return AE.apply(this,arguments)}function AE(){return(AE=(0,Se.Z)(function*(n,e,t){const s=ct(n);try{const u=yield function(d,m){const C=ct(d);return C.persistence.runTransaction("Reject batch","readwrite-primary",x=>{let F;return C.In.lookupMutationBatch(x,m).next(q=>(jt(null!==q),F=q.keys(),C.In.removeMutationBatch(x,q))).next(()=>C.In.performConsistencyCheck(x)).next(()=>C.Qn.Pn(x,F))})}(s.localStore,e);_C(s,e,t),ah(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield zc(s,u)}catch(u){yield $l(u)}})).apply(this,arguments)}function gy(){return(gy=(0,Se.Z)(function*(n,e){const t=ct(n);Ku(t.remoteStore)||tt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const m=ct(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>m.In.getHighestUnacknowledgedBatchId(C))}(t.localStore);if(-1===s)return void e.resolve();const u=t.Bo.get(s)||[];u.push(e),t.Bo.set(s,u)}catch(s){const u=sh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function ah(n,e){(n.Bo.get(e)||[]).forEach(t=>{t.resolve()}),n.Bo.delete(e)}function _C(n,e,t){const s=ct(n);let u=s.Lo[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(t?d.reject(t):d.resolve(),u=u.remove(e)),s.Lo[s.currentUser.toKey()]=u}}function uh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.ko.get(e))n.xo.delete(s),t&&n.No.jo(s,t);n.ko.delete(e),n.isPrimaryClient&&n.Mo.cs(e).forEach(s=>{n.Mo.containsKey(s)||vC(n,s)})}function vC(n,e){n.$o.delete(e.path.canonicalString());const t=n.Oo.get(e);null!==t&&(Zu(n.remoteStore,t),n.Oo=n.Oo.remove(e),n.Fo.delete(t),xE(n))}function SE(n,e,t){for(const s of t)s instanceof gC?(n.Mo.addReference(s.key,e),zT(n,s)):s instanceof fy?(tt("SyncEngine","Document no longer in limbo: "+s.key),n.Mo.removeReference(s.key,e),n.Mo.containsKey(s.key)||vC(n,s.key)):Ct()}function zT(n,e){const t=e.key,s=t.path.canonicalString();n.Oo.get(t)||n.$o.has(s)||(tt("SyncEngine","New document in limbo: "+t),n.$o.add(s),xE(n))}function xE(n){for(;n.$o.size>0&&n.Oo.size<n.maxConcurrentLimboResolutions;){const e=n.$o.values().next().value;n.$o.delete(e);const t=new It(kn.fromString(e)),s=n.Uo.next();n.Fo.set(s,new VT(t)),n.Oo=n.Oo.insert(t,s),hu(n.remoteStore,new jl(No(uf(t.path)),s,2,aa.T))}}function zc(n,e,t){return my.apply(this,arguments)}function my(){return(my=(0,Se.Z)(function*(n,e,t){const s=ct(n),u=[],d=[],m=[];var C;s.xo.isEmpty()||(s.xo.forEach((C,x)=>{m.push(s.Ko(x,e,t).then(F=>{if(F){s.isPrimaryClient&&s.sharedClientState.updateQueryState(x.targetId,F.fromCache?"not-current":"current"),u.push(F);const q=ty.kn(x.targetId,F);d.push(q)}}))}),yield Promise.all(m),s.No.Er(u),yield(C=(0,Se.Z)(function*(x,F){const q=ct(x);try{yield q.persistence.runTransaction("notifyLocalViewChanges","readwrite",Q=>Ke.forEach(F,ge=>Ke.forEach(ge.Nn,me=>q.persistence.referenceDelegate.addReference(Q,ge.targetId,me)).next(()=>Ke.forEach(ge.xn,me=>q.persistence.referenceDelegate.removeReference(Q,ge.targetId,me)))))}catch(Q){if(!Zd(Q))throw Q;tt("LocalStore","Failed to update sequence numbers: "+Q)}for(const Q of F){const ge=Q.targetId;if(!Q.fromCache){const me=q.Un.get(ge),et=me.withLastLimboFreeSnapshotVersion(me.snapshotVersion);q.Un=q.Un.insert(ge,et)}}}),function(x,F){return C.apply(this,arguments)})(s.localStore,d))})).apply(this,arguments)}function WT(n,e){return RE.apply(this,arguments)}function RE(){return(RE=(0,Se.Z)(function*(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){tt("SyncEngine","User change. New user:",e.toKey());const s=yield gT(t.localStore,e);t.currentUser=e,(u=t).Bo.forEach(m=>{m.forEach(C=>{C.reject(new Qe(Fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Bo.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield zc(t,s.Wn)}var u})).apply(this,arguments)}function Dx(n,e){const t=ct(n),s=t.Fo.get(e);if(s&&s.Co)return Wn().add(s.key);{let u=Wn();const d=t.ko.get(e);if(!d)return u;for(const m of d){const C=t.xo.get(m);u=u.unionWith(C.view.Eo)}return u}}function Tx(n,e){return EC.apply(this,arguments)}function EC(){return(EC=(0,Se.Z)(function*(n,e){const t=ct(n),s=yield Xd(t.localStore,e.query,!0),u=e.view.So(s);return t.isPrimaryClient&&SE(t,e.targetId,u.vo),u})).apply(this,arguments)}function NE(n){return ME.apply(this,arguments)}function ME(){return(ME=(0,Se.Z)(function*(n){const e=ct(n);return oE(e.localStore).then(t=>zc(e,t))})).apply(this,arguments)}function ZT(n,e,t,s){return OE.apply(this,arguments)}function OE(){return(OE=(0,Se.Z)(function*(n,e,t,s){const u=ct(n),d=yield function(m,C){const x=ct(m),F=ct(x.In);return x.persistence.runTransaction("Lookup mutation documents","readonly",q=>F.Xt(q,C).next(Q=>Q?x.Qn.Pn(q,Q):Ke.resolve(null)))}(u.localStore,e);var C;null!==d?("pending"===t?yield nh(u.remoteStore):"acknowledged"===t||"rejected"===t?(_C(u,e,s||null),ah(u,e),C=e,ct(ct(u.localStore).In).te(C)):Ct(),yield zc(u,d)):tt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function PE(){return(PE=(0,Se.Z)(function*(n,e){const t=ct(n);if(Ig(t),kE(t),!0===e&&!0!==t.qo){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield bC(t,s.toArray());t.qo=!0,yield ql(t.remoteStore,!0);for(const d of u)hu(t.remoteStore,d)}else if(!1===e&&!1!==t.qo){const s=[];let u=Promise.resolve();t.ko.forEach((d,m)=>{t.sharedClientState.isLocalQueryTarget(m)?s.push(m):u=u.then(()=>(uh(t,m),Sf(t.localStore,m,!0))),Zu(t.remoteStore,m)}),yield u,yield bC(t,s),function(d){const m=ct(d);m.Fo.forEach((C,x)=>{Zu(m.remoteStore,x)}),m.Mo.us(),m.Fo=new Map,m.Oo=new Mi(It.comparator)}(t),t.qo=!1,yield ql(t.remoteStore,!1)}})).apply(this,arguments)}function bC(n,e,t){return yy.apply(this,arguments)}function yy(){return(yy=(0,Se.Z)(function*(n,e,t){const s=ct(n),u=[],d=[];for(const m of e){let C;const x=s.ko.get(m);if(x&&0!==x.length){C=yield Af(s.localStore,No(x[0]));for(const F of x){const q=s.xo.get(F),Q=yield Tx(s,q);Q.snapshot&&d.push(Q.snapshot)}}else{const F=yield Qw(s.localStore,m);C=yield Af(s.localStore,F),yield wg(s,_y(F),m,!1)}u.push(C)}return s.No.Er(d),u})).apply(this,arguments)}function _y(n){return Gd(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YT(n){const e=ct(n);return ct(ct(e.localStore).persistence).pn()}function Pf(n,e,t,s){return ss.apply(this,arguments)}function ss(){return(ss=(0,Se.Z)(function*(n,e,t,s){const u=ct(n);if(u.qo)tt("SyncEngine","Ignoring unexpected query state notification.");else if(u.ko.has(e))switch(t){case"current":case"not-current":{const d=yield oE(u.localStore),m=zd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield zc(u,d,m);break}case"rejected":yield Sf(u.localStore,e,!0),uh(u,e,s);break;default:Ct()}})).apply(this,arguments)}function wC(n,e,t){return ha.apply(this,arguments)}function ha(){return(ha=(0,Se.Z)(function*(n,e,t){const s=Ig(n);if(s.qo){for(const u of e){if(s.ko.has(u)){tt("SyncEngine","Adding an already active target "+u);continue}const d=yield Qw(s.localStore,u),m=yield Af(s.localStore,d);yield wg(s,_y(d),m.targetId,!1),hu(s.remoteStore,m)}for(const u of t)s.ko.has(u)&&(yield Sf(s.localStore,u,!1).then(()=>{Zu(s.remoteStore,u),uh(s,u)}).catch($l))}})).apply(this,arguments)}function Ig(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$T.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Dx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HT.bind(null,e),e.No.Er=kT.bind(null,e.eventManager),e.No.jo=FT.bind(null,e.eventManager),e}function kE(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cg.bind(null,e),e}class FE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.N=Mf(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return Ww(this.persistence,new ny,e.initialUser,this.N)}Go(e){return new CT(Xw.Ns,this.N)}Wo(e){return new DT}terminate(){var e=this;return(0,Se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class LE extends FE{constructor(e,t,s){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield t().call(s,e),yield function(n){return xf.apply(this,arguments)}(s.localStore),yield s.Jo.initialize(s,e),yield kE(s.Jo.syncEngine),yield nh(s.Jo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Ho(e){return Ww(this.persistence,new ny,e.initialUser,this.N)}zo(e){return new Df(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=rE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ko.withCacheSize(this.cacheSizeBytes):ko.DEFAULT;return new nE(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,dE(),Nf(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new DT}}class QT extends LE{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Se.Z)(function*(){yield t().call(s,e);const u=s.Jo.syncEngine;s.sharedClientState instanceof lE&&(s.sharedClientState.syncEngine={_i:ZT.bind(null,u),mi:Pf.bind(null,u),gi:wC.bind(null,u),pn:YT.bind(null,u),wi:NE.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var d=(0,Se.Z)(function*(m){yield function(n,e){return PE.apply(this,arguments)}(s.Jo.syncEngine,m),s.gcScheduler&&(m&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):m||s.gcScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}Wo(e){const t=dE();if(!lE.bt(t))throw new Qe(Fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=rE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lE(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class VE{initialize(e,t){var s=this;return(0,Se.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>yC(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=WT.bind(null,s.syncEngine),yield ql(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cx}createDatastore(e){const t=Mf(e.databaseInfo.databaseId),s=new tC(e.databaseInfo);return new RT(e.credentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,d=C=>yC(this.syncEngine,C,0),m=bg.bt()?new bg:new TT,new uy(t,s,u,d,m);var t,s,u,d,m}createSyncEngine(e,t){return function(s,u,d,m,C,x,F){const q=new UT(s,u,d,m,C,x);return F&&(q.qo=!0),q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Se.Z)(function*(t){const s=ct(t);tt("RemoteStore","RemoteStore shutting down."),s.Kr.add(5),yield Wu(s),s.Qr.shutdown(),s.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function IC(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Dg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class JT{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new es,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(s=>{s&&s.ho()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,Se.Z)(function*(){const t=yield e.na();if(null===t)return null;const s=e.ta.decode(t),u=Number(s);isNaN(u)&&e.sa(`length string (${s}) is not valid number`);const d=yield e.ia(u);return new Ix(JSON.parse(d),t.length+u)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,Se.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}ia(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const s=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class Ax{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Qe(Fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,Se.Z)(function*(d,m){const C=ct(d),x=pf(C.N)+"/documents",F={documents:m.map(me=>Ul(C.N,me))},q=yield C.Ki("BatchGetDocuments",x,F),Q=new Map;q.forEach(me=>{const De=function(n,e){return"found"in e?function(t,s){jt(!!s.found);const u=ca(t,s.found.name),d=rs(s.found.updateTime),m=new qs({mapValue:{fields:s.found.fields}});return Tr.newFoundDocument(u,d,m)}(n,e):"missing"in e?function(t,s){jt(!!s.missing),jt(!!s.readTime);const u=ca(t,s.missing),d=rs(s.readTime);return Tr.newNoDocument(u,d)}(n,e):Ct()}(C.N,me);Q.set(De.key.toString(),De)});const ge=[];return m.forEach(me=>{const De=Q.get(me.toString());jt(!!De),ge.push(De)}),ge}),function(d,m){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new lg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const d=It.fromPath(u);e.mutations.push(new Vv(d,e.precondition(d)))}),yield(s=(0,Se.Z)(function*(u,d){const m=ct(u),C=pf(m.N)+"/documents",x={writes:d.map(F=>hg(m.N,F))};yield m.Li("Commit",C,x)}),function(u,d){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ct();t=nn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Qe(Fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ri.updateTime(t):ri.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(nn.min()))throw new Qe(Fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ri.updateTime(t)}return ri.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XT{constructor(e,t,s,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=u,this.aa=5,this.rr=new ay(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,Se.Z)(function*(){const t=new Ax(e.datastore),s=e.ua(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.ha(d)}))}).catch(u=>{e.ha(u)})}))}ua(e){try{const t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!lw(t)}return!1}}class eA{constructor(e,t,s){var u=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=bs.UNAUTHENTICATED,this.clientId=Yp.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var d=(0,Se.Z)(function*(m){tt("FirestoreClient","Received user=",m.uid),yield u.credentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qe(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(s){const u=sh(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function ch(n,e){return DC.apply(this,arguments)}function DC(){return(DC=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var u=(0,Se.Z)(function*(d){s.isEqual(d)||(yield gT(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function UE(n,e){return BE.apply(this,arguments)}function BE(){return(BE=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield TC(n);tt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(u=>{return(d=(0,Se.Z)(function*(m,C){const x=ct(m);x.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const F=Ku(x);x.Kr.add(3),yield Wu(x),F&&x.Wr.set("Unknown"),yield x.remoteSyncer.handleCredentialChange(C),x.Kr.delete(3),yield Hl(x)}),function(m,C){return d.apply(this,arguments)})(e.remoteStore,u);var d}),n.onlineComponents=e})).apply(this,arguments)}function TC(n){return vy.apply(this,arguments)}function vy(){return(vy=(0,Se.Z)(function*(n){return n.offlineComponents||(tt("FirestoreClient","Using default OfflineComponentProvider"),yield ch(n,new FE)),n.offlineComponents})).apply(this,arguments)}function Ey(n){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,Se.Z)(function*(n){return n.onlineComponents||(tt("FirestoreClient","Using default OnlineComponentProvider"),yield UE(n,new VE)),n.onlineComponents})).apply(this,arguments)}function AC(n){return TC(n).then(e=>e.persistence)}function jE(n){return TC(n).then(e=>e.localStore)}function $E(n){return Ey(n).then(e=>e.remoteStore)}function HE(n){return Ey(n).then(e=>e.syncEngine)}function kf(n){return GE.apply(this,arguments)}function GE(){return(GE=(0,Se.Z)(function*(n){const e=yield Ey(n),t=e.eventManager;return t.onListen=BT.bind(null,e.syncEngine),t.onUnlisten=jT.bind(null,e.syncEngine),t})).apply(this,arguments)}function SC(n,e,t={}){const s=new es;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(u,d,m,C,x){const F=new Dg({next:Q=>{d.enqueueAndForget(()=>dC(u,q));const ge=Q.docs.has(m);!ge&&Q.fromCache?x.reject(new Qe(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):ge&&Q.fromCache&&C&&"server"===C.source?x.reject(new Qe(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(Q)},error:Q=>x.reject(Q)}),q=new hC(uf(m.path),F,{includeMetadataChanges:!0,uo:!0});return lC(u,q)}(yield kf(n),n.asyncQueue,e,t,s)})),s.promise}function qE(n,e,t={}){const s=new es;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(u,d,m,C,x){const F=new Dg({next:Q=>{d.enqueueAndForget(()=>dC(u,q)),Q.fromCache&&"server"===C.source?x.reject(new Qe(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(Q)},error:Q=>x.reject(Q)}),q=new hC(m,F,{includeMetadataChanges:!0,uo:!0});return lC(u,q)}(yield kf(n),n.asyncQueue,e,t,s)})),s.promise}class iA{constructor(e,t,s,u,d,m,C,x){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=C,this.useFetchStreams=x}}class Ff{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ff&&e.projectId===this.projectId&&e.database===this.database}}const OC=new Map;function zE(n,e,t){if(!t)throw new Qe(Fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PC(n,e,t,s){if(!0===e&&!0===s)throw new Qe(Fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kC(n){if(!It.isDocumentKey(n))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function FC(n){if(It.isDocumentKey(n))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wl(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Ct()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Qe(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wl(n);throw new Qe(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function LC(n,e){if(e<=0)throw new Qe(Fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class by{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Qe(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qe(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lo{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1,e instanceof Ff?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Qe(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ff(s.options.projectId)}(e))}get app(){if(!this._app)throw new Qe(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qe(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new hx;switch(t.type){case"gapi":const s=t.client;return jt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Fb(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Qe(Fe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OC.get(e);t&&(tt("ComponentProvider","Removing Datastore"),OC.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Ks{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ks(this.firestore,e,this._query)}}class Yu extends Ks{constructor(e,t,s){super(e,t,uf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new It(e))}withConverter(e){return new Yu(this.firestore,e,this._path)}}function oA(n,e,...t){if(n=(0,Et.m9)(n),zE("collection","path",e),n instanceof Lo){const s=kn.fromString(e,...t);return FC(s),new Yu(n,null,s)}{if(!(n instanceof rr||n instanceof Yu))throw new Qe(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(kn.fromString(e,...t));return FC(s),new Yu(n.firestore,null,s)}}function Lf(n,e,...t){if(n=(0,Et.m9)(n),1===arguments.length&&(e=Yp.I()),zE("doc","path",e),n instanceof Lo){const s=kn.fromString(e,...t);return kC(s),new rr(n,null,new It(s))}{if(!(n instanceof rr||n instanceof Yu))throw new Qe(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(kn.fromString(e,...t));return kC(s),new rr(n.firestore,n instanceof Yu?n.converter:null,new It(s))}}function ZE(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),(n instanceof rr||n instanceof Yu)&&(e instanceof rr||e instanceof Yu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wy(n,e){return n=(0,Et.m9)(n),e=(0,Et.m9)(e),n instanceof Ks&&e instanceof Ks&&n.firestore===e.firestore&&og(n._query,e._query)&&n.converter===e.converter}class KE{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new ay(this,"async_queue_retry"),this.Ta=()=>{const t=Nf();t&&tt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const e=Nf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ta)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ea(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Nf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ta)}}enqueue(e){if(this.Ea(),this.wa)return new Promise(()=>{});const t=new es;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,Se.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!Zd(t))throw t;tt("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(s=>{throw this.ma=s,this.ga=!1,xi("INTERNAL UNHANDLED ERROR: ",function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),m}(s)),s}).then(s=>(this.ga=!1,s))));return this.fa=t,t}enqueueAfterDelay(e,t,s){this.Ea(),this.pa.indexOf(e)>-1&&(t=0);const u=hy.createAndSchedule(this,e,t,s,d=>this.Ra(d));return this._a.push(u),u}Ea(){this.ma&&Ct()}verifyOperationInProgress(){}ba(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function YE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class aA{constructor(){this._progressObserver={},this._taskCompletionResolver=new es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kr extends Lo{constructor(e,t){super(e,t),this.type="firestore",this._queue=new KE,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||UC(this),this._firestoreClient.terminate()}}function _i(n){return n._firestoreClient||UC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UC(n){var e;const t=n._freezeSettings(),s=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iA(n._databaseId,d,n._persistenceKey,(C=t).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var d,C;n._firestoreClient=new eA(n._credentials,n._queue,s)}function $C(n,e,t){const s=new es;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield ch(n,t),yield UE(n,e),s.resolve()}catch(u){if(!("FirebaseError"===(d=u).name?d.code===Fe.FAILED_PRECONDITION||d.code===Fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),s.reject(u)}var d})).then(()=>s.promise)}function lh(n){if(n._initialized||n._terminated)throw new Qe(Fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Qe(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zc(ns.fromBase64String(e))}catch(t){throw new Qe(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zc(ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fu{constructor(e){this._methodName=e}}class Cy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yn(this._lat,e._lat)||yn(this._long,e._long)}}const QE=/^__.*__$/;class dA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new cg(e,this.data,t,this.fieldTransforms)}}class JE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class Iy{constructor(e,t,s,u,d,m){this.settings=e,this.databaseId=t,this.N=s,this.ignoreUndefinedProperties=u,void 0===d&&this.Sa(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Iy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Ca({path:s,xa:!1});return u.ka(e),u}$a(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.Ca({path:s,xa:!1});return u.Sa(),u}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Ry(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(zC(this.Da)&&QE.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class XE{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=s||Mf(e)}Ba(e,t,s,u=!1){return new Iy({Da:e,methodName:t,La:s,path:Ri.emptyPath(),xa:!1,Ma:u},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Zl(n){const e=n._freezeSettings(),t=Mf(n._databaseId);return new XE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sg(n,e,t,s,u,d={}){const m=n.Ba(d.merge||d.mergeFields?2:0,e,t,u);e0("Data must be an object, but it was:",m,s);const C=Ay(s,m);let x,F;if(d.merge)x=new Jp(m.fieldMask),F=m.fieldTransforms;else if(d.mergeFields){const q=[];for(const Q of d.mergeFields){const ge=Sy(e,Q,t);if(!m.contains(ge))throw new Qe(Fe.INVALID_ARGUMENT,`Field '${ge}' is specified in your field mask but missing from your input data.`);t0(q,ge)||q.push(ge)}x=new Jp(q),F=m.fieldTransforms.filter(Q=>x.covers(Q.field))}else x=null,F=m.fieldTransforms;return new dA(new qs(C),x,F)}class Kl extends fu{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kl}}function Dy(n,e,t){return new Iy({Da:3,La:e.settings.La,methodName:n._methodName,xa:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class WC extends fu{_toFieldTransform(e){return new df(e.path,new lf)}isEqual(e){return e instanceof WC}}class ZC extends fu{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Dy(this,e,!0),s=this.Ua.map(d=>Kc(d,t)),u=new Fl(s);return new df(e.path,u)}isEqual(e){return this===e}}class hA extends fu{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=Dy(this,e,!0),s=this.Ua.map(d=>Kc(d,t)),u=new Ll(s);return new df(e.path,u)}isEqual(e){return this===e}}class KC extends fu{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Fc(e.N,nw(e.N,this.qa));return new df(e.path,t)}isEqual(e){return this===e}}function Vf(n,e,t,s){const u=n.Ba(1,e,t);e0("Data must be an object, but it was:",u,s);const d=[],m=qs.empty();jd(s,(x,F)=>{const q=xy(e,x,t);F=(0,Et.m9)(F);const Q=u.$a(q);if(F instanceof Kl)d.push(q);else{const ge=Kc(F,Q);null!=ge&&(d.push(q),m.set(q,ge))}});const C=new Jp(d);return new JE(m,C,u.fieldTransforms)}function Ty(n,e,t,s,u,d){const m=n.Ba(1,e,t),C=[Sy(e,s,t)],x=[u];if(d.length%2!=0)throw new Qe(Fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ge=0;ge<d.length;ge+=2)C.push(Sy(e,d[ge])),x.push(d[ge+1]);const F=[],q=qs.empty();for(let ge=C.length-1;ge>=0;--ge)if(!t0(F,C[ge])){const me=C[ge];let De=x[ge];De=(0,Et.m9)(De);const et=m.$a(me);if(De instanceof Kl)F.push(me);else{const ft=Kc(De,et);null!=ft&&(F.push(me),q.set(me,ft))}}const Q=new Jp(F);return new JE(q,Q,m.fieldTransforms)}function YC(n,e,t,s=!1){return Kc(t,n.Ba(s?4:3,e))}function Kc(n,e){if(QC(n=(0,Et.m9)(n)))return e0("Unsupported field value:",e,n),Ay(n,e);if(n instanceof fu)return function(t,s){if(!zC(s.Da))throw s.Fa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,s){const u=[];let d=0;for(const m of t){let C=Kc(m,s.Oa(d));null==C&&(C={nullValue:"NULL_VALUE"}),u.push(C),d++}return{arrayValue:{values:u}}}(n,e)}return function(t,s){if(null===(t=(0,Et.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nw(s.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=ts.fromDate(t);return{timestampValue:Mt(s.N,u)}}if(t instanceof ts){const u=new ts(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mt(s.N,u)}}if(t instanceof Cy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zc)return{bytesValue:bw(s.N,t._byteString)};if(t instanceof rr){const u=s.databaseId,d=t.firestore._databaseId;if(!d.isEqual(u))throw s.Fa(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ff(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Fa(`Unsupported field value: ${Wl(t)}`)}(n,e)}function Ay(n,e){const t={};return Iv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jd(n,(s,u)=>{const d=Kc(u,e.Na(s));null!=d&&(t[s]=d)}),{mapValue:{fields:t}}}function QC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ts||n instanceof Cy||n instanceof Zc||n instanceof rr||n instanceof fu)}function e0(n,e,t){if(!QC(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Wl(t);throw e.Fa("an object"===s?n+" a custom object":n+" "+s)}var s}function Sy(n,e,t){if((e=(0,Et.m9)(e))instanceof Wc)return e._internalPath;if("string"==typeof e)return xy(n,e);throw Ry("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const JC=new RegExp("[~\\*/\\[\\]]");function xy(n,e,t){if(e.search(JC)>=0)throw Ry(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wc(...e.split("."))._internalPath}catch(s){throw Ry(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ry(n,e,t,s,u){const d=s&&!s.isEmpty(),m=void 0!==u;let C=`Function ${e}() called with invalid data`;t&&(C+=" (via `toFirestore()`)"),C+=". ";let x="";return(d||m)&&(x+=" (found",d&&(x+=` in field ${s}`),m&&(x+=` in document ${u}`),x+=")"),new Qe(Fe.INVALID_ARGUMENT,C+n+x)}function t0(n,e){return n.some(t=>t.isEqual(e))}class Uf{constructor(e,t,s,u,d){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fA extends Uf{data(){return super.data()}}function Ny(n,e){return"string"==typeof e?xy(n,e):e instanceof Wc?e._internalPath:e._delegate._internalPath}class Yl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends Uf{constructor(e,t,s,u,d,m){super(e,t,s,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ny("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Bf extends Yc{data(e={}){return super.data(e)}}class Qc{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Yl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Bf(this._firestore,this._userDataWriter,s.key,s,new Yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(m=>({type:"added",doc:new Bf(s._firestore,s._userDataWriter,m.doc.key,m.doc,new Yl(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(m=>u||3!==m.type).map(m=>{const C=new Bf(s._firestore,s._userDataWriter,m.doc.key,m.doc,new Yl(s._snapshot.mutatedKeys.has(m.doc.key),s._snapshot.fromCache),s.query.converter);let x=-1,F=-1;return 0!==m.type&&(x=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),1!==m.type&&(d=d.add(m.doc),F=d.indexOf(m.doc.key)),{type:XC(m.type),doc:C,oldIndex:x,newIndex:F}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}function n0(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qc&&e instanceof Qc&&n._firestore===e._firestore&&wy(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function eI(n){if(sg(n)&&0===n.explicitOrderBy.length)throw new Qe(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xg{}function Ql(n,...e){for(const t of e)n=t._apply(n);return n}class tI extends xg{constructor(e,t,s){super(),this.Ka=e,this.ja=t,this.Qa=s,this.type="where"}_apply(e){const t=Zl(e.firestore),s=function(u,d,m,C,x,F,q){let Q;if(x.isKeyField()){if("array-contains"===F||"array-contains-any"===F)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${F}' queries on FieldPath.documentId().`);if("in"===F||"not-in"===F){vA(q,F);const me=[];for(const De of q)me.push(_A(C,u,De));Q={arrayValue:{values:me}}}else Q=_A(C,u,q)}else"in"!==F&&"not-in"!==F&&"array-contains-any"!==F||vA(q,F),Q=YC(m,"where",q,"in"===F||"not-in"===F);const ge=zs.create(x,F,Q);return function(me,De){if(De.v()){const ft=Vm(me);if(null!==ft&&!ft.isEqual(De.field))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ft.toString()}' and '${De.field.toString()}'`);const xt=Rv(me);null!==xt&&EA(0,De.field,xt)}const et=function(ft,xt){for(const Mn of ft.filters)if(xt.indexOf(Mn.op)>=0)return Mn.op;return null}(me,function(ft){switch(ft){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(De.op));if(null!==et)throw new Qe(Fe.INVALID_ARGUMENT,et===De.op?`Invalid query. You cannot use more than one '${De.op.toString()}' filter.`:`Invalid query. You cannot use '${De.op.toString()}' filters with '${et.toString()}' filters.`)}(u,ge),ge}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Ks(e.firestore,e.converter,function(u,d){const m=u.filters.concat([d]);return new Hu(u.path,u.collectionGroup,u.explicitOrderBy.slice(),m,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,s))}}class Mx extends xg{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(s,u,d){if(null!==s.startAt)throw new Qe(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Qe(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new af(u,d);return function(C,x){if(null===Rv(C)){const F=Vm(C);null!==F&&EA(0,F,x.field)}}(s,m),m}(e._query,this.Ka,this.Wa);return new Ks(e.firestore,e.converter,function(s,u){const d=s.explicitOrderBy.concat([u]);return new Hu(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class pA extends xg{constructor(e,t,s){super(),this.type=e,this.Ga=t,this.za=s}_apply(e){return new Ks(e.firestore,e.converter,lu(e._query,this.Ga,this.za))}}class gA extends xg{constructor(e,t,s){super(),this.type=e,this.Ha=t,this.Ja=s}_apply(e){const t=yA(e,this.type,this.Ha,this.Ja);return new Ks(e.firestore,e.converter,(u=t,new Hu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class mA extends xg{constructor(e,t,s){super(),this.type=e,this.Ha=t,this.Ja=s}_apply(e){const t=yA(e,this.type,this.Ha,this.Ja);return new Ks(e.firestore,e.converter,(u=t,new Hu((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function yA(n,e,t,s){if(t[0]=(0,Et.m9)(t[0]),t[0]instanceof Uf)return function(u,d,m,C,x){if(!C)throw new Qe(Fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const F=[];for(const q of qd(u))if(q.field.isKeyField())F.push(ef(d,C.key));else{const Q=C.data.field(q.field);if(Xp(Q))throw new Qe(Fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Q){const ge=q.field.canonicalString();throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ge}' (used as the orderBy) does not exist.`)}F.push(Q)}return new sf(F,x)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const u=Zl(n.firestore);return function(d,m,C,x,F,q){const Q=d.explicitOrderBy;if(F.length>Q.length)throw new Qe(Fe.INVALID_ARGUMENT,`Too many arguments provided to ${x}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ge=[];for(let me=0;me<F.length;me++){const De=F[me];if(Q[me].field.isKeyField()){if("string"!=typeof De)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${x}(), but got a ${typeof De}`);if(!Jb(d)&&-1!==De.indexOf("/"))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${x}() must be a plain document ID, but '${De}' contains a slash.`);const et=d.path.child(kn.fromString(De));if(!It.isDocumentKey(et))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${x}() must result in a valid document path, but '${et}' is not because it contains an odd number of segments.`);const ft=new It(et);ge.push(ef(m,ft))}else{const et=YC(C,x,De);ge.push(et)}}return new sf(ge,q)}(n._query,n.firestore._databaseId,u,e,t,s)}}function _A(n,e,t){if("string"==typeof(t=(0,Et.m9)(t))){if(""===t)throw new Qe(Fe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jb(e)&&-1!==t.indexOf("/"))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(kn.fromString(t));if(!It.isDocumentKey(s))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ef(n,new It(s))}if(t instanceof rr)return ef(n,t._key);throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wl(t)}.`)}function vA(n,e){if(!Array.isArray(n)||0===n.length)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function EA(n,e,t){if(!t.isEqual(e))throw new Qe(Fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nI{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ct()}}convertObject(e,t){const s={};return jd(e.fields,(u,d)=>{s[u]=this.convertValue(d,t)}),s}convertGeoPoint(e){return new Cy(mi(e.latitude),mi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jb(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp($d(e));default:return null}}convertTimestamp(e){const t=Oa(e);return new ts(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=kn.fromString(e);jt(Mw(s));const u=new Ff(s.get(1),s.get(3)),d=new It(s.popFirst(5));return u.isEqual(t)||xi(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),d}}function My(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class bA extends nI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class rI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Zl(e)}set(e,t,s){this._verifyNotCommitted();const u=dh(e,this._firestore),d=My(u.converter,t,s),m=Sg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(m.toMutation(u._key,ri.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const d=dh(e,this._firestore);let m;return m="string"==typeof(t=(0,Et.m9)(t))||t instanceof Wc?Ty(this._dataReader,"WriteBatch.update",d._key,t,s,u):Vf(this._dataReader,"WriteBatch.update",d._key,t),this._mutations.push(m.toMutation(d._key,ri.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dh(e,this._firestore);return this._mutations=this._mutations.concat(new lg(t._key,ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dh(n,e){if((n=(0,Et.m9)(n)).firestore!==e)throw new Qe(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class jf extends nI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function DA(n,e,t){n=fn(n,rr);const s=fn(n.firestore,Kr),u=My(n.converter,e,t);return pu(s,[Sg(Zl(s),"setDoc",n._key,u,null!==n.converter,t).toMutation(n._key,ri.none())])}function TA(n,e,t,...s){n=fn(n,rr);const u=fn(n.firestore,Kr),d=Zl(u);let m;return m="string"==typeof(e=(0,Et.m9)(e))||e instanceof Wc?Ty(d,"updateDoc",n._key,e,t,s):Vf(d,"updateDoc",n._key,e),pu(u,[m.toMutation(n._key,ri.exists(!0))])}function iI(n,...e){var t,s,u;n=(0,Et.m9)(n);let d={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||YE(e[m])||(d=e[m],m++);const C={includeMetadataChanges:d.includeMetadataChanges};if(YE(e[m])){const Q=e[m];e[m]=null===(t=Q.next)||void 0===t?void 0:t.bind(Q),e[m+1]=null===(s=Q.error)||void 0===s?void 0:s.bind(Q),e[m+2]=null===(u=Q.complete)||void 0===u?void 0:u.bind(Q)}let x,F,q;if(n instanceof rr)F=fn(n.firestore,Kr),q=uf(n._key.path),x={next:Q=>{e[m]&&e[m](Oy(F,n,Q))},error:e[m+1],complete:e[m+2]};else{const Q=fn(n,Ks);F=fn(Q.firestore,Kr),q=Q._query;const ge=new jf(F);x={next:me=>{e[m]&&e[m](new Qc(F,ge,Q,me))},error:e[m+1],complete:e[m+2]},eI(n._query)}return function(Q,ge,me,De){const et=new Dg(De),ft=new hC(ge,et,me);return Q.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return lC(yield kf(Q),ft)})),()=>{et.Xo(),Q.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return dC(yield kf(Q),ft)}))}}(_i(F),q,C,x)}function pu(n,e){return function(t,s){const u=new es;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(n,e,t){return CE.apply(this,arguments)}(yield HE(t),s,u)})),u.promise}(_i(n),e)}function Oy(n,e,t){const s=t.docs.get(e._key),u=new jf(n);return new Yc(n,u,e._key,s,new Yl(t.hasPendingWrites,t.fromCache),e.converter)}class SA extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Zl(e)}get(e){const t=dh(e,this._firestore),s=new bA(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return Ct();const d=u[0];if(d.isFoundDocument())return new Uf(this._firestore,s,d.key,d,t.converter);if(d.isNoDocument())return new Uf(this._firestore,s,t._key,null,t.converter);throw Ct()})}set(e,t,s){const u=dh(e,this._firestore),d=My(u.converter,t,s),m=Sg(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,s);return this._transaction.set(u._key,m),this}update(e,t,s,...u){const d=dh(e,this._firestore);let m;return m="string"==typeof(t=(0,Et.m9)(t))||t instanceof Wc?Ty(this._dataReader,"Transaction.update",d._key,t,s,u):Vf(this._dataReader,"Transaction.update",d._key,t),this._transaction.update(d._key,m),this}delete(e){const t=dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dh(e,this._firestore),s=new jf(this._firestore);return super.get(e).then(u=>new Yc(this._firestore,s,t._key,u._document,new Yl(!1,!1),t.converter))}}function cI(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function NA(){if("undefined"==typeof Uint8Array)throw new Qe("unimplemented","Uint8Arrays are not available in this environment.")}function lI(){if("undefined"==typeof atob)throw new Qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(n){Vd=n})(pr.SDK_VERSION),(0,pr._registerComponent)(new jr.wA("firestore",(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),s=new Kr(t,new Xh(n.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),s._setSettings(e),s},"PUBLIC")),(0,pr.registerVersion)(HD,"3.1.1",void 0),(0,pr.registerVersion)(HD,"3.1.1","esm2017");class ky{constructor(e){this._delegate=e}static fromBase64String(e){return lI(),new ky(Zc.fromBase64String(e))}static fromUint8Array(e){return NA(),new ky(Zc.fromUint8Array(e))}toBase64(){return lI(),this._delegate.toBase64()}toUint8Array(){return NA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $f(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class zx{enableIndexedDbPersistence(e,t){return function(n,e){lh(n=fn(n,Kr));const t=_i(n),s=n._freezeSettings(),u=new VE;return $C(t,u,new LE(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){lh(n=fn(n,Kr));const e=_i(n),t=n._freezeSettings(),s=new VE;return $C(e,s,new QT(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Qe(Fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new es;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(s){if(!Ws.bt())return Promise.resolve();const u=s+"main";yield Ws.delete(u)}),function(s){return t.apply(this,arguments)})(rE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OA{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ff||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Kp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var u;const d=(n=fn(n,Lo))._getSettings();if("firestore.googleapis.com"!==d.host&&d.host!==e&&Kp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},d),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let m,C;if("string"==typeof s.mockUserToken)m=s.mockUserToken,C=bs.MOCK_USER;else{m=(0,Et.Sg)(s.mockUserToken,null===(u=n._app)||void 0===u?void 0:u.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new Qe(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new bs(x)}n._credentials=new qD(new Cv(m,C))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield AC(n),t=yield $E(n);return e.setNetworkEnabled(!0),function(s){const u=ct(s);return u.Kr.delete(0),Hl(u)}(t)}))}(_i(n=fn(n,Kr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield AC(n),t=yield $E(n);return e.setNetworkEnabled(!1),(s=(0,Se.Z)(function*(u){const d=ct(u);d.Kr.add(0),yield Wu(d),d.Wr.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(_i(n=fn(n,Kr)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,PC("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new es;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(n,e){return gy.apply(this,arguments)}(yield HE(e),t)})),t.promise}(_i(n=fn(n,Kr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Dg(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return s=yield kf(n),u=t,ct(s).Zr.add(u),void u.next();var s,u})),()=>{t.Xo(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return s=yield kf(n),u=t,void ct(s).Zr.delete(u);var s,u}))}}(_i(n=fn(n,Kr)),YE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gf(this,oA(this._delegate,e))}catch(t){throw Ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new gu(this,Lf(this._delegate,e))}catch(t){throw Ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Oi(this,function(n,e){if(n=fn(n,Lo),zE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qe(Fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ks(n,null,(t=e,new Hu(kn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new es;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const s=yield(u=n,Ey(u).then(d=>d.datastore));var u;new XT(n.asyncQueue,s,e,t).run()})),t.promise}(_i(n),t=>e(new SA(n,t)))}(this._delegate,t=>e(new kA(this,t)))}batch(){return _i(this._delegate),new FA(new rI(this._delegate,e=>pu(this._delegate,e)))}loadBundle(e){return function(n,e){const t=_i(n=fn(n,Kr)),s=new aA;return function(n,e,t,s){const u=function(d,m){let C;return C="string"==typeof d?(new TextEncoder).encode(d):d,x=function(x,F){if(x instanceof Uint8Array)return IC(x,F);if(x instanceof ArrayBuffer)return IC(new Uint8Array(x),F);if(x instanceof ReadableStream)return x.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new JT(x,m);var x}(t,Mf(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function(n,e,t){const s=ct(n);var u;(u=(0,Se.Z)(function*(d,m,C){try{const x=yield m.getMetadata();if(yield function(ge,me){const De=ct(ge),et=rs(me.createTime);return De.persistence.runTransaction("hasNewerBundle","readonly",ft=>De.Je.getBundleMetadata(ft,me.id)).then(ft=>!!ft&&ft.createTime.compareTo(et)>=0)}(d.localStore,x))return yield m.close(),void C._completeWith((ge=x,{taskState:"Success",documentsLoaded:ge.totalDocuments,bytesLoaded:ge.totalBytes,totalDocuments:ge.totalDocuments,totalBytes:ge.totalBytes}));C._updateProgress(pC(x));const F=new Zs(x,d.localStore,m.N);let q=yield m.Qo();for(;q;){const ge=yield F.fo(q);ge&&C._updateProgress(ge),q=yield m.Qo()}const Q=yield F.complete();yield zc(d,Q.En,void 0),yield function(ge,me){const De=ct(ge);return De.persistence.runTransaction("Save bundle","readwrite",et=>De.Je.saveBundleMetadata(et,me))}(d.localStore,x),C._completeWith(Q.progress)}catch(x){Kp("SyncEngine",`Loading bundle failed with ${x}`),C._failWith(x)}var ge}),function(d,m,C){return u.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield HE(n),u,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(t,s){const u=ct(t);return u.persistence.runTransaction("Get named query","readonly",d=>u.Je.getNamedQuery(d,s))}(yield jE(n),e)}))}(_i(n=fn(n,Kr)),e).then(t=>t?new Ks(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Oi(this,t):null)}}class Hf extends nI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ky(new Zc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gu.forKey(t,this.firestore,null)}}class kA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hf(e)}get(e){const t=Jc(e);return this._delegate.get(t).then(s=>new Fy(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=Jc(e);return s?(cI("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const d=Jc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...u),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}}class FA{constructor(e){this._delegate=e}set(e,t,s){const u=Jc(e);return s?(cI("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const d=Jc(e);return 2===arguments.length?this._delegate.update(d,t):this._delegate.update(d,t,s,...u),this}delete(e){const t=Jc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Bf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rg(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=hh.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(t);return d||(d=new hh(e,new Hf(e),t),u.set(t,d)),d}}hh.INSTANCES=new WeakMap;class gu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hf(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new gu(t,new rr(t._delegate,s,new It(e)))}static forKey(e,t,s){return new gu(t,new rr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Gf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gf(this.firestore,oA(this._delegate,e))}catch(t){throw Ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.m9)(e))instanceof rr&&ZE(this._delegate,e)}set(e,t){t=cI("DocumentReference.set",t);try{return t?DA(this._delegate,e,t):DA(this._delegate,e)}catch(s){throw Ys(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?TA(this._delegate,e):TA(this._delegate,e,t,...s)}catch(u){throw Ys(u,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return pu(fn(n.firestore,Kr),[new lg(n._key,ri.none())])}(this._delegate)}onSnapshot(...e){const t=dI(e),s=LA(e,u=>new Fy(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return iI(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=fn(n,rr);const e=fn(n.firestore,Kr),t=_i(e),s=new jf(e);return function(n,e){const t=new es;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(u,d,m){try{const C=yield function(x,F){const q=ct(x);return q.persistence.runTransaction("read document","readonly",Q=>q.Qn.An(Q,F))}(u,d);C.isFoundDocument()?m.resolve(C):C.isNoDocument()?m.resolve(null):m.reject(new Qe(Fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const x=sh(C,`Failed to get document '${d} from cache`);m.reject(x)}}),function(u,d,m){return s.apply(this,arguments)})(yield jE(n),e,t);var s})),t.promise}(t,n._key).then(u=>new Yc(e,s,n._key,u,new Yl(null!==u&&u.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=fn(n,rr);const e=fn(n.firestore,Kr);return SC(_i(e),n._key,{source:"server"}).then(t=>Oy(e,n,t))}(this._delegate):function(n){n=fn(n,rr);const e=fn(n.firestore,Kr);return SC(_i(e),n._key).then(t=>Oy(e,n,t))}(this._delegate),t.then(s=>new Fy(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new gu(this.firestore,this._delegate.withConverter(e?hh.getInstance(this.firestore,e):null))}}function Ys(n,e,t){return n.message=n.message.replace(e,t),n}function dI(n){for(const e of n)if("object"==typeof e&&!$f(e))return e;return{}}function LA(n,e){var t,s;let u;return u=$f(n[0])?n[0]:$f(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Fy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return n0(this._delegate,e._delegate)}}class Rg extends Fy{data(e){const t=this._delegate.data(e);return function(n,e){n||Ct()}(void 0!==t),t}}class Oi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hf(e)}where(e,t,s){try{return new Oi(this.firestore,Ql(this._delegate,function(n,e,t){const s=e,u=Ny("where",n);return new tI(u,s,t)}(e,t,s)))}catch(u){throw Ys(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Oi(this.firestore,Ql(this._delegate,function(n,e="asc"){const t=e,s=Ny("orderBy",n);return new Mx(s,t)}(e,t)))}catch(s){throw Ys(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Oi(this.firestore,Ql(this._delegate,function(n){return LC("limit",n),new pA("limit",n,"F")}(e)))}catch(t){throw Ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Oi(this.firestore,Ql(this._delegate,function(n){return LC("limitToLast",n),new pA("limitToLast",n,"L")}(e)))}catch(t){throw Ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Oi(this.firestore,Ql(this._delegate,function(...n){return new gA("startAt",n,!0)}(...e)))}catch(t){throw Ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Oi(this.firestore,Ql(this._delegate,function(...n){return new gA("startAfter",n,!1)}(...e)))}catch(t){throw Ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Oi(this.firestore,Ql(this._delegate,function(...n){return new mA("endBefore",n,!0)}(...e)))}catch(t){throw Ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Oi(this.firestore,Ql(this._delegate,function(...n){return new mA("endAt",n,!1)}(...e)))}catch(t){throw Ys(t,"endAt()","Query.endAt()")}}isEqual(e){return wy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=fn(n,Ks);const e=fn(n.firestore,Kr),t=_i(e),s=new jf(e);return function(n,e){const t=new es;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(s=(0,Se.Z)(function*(u,d,m){try{const C=yield Xd(u,d,!0),x=new mC(d,C.Gn),F=x.Io(C.documents),q=x.applyChanges(F,!1);m.resolve(q.snapshot)}catch(C){const x=sh(C,`Failed to execute query '${d} against cache`);m.reject(x)}}),function(u,d,m){return s.apply(this,arguments)})(yield jE(n),e,t);var s})),t.promise}(t,n._query).then(u=>new Qc(e,s,n,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=fn(n,Ks);const e=fn(n.firestore,Kr),t=_i(e),s=new jf(e);return qE(t,n._query,{source:"server"}).then(u=>new Qc(e,s,n,u))}(this._delegate):function(n){n=fn(n,Ks);const e=fn(n.firestore,Kr),t=_i(e),s=new jf(e);return eI(n._query),qE(t,n._query).then(u=>new Qc(e,s,n,u))}(this._delegate),t.then(s=>new o0(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=dI(e),s=LA(e,u=>new o0(this.firestore,new Qc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return iI(this._delegate,t,s)}withConverter(e){return new Oi(this.firestore,this._delegate.withConverter(e?hh.getInstance(this.firestore,e):null))}}class VA{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Rg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class o0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Oi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new VA(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Rg(this._firestore,s))})}isEqual(e){return n0(this._delegate,e._delegate)}}class Gf extends Oi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gu(this.firestore,e):null}doc(e){try{return new gu(this.firestore,void 0===e?Lf(this._delegate):Lf(this._delegate,e))}catch(t){throw Ys(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=fn(n.firestore,Kr),s=Lf(n),u=My(n.converter,e);return pu(t,[Sg(Zl(n.firestore),"addDoc",s._key,u,null!==n.converter,{}).toMutation(s._key,ri.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new gu(this.firestore,t))}isEqual(e){return ZE(this._delegate,e._delegate)}withConverter(e){return new Gf(this.firestore,this._delegate.withConverter(e?hh.getInstance(this.firestore,e):null))}}function Jc(n){return fn(n,rr)}class a0{constructor(...e){this._delegate=new Wc(...e)}static documentId(){return new a0(Ri.keyField().canonicalString())}isEqual(e){return(e=(0,Et.m9)(e))instanceof Wc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pi{constructor(e){this._delegate=e}static serverTimestamp(){const e=new WC("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Pi(e)}static delete(){const e=new Kl("deleteField");return e._methodName="FieldValue.delete",new Pi(e)}static arrayUnion(...e){const t=function(...n){return new ZC("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pi(t)}static arrayRemove(...e){const t=function(...n){return new hA("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pi(t)}static increment(e){const t=function(n){return new KC("increment",n)}(e);return t._methodName="FieldValue.increment",new Pi(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const UA={Firestore:OA,GeoPoint:Cy,Timestamp:ts,Blob:ky,Transaction:kA,WriteBatch:FA,DocumentReference:gu,DocumentSnapshot:Fy,Query:Oi,QueryDocumentSnapshot:Rg,QuerySnapshot:o0,CollectionReference:Gf,FieldPath:a0,FieldValue:Pi,setLogLevel:function(n){!function(n){Ud.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new jr.wA("firestore-compat",t=>((e,t)=>new OA(e,t,new zx))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},UA)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.4")}(us.Z);var hI=U(9765),c0=U(6682),qf=U(309),fI=U(7771),jA=U(5319),pI=U(7971),gI=U(8858);class $A extends hI.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new HA(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,d=s.length;let m;if(this.closed)throw new pI.N;if(this.isStopped||this.hasError?m=jA.w.EMPTY:(this.observers.push(e),m=new gI.W(this,e)),u&&e.add(e=new qf.ht(e,u)),t)for(let C=0;C<d&&!e.closed;C++)e.next(s[C]);else for(let C=0;C<d&&!e.closed;C++)e.next(s[C].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),m}_getNow(){return(this.scheduler||fI.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,u=this._events,d=u.length;let m=0;for(;m<d&&!(e-u[m].time<s);)m++;return d>t&&(m=Math.max(m,d-t)),m>0&&u.splice(0,m),u}}class HA{constructor(e,t){this.time=e,this.value=t}}function Ly(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},u=>u.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let u,m,d=0,C=!1,x=!1;return function(q){let Q;d++,!u||C?(C=!1,u=new $A(n,e,s),Q=u.subscribe(this),m=q.subscribe({next(ge){u.next(ge)},error(ge){C=!0,u.error(ge)},complete(){x=!0,m=void 0,u.complete()}}),x&&(m=void 0)):Q=u.subscribe(this),this.add(()=>{d--,Q.unsubscribe(),Q=void 0,m&&!x&&t&&0===d&&(m.unsubscribe(),m=void 0,u=void 0)})}}(s))}var yI=U(8049);function Vy(n,e){return e?(0,qn.w)(()=>n,e):(0,qn.w)(()=>n)}var l0=U(3101);const _I=new f.OlP("angularfire2.auth.use-emulator"),GA=new f.OlP("angularfire2.auth.settings"),vI=new f.OlP("angularfire2.auth.tenant-id"),qA=new f.OlP("angularfire2.auth.langugage-code"),EI=new f.OlP("angularfire2.auth.use-device-language"),bI=new f.OlP("angularfire.auth.persistence"),wI=(n,e,t,s,u,d,m,C)=>(0,Wt.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const x=e.runOutsideAngular(()=>n.auth());if(t&&x.useEmulator(...t),s&&(x.tenantId=s),x.languageCode=u,d&&x.useDeviceLanguage(),m)for(const[F,q]of Object.entries(m))x.settings[F]=q;return C&&x.setPersistence(C),x},[t,s,u,d,m,C]);let CI=(()=>{class n{constructor(t,s,u,d,m,C,x,F,q,Q,ge,me){const De=new hI.xQ,et=(0,Rr.of)(void 0).pipe((0,qf.QV)(m.outsideAngular),(0,qn.w)(()=>d.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4671)))),(0,hn.U)(()=>(0,Wt.on)(t,d,s)),(0,hn.U)(ft=>wI(ft,d,C,F,q,Q,x,ge)),Ly({bufferSize:1,refCount:!1}));if((0,T.PM)(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Rr.of)(null);else{et.pipe((0,yI.P)()).subscribe();const xt=et.pipe((0,qn.w)(kt=>kt.getRedirectResult().then(cr=>cr,()=>null)),Nt.iC,Ly({bufferSize:1,refCount:!1})),Mn=et.pipe((0,qn.w)(kt=>new mn.y(cr=>({unsubscribe:d.runOutsideAngular(()=>kt.onAuthStateChanged(ki=>cr.next(ki),ki=>cr.error(ki),()=>cr.complete()))})))),Ln=et.pipe((0,qn.w)(kt=>new mn.y(cr=>({unsubscribe:d.runOutsideAngular(()=>kt.onIdTokenChanged(ki=>cr.next(ki),ki=>cr.error(ki),()=>cr.complete()))}))));this.authState=xt.pipe(Vy(Mn),(0,l0.R)(m.outsideAngular),(0,qf.QV)(m.insideAngular)),this.user=xt.pipe(Vy(Ln),(0,l0.R)(m.outsideAngular),(0,qf.QV)(m.insideAngular)),this.idToken=this.user.pipe((0,qn.w)(kt=>kt?(0,bt.D)(kt.getIdToken()):(0,Rr.of)(null))),this.idTokenResult=this.user.pipe((0,qn.w)(kt=>kt?(0,bt.D)(kt.getIdTokenResult()):(0,Rr.of)(null))),this.credential=(0,c0.T)(xt,De,this.authState.pipe((0,x_.h)(kt=>!kt))).pipe((0,hn.U)(kt=>(null==kt?void 0:kt.user)?kt:null),(0,l0.R)(m.outsideAngular),(0,qf.QV)(m.insideAngular))}return(0,Wt.pX)(this,et,d,{spy:{apply:(ft,xt,Mn)=>{(ft.startsWith("signIn")||ft.startsWith("createUser"))&&Mn.then(Ln=>De.next(Ln))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wt.Dh),f.LFG(Wt.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Nt.HU),f.LFG(_I,8),f.LFG(GA,8),f.LFG(vI,8),f.LFG(qA,8),f.LFG(EI,8),f.LFG(bI,8),f.LFG(gl,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function DI(n,e){return function(n,e=Ui.z){return new mn.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function Uy(n,e){return DI(n,e).pipe((0,hn.U)(t=>({payload:t,type:"query"})))}function By(n,e){return Uy(n,e).pipe((0,ia.O)(void 0),am(),(0,hn.U)(([t,s])=>{const u=s.payload.docChanges(),d=u.map(m=>({type:m.type,payload:m}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((m,C)=>{const x=u.find(q=>q.doc.ref.isEqual(m.ref)),F=null==t?void 0:t.payload.docs.find(q=>q.ref.isEqual(m.ref));x&&JSON.stringify(x.doc.metadata)===JSON.stringify(m.metadata)||!x&&F&&JSON.stringify(F.metadata)===JSON.stringify(m.metadata)||d.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:m}})}),d}))}function WA(n,e,t){return By(n,t).pipe((0,au.R)((s,u)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jy(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jy(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jy(n,e.oldIndex,1)}return n}(n,s))}),n}(s,u.map(d=>d.payload),e),[]),t=>t.lift(new X0(void 0,void 0)),(0,hn.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function jy(n,e,t,...s){const u=n.slice();return u.splice(e,t,...s),u}function AI(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class d0{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=By(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,hn.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,ia.O)(void 0),am(),(0,x_.h)(([s,u])=>u.length>0||!s),(0,hn.U)(([s,u])=>u),Nt.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,au.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=AI(e);return WA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return Uy(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Nt.iC)}get(e){return(0,bt.D)(this.query.get(e)).pipe(Nt.iC)}add(e){return this.ref.add(e)}doc(e){return new zf(this.ref.doc(e),this.afs)}}class zf{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:d}=QA(s,t);return new d0(u,d,this.afs)}snapshotChanges(){return function(n,e){return DI(n,e).pipe((0,ia.O)(void 0),am(),(0,hn.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,hn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,bt.D)(this.ref.get(e)).pipe(Nt.iC)}}class h0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?By(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,x_.h)(t=>t.length>0),Nt.iC):By(this.query,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,au.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=AI(e);return WA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Nt.iC)}valueChanges(e={}){return Uy(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Nt.iC)}get(e){return(0,bt.D)(this.query.get(e)).pipe(Nt.iC)}}const SI=new f.OlP("angularfire2.enableFirestorePersistence"),KA=new f.OlP("angularfire2.firestore.persistenceSettings"),YA=new f.OlP("angularfire2.firestore.settings"),Zx=new f.OlP("angularfire2.firestore.use-emulator");function QA(n,e=(t=>t)){return{query:e(n),ref:n}}let xI=(()=>{class n{constructor(t,s,u,d,m,C,x,F,q,Q,ge,me,De,et,ft,xt,Mn){this.schedulers=x;const Ln=(0,Wt.on)(t,C,s),kt=q;Q&&wI(Ln,C,ge,De,et,ft,me,xt),[this.firestore,this.persistenceEnabled$]=(0,Wt.cc)(`${Ln.name}.firestore`,"AngularFirestore",Ln.name,()=>{const cr=C.runOutsideAngular(()=>Ln.firestore());if(d&&cr.settings(d),kt&&cr.useEmulator(...kt),u&&!(0,T.PM)(m)){const ki=()=>{try{return(0,bt.D)(cr.enablePersistence(F||void 0).then(()=>!0,()=>!1))}catch(kg){return"undefined"!=typeof console&&console.warn(kg),(0,Rr.of)(!1)}};return[cr,C.runOutsideAngular(ki)]}return[cr,(0,Rr.of)(!1)]},[d,kt,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:d,query:m}=QA(u,s),C=this.schedulers.ngZone.run(()=>d);return new d0(C,m,this)}collectionGroup(t,s){const u=s||(m=>m),d=this.firestore.collectionGroup(t);return new h0(u(d),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new zf(u,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wt.Dh),f.LFG(Wt.xv,8),f.LFG(SI,8),f.LFG(YA,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Nt.HU),f.LFG(KA,8),f.LFG(Zx,8),f.LFG(CI,8),f.LFG(_I,8),f.LFG(GA,8),f.LFG(vI,8),f.LFG(qA,8),f.LFG(EI,8),f.LFG(bI,8),f.LFG(gl,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$y=(()=>{class n{constructor(t,s,u){this.usuarioService=t,this.db=s,this.auth=u,this.collectionUsr="usuarios"}ngOnInit(){}actualizarUsuario(t){return this.db.collection(this.collectionUsr).doc(t.email).update(Object.assign({},t))}obtenerTodosLosUsuarios(){return this.db.collection(this.collectionUsr).get().pipe((0,hn.U)(t=>t.docs.map(s=>s.data())))}login(t){var s=this;return(0,Se.Z)(function*(){const u=yield s.checkIfExist(t);if(void 0===u)return void s.usuarioService.errorIniciarSesion();const d=u.data();d.email=t.email,s.usuarioService.iniciarSesion(d),s.logger(d.email,"Inicio de Sesion")})()}checkIfExist(t){var s=this;return(0,Se.Z)(function*(){const u=yield s.db.collection(s.collectionUsr).doc(t.email).get().toPromise();if(u.exists)return u})()}register(t){var s=this;return(0,Se.Z)(function*(){if(null==(yield s.checkIfExist(t)))try{yield s.db.collection(s.collectionUsr).doc(t.email).set(Object.assign({},t)),s.logger(t.email,"Registro"),s.usuarioService.registroUsuario(t)}catch(d){throw s.usuarioService.errorRegistrar("Error al realizar el registro"),d}else s.usuarioService.usuarioExistente("Este email se encuentra en uso.")})()}logger(t,s){const u=new Date,d=new J0(s,u,t);this.db.collection("logs").add(Object.assign({},d))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bd.i),f.LFG(xI),f.LFG(CI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XA=(()=>{class n{constructor(t,s){this.usuario_backend_service=t,this.usuarioService=s,this.title="Inicie Sesion",this.button_title="Iniciar Sesion",this.errorInicioDeSesion=""}ngOnInit(){this.loginCuentaForm=new yp({email:new wc("",[Tn.required,Tn.email]),password:new wc("",[Tn.required,Tn.maxLength(10),Tn.minLength(5)])}),this.usuarioService.errorInicioDeSesion.subscribe(t=>{this.errorInicioDeSesion=t})}onSubmit(){if(!this.loginCuentaForm.valid)return;const t=this.loginCuentaForm.value.email,s=this.loginCuentaForm.value.password,u=new D_;u.email=t,u.contrasenia=s,this.usuario_backend_service.login(u)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($y),f.Y36(bd.i))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:29,vars:7,consts:[[1,"text-center","text-dark"],[1,"form-signin","bg-white"],[3,"formGroup","ngSubmit"],[1,"far","fa-user"],[1,"h3","mb-3","fw-normal"],[1,"form-floating","text-dark"],["formControlName","email","type","email","id","floatingInput","placeholder","usuario123",1,"form-control"],["for","floatingInput"],[1,"form-text","text-danger","text-uppercase",3,"hidden"],["formControlName","password","type","password","id","floatingPassword","placeholder","pass123",1,"form-control"],["for","floatingPassword"],[1,"checkbox","mb-3"],["type","checkbox","value","remember-me"],[1,"d-flex"],["type","submit",1,"btn","w-100","btn-primary","btn-lg",3,"disabled"],[1,"form-text","text-danger","text-uppercase"],[1,"mt-5","mb-3","text-muted"]],template:function(t,s){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"main",1),f.TgZ(2,"form",2),f.NdJ("ngSubmit",function(){return s.onSubmit()}),f._UZ(3,"i",3),f.TgZ(4,"h1",4),f._uU(5),f.qZA(),f.TgZ(6,"div",5),f._UZ(7,"input",6),f.TgZ(8,"label",7),f._uU(9,"Email"),f.qZA(),f.TgZ(10,"small",8),f._uU(11," Ingrese un email valido. "),f.qZA(),f.qZA(),f.TgZ(12,"div",5),f._UZ(13,"input",9),f.TgZ(14,"label",10),f._uU(15,"Contrasenia"),f.qZA(),f.TgZ(16,"small",8),f._uU(17," Ingrese al menos 5 caracteres. "),f.qZA(),f.qZA(),f.TgZ(18,"div",11),f.TgZ(19,"label"),f._UZ(20,"input",12),f._uU(21," Recu\xe9rdame "),f.qZA(),f.qZA(),f.TgZ(22,"div",13),f.TgZ(23,"button",14),f._uU(24),f.qZA(),f.qZA(),f.TgZ(25,"small",15),f._uU(26),f.qZA(),f.TgZ(27,"p",16),f._uU(28,"\xa9 2021"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("formGroup",s.loginCuentaForm),f.xp6(3),f.Oqu(s.title),f.xp6(5),f.Q6J("hidden",s.loginCuentaForm.controls.email.valid),f.xp6(6),f.Q6J("hidden",s.loginCuentaForm.controls.password.valid),f.xp6(7),f.Q6J("disabled",!s.loginCuentaForm.valid),f.xp6(1),f.Oqu(s.button_title),f.xp6(2),f.hij(" ",s.errorInicioDeSesion," "))},directives:[Xg,ar,wp,Rh,Vu,Ed],styles:[".form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})(),eS=(()=>{class n{constructor(t){this.db=t,this.collection="categorias"}getCategorias(){var t=this;return(0,Se.Z)(function*(){return(yield t.db.collection(t.collection).get().toPromise()).docs.map(s=>s.data())})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tS{constructor(e,t){this.id=e,this.tipo=t}}let nS=(()=>{class n{constructor(t){this.db=t,this.collection="especialidades"}getCategorias(){var t=this;return(0,Se.Z)(function*(){return(yield t.db.collection(t.collection).get().toPromise()).docs.map(s=>new tS(parseInt(s.id),s.data().tipo))})()}agregarCategoria(t){return this.db.collection(this.collection).add({tipo:t})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RI=(()=>{class n{constructor(t){this.storage=t}tareaCloudStorage(t,s){return this.storage.upload(t,s)}referenciaCloudStorage(t){return this.storage.ref(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(o_))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kx(n,e){if(1&n&&(f.TgZ(0,"option",16),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t.id),f.xp6(1),f.Oqu(t.tipo)}}function Yx(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este valor es requerido. "),f.qZA())}function rS(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",11),f._uU(2,"Raz\xf3n"),f.qZA(),f.TgZ(3,"select",12),f.TgZ(4,"option",13),f._uU(5,"Elige"),f.qZA(),f.YNc(6,Kx,2,2,"option",14),f.qZA(),f.YNc(7,Yx,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("value",void 0),f.xp6(2),f.Q6J("ngForOf",t.categorias),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.razon.errors?null:t.form.controls.razon.errors.required)}}function f0(n,e){if(1&n&&(f.TgZ(0,"option",16),f._uU(1),f.qZA()),2&n){const t=e.$implicit;f.Q6J("value",t.id),f.xp6(1),f.Oqu(t.tipo)}}function os(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este valor es requerido. "),f.qZA())}function Qx(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",17),f._uU(2,"Especialidad"),f.qZA(),f.TgZ(3,"select",18),f.TgZ(4,"option",13),f._uU(5,"Elige"),f.qZA(),f.YNc(6,f0,2,2,"option",14),f.qZA(),f.YNc(7,os,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("value",void 0),f.xp6(2),f.Q6J("ngForOf",t.especialidades),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.especialidad.errors?null:t.form.controls.especialidad.errors.required)}}function NI(n,e){1&n&&(f.TgZ(0,"div",19),f.TgZ(1,"label",20),f._uU(2,"Especialidad"),f.qZA(),f._UZ(3,"input",21),f.qZA())}function MI(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este valor es requerido. "),f.qZA())}function iS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Solo se pueden ingresar letras sin espacios. "),f.qZA())}function Hy(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",22),f._uU(2,"Nombre"),f.qZA(),f._UZ(3,"input",23),f.YNc(4,MI,2,0,"div",15),f.YNc(5,iS,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.nombre.errors?null:t.form.controls.nombre.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.nombre.errors?null:t.form.controls.nombre.errors.pattern)}}function sS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este valor es requerido. "),f.qZA())}function oS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Solo se pueden ingresar letras. Pueden incluirse espacios. "),f.qZA())}function OI(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",24),f._uU(2,"Apellido"),f.qZA(),f._UZ(3,"input",25),f.YNc(4,sS,2,0,"div",15),f.YNc(5,oS,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.apellido.errors?null:t.form.controls.apellido.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.apellido.errors?null:t.form.controls.apellido.errors.pattern)}}function fh(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este valor es requerido. "),f.qZA())}function PI(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij(" Debe tener m\xednimo 18 a\xf1os. ( ",t.EDAD_MINIMA," ) ")}}function p0(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw(2);f.xp6(1),f.hij(" Excedi\xf3 la edad m\xe1xima. ( ",t.EDAD_MAXIMA," ) ")}}function g0(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",26),f._uU(2,"Edad"),f.qZA(),f._UZ(3,"input",27),f.YNc(4,fh,2,0,"div",15),f.YNc(5,PI,2,1,"div",15),f.YNc(6,p0,2,1,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.edad.errors?null:t.form.controls.edad.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.edad.errors?null:t.form.controls.edad.errors.min),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.edad.errors?null:t.form.controls.edad.errors.max)}}function aS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function Gy(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Solo se pueden ingresar n\xfameros. "),f.qZA())}function uS(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",28),f._uU(2,"DNI"),f.qZA(),f._UZ(3,"input",29),f.YNc(4,aS,2,0,"div",15),f.YNc(5,Gy,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.dni.errors?null:t.form.controls.dni.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.dni.errors?null:t.form.controls.dni.errors.pattern)}}function m0(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function kI(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Solo se pueden ingresar letras. Pueden incluirse espacios. "),f.qZA())}function as(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",30),f._uU(2,"Obra social"),f.qZA(),f._UZ(3,"input",31),f.YNc(4,m0,2,0,"div",15),f.YNc(5,kI,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.obraSocial.errors?null:t.form.controls.obraSocial.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.obraSocial.errors?null:t.form.controls.obraSocial.errors.pattern)}}function Jx(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function cS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Debe ingrear una direcci\xf3n email v\xe1lida. "),f.qZA())}function lS(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",32),f._uU(2,"Email"),f.qZA(),f._UZ(3,"input",33),f.YNc(4,Jx,2,0,"div",15),f.YNc(5,cS,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(4),f.Q6J("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.email.errors?null:t.form.controls.email.errors.email)}}function Xx(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function qy(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Solo se pueden ingresar valores alfanum\xe9ricos. No pueden incluirse espacios. "),f.qZA())}function dS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Debe ingresar como m\xednimo 6 caracteres. "),f.qZA())}const hS=function(n,e){return{"col-12":n,"col-sm-6":e}};function eR(n,e){if(1&n&&(f.TgZ(0,"div",34),f.TgZ(1,"label",35),f._uU(2,"Contrase\xf1a"),f.qZA(),f._UZ(3,"input",36),f.YNc(4,Xx,2,0,"div",15),f.YNc(5,qy,2,0,"div",15),f.YNc(6,dS,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.Q6J("ngClass",f.WLB(4,hS,t.isRequiredField("obraSocial"),!t.isRequiredField("obraSocial"))),f.xp6(4),f.Q6J("ngIf",null==t.form.controls.contrasenia.errors?null:t.form.controls.contrasenia.errors.required),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.contrasenia.errors?null:t.form.controls.contrasenia.errors.pattern),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.contrasenia.errors?null:t.form.controls.contrasenia.errors.minLength)}}function tR(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"input",39),f.NdJ("change",function(u){return f.CHM(t),f.oxw(2).subirArchivoUno(u)}),f.qZA()}}function fS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function pS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Ingrese un email valido para subir su archivo. "),f.qZA())}function gS(n,e){if(1&n&&(f.TgZ(0,"div",34),f.TgZ(1,"label",37),f._uU(2,"Imagen de Perfil 1"),f.qZA(),f.YNc(3,tR,1,0,"input",38),f.YNc(4,fS,2,0,"div",15),f.YNc(5,pS,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.Q6J("ngClass",f.WLB(4,hS,!t.isRequiredField("obraSocial"),t.isRequiredField("obraSocial"))),f.xp6(3),f.Q6J("ngIf",t.form.controls.email.valid),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.imagenUno.errors?null:t.form.controls.imagenUno.errors.required),f.xp6(1),f.Q6J("ngIf",!t.form.controls.email.valid)}}function mS(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"input",42),f.NdJ("change",function(u){return f.CHM(t),f.oxw(2).subirArchivoDos(u)}),f.qZA()}}function yS(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Este es un valor requerido. "),f.qZA())}function nR(n,e){1&n&&(f.TgZ(0,"div",8),f._uU(1," Ingrese un email valido para subir su archivo. "),f.qZA())}function _S(n,e){if(1&n&&(f.TgZ(0,"div",10),f.TgZ(1,"label",40),f._uU(2,"Imagen de Perfil 2"),f.qZA(),f.YNc(3,mS,1,0,"input",41),f.YNc(4,yS,2,0,"div",15),f.YNc(5,nR,2,0,"div",15),f.qZA()),2&n){const t=f.oxw();f.xp6(3),f.Q6J("ngIf",t.form.controls.email.valid),f.xp6(1),f.Q6J("ngIf",null==t.form.controls.imagenDos.errors?null:t.form.controls.imagenDos.errors.required),f.xp6(1),f.Q6J("ngIf",!t.form.controls.email.valid)}}function ES(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"td"),f.TgZ(1,"label",6),f._uU(2," Aprobado: "),f.TgZ(3,"input",7),f.NdJ("ngModelChange",function(u){f.CHM(t);const d=f.oxw().index;return f.oxw().usuarios[d].aprobado=u})("click",function(u){f.CHM(t);const d=f.oxw().index,m=f.oxw();return m.onAprobadoClick(m.usuarios[d],u)}),f.qZA(),f.qZA(),f.qZA()}if(2&n){const t=f.oxw().index,s=f.oxw();f.xp6(3),f.Q6J("ngModel",s.usuarios[t].aprobado)}}function rR(n,e){1&n&&(f.TgZ(0,"span",8),f._uU(1,"Especialidad actualizada!"),f.qZA())}function iR(n,e){if(1&n&&(f.TgZ(0,"tr"),f.TgZ(1,"td"),f._UZ(2,"img",3),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.qZA(),f.TgZ(9,"td"),f._uU(10),f.qZA(),f.TgZ(11,"td"),f._uU(12),f.qZA(),f.TgZ(13,"td"),f._uU(14),f.qZA(),f.YNc(15,ES,4,1,"td",4),f.TgZ(16,"td"),f.YNc(17,rR,2,0,"span",5),f.qZA(),f.qZA()),2&n){const t=e.$implicit,s=f.oxw();f.xp6(2),f.Q6J("src",t.imagenUnoUrl,f.LSH),f.xp6(2),f.hij(" ",t.nombre," "),f.xp6(2),f.hij(" ",t.apellido," "),f.xp6(2),f.hij(" ",t.edad," "),f.xp6(2),f.hij(" ",t.dni," "),f.xp6(2),f.hij(" ",t.email," "),f.xp6(2),f.hij(" ",t.contrasenia," "),f.xp6(1),f.Q6J("ngIf",null!=t.aprobado),f.xp6(2),f.Q6J("ngIf",null!=t.aprobado&&s.actualizado)}}const bS=[{path:"log-in",component:XA},{path:"sign-up",component:(()=>{class n{constructor(t,s,u,d,m){this.categoriasService=t,this.especialidadesService=s,this.formBuilder=u,this.uploadService=d,this.usuarioDAOService=m,this.EDAD_MAXIMA=120,this.EDAD_MINIMA=18,this.categorias=[],this.especialidades=[],this.mensajeRegistro="",this.mensajeErrorRegistro="",this.habilitarBoton=!1,this.imagenUnoUrl=void 0,this.imagenDosUrl=void 0,this.form=this.formBuilder.group({razon:[null,[Tn.required]],especialidad:[null,[Tn.required]],nombre:[null,[Tn.required,Tn.pattern(/^[A-Za-z]+$/)]],apellido:[null,[Tn.required,Tn.pattern(/^[A-Za-z\s]+$/)]],edad:[null,[Tn.required,Tn.min(this.EDAD_MINIMA),Tn.max(this.EDAD_MAXIMA)]],dni:[null,[Tn.required,Tn.pattern(/^\d+$/)]],obraSocial:[null,[Tn.required,Tn.pattern(/^[A-Za-z\s]+$/)]],email:[null,[Tn.required,Tn.email]],contrasenia:[null,[Tn.required,Tn.pattern(/^[A-Za-z0-9]+$/i),Tn.minLength(6)]],imagenUno:[null,[Tn.required]],imagenDos:[null,[Tn.required]],especialidadNueva:[null]}),this.setValidatorsSegunEspecialidad()}ngOnInit(){var t=this;return(0,Se.Z)(function*(){t.categorias=yield t.categoriasService.getCategorias(),t.categorias=t.categorias.filter(s=>0!==s.id),t.especialidades=yield t.especialidadesService.getCategorias()})()}isRequiredField(t){const s=this.form.get(t);if(null==s||!s.validator)return!1;const u=s.validator({});return u&&u.required}setValidatorsSegunEspecialidad(){this.form.controls.razon.valueChanges.subscribe(t=>{"1"===t&&(this.form.controls.obraSocial.setValidators(null),this.form.controls.imagenDos.setValidators(null),this.form.controls.especialidad.setValidators([Tn.required])),"2"===t&&(this.form.controls.obraSocial.setValidators([Tn.required,Tn.pattern(/^[A-Za-z\s]+$/)]),this.form.controls.imagenDos.setValidators([Tn.required]),this.form.controls.especialidad.setValidators(null)),this.form.controls.imagenDos.updateValueAndValidity(),this.form.controls.obraSocial.updateValueAndValidity(),this.form.controls.especialidad.updateValueAndValidity()})}subirArchivoUno(t){this.uploadService.tareaCloudStorage(this.form.controls.email.value+"_1",t.target.files[0]).then(C=>C.ref.getDownloadURL().then(x=>{this.imagenUnoUrl=x,this.isRequiredField("imagenDos")||(this.habilitarBoton=!0),this.isRequiredField("imagenDos")&&this.imagenDosUrl&&(this.habilitarBoton=!0)}))}subirArchivoDos(t){"2"===this.form.controls.razon.value&&this.uploadService.tareaCloudStorage(this.form.controls.email.value+"_2",t.target.files[0]).then(x=>x.ref.getDownloadURL().then(F=>{this.imagenDosUrl=F,this.imagenUnoUrl&&(this.habilitarBoton=!0)}))}onSubmit(t){this.registro()}registro(){const t=this.form.controls.razon.value,s=this.form.controls.especialidad.value,u=this.form.controls.nombre.value,d=this.form.controls.apellido.value,m=this.form.controls.edad.value,C=this.form.controls.dni.value,x=this.form.controls.obraSocial.value,F=this.form.controls.email.value,q=this.form.controls.contrasenia.value,Q=this.form.controls.especialidadNueva.value,ge=this.imagenUnoUrl,me=this.imagenDosUrl,De=new D_;De.razon=t,De.nombre=u,De.apellido=d,De.edad=m,De.dni=C,De.email=F,De.contrasenia=q,De.imagenUnoUrl=ge,"1"===t&&(De.especialidad=s,De.aprobado=!1),"2"===t&&(De.obraSocial=x,De.imagenDosUrl=me),this.usuarioDAOService.register(De).then(()=>{this.mensajeRegistro="USUARIO REGISTRADO!",this.usuarioDAOService.login(De)}).catch(et=>{this.mensajeErrorRegistro="ERROR AL REGISTRAR USUARIO!",console.error(et)}),(""!=Q||null!=Q||null!=Q)&&this.especialidadesService.agregarCategoria(Q).then(()=>console.log("Especialidad Agregada!!"))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(eS),f.Y36(nS),f.Y36(aD),f.Y36(RI),f.Y36($y))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-registro"]],decls:23,vars:16,consts:[[1,"mb-3"],[3,"formGroup","ngSubmit"],[1,"row","g-3"],["class","col-sm-6",4,"ngIf"],["class","col-12",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"my-4"],[1,"text-success"],[1,"text-danger"],["type","submit",1,"w-100","btn","btn-primary","btn-lg",3,"disabled"],[1,"col-sm-6"],["for","reason",1,"form-label"],["formControlName","razon","id","reason","required","",1,"form-select"],["disabled","","selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[3,"value"],["for","speciality",1,"form-label"],["formControlName","especialidad","id","speciality","required","",1,"form-select"],[1,"col-12"],["for","especialidadNueva",1,"form-label"],["formControlName","especialidadNueva","type","text","id","especialidadNueva","placeholder","Especialidad","value","",1,"form-control"],["for","firstName",1,"form-label"],["formControlName","nombre","type","text","id","firstName","placeholder","Nombre","value","",1,"form-control"],["for","lastName",1,"form-label"],["formControlName","apellido","type","text","id","lastName","placeholder","Apellido","value","",1,"form-control"],["for","age",1,"form-label"],["formControlName","edad","id","age","type","number","min","0","max","150","step","1","name","age","placeholder","18",1,"form-control"],["for","dni",1,"form-label"],["formControlName","dni","type","text","id","dni","placeholder","xxxxxxxx","required","",1,"form-control"],["for","health-insurance",1,"form-label"],["formControlName","obraSocial","type","text","id","healt-insurance","placeholder","Obra social",1,"form-control"],["for","email",1,"form-label"],["formControlName","email","type","email","id","email","placeholder","you@example.com",1,"form-control"],[3,"ngClass"],["for","password",1,"form-label"],["formControlName","contrasenia","type","password","id","password","placeholder","contrasenia123",1,"form-control"],["for","img-1",1,"form-label"],["formControlName","imagenUno","class","form-control","type","file","id","img-1","name","img-1","accept","image/png, image/jpeg",3,"change",4,"ngIf"],["formControlName","imagenUno","type","file","id","img-1","name","img-1","accept","image/png, image/jpeg",1,"form-control",3,"change"],["for","img-2",1,"form-label"],["formControlName","imagenDos","class","form-control","type","file","id","img-2","name","img-2","accept","image/png, image/jpeg",3,"change",4,"ngIf"],["formControlName","imagenDos","type","file","id","img-2","name","img-2","accept","image/png, image/jpeg",1,"form-control",3,"change"]],template:function(t,s){1&t&&(f.TgZ(0,"h4",0),f._uU(1,"Registro"),f.qZA(),f.TgZ(2,"form",1),f.NdJ("ngSubmit",function(d){return s.onSubmit(d)}),f.TgZ(3,"div",2),f.YNc(4,rS,8,3,"div",3),f.YNc(5,Qx,8,3,"div",3),f.YNc(6,NI,4,0,"div",4),f.YNc(7,Hy,6,2,"div",3),f.YNc(8,OI,6,2,"div",3),f.YNc(9,g0,7,3,"div",3),f.YNc(10,uS,6,2,"div",3),f.YNc(11,as,6,2,"div",3),f.YNc(12,lS,6,2,"div",3),f.YNc(13,eR,7,7,"div",5),f.YNc(14,gS,6,7,"div",5),f.YNc(15,_S,6,3,"div",3),f.qZA(),f._UZ(16,"hr",6),f.TgZ(17,"span",7),f._uU(18),f.qZA(),f.TgZ(19,"span",8),f._uU(20),f.qZA(),f.TgZ(21,"button",9),f._uU(22,"Registrarse"),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("formGroup",s.form),f.xp6(2),f.Q6J("ngIf",s.isRequiredField("razon")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("especialidad")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("especialidad")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("nombre")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("apellido")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("edad")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("dni")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("obraSocial")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("email")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("contrasenia")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("imagenUno")),f.xp6(1),f.Q6J("ngIf",s.isRequiredField("imagenDos")),f.xp6(3),f.Oqu(s.mensajeRegistro),f.xp6(2),f.Oqu(s.mensajeErrorRegistro),f.xp6(1),f.Q6J("disabled",!(s.form.valid&&s.habilitarBoton)))},directives:[Xg,ar,wp,T.O5,Cp,Vu,Ed,Tp,rm,b_,T.sg,Rh,Ep,w_,om,T.mk],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}.ng-valid.ng-dirty[_ngcontent-%COMP%]:not(form){border:solid 2px lightgreen}.ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(form), .ng-invalid[_ngcontent-%COMP%]:not(form){border:solid 2px lightcoral}"]}),n})()},{path:"users",component:(()=>{class n{constructor(t){this.usuarioDaoService=t,this.usuarios=[],this.actualizado=!1,this.usuarioDaoService.obtenerTodosLosUsuarios().subscribe(s=>this.usuarios=s)}ngOnInit(){}onAprobadoClick(t,s){t.aprobado=s.target.checked,console.log(s.target.value),this.usuarioDaoService.actualizarUsuario(t).then(()=>this.actualizado=!0)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($y))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-usuarios"]],decls:20,vars:1,consts:[[1,"scrollable"],[1,"table","table-striped","table-responsive"],[4,"ngFor","ngForOf"],["alt","Foto de perfil de Usuario",1,"img-fluid","img-thumbnail","rounded","m-w-300",3,"src"],[4,"ngIf"],["class","text-success",4,"ngIf"],["for","aprobado"],["type","checkbox","name","aprobado","id","aprobado",3,"ngModel","ngModelChange","click"],[1,"text-success"]],template:function(t,s){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"table",1),f.TgZ(2,"tr"),f.TgZ(3,"th"),f._uU(4,"Imagen"),f.qZA(),f.TgZ(5,"th"),f._uU(6,"Nombre"),f.qZA(),f.TgZ(7,"th"),f._uU(8,"Apellido"),f.qZA(),f.TgZ(9,"th"),f._uU(10,"Edad"),f.qZA(),f.TgZ(11,"th"),f._uU(12,"DNI"),f.qZA(),f.TgZ(13,"th"),f._uU(14,"Mail"),f.qZA(),f.TgZ(15,"th"),f._uU(16,"Contrase\xf1a"),f.qZA(),f._UZ(17,"th"),f._UZ(18,"th"),f.qZA(),f.YNc(19,iR,18,9,"tr",2),f.qZA(),f.qZA()),2&t&&(f.xp6(19),f.Q6J("ngForOf",s.usuarios))},directives:[T.sg,T.O5,op,Vu,vp],styles:[".scrollable[_ngcontent-%COMP%]{overflow:scroll}.m-w-300[_ngcontent-%COMP%]{max-width:300px}"]}),n})(),canActivate:[(()=>{class n{constructor(t){this.usuarioService=t}canActivate(t,s){var u;return"0"===(null===(u=this.usuarioService.iniciado)||void 0===u?void 0:u.razon)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(bd.i))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"misTurnos",loadChildren:()=>U.e(688).then(U.bind(U,688)).then(n=>n.TurnoModule)},{path:"**",pathMatch:"full",redirectTo:"/"}];let wS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[fs.Bz.forRoot(bS)],fs.Bz]}),n})();function CS(n,e){1&n&&(f.TgZ(0,"a",9),f._uU(1,"Iniciar Sesi\xf3n"),f.qZA())}function yu(n,e){1&n&&(f.TgZ(0,"a",10),f._uU(1,"Crear cuenta"),f.qZA())}function IS(n,e){1&n&&(f.TgZ(0,"a",11),f._uU(1,"Usuarios"),f.qZA())}function DS(n,e){1&n&&(f.TgZ(0,"a",12),f._uU(1,"Mi Turno"),f.qZA())}function TS(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"a",13),f.NdJ("click",function(){return f.CHM(t),f.oxw().onLogOut()}),f._UZ(1,"i",14),f._uU(2," Log Out"),f.qZA()}}let AS=(()=>{class n{constructor(t,s){this.router=t,this.usuarioService=s}ngOnInit(){this.usuarioService.sesionIniciada.subscribe(t=>{this.usuario=t,this.router.navigate([""])}),this.usuarioService.sesionTerminada.subscribe(t=>{t&&(this.usuario=void 0)})}onLogOut(){this.usuarioService.salirDeSesion(),this.router.navigate(["/log-in"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(fs.F0),f.Y36(bd.i))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navigation"]],decls:9,vars:5,consts:[[1,"site-header","text-center"],[1,"container","d-flex","flex-column","flex-md-row","justify-content-between"],["routerLink","home","aria-label","Home",1,"py-2"],["width","25px","src","/assets/clinica.png","alt","Home",1,"img-thumbnail","img-fluid","p-0"],["class","nav-link rounded border border-black","routerLink","log-in",4,"ngIf"],["class","nav-link rounded border border-black","routerLink","sign-up",4,"ngIf"],["class","nav-link rounded border border-black","routerLink","users",4,"ngIf"],["class","nav-link rounded border border-black","routerLink","misTurnos",4,"ngIf"],["class","nav-link rounded border border-black hover",3,"click",4,"ngIf"],["routerLink","log-in",1,"nav-link","rounded","border","border-black"],["routerLink","sign-up",1,"nav-link","rounded","border","border-black"],["routerLink","users",1,"nav-link","rounded","border","border-black"],["routerLink","misTurnos",1,"nav-link","rounded","border","border-black"],[1,"nav-link","rounded","border","border-black","hover",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(t,s){1&t&&(f.TgZ(0,"header",0),f.TgZ(1,"nav",1),f.TgZ(2,"a",2),f._UZ(3,"img",3),f.qZA(),f.YNc(4,CS,2,0,"a",4),f.YNc(5,yu,2,0,"a",5),f.YNc(6,IS,2,0,"a",6),f.YNc(7,DS,2,0,"a",7),f.YNc(8,TS,3,0,"a",8),f.qZA(),f.qZA()),2&t&&(f.xp6(4),f.Q6J("ngIf",!s.usuario),f.xp6(1),f.Q6J("ngIf",!s.usuario),f.xp6(1),f.Q6J("ngIf","0"===(null==s.usuario?null:s.usuario.razon)),f.xp6(1),f.Q6J("ngIf",s.usuario),f.xp6(1),f.Q6J("ngIf",s.usuario))},directives:[fs.yS,T.O5],styles:[".hover[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),n})(),aR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:14,vars:0,consts:[[1,"footer","postion-absolute","bottom-0","px-5","text-muted","border-top","d-flex","flex-column","flex-md-row","justify-content-between"],["href","https://www.freepik.com","title","Freepik"],["href","https://www.flaticon.es/","title","Flaticon"],["target","_blank","href","https://iconos8.es/icon/bzZ1vLaK5u1A/hospital"],["target","_blank","href","https://iconos8.es"]],template:function(t,s){1&t&&(f.TgZ(0,"footer",0),f.TgZ(1,"div"),f._uU(2,"Iconos dise\xf1ados por "),f.TgZ(3,"a",1),f._uU(4,"Freepik"),f.qZA(),f._uU(5," from "),f.TgZ(6,"a",2),f._uU(7,"www.flaticon.es"),f.qZA(),f.qZA(),f.TgZ(8,"div"),f.TgZ(9,"a",3),f._uU(10,"Hospital"),f.qZA(),f._uU(11," icono de "),f.TgZ(12,"a",4),f._uU(13,"Icons8"),f.qZA(),f.qZA(),f.qZA())},styles:[""]}),n})(),SS=(()=>{class n{constructor(){this.title="TPClinicaOnline"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(t,s){1&t&&(f._UZ(0,"app-navigation"),f.TgZ(1,"main",0),f._UZ(2,"router-outlet"),f.qZA(),f._UZ(3,"app-footer"))},directives:[AS,fs.lC,aR],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0}main[_ngcontent-%COMP%]{min-height:80vh;height:auto!important;height:100%;margin:0 auto 2rem}"]}),n})();var xS=U(4612);class FI{}class Wf{}class Qu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const s=t.indexOf(":");if(s>0){const u=t.slice(0,s),d=u.toLowerCase(),m=t.slice(s+1).trim();this.maybeSetNormalizedName(u,d),this.headers.has(d)?this.headers.get(d).push(m):this.headers.set(d,[m])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let s=e[t];const u=t.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(u,s),this.maybeSetNormalizedName(t,u))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let s=e.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(e.name,t);const u=("a"===e.op?this.headers.get(t):void 0)||[];u.push(...s),this.headers.set(t,u);break;case"d":const d=e.value;if(d){let m=this.headers.get(t);if(!m)return;m=m.filter(C=>-1===d.indexOf(C)),0===m.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,m)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class uR{encodeKey(e){return NS(e)}encodeValue(e){return NS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const cR=/%(\d[a-f0-9])/gi,lR={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function NS(n){return encodeURIComponent(n).replace(cR,(e,t)=>{var s;return null!==(s=lR[t])&&void 0!==s?s:e})}function zy(n){return`${n}`}class Jl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uR,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(u=>{const d=u.indexOf("="),[m,C]=-1==d?[e.decodeKey(u),""]:[e.decodeKey(u.slice(0,d)),e.decodeValue(u.slice(d+1))],x=t.get(m)||[];x.push(C),t.set(m,x)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const s=e.fromObject[t];this.map.set(t,Array.isArray(s)?s:[s])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(s=>{const u=e[s];Array.isArray(u)?u.forEach(d=>{t.push({param:s,value:d,op:"a"})}):t.push({param:s,value:u,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(s=>t+"="+this.encoder.encodeValue(s)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Jl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(zy(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let s=this.map.get(e.param)||[];const u=s.indexOf(zy(e.value));-1!==u&&s.splice(u,1),s.length>0?this.map.set(e.param,s):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class MS{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function LI(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function VI(n){return"undefined"!=typeof Blob&&n instanceof Blob}function UI(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Wy{constructor(e,t,s,u){let d;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||u?(this.body=void 0!==s?s:null,d=u):d=s,d&&(this.reportProgress=!!d.reportProgress,this.withCredentials=!!d.withCredentials,d.responseType&&(this.responseType=d.responseType),d.headers&&(this.headers=d.headers),d.context&&(this.context=d.context),d.params&&(this.params=d.params)),this.headers||(this.headers=new Qu),this.context||(this.context=new MS),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=t;else{const C=t.indexOf("?");this.urlWithParams=t+(-1===C?"?":C<t.length-1?"&":"")+m}}else this.params=new Jl,this.urlWithParams=t}serializeBody(){return null===this.body?null:LI(this.body)||VI(this.body)||UI(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||UI(this.body)?null:VI(this.body)?this.body.type||null:LI(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const s=e.method||this.method,u=e.url||this.url,d=e.responseType||this.responseType,m=void 0!==e.body?e.body:this.body,C=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,x=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let F=e.headers||this.headers,q=e.params||this.params;const Q=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(F=Object.keys(e.setHeaders).reduce((ge,me)=>ge.set(me,e.setHeaders[me]),F)),e.setParams&&(q=Object.keys(e.setParams).reduce((ge,me)=>ge.set(me,e.setParams[me]),q)),new Wy(s,u,m,{params:q,headers:F,context:Q,reportProgress:x,responseType:d,withCredentials:C})}}var ii=(()=>((ii=ii||{})[ii.Sent=0]="Sent",ii[ii.UploadProgress=1]="UploadProgress",ii[ii.ResponseHeader=2]="ResponseHeader",ii[ii.DownloadProgress=3]="DownloadProgress",ii[ii.Response=4]="Response",ii[ii.User=5]="User",ii))();class y0{constructor(e,t=200,s="OK"){this.headers=e.headers||new Qu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||s,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zy extends y0{constructor(e={}){super(e),this.type=ii.ResponseHeader}clone(e={}){return new Zy({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ng extends y0{constructor(e={}){super(e),this.type=ii.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ng({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class _0 extends y0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Mg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let v0=(()=>{class n{constructor(t){this.handler=t}request(t,s,u={}){let d;if(t instanceof Wy)d=t;else{let x,F;x=u.headers instanceof Qu?u.headers:new Qu(u.headers),u.params&&(F=u.params instanceof Jl?u.params:new Jl({fromObject:u.params})),d=new Wy(t,s,void 0!==u.body?u.body:null,{headers:x,context:u.context,params:F,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}const m=(0,Rr.of)(d).pipe((0,xS.b)(x=>this.handler.handle(x)));if(t instanceof Wy||"events"===u.observe)return m;const C=m.pipe((0,x_.h)(x=>x instanceof Ng));switch(u.observe||"body"){case"body":switch(d.responseType){case"arraybuffer":return C.pipe((0,hn.U)(x=>{if(null!==x.body&&!(x.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return x.body}));case"blob":return C.pipe((0,hn.U)(x=>{if(null!==x.body&&!(x.body instanceof Blob))throw new Error("Response is not a Blob.");return x.body}));case"text":return C.pipe((0,hn.U)(x=>{if(null!==x.body&&"string"!=typeof x.body)throw new Error("Response is not a string.");return x.body}));case"json":default:return C.pipe((0,hn.U)(x=>x.body))}case"response":return C;default:throw new Error(`Unreachable: unhandled observe type ${u.observe}}`)}}delete(t,s={}){return this.request("DELETE",t,s)}get(t,s={}){return this.request("GET",t,s)}head(t,s={}){return this.request("HEAD",t,s)}jsonp(t,s){return this.request("JSONP",t,{params:(new Jl).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,s={}){return this.request("OPTIONS",t,s)}patch(t,s,u={}){return this.request("PATCH",t,Mg(u,s))}post(t,s,u={}){return this.request("POST",t,Mg(u,s))}put(t,s,u={}){return this.request("PUT",t,Mg(u,s))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(FI))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ky{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Og=new f.OlP("HTTP_INTERCEPTORS");let Yy=(()=>{class n{intercept(t,s){return s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const FS=/^\)\]\}',?\n/;let BI=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new mn.y(s=>{const u=this.xhrFactory.build();if(u.open(t.method,t.urlWithParams),t.withCredentials&&(u.withCredentials=!0),t.headers.forEach((me,De)=>u.setRequestHeader(me,De.join(","))),t.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const me=t.detectContentTypeHeader();null!==me&&u.setRequestHeader("Content-Type",me)}if(t.responseType){const me=t.responseType.toLowerCase();u.responseType="json"!==me?me:"text"}const d=t.serializeBody();let m=null;const C=()=>{if(null!==m)return m;const me=1223===u.status?204:u.status,De=u.statusText||"OK",et=new Qu(u.getAllResponseHeaders()),ft=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(u)||t.url;return m=new Zy({headers:et,status:me,statusText:De,url:ft}),m},x=()=>{let{headers:me,status:De,statusText:et,url:ft}=C(),xt=null;204!==De&&(xt=void 0===u.response?u.responseText:u.response),0===De&&(De=xt?200:0);let Mn=De>=200&&De<300;if("json"===t.responseType&&"string"==typeof xt){const Ln=xt;xt=xt.replace(FS,"");try{xt=""!==xt?JSON.parse(xt):null}catch(kt){xt=Ln,Mn&&(Mn=!1,xt={error:kt,text:xt})}}Mn?(s.next(new Ng({body:xt,headers:me,status:De,statusText:et,url:ft||void 0})),s.complete()):s.error(new _0({error:xt,headers:me,status:De,statusText:et,url:ft||void 0}))},F=me=>{const{url:De}=C(),et=new _0({error:me,status:u.status||0,statusText:u.statusText||"Unknown Error",url:De||void 0});s.error(et)};let q=!1;const Q=me=>{q||(s.next(C()),q=!0);let De={type:ii.DownloadProgress,loaded:me.loaded};me.lengthComputable&&(De.total=me.total),"text"===t.responseType&&!!u.responseText&&(De.partialText=u.responseText),s.next(De)},ge=me=>{let De={type:ii.UploadProgress,loaded:me.loaded};me.lengthComputable&&(De.total=me.total),s.next(De)};return u.addEventListener("load",x),u.addEventListener("error",F),u.addEventListener("timeout",F),u.addEventListener("abort",F),t.reportProgress&&(u.addEventListener("progress",Q),null!==d&&u.upload&&u.upload.addEventListener("progress",ge)),u.send(d),s.next({type:ii.Sent}),()=>{u.removeEventListener("error",F),u.removeEventListener("abort",F),u.removeEventListener("load",x),u.removeEventListener("timeout",F),t.reportProgress&&(u.removeEventListener("progress",Q),null!==d&&u.upload&&u.upload.removeEventListener("progress",ge)),u.readyState!==u.DONE&&u.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T.JF))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds=new f.OlP("XSRF_COOKIE_NAME"),ph=new f.OlP("XSRF_HEADER_NAME");class Pg{}let jI=(()=>{class n{constructor(t,s,u){this.doc=t,this.platform=s,this.cookieName=u,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(T.K0),f.LFG(f.Lbi),f.LFG(Ds))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Zf=(()=>{class n{constructor(t,s){this.tokenService=t,this.headerName=s}intercept(t,s){const u=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||u.startsWith("http://")||u.startsWith("https://"))return s.handle(t);const d=this.tokenService.getToken();return null!==d&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,d)})),s.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Pg),f.LFG(ph))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),b0=(()=>{class n{constructor(t,s){this.backend=t,this.injector=s,this.chain=null}handle(t){if(null===this.chain){const s=this.injector.get(Og,[]);this.chain=s.reduceRight((u,d)=>new Ky(u,d),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wf),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),VS=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Zf,useClass:Yy}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Ds,useValue:t.cookieName}:[],t.headerName?{provide:ph,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Zf,{provide:Og,useExisting:Zf,multi:!0},{provide:Pg,useClass:jI},{provide:Ds,useValue:"XSRF-TOKEN"},{provide:ph,useValue:"X-XSRF-TOKEN"}]}),n})(),US=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[v0,{provide:FI,useClass:b0},BI,{provide:Wf,useExisting:BI}],imports:[[VS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),$I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[SS]}),n.\u0275inj=f.cJS({providers:[],imports:[[mo,wS,Q0,Y0,US,Wt.hO.initializeApp(hr_firebaseConfig),u_]]}),n})();(0,f.G48)(),Rn().bootstrapModule($I).catch(n=>console.error(n))},4762:(ut,Ne,U)=>{"use strict";function pe(ye,Ie){var xe={};for(var Ce in ye)Object.prototype.hasOwnProperty.call(ye,Ce)&&Ie.indexOf(Ce)<0&&(xe[Ce]=ye[Ce]);if(null!=ye&&"function"==typeof Object.getOwnPropertySymbols){var Ye=0;for(Ce=Object.getOwnPropertySymbols(ye);Ye<Ce.length;Ye++)Ie.indexOf(Ce[Ye])<0&&Object.prototype.propertyIsEnumerable.call(ye,Ce[Ye])&&(xe[Ce[Ye]]=ye[Ce[Ye]])}return xe}function ae(ye,Ie,xe,Ce){return new(xe||(xe=Promise))(function(Re,_t){function un(dn){try{Ft(Ce.next(dn))}catch(Jn){_t(Jn)}}function Zn(dn){try{Ft(Ce.throw(dn))}catch(Jn){_t(Jn)}}function Ft(dn){dn.done?Re(dn.value):function(Re){return Re instanceof xe?Re:new xe(function(_t){_t(Re)})}(dn.value).then(un,Zn)}Ft((Ce=Ce.apply(ye,Ie||[])).next())})}function J(ye,Ie){var Ce,Ye,Re,_t,xe={label:0,sent:function(){if(1&Re[0])throw Re[1];return Re[1]},trys:[],ops:[]};return _t={next:un(0),throw:un(1),return:un(2)},"function"==typeof Symbol&&(_t[Symbol.iterator]=function(){return this}),_t;function un(Ft){return function(dn){return function(Ft){if(Ce)throw new TypeError("Generator is already executing.");for(;xe;)try{if(Ce=1,Ye&&(Re=2&Ft[0]?Ye.return:Ft[0]?Ye.throw||((Re=Ye.return)&&Re.call(Ye),0):Ye.next)&&!(Re=Re.call(Ye,Ft[1])).done)return Re;switch(Ye=0,Re&&(Ft=[2&Ft[0],Re.value]),Ft[0]){case 0:case 1:Re=Ft;break;case 4:return xe.label++,{value:Ft[1],done:!1};case 5:xe.label++,Ye=Ft[1],Ft=[0];continue;case 7:Ft=xe.ops.pop(),xe.trys.pop();continue;default:if(!(Re=(Re=xe.trys).length>0&&Re[Re.length-1])&&(6===Ft[0]||2===Ft[0])){xe=0;continue}if(3===Ft[0]&&(!Re||Ft[1]>Re[0]&&Ft[1]<Re[3])){xe.label=Ft[1];break}if(6===Ft[0]&&xe.label<Re[1]){xe.label=Re[1],Re=Ft;break}if(Re&&xe.label<Re[2]){xe.label=Re[2],xe.ops.push(Ft);break}Re[2]&&xe.ops.pop(),xe.trys.pop();continue}Ft=Ie.call(ye,xe)}catch(dn){Ft=[6,dn],Ye=0}finally{Ce=Re=0}if(5&Ft[0])throw Ft[1];return{value:Ft[0]?Ft[1]:void 0,done:!0}}([Ft,dn])}}}function de(ye){var Ie="function"==typeof Symbol&&Symbol.iterator,xe=Ie&&ye[Ie],Ce=0;if(xe)return xe.call(ye);if(ye&&"number"==typeof ye.length)return{next:function(){return ye&&Ce>=ye.length&&(ye=void 0),{value:ye&&ye[Ce++],done:!ye}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(ye,Ie){var xe="function"==typeof Symbol&&ye[Symbol.iterator];if(!xe)return ye;var Ye,_t,Ce=xe.call(ye),Re=[];try{for(;(void 0===Ie||Ie-- >0)&&!(Ye=Ce.next()).done;)Re.push(Ye.value)}catch(un){_t={error:un}}finally{try{Ye&&!Ye.done&&(xe=Ce.return)&&xe.call(Ce)}finally{if(_t)throw _t.error}}return Re}function Me(ye,Ie,xe){if(xe||2===arguments.length)for(var Re,Ce=0,Ye=Ie.length;Ce<Ye;Ce++)(Re||!(Ce in Ie))&&(Re||(Re=Array.prototype.slice.call(Ie,0,Ce)),Re[Ce]=Ie[Ce]);return ye.concat(Re||Array.prototype.slice.call(Ie))}U.d(Ne,{_T:()=>pe,mG:()=>ae,Jh:()=>J,XA:()=>de,CR:()=>le,ev:()=>Me})},8239:(ut,Ne,U)=>{"use strict";function T(G,pe,re,oe,ve,ae,J){try{var W=G[ae](J),Z=W.value}catch(de){return void re(de)}W.done?pe(Z):Promise.resolve(Z).then(oe,ve)}function f(G){return function(){var pe=this,re=arguments;return new Promise(function(oe,ve){var ae=G.apply(pe,re);function J(Z){T(ae,oe,ve,J,W,"next",Z)}function W(Z){T(ae,oe,ve,J,W,"throw",Z)}J(void 0)})}}U.d(Ne,{Z:()=>f})}},ut=>{ut(ut.s=7039)}]);